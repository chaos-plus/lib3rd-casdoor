/*! For license information please see 774.467769c8.chunk.js.LICENSE.txt */
(self.webpackChunkweb=self.webpackChunkweb||[]).push([[774],{70774:function(e,t,r){"use strict";r.r(t),r.d(t,{Wallet:function(){return CO},getWallet:function(){return MO},initWallet:function(){return OO},sequence:function(){return XO}});var n={};r.r(n),r.d(n,{walletContracts:function(){return b}});var i={};r.r(i),r.d(i,{API:function(){return C},SequenceAPIClient:function(){return M},SmartRampOrderStatus:function(){return x},SmartRampTxnStatus:function(){return _},SortOrder:function(){return S},WebRPCSchemaHash:function(){return T},WebRPCSchemaVersion:function(){return R},WebRPCVersion:function(){return I}});var o={};r.r(o),r.d(o,{decode:function(){return yn},encode:function(){return bn}});var a={};r.r(a),r.d(a,{decode:function(){return Xl},encode:function(){return Kl}});var s={};r.r(s),r.d(s,{AbiCoder:function(){return Kt},ConstructorFragment:function(){return Ft},ErrorFragment:function(){return Zt},EventFragment:function(){return Pt},FormatTypes:function(){return St},Fragment:function(){return Ct},FunctionFragment:function(){return Dt},HDNode:function(){return hu},Indexed:function(){return er},Interface:function(){return nr},LogDescription:function(){return $t},Logger:function(){return yc},ParamType:function(){return Rt},RLP:function(){return a},SigningKey:function(){return id},SupportedAlgorithm:function(){return Fc},TransactionDescription:function(){return Yt},TransactionTypes:function(){return Wv},UnicodeNormalizationForm:function(){return Sd},Utf8ErrorFuncs:function(){return Cd},Utf8ErrorReason:function(){return Id},_TypedDataEncoder:function(){return na},_fetchData:function(){return Uw},_toEscapedUtf8String:function(){return Md},accessListify:function(){return Yv},arrayify:function(){return ri},base58:function(){return Zn},base64:function(){return o},checkProperties:function(){return ml},checkResultErrors:function(){return Ce},commify:function(){return Yg},computeAddress:function(){return Hv},computeHmac:function(){return Gc},computePublicKey:function(){return ad},concat:function(){return ni},deepCopy:function(){return Nl},defaultAbiCoder:function(){return Ht},defaultPath:function(){return lu},defineReadOnly:function(){return pl},dnsEncode:function(){return ho},entropyToMnemonic:function(){return vu},fetchJson:function(){return Mw},formatBytes32String:function(){return $d},formatEther:function(){return tm},formatUnits:function(){return Qg},getAccountPath:function(){return mu},getAddress:function(){return Jr},getContractAddress:function(){return Yr},getCreate2Address:function(){return Qr},getIcapAddress:function(){return $r},getJsonWalletAddress:function(){return zu},getStatic:function(){return vl},hashMessage:function(){return vo},hexConcat:function(){return li},hexDataLength:function(){return ci},hexDataSlice:function(){return fi},hexStripZeros:function(){return di},hexValue:function(){return hi},hexZeroPad:function(){return pi},hexlify:function(){return ui},id:function(){return go},isAddress:function(){return Xr},isBytes:function(){return ti},isBytesLike:function(){return Qn},isHexString:function(){return ai},isValidMnemonic:function(){return gu},isValidName:function(){return fo},joinSignature:function(){return gi},keccak256:function(){return uc},mnemonicToEntropy:function(){return pu},mnemonicToSeed:function(){return du},namehash:function(){return lo},nameprep:function(){return Jd},parseBytes32String:function(){return Yd},parseEther:function(){return rm},parseTransaction:function(){return og},parseUnits:function(){return em},poll:function(){return Fw},randomBytes:function(){return el},recoverAddress:function(){return Jv},recoverPublicKey:function(){return od},resolveProperties:function(){return gl},ripemd160:function(){return Lc},serializeTransaction:function(){return ng},sha256:function(){return Zc},sha512:function(){return Bc},shallowCopy:function(){return yl},shuffled:function(){return tl},solidityKeccak256:function(){return Pf},solidityPack:function(){return Cf},soliditySha256:function(){return Of},splitSignature:function(){return vi},stripZeros:function(){return ii},toUtf8Bytes:function(){return Od},toUtf8CodePoints:function(){return Ld},toUtf8String:function(){return Dd},verifyMessage:function(){return JE},verifyTypedData:function(){return XE},zeroPad:function(){return oi}});var u={};r.r(u),r.d(u,{Logger:function(){return iI},base64Decode:function(){return JS},base64DecodeObject:function(){return XS},base64Encode:function(){return KS},base64EncodeObject:function(){return HS},checkProperties:function(){return EI},configureLogger:function(){return aI},deepCopy:function(){return NI},defineReadOnly:function(){return mI},encodeMessageDigest:function(){return $S},encodeTypedDataDigest:function(){return gI},encodeTypedDataHash:function(){return vI},getRandomInt:function(){return uI},getStatic:function(){return yI},isBigNumberish:function(){return AI},isBrowser:function(){return tI},isNode:function(){return eI},jwtDecodeClaims:function(){return rI},logger:function(){return oI},packMessageData:function(){return YS},promisify:function(){return sI},queryStringFromObject:function(){return cI},queryStringToObject:function(){return fI},resolveProperties:function(){return bI},sanitizeAlphanumeric:function(){return hI},sanitizeHost:function(){return dI},sanitizeNumberString:function(){return lI},shallowCopy:function(){return wI},sleep:function(){return pI},subDigestOf:function(){return QS},urlClean:function(){return kI}});var c={};r.r(c),r.d(c,{AllowProvider:function(){return oR},CachedProvider:function(){return sR},ChainId:function(){return RI},EagerProvider:function(){return uR},JsonRpcExternalProvider:function(){return iR},JsonRpcProvider:function(){return gR},JsonRpcRouter:function(){return $I},JsonRpcSender:function(){return nR},JsonRpcVersion:function(){return XI},PublicProvider:function(){return pR},SigningProvider:function(){return dR},SingleflightMiddleware:function(){return vR},allowProviderMiddleware:function(){return aR},checkNetworkConfig:function(){return ZI},createJsonRpcMiddlewareStack:function(){return YI},ensureUniqueNetworks:function(){return MI},ensureValidNetworks:function(){return UI},exceptionProviderMiddleware:function(){return cR},findNetworkConfig:function(){return LI},getAuthNetwork:function(){return PI},getChainId:function(){return TI},indexerURL:function(){return jI},isJsonRpcHandler:function(){return eR},isJsonRpcProvider:function(){return QI},isNetworkConfig:function(){return II},isValidNetworkConfig:function(){return OI},loggingProviderMiddleware:function(){return fR},mainnetNetworks:function(){return KI},maybeChainId:function(){return CI},networkProviderMiddleware:function(){return lR},networks:function(){return VI},networksIndex:function(){return BI},nodesURL:function(){return qI},relayerURL:function(){return zI},sequenceContext:function(){return JI},sortNetworks:function(){return GI},stringTemplate:function(){return WI},testnetNetworks:function(){return HI},updateNetworkConfig:function(){return FI},validateAndSortNetworks:function(){return DI}});var f={};r.r(f),r.d(f,{Multicall:function(){return AR},providers:function(){return RR}});var l={};r.r(l),r.d(l,{ConfigFinder:function(){return KR},SequenceUtilsFinder:function(){return XR},SignatureType:function(){return JR},WalletContractBytecode:function(){return TR},addressOf:function(){return BR},buildStubSignature:function(){return lT},compareAddr:function(){return zR},createWalletConfig:function(){return DR},decodeSignature:function(){return rT},editConfig:function(){return qR},encodeSignature:function(){return uT},genConfig:function(){return VR},imageHash:function(){return GR},isConfigEqual:function(){return jR},isDecodedAddress:function(){return $R},isDecodedEOASigner:function(){return QR},isDecodedEOASplitSigner:function(){return eT},isDecodedFullSigner:function(){return tT},isDecodedSigner:function(){return YR},isUsableConfig:function(){return LR},isValidConfigSigners:function(){return ZR},joinSignatures:function(){return aT},joinTwoSignatures:function(){return sT},mutateSignature:function(){return fT},recoverEOASigner:function(){return oT},signerOf:function(){return cT},sortConfig:function(){return WR},splitDecodedEOASigner:function(){return iT}});var h={};r.r(h),r.d(h,{ContractType:function(){return pT},EventLogDataType:function(){return gT},EventLogType:function(){return vT},Indexer:function(){return xT},SequenceIndexerClient:function(){return RT},SequenceIndexerServices:function(){return AT},SortOrder:function(){return ET},TransactionStatus:function(){return yT},TransactionType:function(){return bT},TxnTransferType:function(){return mT},WebRPCSchemaHash:function(){return kT},WebRPCSchemaVersion:function(){return NT},WebRPCVersion:function(){return wT}});var d={};r.r(d),r.d(d,{ContractType:function(){return CT},Metadata:function(){return LT},PropertyType:function(){return PT},SequenceMetadataClient:function(){return WT},SortOrder:function(){return UT},SwapType:function(){return OT},WebRPCSchemaHash:function(){return DT},WebRPCSchemaVersion:function(){return FT},WebRPCVersion:function(){return MT}});var p={};r.r(p),r.d(p,{MetaTransactionsType:function(){return qT},appendNonce:function(){return sC},computeMetaTxnHash:function(){return XT},decodeNonce:function(){return lC},digestOfTransactions:function(){return HT},digestOfTransactionsNonce:function(){return JT},encodeNonce:function(){return fC},flattenAuxTransactions:function(){return QT},fromTransactionish:function(){return dC},hasSequenceTransactions:function(){return iC},isAsyncSendable:function(){return rC},isSequenceTransaction:function(){return nC},isSignedTransactions:function(){return hC},makeAfterNonce:function(){return cC},makeExpirable:function(){return uC},packMetaTransactionsData:function(){return VT},packMetaTransactionsNonceData:function(){return KT},readSequenceNonce:function(){return oC},sequenceTxAbiEncode:function(){return aC},toSequenceTransaction:function(){return eC},toSequenceTransactions:function(){return $T}});var v={};r.r(v),r.d(v,{BaseRelayer:function(){return yC},BaseRelayerDefaults:function(){return mC},LocalRelayer:function(){return IC},ProviderRelayer:function(){return NC},ProviderRelayerDefaults:function(){return EC},RpcRelayer:function(){return DC},RpcRelayerProto:function(){return PC},isBaseRelayerOptions:function(){return gC},isLocalRelayerOptions:function(){return kC},isProviderRelayerOptions:function(){return wC},isRelayer:function(){return ZC},isRpcRelayerOptions:function(){return MC},proto:function(){return PC}});var g={};r.r(g),r.d(g,{AuthError:function(){return dP},DEFAULT_SESSION_EXPIRATION:function(){return sP},ErrAccountIsRequired:function(){return pP},LONG_SESSION_EXPIRATION:function(){return uP},Session:function(){return cP},ValidateSequenceDeployedWalletProof:function(){return vP},ValidateSequenceUndeployedWalletProof:function(){return gP},signAuthorization:function(){return hP}});var m={};r.r(m),r.d(m,{Guard:function(){return wP},WebRPCSchemaHash:function(){return EP},WebRPCSchemaVersion:function(){return bP},WebRPCVersion:function(){return yP}});var y={};r.r(y),r.d(y,{BaseInjectedTransport:function(){return AO},BaseProviderTransport:function(){return ZP},BaseWalletTransport:function(){return dO},CHANNEL_ID:function(){return wO},DefaultProviderConfig:function(){return PO},ErrSignedInRequired:function(){return MP},EventType:function(){return TP},ExtensionMessageHandler:function(){return NO},ExtensionMessageProvider:function(){return kO},InitState:function(){return PP},LocalStorage:function(){return uO},LocalStore:function(){return lO},LocalWeb3Provider:function(){return zP},MuxMessageProvider:function(){return yO},OpenState:function(){return CP},PROVIDER_OPEN_TIMEOUT:function(){return FP},ProviderError:function(){return UP},ProxyMessageChannel:function(){return pO},ProxyMessageChannelPort:function(){return vO},ProxyMessageHandler:function(){return mO},ProxyMessageProvider:function(){return gO},UnrealMessageHandler:function(){return RO},UnrealMessageProvider:function(){return IO},Wallet:function(){return CO},WalletRequestHandler:function(){return BP},Web3Provider:function(){return WP},Web3Signer:function(){return qP},WindowMessageHandler:function(){return EO},WindowMessageProvider:function(){return bO},WindowSessionParams:function(){return OP},getWallet:function(){return MO},initWallet:function(){return OO},isBrowserExtension:function(){return oO},isSequenceProvider:function(){return jP},isUnityPlugin:function(){return aO},isValidMessageSignature:function(){return rO},isValidSignature:function(){return tO},isValidTypedDataSignature:function(){return nO},isWalletUpToDate:function(){return sO},messageToBytes:function(){return QP},nextMessageIdx:function(){return LP},prefixEIP191Message:function(){return eO},recoverWalletConfig:function(){return iO},unregisterWallet:function(){return UO}});var b={erc1271:Object.freeze({__proto__:null,abi:[{type:"function",name:"isValidSignature",constant:!0,inputs:[{type:"bytes32"},{type:"bytes"}],outputs:[{type:"bytes4"}],payable:!1,stateMutability:"view"}],returns:{isValidSignatureBytes32:"0x1626ba7e"}}),factory:Object.freeze({__proto__:null,abi:[{type:"function",name:"deploy",constant:!1,inputs:[{type:"address"},{type:"bytes32"}],outputs:[],payable:!0,stateMutability:"payable"}]}),mainModule:Object.freeze({__proto__:null,abi:[{type:"function",name:"nonce",constant:!0,inputs:[],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"readNonce",constant:!0,inputs:[{type:"uint256"}],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"updateImplementation",constant:!1,inputs:[{type:"address"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"selfExecute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"execute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"},{type:"uint256"},{type:"bytes"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"createContract",inputs:[{type:"bytes"}],payable:!0,stateMutability:"payable"}]}),mainModuleUpgradable:Object.freeze({__proto__:null,abi:[{type:"function",name:"updateImageHash",constant:!0,inputs:[{type:"bytes32"}],outputs:[],payable:!1,stateMutability:"view"},{type:"function",name:"imageHash",constant:!0,inputs:[],outputs:[{type:"bytes32"}],payable:!1,stateMutability:"view"}]}),sequenceUtils:Object.freeze({__proto__:null,abi:[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_mainModule",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_wallet",type:"address"},{indexed:!0,internalType:"bytes32",name:"_imageHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_threshold",type:"uint256"},{indexed:!1,internalType:"bytes",name:"_signers",type:"bytes"}],name:"RequiredConfig",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_wallet",type:"address"},{indexed:!0,internalType:"address",name:"_signer",type:"address"}],name:"RequiredSigner",type:"event"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callBalanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_i",type:"uint256"}],name:"callBlockhash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"callChainId",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCode",outputs:[{internalType:"bytes",name:"code",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCodeHash",outputs:[{internalType:"bytes32",name:"codeHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCodeSize",outputs:[{internalType:"uint256",name:"size",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callCoinbase",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"callDifficulty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasLeft",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callOrigin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"callTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"knownImageHashes",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"lastImageHashUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastSignerUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastWalletUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bool",name:"delegateCall",type:"bool"},{internalType:"bool",name:"revertOnError",type:"bool"},{internalType:"uint256",name:"gasLimit",type:"uint256"},{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct IModuleCalls.Transaction[]",name:"_txs",type:"tuple[]"}],name:"multiCall",outputs:[{internalType:"bool[]",name:"_successes",type:"bool[]"},{internalType:"bytes[]",name:"_results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"uint256",name:"_threshold",type:"uint256"},{components:[{internalType:"uint256",name:"weight",type:"uint256"},{internalType:"address",name:"signer",type:"address"}],internalType:"struct RequireUtils.Member[]",name:"_members",type:"tuple[]"},{internalType:"bool",name:"_index",type:"bool"}],name:"publishConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"uint256",name:"_sizeMembers",type:"uint256"},{internalType:"bytes",name:"_signature",type:"bytes"},{internalType:"bool",name:"_index",type:"bool"}],name:"publishInitialSigners",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"uint256",name:"_nonce",type:"uint256"}],name:"requireMinNonce",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_expiration",type:"uint256"}],name:"requireNonExpired",outputs:[],stateMutability:"view",type:"function"}]}),requireFreshSigner:Object.freeze({__proto__:null,abi:[{inputs:[{internalType:"address",name:"",type:"address"}],name:"requireFreshSigner",outputs:[],stateMutability:"nonpayable",type:"function"}]})},E=r(60136),w=r(29388),N=r(15671),k=r(43144);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}var x,_,S,I="v1",R="v0.4.0",T="e4aaaf3a3c07a1f339226fcac3b8addcb3120c7b";!function(e){e.UNKNOWN="UNKNOWN",e.RUNNING_CHECKS="RUNNING_CHECKS",e.PROCESSING="PROCESSING",e.FAILED="FAILED",e.COMPLETE="COMPLETE"}(x||(x={})),function(e){e.UNKNOWN="UNKNOWN",e.SUCCESSFUL="SUCCESSFUL",e.FAILED="FAILED"}(_||(_={})),function(e){e.DESC="DESC",e.ASC="ASC"}(S||(S={}));var C=function(){function e(t,r){var n=this;(0,N.Z)(this,e),this.hostname=void 0,this.fetch=void 0,this.path="/rpc/API/",this.ping=function(e){return n.fetch(n.url("Ping"),P({},e)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.version=function(e){return n.fetch(n.url("Version"),P({},e)).then((function(e){return O(e).then((function(e){return{version:e.version}}))}))},this.runtimeStatus=function(e){return n.fetch(n.url("RuntimeStatus"),P({},e)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.getSequenceContext=function(e){return n.fetch(n.url("GetSequenceContext"),P({},e)).then((function(e){return O(e).then((function(e){return{data:e.data}}))}))},this.getAuthToken=function(e,t){return n.fetch(n.url("GetAuthToken"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status,jwtToken:e.jwtToken,address:e.address,user:e.user}}))}))},this.sendPasswordlessLink=function(e,t){return n.fetch(n.url("SendPasswordlessLink"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.friendList=function(e,t){return n.fetch(n.url("FriendList"),P(e,t)).then((function(e){return O(e).then((function(e){return{page:e.page,friends:e.friends}}))}))},this.getFriendByAddress=function(e,t){return n.fetch(n.url("GetFriendByAddress"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status,friend:e.friend}}))}))},this.searchFriends=function(e,t){return n.fetch(n.url("SearchFriends"),P(e,t)).then((function(e){return O(e).then((function(e){return{friends:e.friends}}))}))},this.addFriend=function(e,t){return n.fetch(n.url("AddFriend"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status,friend:e.friend}}))}))},this.updateFriendNickname=function(e,t){return n.fetch(n.url("UpdateFriendNickname"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status,friend:e.friend}}))}))},this.removeFriend=function(e,t){return n.fetch(n.url("RemoveFriend"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.contractCall=function(e,t){return n.fetch(n.url("ContractCall"),P(e,t)).then((function(e){return O(e).then((function(e){return{returns:e.returns}}))}))},this.decodeContractCall=function(e,t){return n.fetch(n.url("DecodeContractCall"),P(e,t)).then((function(e){return O(e).then((function(e){return{call:e.call}}))}))},this.lookupContractCallSelectors=function(e,t){return n.fetch(n.url("LookupContractCallSelectors"),P(e,t)).then((function(e){return O(e).then((function(e){return{signatures:e.signatures}}))}))},this.userStorageFetch=function(e,t){return n.fetch(n.url("UserStorageFetch"),P(e,t)).then((function(e){return O(e).then((function(e){return{object:e.object}}))}))},this.userStorageSave=function(e,t){return n.fetch(n.url("UserStorageSave"),P(e,t)).then((function(e){return O(e).then((function(e){return{ok:e.ok}}))}))},this.userStorageDelete=function(e,t){return n.fetch(n.url("UserStorageDelete"),P(e,t)).then((function(e){return O(e).then((function(e){return{ok:e.ok}}))}))},this.userStorageFetchAll=function(e,t){return n.fetch(n.url("UserStorageFetchAll"),P(e,t)).then((function(e){return O(e).then((function(e){return{objects:e.objects}}))}))},this.getMoonpayLink=function(e,t){return n.fetch(n.url("GetMoonpayLink"),P(e,t)).then((function(e){return O(e).then((function(e){return{signedUrl:e.signedUrl}}))}))},this.getSardineClientToken=function(e){return n.fetch(n.url("GetSardineClientToken"),P({},e)).then((function(e){return O(e).then((function(e){return{token:e.token}}))}))},this.isUsingGoogleMail=function(e,t){return n.fetch(n.url("IsUsingGoogleMail"),P(e,t)).then((function(e){return O(e).then((function(e){return{yes:e.yes}}))}))},this.resolveENSAddress=function(e,t){return n.fetch(n.url("ResolveENSAddress"),P(e,t)).then((function(e){return O(e).then((function(e){return{address:e.address,ok:e.ok}}))}))},this.isValidSignature=function(e,t){return n.fetch(n.url("IsValidSignature"),P(e,t)).then((function(e){return O(e).then((function(e){return{isValid:e.isValid}}))}))},this.isValidMessageSignature=function(e,t){return n.fetch(n.url("IsValidMessageSignature"),P(e,t)).then((function(e){return O(e).then((function(e){return{isValid:e.isValid}}))}))},this.isValidTypedDataSignature=function(e,t){return n.fetch(n.url("IsValidTypedDataSignature"),P(e,t)).then((function(e){return O(e).then((function(e){return{isValid:e.isValid}}))}))},this.isValidETHAuthProof=function(e,t){return n.fetch(n.url("IsValidETHAuthProof"),P(e,t)).then((function(e){return O(e).then((function(e){return{isValid:e.isValid}}))}))},this.getCoinPrices=function(e,t){return n.fetch(n.url("GetCoinPrices"),P(e,t)).then((function(e){return O(e).then((function(e){return{tokenPrices:e.tokenPrices}}))}))},this.getCollectiblePrices=function(e,t){return n.fetch(n.url("GetCollectiblePrices"),P(e,t)).then((function(e){return O(e).then((function(e){return{tokenPrices:e.tokenPrices}}))}))},this.getExchangeRate=function(e,t){return n.fetch(n.url("GetExchangeRate"),P(e,t)).then((function(e){return O(e).then((function(e){return{exchangeRate:e.exchangeRate}}))}))},this.memoryStore=function(e,t){return n.fetch(n.url("MemoryStore"),P(e,t)).then((function(e){return O(e).then((function(e){return{ok:e.ok}}))}))},this.memoryLoad=function(e,t){return n.fetch(n.url("MemoryLoad"),P(e,t)).then((function(e){return O(e).then((function(e){return{value:e.value}}))}))},this.listPayCardsOnFile=function(e){return n.fetch(n.url("ListPayCardsOnFile"),P({},e)).then((function(e){return O(e).then((function(e){return{payCards:e.payCards}}))}))},this.savePayCard=function(e,t){return n.fetch(n.url("SavePayCard"),P(e,t)).then((function(e){return O(e).then((function(e){return{ok:e.ok,payCard:e.payCard}}))}))},this.updatePayCardCVC=function(e,t){return n.fetch(n.url("UpdatePayCardCVC"),P(e,t)).then((function(e){return O(e).then((function(e){return{ok:e.ok}}))}))},this.deletePayCard=function(e,t){return n.fetch(n.url("DeletePayCard"),P(e,t)).then((function(e){return O(e).then((function(e){return{ok:e.ok}}))}))},this.smartRampQuote=function(e,t){return n.fetch(n.url("SmartRampQuote"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status,quoteDetails:e.quoteDetails}}))}))},this.smartRampPurchase=function(e,t){return n.fetch(n.url("SmartRampPurchase"),P(e,t)).then((function(e){return O(e).then((function(e){return{processing:e.processing,receipt:e.receipt}}))}))},this.smartRampWaitOrderConfirmation=function(e,t){return n.fetch(n.url("SmartRampWaitOrderConfirmation"),P(e,t)).then((function(e){return O(e).then((function(e){return{done:e.done,receipt:e.receipt}}))}))},this.smartRampGetOrder=function(e,t){return n.fetch(n.url("SmartRampGetOrder"),P(e,t)).then((function(e){return O(e).then((function(e){return{order:e.order}}))}))},this.smartRampCheckCardAuthorization=function(e,t){return n.fetch(n.url("SmartRampCheckCardAuthorization"),P(e,t)).then((function(e){return O(e).then((function(e){return{cardAuth:e.cardAuth}}))}))},this.smartRampOrdersList=function(e,t){return n.fetch(n.url("SmartRampOrdersList"),P(e,t)).then((function(e){return O(e).then((function(e){return{page:e.page,orders:e.orders}}))}))},this.smartRampGetOrderTxnHash=function(e,t){return n.fetch(n.url("SmartRampGetOrderTxnHash"),P(e,t)).then((function(e){return O(e).then((function(e){return{txnHash:e.txnHash,txnSuccessful:e.txnSuccessful}}))}))},this.smartRampSubmitCardAuthorization=function(e,t){return n.fetch(n.url("SmartRampSubmitCardAuthorization"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.adminSmartRampGetOrder=function(e,t){return n.fetch(n.url("AdminSmartRampGetOrder"),P(e,t)).then((function(e){return O(e).then((function(e){return{order:e.order}}))}))},this.adminSmartRampListCompletedOrders=function(e,t){return n.fetch(n.url("AdminSmartRampListCompletedOrders"),P(e,t)).then((function(e){return O(e).then((function(e){return{orders:e.orders}}))}))},this.adminSmartRampListPendingOrders=function(e,t){return n.fetch(n.url("AdminSmartRampListPendingOrders"),P(e,t)).then((function(e){return O(e).then((function(e){return{pendingOrders:e.pendingOrders}}))}))},this.getInviteInfo=function(e){return n.fetch(n.url("GetInviteInfo"),P({},e)).then((function(e){return O(e).then((function(e){return{inviteInfo:e.inviteInfo}}))}))},this.isValidAccessCode=function(e,t){return n.fetch(n.url("IsValidAccessCode"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.internalClaimAccessCode=function(e,t){return n.fetch(n.url("InternalClaimAccessCode"),P(e,t)).then((function(e){return O(e).then((function(e){return{status:e.status}}))}))},this.walletRecover=function(e,t){return n.fetch(n.url("WalletRecover"),P(e,t)).then((function(e){return O(e).then((function(e){return{encryptedWallet:e.encryptedWallet}}))}))},this.blockNumberAtTime=function(e,t){return n.fetch(n.url("BlockNumberAtTime"),P(e,t)).then((function(e){return O(e).then((function(e){return{blocks:e.blocks}}))}))},this.paperSessionSecret=function(e,t){return n.fetch(n.url("PaperSessionSecret"),P(e,t)).then((function(e){return O(e).then((function(e){return{secret:e.secret}}))}))},this.paperSessionSecret2=function(e,t){return n.fetch(n.url("PaperSessionSecret2"),P(e,t)).then((function(e){return O(e).then((function(e){return{secret:e.secret}}))}))},this.hostname=t,this.fetch=function(e,t){return r(e,t)}}return(0,k.Z)(e,[{key:"url",value:function(e){return this.hostname+this.path+e}}]),e}(),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{method:"POST",headers:A({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{"Content-Type":"application/json"}),body:JSON.stringify(e||{})}},O=function(e){return e.text().then((function(t){var r;try{r=JSON.parse(t)}catch(n){throw{code:"unknown",msg:"expecting JSON, got: ".concat(t),status:e.status}}if(!e.ok)throw r;return r}))},U="object"===typeof r.g?r.g.fetch:window.fetch,M=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),(i=t.call(this,e.endsWith("/")?e.slice(0,-1):e,U)).jwtAuth=n,i._fetch=function(e,t){var r={};return i.jwtAuth&&i.jwtAuth.length>0&&(r.Authorization="BEARER ".concat(i.jwtAuth)),t.headers=A({},t.headers,r),U(e,t)},i.fetch=i._fetch,i}return(0,k.Z)(r)}(C),F=r(28664),D=r(29439),L=r(5647),Z=r(93433),B=r(74165),G=r(15861),W=!1,j=!1,z={debug:1,default:2,info:2,warning:3,error:4,off:5},q=z.default,V=null;var K,H,J=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(K||(K={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(H||(H={}));var X="0123456789abcdef",$=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==z[r]&&this.throwArgumentError("invalid log level name","logLevel",e),q>z[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(j)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=X[t[o]>>4],r+=X[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case H.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case H.CALL_EXCEPTION:case H.INSUFFICIENT_FUNDS:case H.MISSING_NEW:case H.NONCE_EXPIRED:case H.REPLACEMENT_UNDERPRICED:case H.TRANSACTION_REPLACED:case H.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),J&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:J})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return V||(V=new e("logger/5.7.0")),V}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),W){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}j=!!t,W=!!r}},{key:"setLogLevel",value:function(t){var r=z[t.toLowerCase()];null!=r?q=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();$.errors=H,$.levels=K;var Y=new $("bytes/5.7.0");function Q(e){return!!e.toHexString}function ee(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return ee(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function te(e){return"number"===typeof e&&e==e&&e%1===0}function re(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!te(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!te(r)||r<0||r>=256)return!1}return!0}function ne(e,t){if(t||(t={}),"number"===typeof e){Y.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),ee(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Q(e)&&(e=e.toHexString()),oe(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Y.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return ee(new Uint8Array(i))}return re(e)?ee(new Uint8Array(e)):Y.throwArgumentError("invalid arrayify value","value",e)}function ie(e){var t=e.map((function(e){return ne(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),ee(n)}function oe(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var ae="0123456789abcdef";function se(e,t){if(t||(t={}),"number"===typeof e){Y.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=ae[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Q(e))return e.toHexString();if(oe(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Y.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(re(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=ae[(240&o)>>4]+ae[15&o]}return n}return Y.throwArgumentError("invalid hexlify value","value",e)}function ue(e,t){for("string"!==typeof e?e=se(e):oe(e)||Y.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Y.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var ce=new $("properties/5.7.0");function fe(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function le(e,t){for(var r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!==typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}var he={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function de(e){if(void 0===e||null===e||he[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch(i){continue}if(!de(n))return!1}return!0}return ce.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function pe(e){if(de(e))return e;if(Array.isArray(e))return Object.freeze(e.map((function(e){return ve(e)})));if("object"===typeof e){var t={};for(var r in e){var n=e[r];void 0!==n&&fe(t,r,ve(n))}return t}return ce.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function ve(e){return pe(e)}var ge=(0,k.Z)((function e(t){for(var r in(0,N.Z)(this,e),t)this[r]=ve(t[r])})),me="abi/5.6.4",ye=r(64166),be=r.n(ye),Ee=be().BN,we=new $("bignumber/5.7.0"),Ne={},ke=9007199254740991;var Ae=!1,xe=function(){function e(t,r){(0,N.Z)(this,e),t!==Ne&&we.throwError("cannot call constructor directly; use BigNumber.from",$.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Se(Ie(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Se(Ie(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Se(Ie(this).add(Ie(e)))}},{key:"sub",value:function(e){return Se(Ie(this).sub(Ie(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Re("division-by-zero","div"),Se(Ie(this).div(Ie(t)))}},{key:"mul",value:function(e){return Se(Ie(this).mul(Ie(e)))}},{key:"mod",value:function(e){var t=Ie(e);return t.isNeg()&&Re("division-by-zero","mod"),Se(Ie(this).umod(t))}},{key:"pow",value:function(e){var t=Ie(e);return t.isNeg()&&Re("negative-power","pow"),Se(Ie(this).pow(t))}},{key:"and",value:function(e){var t=Ie(e);return(this.isNegative()||t.isNeg())&&Re("unbound-bitwise-result","and"),Se(Ie(this).and(t))}},{key:"or",value:function(e){var t=Ie(e);return(this.isNegative()||t.isNeg())&&Re("unbound-bitwise-result","or"),Se(Ie(this).or(t))}},{key:"xor",value:function(e){var t=Ie(e);return(this.isNegative()||t.isNeg())&&Re("unbound-bitwise-result","xor"),Se(Ie(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Re("negative-width","mask"),Se(Ie(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Re("negative-width","shl"),Se(Ie(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Re("negative-width","shr"),Se(Ie(this).shrn(e))}},{key:"eq",value:function(e){return Ie(this).eq(Ie(e))}},{key:"lt",value:function(e){return Ie(this).lt(Ie(e))}},{key:"lte",value:function(e){return Ie(this).lte(Ie(e))}},{key:"gt",value:function(e){return Ie(this).gt(Ie(e))}},{key:"gte",value:function(e){return Ie(this).gte(Ie(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return Ie(this).isZero()}},{key:"toNumber",value:function(){try{return Ie(this).toNumber()}catch(e){Re("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return we.throwError("this platform does not support BigInt",$.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?Ae||(Ae=!0,we.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?we.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",$.errors.UNEXPECTED_ARGUMENT,{}):we.throwError("BigNumber.toString does not accept parameters",$.errors.UNEXPECTED_ARGUMENT,{})),Ie(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Ne,_e(t)):t.match(/^-?[0-9]+$/)?new e(Ne,_e(new Ee(t))):we.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Re("underflow","BigNumber.from",t),(t>=ke||t<=-ke)&&Re("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(re(r))return e.from(se(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(oe(i)||"-"===i[0]&&oe(i.substring(1))))return e.from(i)}return we.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function _e(e){if("string"!==typeof e)return _e(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&we.throwArgumentError("invalid hex","value",e),"0x00"===(e=_e(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Se(e){return xe.from(_e(e))}function Ie(e){var t=xe.from(e).toHexString();return"-"===t[0]?new Ee("-"+t.substring(3),16):new Ee(t.substring(2),16)}function Re(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),we.throwError(e,$.errors.NUMERIC_FAULT,n)}var Te=new $(me);function Ce(e){var t=[];return function e(r,n){if(Array.isArray(n))for(var i in n){var o=r.slice();o.push(i);try{e(o,n[i])}catch(a){t.push({path:o,error:a})}}}([],e),t}var Pe=function(){function e(t,r,n,i){(0,N.Z)(this,e),this.name=t,this.type=r,this.localName=n,this.dynamic=i}return(0,k.Z)(e,[{key:"_throwError",value:function(e,t){Te.throwArgumentError(e,this.localName,t)}}]),e}(),Oe=function(){function e(t){(0,N.Z)(this,e),fe(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}return(0,k.Z)(e,[{key:"data",get:function(){return function(e){var t="0x";return e.forEach((function(e){t+=se(e).substring(2)})),t}(this._data)}},{key:"length",get:function(){return this._dataLength}},{key:"_writeData",value:function(e){return this._data.push(e),this._dataLength+=e.length,e.length}},{key:"appendWriter",value:function(e){return this._writeData(ie(e._data))}},{key:"writeBytes",value:function(e){var t=ne(e),r=t.length%this.wordSize;return r&&(t=ie([t,this._padding.slice(r)])),this._writeData(t)}},{key:"_getValue",value:function(e){var t=ne(xe.from(e));return t.length>this.wordSize&&Te.throwError("value out-of-bounds",$.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=ie([this._padding.slice(t.length%this.wordSize),t])),t}},{key:"writeValue",value:function(e){return this._writeData(this._getValue(e))}},{key:"writeUpdatableValue",value:function(){var e=this,t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,function(r){e._data[t]=e._getValue(r)}}}]),e}(),Ue=function(){function e(t,r,n,i){(0,N.Z)(this,e),fe(this,"_data",ne(t)),fe(this,"wordSize",r||32),fe(this,"_coerceFunc",n),fe(this,"allowLoose",i),this._offset=0}return(0,k.Z)(e,[{key:"data",get:function(){return se(this._data)}},{key:"consumed",get:function(){return this._offset}},{key:"coerce",value:function(t,r){return this._coerceFunc?this._coerceFunc(t,r):e.coerce(t,r)}},{key:"_peekBytes",value:function(e,t,r){var n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:Te.throwError("data out-of-bounds",$.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}},{key:"subReader",value:function(t){return new e(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}},{key:"readBytes",value:function(e,t){var r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}},{key:"readValue",value:function(){return xe.from(this.readBytes(this.wordSize))}}],[{key:"coerce",value:function(e,t){var r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}}]),e}(),Me=r(37676),Fe=r.n(Me);function De(e){return"0x"+Fe().keccak_256(ne(e))}var Le=new $("address/5.7.0");function Ze(e){oe(e,20)||Le.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=ne(De(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var Be={},Ge=0;Ge<10;Ge++)Be[String(Ge)]=String(Ge);for(var We=0;We<26;We++)Be[String.fromCharCode(65+We)]=String(10+We);var je,ze=Math.floor((je=9007199254740991,Math.log10?Math.log10(je):Math.log(je)/Math.LN10));function qe(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return Be[e]})).join("");t.length>=ze;){var r=t.substring(0,ze);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function Ve(e){var t,r=null;if("string"!==typeof e&&Le.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=Ze(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&Le.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==qe(e)&&Le.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new Ee(t,36).toString(16);r.length<40;)r="0"+r;r=Ze("0x"+r)}else Le.throwArgumentError("invalid address","address",e);return r}var Ke=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"address","address",e,!1)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"encode",value:function(e,t){try{t=Ve(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}},{key:"decode",value:function(e){return Ve(ue(e.readValue().toHexString(),20))}}]),r}(Pe),He=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this,e.name,e.type,void 0,e.dynamic)).coder=e,n}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return this.coder.defaultValue()}},{key:"encode",value:function(e,t){return this.coder.encode(e,t)}},{key:"decode",value:function(e){return this.coder.decode(e)}}]),r}(Pe),Je=new $(me);function Xe(e,t,r){var n=null;if(Array.isArray(r))n=r;else if(r&&"object"===typeof r){var i={};n=t.map((function(e){var t=e.localName;return t||Je.throwError("cannot encode object for signature with missing names",$.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),i[t]&&Je.throwError("cannot encode object for signature with duplicate names",$.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),i[t]=!0,r[t]}))}else Je.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&Je.throwArgumentError("types/value length mismatch","tuple",r);var o=new Oe(e.wordSize),a=new Oe(e.wordSize),s=[];t.forEach((function(e,t){var r=n[t];if(e.dynamic){var i=a.length;e.encode(a,r);var u=o.writeUpdatableValue();s.push((function(e){u(e+i)}))}else e.encode(o,r)})),s.forEach((function(e){e(o.length)}));var u=e.appendWriter(o);return u+=e.appendWriter(a)}function $e(e,t){var r=[],n=e.subReader(0);t.forEach((function(t){var i=null;if(t.dynamic){var o=e.readValue(),a=n.subReader(o.toNumber());try{i=t.decode(a)}catch(s){if(s.code===$.errors.BUFFER_OVERRUN)throw s;(i=s).baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(s){if(s.code===$.errors.BUFFER_OVERRUN)throw s;(i=s).baseType=t.name,i.name=t.localName,i.type=t.type}void 0!=i&&r.push(i)}));var i=t.reduce((function(e,t){var r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});t.forEach((function(e,t){var n=e.localName;if(n&&1===i[n]&&("length"===n&&(n="_length"),null==r[n])){var o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:function(){throw o}}):r[n]=o}}));for(var o=function(){var e=r[a];e instanceof Error&&Object.defineProperty(r,a,{enumerable:!0,get:function(){throw e}})},a=0;a<r.length;a++)o();return Object.freeze(r)}var Ye,Qe,et=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n,i){var o;(0,N.Z)(this,r);var a=e.type+"["+(n>=0?n:"")+"]",s=-1===n||e.dynamic;return(o=t.call(this,"array",a,i,s)).coder=e,o.length=n,o}return(0,k.Z)(r,[{key:"defaultValue",value:function(){for(var e=this.coder.defaultValue(),t=[],r=0;r<this.length;r++)t.push(e);return t}},{key:"encode",value:function(e,t){Array.isArray(t)||this._throwError("expected array value",t);var r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),Je.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));for(var n=[],i=0;i<t.length;i++)n.push(this.coder);return Xe(e,n,t)}},{key:"decode",value:function(e){var t=this.length;-1===t&&32*(t=e.readValue().toNumber())>e._data.length&&Je.throwError("insufficient data length",$.errors.BUFFER_OVERRUN,{length:e._data.length,count:t});for(var r=[],n=0;n<t;n++)r.push(new He(this.coder));return e.coerce(this.name,$e(e,r))}}]),r}(Pe),tt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"bool","bool",e,!1)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return!1}},{key:"encode",value:function(e,t){return e.writeValue(t?1:0)}},{key:"decode",value:function(e){return e.coerce(this.type,!e.readValue().isZero())}}]),r}(Pe),rt=r(11752),nt=r(61120),it=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){return(0,N.Z)(this,r),t.call(this,e,e,n,!0)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return"0x"}},{key:"encode",value:function(e,t){t=ne(t);var r=e.writeValue(t.length);return r+=e.writeBytes(t)}},{key:"decode",value:function(e){return e.readBytes(e.readValue().toNumber(),!0)}}]),r}(Pe),ot=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"bytes",e)}return(0,k.Z)(r,[{key:"decode",value:function(e){return e.coerce(this.name,se((0,rt.Z)((0,nt.Z)(r.prototype),"decode",this).call(this,e)))}}]),r}(it),at=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r);var o="bytes"+String(e);return(i=t.call(this,o,o,n,!1)).size=e,i}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}},{key:"encode",value:function(e,t){var r=ne(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}},{key:"decode",value:function(e){return e.coerce(this.name,se(e.readBytes(this.size)))}}]),r}(Pe),st=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"null","",e,!1)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return null}},{key:"encode",value:function(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}},{key:"decode",value:function(e){return e.readBytes(0),e.coerce(this.name,null)}}]),r}(Pe),ut=xe.from(-1),ct=xe.from(0),ft=xe.from(1),lt=xe.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ht=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n,i){var o;(0,N.Z)(this,r);var a=(n?"int":"uint")+8*e;return(o=t.call(this,a,a,i,!1)).size=e,o.signed=n,o}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return 0}},{key:"encode",value:function(e,t){var r=xe.from(t),n=lt.mask(8*e.wordSize);if(this.signed){var i=n.mask(8*this.size-1);(r.gt(i)||r.lt(i.add(ft).mul(ut)))&&this._throwError("value out-of-bounds",t)}else(r.lt(ct)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}},{key:"decode",value:function(e){var t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}]),r}(Pe),dt=new $("strings/5.7.0");function pt(e,t,r,n,i){if(e===Qe.BAD_PREFIX||e===Qe.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===Qe.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Ye||(Ye={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Qe||(Qe={}));var vt=Object.freeze({error:function(e,t,r,n,i){return dt.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:pt,replace:function(e,t,r,n,i){return e===Qe.OVERLONG?(n.push(i),0):(n.push(65533),pt(e,t,r))}});function gt(e,t){null==t&&(t=vt.error),e=ne(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(i>>7!==0){var o=null,a=null;if(192===(224&i))o=1,a=127;else if(224===(240&i))o=2,a=2047;else{if(240!==(248&i)){n+=t(128===(192&i)?Qe.UNEXPECTED_CONTINUE:Qe.BAD_PREFIX,n-1,e,r);continue}o=3,a=65535}if(n-1+o>=e.length)n+=t(Qe.OVERRUN,n-1,e,r);else{for(var s=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=e[n];if(128!=(192&c)){n+=t(Qe.MISSING_CONTINUE,n,e,r),s=null;break}s=s<<6|63&c,n++}null!==s&&(s>1114111?n+=t(Qe.OUT_OF_RANGE,n-1-o,e,r,s):s>=55296&&s<=57343?n+=t(Qe.UTF16_SURROGATE,n-1-o,e,r,s):s<=a?n+=t(Qe.OVERLONG,n-1-o,e,r,s):r.push(s))}}else r.push(i)}return r}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye.current;t!=Ye.current&&(dt.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return ne(r)}function yt(e,t){return gt(e,t).map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}var bt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"string",e)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return""}},{key:"encode",value:function(e,t){return(0,rt.Z)((0,nt.Z)(r.prototype),"encode",this).call(this,e,mt(t))}},{key:"decode",value:function(e){return yt((0,rt.Z)((0,nt.Z)(r.prototype),"decode",this).call(this,e))}}]),r}(it),Et=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r);var o=!1,a=[];e.forEach((function(e){e.dynamic&&(o=!0),a.push(e.type)}));var s="tuple("+a.join(",")+")";return(i=t.call(this,"tuple",s,n,o)).coders=e,i}return(0,k.Z)(r,[{key:"defaultValue",value:function(){var e=[];this.coders.forEach((function(t){e.push(t.defaultValue())}));var t=this.coders.reduce((function(e,t){var r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach((function(r,n){var i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)}},{key:"encode",value:function(e,t){return Xe(e,this.coders,t)}},{key:"decode",value:function(e){return e.coerce(this.name,$e(e,this.coders))}}]),r}(Pe),wt=new $(me),Nt={},kt={calldata:!0,memory:!0,storage:!0},At={calldata:!0,memory:!0};function xt(e,t){if("bytes"===e||"string"===e){if(kt[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&At[t])return!0;return(kt[t]||"payable"===t)&&wt.throwArgumentError("invalid modifier","name",t),!1}function _t(e,t){for(var r in t)fe(e,r,t[r])}var St=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),It=new RegExp(/^(.*)\[([0-9]*)\]$/),Rt=function(){function e(t,r){(0,N.Z)(this,e),t!==Nt&&wt.throwError("use fromString",$.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),_t(this,r);var n=this.type.match(It);_t(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:e.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"format",value:function(e){if(e||(e=St.sighash),St[e]||wt.throwArgumentError("invalid format type","format",e),e===St.json){var t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((function(t){return JSON.parse(t.format(e))}))),JSON.stringify(t)}var r="";return"array"===this.baseType?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==St.sighash&&(r+=this.type),r+="("+this.components.map((function(t){return t.format(e)})).join(e===St.full?", ":",")+")"):r+=this.type,e!==St.sighash&&(!0===this.indexed&&(r+=" indexed"),e===St.full&&this.name&&(r+=" "+this.name)),r}}],[{key:"from",value:function(t,r){return"string"===typeof t?e.fromString(t,r):e.fromObject(t)}},{key:"fromObject",value:function(t){return e.isParamType(t)?t:new e(Nt,{name:t.name||null,type:Bt(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(e.fromObject):null})}},{key:"fromString",value:function(t,r){return n=function(e,t){var r=e;function n(t){wt.throwArgumentError("unexpected character at position ".concat(t),"param",e)}function i(e){var r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");for(var o={type:"",name:"",state:{allowType:!0}},a=o,s=0;s<e.length;s++){var u=e[s];switch(u){case"(":a.state.allowType&&""===a.type?a.type="tuple":a.state.allowParams||n(s),a.state.allowType=!1,a.type=Bt(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,"indexed"===a.name&&(t||n(s),a.indexed=!0,a.name=""),xt(a.type,a.name)&&(a.name=""),a.type=Bt(a.type);var c=a;(a=a.parent)||n(s),delete c.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,"indexed"===a.name&&(t||n(s),a.indexed=!0,a.name=""),xt(a.type,a.name)&&(a.name=""),a.type=Bt(a.type);var f=i(a.parent);a.parent.components.push(f),delete a.parent,a=f;break;case" ":a.state.allowType&&""!==a.type&&(a.type=Bt(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&""!==a.name&&("indexed"===a.name?(t||n(s),a.indexed&&n(s),a.indexed=!0,a.name=""):xt(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(s),a.type+=u,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(s),a.type+=u,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=u,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=u,delete a.state.allowArray):a.state.readArray?a.type+=u:n(s)}}return a.parent&&wt.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===a.name?(t||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):xt(a.type,a.name)&&(a.name=""),o.type=Bt(o.type),o}(t,!!r),e.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}},{key:"isParamType",value:function(e){return!(null==e||!e._isParamType)}}]),e}();function Tt(e,t){return function(e){e=e.trim();for(var t=[],r="",n=0,i=0;i<e.length;i++){var o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&-1===--n&&wt.throwArgumentError("unbalanced parenthesis","value",e))}r&&t.push(r);return t}(e).map((function(e){return Rt.fromString(e,t)}))}var Ct=function(){function e(t,r){(0,N.Z)(this,e),t!==Nt&&wt.throwError("use a static from method",$.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),_t(this,r),this._isFragment=!0,Object.freeze(this)}return(0,k.Z)(e,null,[{key:"from",value:function(t){return e.isFragment(t)?t:"string"===typeof t?e.fromString(t):e.fromObject(t)}},{key:"fromObject",value:function(t){if(e.isFragment(t))return t;switch(t.type){case"function":return Dt.fromObject(t);case"event":return Pt.fromObject(t);case"constructor":return Ft.fromObject(t);case"error":return Zt.fromObject(t);case"fallback":case"receive":return null}return wt.throwArgumentError("invalid fragment object","value",t)}},{key:"fromString",value:function(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Pt.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?Dt.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?Ft.fromString(e.trim()):"error"===e.split(" ")[0]?Zt.fromString(e.substring(5).trim()):wt.throwArgumentError("unsupported fragment","value",e)}},{key:"isFragment",value:function(e){return!(!e||!e._isFragment)}}]),e}(),Pt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=St.sighash),St[e]||wt.throwArgumentError("invalid format type","format",e),e===St.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==St.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===St.full?", ":",")+") ",e!==St.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isEventFragment(e))return e;"event"!==e.type&&wt.throwArgumentError("invalid event object","value",e);var t={name:Wt(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Rt.fromObject):[],type:"event"};return new r(Nt,t)}},{key:"fromString",value:function(e){var t=e.match(jt);t||wt.throwArgumentError("invalid event string","value",e);var n=!1;return t[3].split(" ").forEach((function(e){switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:wt.warn("unknown modifier: "+e)}})),r.fromObject({name:t[1].trim(),anonymous:n,inputs:Tt(t[2],!0),type:"event"})}},{key:"isEventFragment",value:function(e){return e&&e._isFragment&&"event"===e.type}}]),r}(Ct);function Ot(e,t){t.gas=null;var r=e.split("@");return 1!==r.length?(r.length>2&&wt.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||wt.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=xe.from(r[1]),r[0]):e}function Ut(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((function(e){switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function Mt(e){var t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&wt.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&wt.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||wt.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&wt.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&wt.throwArgumentError("unable to determine stateMutability","value",e),t}var Ft=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=St.sighash),St[e]||wt.throwArgumentError("invalid format type","format",e),e===St.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});e===St.sighash&&wt.throwError("cannot format a constructor for sighash",$.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});var t="constructor("+this.inputs.map((function(t){return t.format(e)})).join(e===St.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isConstructorFragment(e))return e;"constructor"!==e.type&&wt.throwArgumentError("invalid constructor object","value",e);var t=Mt(e);t.constant&&wt.throwArgumentError("constructor cannot be constant","value",e);var n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Rt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?xe.from(e.gas):null};return new r(Nt,n)}},{key:"fromString",value:function(e){var t={type:"constructor"},n=(e=Ot(e,t)).match(jt);return n&&"constructor"===n[1].trim()||wt.throwArgumentError("invalid constructor string","value",e),t.inputs=Tt(n[2].trim(),!1),Ut(n[3].trim(),t),r.fromObject(t)}},{key:"isConstructorFragment",value:function(e){return e&&e._isFragment&&"constructor"===e.type}}]),r}(Ct),Dt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=St.sighash),St[e]||wt.throwArgumentError("invalid format type","format",e),e===St.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))})),outputs:this.outputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==St.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===St.full?", ":",")+") ",e!==St.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((function(t){return t.format(e)})).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isFunctionFragment(e))return e;"function"!==e.type&&wt.throwArgumentError("invalid function object","value",e);var t=Mt(e),n={type:e.type,name:Wt(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Rt.fromObject):[],outputs:e.outputs?e.outputs.map(Rt.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?xe.from(e.gas):null};return new r(Nt,n)}},{key:"fromString",value:function(e){var t={type:"function"},n=(e=Ot(e,t)).split(" returns ");n.length>2&&wt.throwArgumentError("invalid function string","value",e);var i=n[0].match(jt);if(i||wt.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Wt(t.name),t.inputs=Tt(i[2],!1),Ut(i[3].trim(),t),n.length>1){var o=n[1].match(jt);""==o[1].trim()&&""==o[3].trim()||wt.throwArgumentError("unexpected tokens","value",e),t.outputs=Tt(o[2],!1)}else t.outputs=[];return r.fromObject(t)}},{key:"isFunctionFragment",value:function(e){return e&&e._isFragment&&"function"===e.type}}]),r}(Ft);function Lt(e){var t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||wt.throwArgumentError("cannot specify user defined ".concat(t," error"),"fragment",e),e}var Zt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=St.sighash),St[e]||wt.throwArgumentError("invalid format type","format",e),e===St.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==St.sighash&&(t+="error "),(t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===St.full?", ":",")+") ").trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isErrorFragment(e))return e;"error"!==e.type&&wt.throwArgumentError("invalid error object","value",e);var t={type:e.type,name:Wt(e.name),inputs:e.inputs?e.inputs.map(Rt.fromObject):[]};return Lt(new r(Nt,t))}},{key:"fromString",value:function(e){var t={type:"error"},n=e.match(jt);return n||wt.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&Wt(t.name),t.inputs=Tt(n[2],!1),Lt(r.fromObject(t))}},{key:"isErrorFragment",value:function(e){return e&&e._isFragment&&"error"===e.type}}]),r}(Ct);function Bt(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}var Gt=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Wt(e){return e&&e.match(Gt)||wt.throwArgumentError('invalid identifier "'.concat(e,'"'),"value",e),e}var jt=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var zt=new $(me),qt=new RegExp(/^bytes([0-9]*)$/),Vt=new RegExp(/^(u?int)([0-9]*)$/),Kt=function(){function e(t){(0,N.Z)(this,e),fe(this,"coerceFunc",t||null)}return(0,k.Z)(e,[{key:"_getCoder",value:function(e){var t=this;switch(e.baseType){case"address":return new Ke(e.name);case"bool":return new tt(e.name);case"string":return new bt(e.name);case"bytes":return new ot(e.name);case"array":return new et(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Et((e.components||[]).map((function(e){return t._getCoder(e)})),e.name);case"":return new st(e.name)}var r=e.type.match(Vt);if(r){var n=parseInt(r[2]||"256");return(0===n||n>256||n%8!==0)&&zt.throwArgumentError("invalid "+r[1]+" bit length","param",e),new ht(n/8,"int"===r[1],e.name)}if(r=e.type.match(qt)){var i=parseInt(r[1]);return(0===i||i>32)&&zt.throwArgumentError("invalid bytes length","param",e),new at(i,e.name)}return zt.throwArgumentError("invalid type","type",e.type)}},{key:"_getWordSize",value:function(){return 32}},{key:"_getReader",value:function(e,t){return new Ue(e,this._getWordSize(),this.coerceFunc,t)}},{key:"_getWriter",value:function(){return new Oe(this._getWordSize())}},{key:"getDefaultValue",value:function(e){var t=this,r=e.map((function(e){return t._getCoder(Rt.from(e))}));return new Et(r,"_").defaultValue()}},{key:"encode",value:function(e,t){var r=this;e.length!==t.length&&zt.throwError("types/values length mismatch",$.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});var n=e.map((function(e){return r._getCoder(Rt.from(e))})),i=new Et(n,"_"),o=this._getWriter();return i.encode(o,t),o.data}},{key:"decode",value:function(e,t,r){var n=this,i=e.map((function(e){return n._getCoder(Rt.from(e))}));return new Et(i,"_").decode(this._getReader(ne(t),r))}}]),e}(),Ht=new Kt;function Jt(e){return De(mt(e))}var Xt=new $(me),$t=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(ge),Yt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(ge),Qt=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(ge),er=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,null,[{key:"isIndexed",value:function(e){return!(!e||!e._isIndexed)}}]),r}(ge),tr={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function rr(e,t){var r=new Error("deferred error during ABI decoding triggered accessing ".concat(e));return r.error=t,r}var nr=function(){function e(t){var r=this;(0,N.Z)(this,e);fe(this,"fragments",("string"===typeof t?JSON.parse(t):t).map((function(e){return Ct.from(e)})).filter((function(e){return null!=e}))),fe(this,"_abiCoder",le(this instanceof e?this.constructor:void 0,"getAbiCoder")()),fe(this,"functions",{}),fe(this,"errors",{}),fe(this,"events",{}),fe(this,"structs",{}),this.fragments.forEach((function(e){var t=null;switch(e.type){case"constructor":return r.deploy?void Xt.warn("duplicate definition - constructor"):void fe(r,"deploy",e);case"function":t=r.functions;break;case"event":t=r.events;break;case"error":t=r.errors;break;default:return}var n=e.format();t[n]?Xt.warn("duplicate definition - "+n):t[n]=e})),this.deploy||fe(this,"deploy",Ft.from({payable:!1,type:"constructor"})),fe(this,"_isInterface",!0)}return(0,k.Z)(e,[{key:"format",value:function(e){e||(e=St.full),e===St.sighash&&Xt.throwArgumentError("interface does not support formatting sighash","format",e);var t=this.fragments.map((function(t){return t.format(e)}));return e===St.json?JSON.stringify(t.map((function(e){return JSON.parse(e)}))):t}},{key:"getFunction",value:function(e){if(oe(e)){for(var t in this.functions)if(e===this.getSighash(t))return this.functions[t];Xt.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){var r=e.trim(),n=Object.keys(this.functions).filter((function(e){return e.split("(")[0]===r}));return 0===n.length?Xt.throwArgumentError("no matching function","name",r):n.length>1&&Xt.throwArgumentError("multiple matching functions","name",r),this.functions[n[0]]}var i=this.functions[Dt.fromString(e).format()];return i||Xt.throwArgumentError("no matching function","signature",e),i}},{key:"getEvent",value:function(e){if(oe(e)){var t=e.toLowerCase();for(var r in this.events)if(t===this.getEventTopic(r))return this.events[r];Xt.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){var n=e.trim(),i=Object.keys(this.events).filter((function(e){return e.split("(")[0]===n}));return 0===i.length?Xt.throwArgumentError("no matching event","name",n):i.length>1&&Xt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}var o=this.events[Pt.fromString(e).format()];return o||Xt.throwArgumentError("no matching event","signature",e),o}},{key:"getError",value:function(e){if(oe(e)){var t=le(this.constructor,"getSighash");for(var r in this.errors){if(e===t(this.errors[r]))return this.errors[r]}Xt.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){var n=e.trim(),i=Object.keys(this.errors).filter((function(e){return e.split("(")[0]===n}));return 0===i.length?Xt.throwArgumentError("no matching error","name",n):i.length>1&&Xt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}var o=this.errors[Dt.fromString(e).format()];return o||Xt.throwArgumentError("no matching error","signature",e),o}},{key:"getSighash",value:function(e){if("string"===typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(r){throw t}}return le(this.constructor,"getSighash")(e)}},{key:"getEventTopic",value:function(e){return"string"===typeof e&&(e=this.getEvent(e)),le(this.constructor,"getEventTopic")(e)}},{key:"_decodeParams",value:function(e,t){return this._abiCoder.decode(e,t)}},{key:"_encodeParams",value:function(e,t){return this._abiCoder.encode(e,t)}},{key:"encodeDeploy",value:function(e){return this._encodeParams(this.deploy.inputs,e||[])}},{key:"decodeErrorResult",value:function(e,t){"string"===typeof e&&(e=this.getError(e));var r=ne(t);return se(r.slice(0,4))!==this.getSighash(e)&&Xt.throwArgumentError("data signature does not match error ".concat(e.name,"."),"data",se(r)),this._decodeParams(e.inputs,r.slice(4))}},{key:"encodeErrorResult",value:function(e,t){return"string"===typeof e&&(e=this.getError(e)),se(ie([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}},{key:"decodeFunctionData",value:function(e,t){"string"===typeof e&&(e=this.getFunction(e));var r=ne(t);return se(r.slice(0,4))!==this.getSighash(e)&&Xt.throwArgumentError("data signature does not match function ".concat(e.name,"."),"data",se(r)),this._decodeParams(e.inputs,r.slice(4))}},{key:"encodeFunctionData",value:function(e,t){return"string"===typeof e&&(e=this.getFunction(e)),se(ie([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}},{key:"decodeFunctionResult",value:function(e,t){"string"===typeof e&&(e=this.getFunction(e));var r=ne(t),n=null,i="",o=null,a=null,s=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(f){}break;case 4:var u=se(r.slice(0,4)),c=tr[u];if(c)o=this._abiCoder.decode(c.inputs,r.slice(4)),a=c.name,s=c.signature,c.reason&&(n=o[0]),"Error"===a?i="; VM Exception while processing transaction: reverted with reason string ".concat(JSON.stringify(o[0])):"Panic"===a&&(i="; VM Exception while processing transaction: reverted with panic code ".concat(o[0]));else try{var f=this.getError(u);o=this._abiCoder.decode(f.inputs,r.slice(4)),a=f.name,s=f.format()}catch(f){}}return Xt.throwError("call revert exception"+i,$.errors.CALL_EXCEPTION,{method:e.format(),data:se(t),errorArgs:o,errorName:a,errorSignature:s,reason:n})}},{key:"encodeFunctionResult",value:function(e,t){return"string"===typeof e&&(e=this.getFunction(e)),se(this._abiCoder.encode(e.outputs,t||[]))}},{key:"encodeFilterTopics",value:function(e,t){var r=this;"string"===typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&Xt.throwError("too many arguments for "+e.format(),$.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});var n=[];e.anonymous||n.push(this.getEventTopic(e));var i=function(e,t){return"string"===e.type?Jt(t):"bytes"===e.type?De(se(t)):("bool"===e.type&&"boolean"===typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=xe.from(t).toHexString()),"address"===e.type&&r._abiCoder.encode(["address"],[t]),ue(se(t),32))};for(t.forEach((function(t,r){var o=e.inputs[r];o.indexed?null==t?n.push(null):"array"===o.baseType||"tuple"===o.baseType?Xt.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?n.push(t.map((function(e){return i(o,e)}))):n.push(i(o,t)):null!=t&&Xt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}},{key:"encodeEventLog",value:function(e,t){var r=this;"string"===typeof e&&(e=this.getEvent(e));var n=[],i=[],o=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Xt.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((function(e,a){var s=t[a];if(e.indexed)if("string"===e.type)n.push(Jt(s));else if("bytes"===e.type)n.push(De(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(r._abiCoder.encode([e.type],[s]))}else i.push(e),o.push(s)})),{data:this._abiCoder.encode(i,o),topics:n}}},{key:"decodeEventLog",value:function(e,t,r){if("string"===typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){var n=this.getEventTopic(e);oe(r[0],32)&&r[0].toLowerCase()===n||Xt.throwError("fragment/topic mismatch",$.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:n,value:r[0]}),r=r.slice(1)}var i=[],o=[],a=[];e.inputs.forEach((function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(i.push(Rt.fromObject({type:"bytes32",name:e.name})),a.push(!0)):(i.push(e),a.push(!1)):(o.push(e),a.push(!1))}));var s=null!=r?this._abiCoder.decode(i,ie(r)):null,u=this._abiCoder.decode(o,t,!0),c=[],f=0,l=0;e.inputs.forEach((function(e,t){if(e.indexed)if(null==s)c[t]=new er({_isIndexed:!0,hash:null});else if(a[t])c[t]=new er({_isIndexed:!0,hash:s[l++]});else try{c[t]=s[l++]}catch(n){c[t]=n}else try{c[t]=u[f++]}catch(n){c[t]=n}if(e.name&&null==c[e.name]){var r=c[t];r instanceof Error?Object.defineProperty(c,e.name,{enumerable:!0,get:function(){throw rr("property ".concat(JSON.stringify(e.name)),r)}}):c[e.name]=r}}));for(var h=function(e){var t=c[e];t instanceof Error&&Object.defineProperty(c,e,{enumerable:!0,get:function(){throw rr("index ".concat(e),t)}})},d=0;d<c.length;d++)h(d);return Object.freeze(c)}},{key:"parseTransaction",value:function(e){var t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Yt({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:xe.from(e.value||"0")}):null}},{key:"parseLog",value:function(e){var t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new $t({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}},{key:"parseError",value:function(e){var t=se(e),r=this.getError(t.substring(0,10).toLowerCase());return r?new Qt({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}}],[{key:"getAbiCoder",value:function(){return Ht}},{key:"getAddress",value:function(e){return Ve(e)}},{key:"getSighash",value:function(e){return t=Jt(e.format()),r=0,n=4,"string"!==typeof t?t=se(t):(!oe(t)||t.length%2)&&Y.throwArgumentError("invalid hexData","value",t),r=2+2*r,null!=n?"0x"+t.substring(r,2+2*n):"0x"+t.substring(r);var t,r,n}},{key:"getEventTopic",value:function(e){return Jt(e.format())}},{key:"isInterface",value:function(e){return!(!e||!e._isInterface)}}]),e}(),ir=!1,or=!1,ar={debug:1,default:2,info:2,warning:3,error:4,off:5},sr=ar.default,ur=null;var cr,fr,lr=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(cr||(cr={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(fr||(fr={}));var hr="0123456789abcdef",dr=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==ar[r]&&this.throwArgumentError("invalid log level name","logLevel",e),sr>ar[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(or)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=hr[t[o]>>4],r+=hr[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case fr.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case fr.CALL_EXCEPTION:case fr.INSUFFICIENT_FUNDS:case fr.MISSING_NEW:case fr.NONCE_EXPIRED:case fr.REPLACEMENT_UNDERPRICED:case fr.TRANSACTION_REPLACED:case fr.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),lr&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:lr})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return ur||(ur=new e("logger/5.7.0")),ur}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ir){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}or=!!t,ir=!!r}},{key:"setLogLevel",value:function(t){var r=ar[t.toLowerCase()];null!=r?sr=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();dr.errors=fr,dr.levels=cr;var pr=new dr("bytes/5.7.0");function vr(e){return!!e.toHexString}function gr(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return gr(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function mr(e){return Nr(e)&&!(e.length%2)||br(e)}function yr(e){return"number"===typeof e&&e==e&&e%1===0}function br(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!yr(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!yr(r)||r<0||r>=256)return!1}return!0}function Er(e,t){if(t||(t={}),"number"===typeof e){pr.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),gr(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),vr(e)&&(e=e.toHexString()),Nr(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":pr.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return gr(new Uint8Array(i))}return br(e)?gr(new Uint8Array(e)):pr.throwArgumentError("invalid arrayify value","value",e)}function wr(e){var t=e.map((function(e){return Er(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),gr(n)}function Nr(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var kr="0123456789abcdef";function Ar(e,t){if(t||(t={}),"number"===typeof e){pr.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=kr[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),vr(e))return e.toHexString();if(Nr(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":pr.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(br(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=kr[(240&o)>>4]+kr[15&o]}return n}return pr.throwArgumentError("invalid hexlify value","value",e)}function xr(e){if("string"!==typeof e)e=Ar(e);else if(!Nr(e)||e.length%2)return null;return(e.length-2)/2}function _r(e,t,r){return"string"!==typeof e?e=Ar(e):(!Nr(e)||e.length%2)&&pr.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}var Sr=be().BN,Ir=new dr("bignumber/5.7.0"),Rr={},Tr=9007199254740991;var Cr=!1,Pr=function(){function e(t,r){(0,N.Z)(this,e),t!==Rr&&Ir.throwError("cannot call constructor directly; use BigNumber.from",dr.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Ur(Mr(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Ur(Mr(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Ur(Mr(this).add(Mr(e)))}},{key:"sub",value:function(e){return Ur(Mr(this).sub(Mr(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Fr("division-by-zero","div"),Ur(Mr(this).div(Mr(t)))}},{key:"mul",value:function(e){return Ur(Mr(this).mul(Mr(e)))}},{key:"mod",value:function(e){var t=Mr(e);return t.isNeg()&&Fr("division-by-zero","mod"),Ur(Mr(this).umod(t))}},{key:"pow",value:function(e){var t=Mr(e);return t.isNeg()&&Fr("negative-power","pow"),Ur(Mr(this).pow(t))}},{key:"and",value:function(e){var t=Mr(e);return(this.isNegative()||t.isNeg())&&Fr("unbound-bitwise-result","and"),Ur(Mr(this).and(t))}},{key:"or",value:function(e){var t=Mr(e);return(this.isNegative()||t.isNeg())&&Fr("unbound-bitwise-result","or"),Ur(Mr(this).or(t))}},{key:"xor",value:function(e){var t=Mr(e);return(this.isNegative()||t.isNeg())&&Fr("unbound-bitwise-result","xor"),Ur(Mr(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Fr("negative-width","mask"),Ur(Mr(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Fr("negative-width","shl"),Ur(Mr(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Fr("negative-width","shr"),Ur(Mr(this).shrn(e))}},{key:"eq",value:function(e){return Mr(this).eq(Mr(e))}},{key:"lt",value:function(e){return Mr(this).lt(Mr(e))}},{key:"lte",value:function(e){return Mr(this).lte(Mr(e))}},{key:"gt",value:function(e){return Mr(this).gt(Mr(e))}},{key:"gte",value:function(e){return Mr(this).gte(Mr(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return Mr(this).isZero()}},{key:"toNumber",value:function(){try{return Mr(this).toNumber()}catch(e){Fr("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return Ir.throwError("this platform does not support BigInt",dr.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?Cr||(Cr=!0,Ir.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Ir.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",dr.errors.UNEXPECTED_ARGUMENT,{}):Ir.throwError("BigNumber.toString does not accept parameters",dr.errors.UNEXPECTED_ARGUMENT,{})),Mr(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Rr,Or(t)):t.match(/^-?[0-9]+$/)?new e(Rr,Or(new Sr(t))):Ir.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Fr("underflow","BigNumber.from",t),(t>=Tr||t<=-9007199254740991)&&Fr("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(br(r))return e.from(Ar(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(Nr(i)||"-"===i[0]&&Nr(i.substring(1))))return e.from(i)}return Ir.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function Or(e){if("string"!==typeof e)return Or(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Ir.throwArgumentError("invalid hex","value",e),"0x00"===(e=Or(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Ur(e){return Pr.from(Or(e))}function Mr(e){var t=Pr.from(e).toHexString();return"-"===t[0]?new Sr("-"+t.substring(3),16):new Sr(t.substring(2),16)}function Fr(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),Ir.throwError(e,dr.errors.NUMERIC_FAULT,n)}function Dr(e){return"0x"+Fe().keccak_256(Er(e))}var Lr=new dr("rlp/5.7.0");function Zr(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function Br(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat(Br(e))})),t.length<=55)return t.unshift(192+t.length),t;var r=Zr(t.length);return r.unshift(247+r.length),r.concat(t)}mr(e)||Lr.throwArgumentError("RLP object must be BytesLike","object",e);var n=Array.prototype.slice.call(Er(e));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var i=Zr(n.length);return i.unshift(183+i.length),i.concat(n)}function Gr(e){return Ar(Br(e))}var Wr=new dr("address/5.6.1");function jr(e){Nr(e,20)||Wr.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=Er(Dr(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var zr={},qr=0;qr<10;qr++)zr[String(qr)]=String(qr);for(var Vr=0;Vr<26;Vr++)zr[String.fromCharCode(65+Vr)]=String(10+Vr);var Kr=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Hr(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return zr[e]})).join("");t.length>=Kr;){var r=t.substring(0,Kr);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function Jr(e){var t,r=null;if("string"!==typeof e&&Wr.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=jr(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&Wr.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Hr(e)&&Wr.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new Sr(t,36).toString(16);r.length<40;)r="0"+r;r=jr("0x"+r)}else Wr.throwArgumentError("invalid address","address",e);return r}function Xr(e){try{return Jr(e),!0}catch(t){}return!1}function $r(e){for(var t,r=(t=Jr(e).substring(2),new Sr(t,16).toString(36)).toUpperCase();r.length<30;)r="0"+r;return"XE"+Hr("XE00"+r)+r}function Yr(e){var t=null;try{t=Jr(e.from)}catch(r){Wr.throwArgumentError("missing from address","transaction",e)}return Jr(_r(Dr(Gr([t,function(e){var t=Er(e);if(0===t.length)return t;for(var r=0;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}(Er(Pr.from(e.nonce).toHexString()))])),12))}function Qr(e,t,r){return 32!==xr(t)&&Wr.throwArgumentError("salt must be 32 bytes","salt",t),32!==xr(r)&&Wr.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),Jr(_r(Dr(wr(["0xff",Jr(e),t,r])),12))}var en=!1,tn=!1,rn={debug:1,default:2,info:2,warning:3,error:4,off:5},nn=rn.default,on=null;var an,sn,un=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(an||(an={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(sn||(sn={}));var cn="0123456789abcdef",fn=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==rn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),nn>rn[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(tn)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=cn[t[o]>>4],r+=cn[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case sn.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case sn.CALL_EXCEPTION:case sn.INSUFFICIENT_FUNDS:case sn.MISSING_NEW:case sn.NONCE_EXPIRED:case sn.REPLACEMENT_UNDERPRICED:case sn.TRANSACTION_REPLACED:case sn.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),un&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:un})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return on||(on=new e("logger/5.7.0")),on}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),en){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}tn=!!t,en=!!r}},{key:"setLogLevel",value:function(t){var r=rn[t.toLowerCase()];null!=r?nn=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();fn.errors=sn,fn.levels=an;var ln=new fn("bytes/5.7.0");function hn(e){return!!e.toHexString}function dn(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return dn(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function pn(e){return"number"===typeof e&&e==e&&e%1===0}function vn(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!pn(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!pn(r)||r<0||r>=256)return!1}return!0}function gn(e,t){if(t||(t={}),"number"===typeof e){ln.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),dn(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),hn(e)&&(e=e.toHexString()),mn(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":ln.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return dn(new Uint8Array(i))}return vn(e)?dn(new Uint8Array(e)):ln.throwArgumentError("invalid arrayify value","value",e)}function mn(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function yn(e){e=atob(e);for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return gn(t)}function bn(e){e=gn(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}var En=!1,wn=!1,Nn={debug:1,default:2,info:2,warning:3,error:4,off:5},kn=Nn.default,An=null;var xn,_n,Sn=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(xn||(xn={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(_n||(_n={}));var In="0123456789abcdef",Rn=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Nn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),kn>Nn[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(wn)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=In[t[o]>>4],r+=In[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case _n.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case _n.CALL_EXCEPTION:case _n.INSUFFICIENT_FUNDS:case _n.MISSING_NEW:case _n.NONCE_EXPIRED:case _n.REPLACEMENT_UNDERPRICED:case _n.TRANSACTION_REPLACED:case _n.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Sn&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Sn})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return An||(An=new e("logger/5.7.0")),An}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),En){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}wn=!!t,En=!!r}},{key:"setLogLevel",value:function(t){var r=Nn[t.toLowerCase()];null!=r?kn=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Rn.errors=_n,Rn.levels=xn;var Tn=new Rn("bytes/5.7.0");function Cn(e){return!!e.toHexString}function Pn(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Pn(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function On(e){return"number"===typeof e&&e==e&&e%1===0}function Un(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!On(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!On(r)||r<0||r>=256)return!1}return!0}function Mn(e,t){if(t||(t={}),"number"===typeof e){Tn.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Pn(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Cn(e)&&(e=e.toHexString()),Fn(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Tn.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Pn(new Uint8Array(i))}return Un(e)?Pn(new Uint8Array(e)):Tn.throwArgumentError("invalid arrayify value","value",e)}function Fn(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}new Rn("properties/5.7.0");function Dn(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}var Ln=function(){function e(t){(0,N.Z)(this,e),Dn(this,"alphabet",t),Dn(this,"base",t.length),Dn(this,"_alphabetMap",{}),Dn(this,"_leader",t.charAt(0));for(var r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}return(0,k.Z)(e,[{key:"encode",value:function(e){var t=Mn(e);if(0===t.length)return"";for(var r=[0],n=0;n<t.length;++n){for(var i=t[n],o=0;o<r.length;++o)i+=r[o]<<8,r[o]=i%this.base,i=i/this.base|0;for(;i>0;)r.push(i%this.base),i=i/this.base|0}for(var a="",s=0;0===t[s]&&s<t.length-1;++s)a+=this._leader;for(var u=r.length-1;u>=0;--u)a+=this.alphabet[r[u]];return a}},{key:"decode",value:function(e){if("string"!==typeof e)throw new TypeError("Expected String");var t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(var r=0;r<e.length;r++){var n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");for(var i=n,o=0;o<t.length;++o)i+=t[o]*this.base,t[o]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(var a=0;e[a]===this._leader&&a<e.length-1;++a)t.push(0);return Mn(new Uint8Array(t.reverse()))}}]),e}(),Zn=(new Ln("abcdefghijklmnopqrstuvwxyz234567"),new Ln("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Bn=!1,Gn=!1,Wn={debug:1,default:2,info:2,warning:3,error:4,off:5},jn=Wn.default,zn=null;var qn,Vn,Kn=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(qn||(qn={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Vn||(Vn={}));var Hn="0123456789abcdef",Jn=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Wn[r]&&this.throwArgumentError("invalid log level name","logLevel",e),jn>Wn[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Gn)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Hn[t[o]>>4],r+=Hn[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case Vn.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Vn.CALL_EXCEPTION:case Vn.INSUFFICIENT_FUNDS:case Vn.MISSING_NEW:case Vn.NONCE_EXPIRED:case Vn.REPLACEMENT_UNDERPRICED:case Vn.TRANSACTION_REPLACED:case Vn.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Kn&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Kn})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return zn||(zn=new e("logger/5.7.0")),zn}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Bn){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Gn=!!t,Bn=!!r}},{key:"setLogLevel",value:function(t){var r=Wn[t.toLowerCase()];null!=r?jn=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Jn.errors=Vn,Jn.levels=qn;var Xn=new Jn("bytes/5.6.1");function $n(e){return!!e.toHexString}function Yn(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Yn(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Qn(e){return ai(e)&&!(e.length%2)||ti(e)}function ei(e){return"number"===typeof e&&e==e&&e%1===0}function ti(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!ei(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!ei(r)||r<0||r>=256)return!1}return!0}function ri(e,t){if(t||(t={}),"number"===typeof e){Xn.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Yn(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),$n(e)&&(e=e.toHexString()),ai(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Xn.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Yn(new Uint8Array(i))}return ti(e)?Yn(new Uint8Array(e)):Xn.throwArgumentError("invalid arrayify value","value",e)}function ni(e){var t=e.map((function(e){return ri(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),Yn(n)}function ii(e){var t=ri(e);if(0===t.length)return t;for(var r=0;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function oi(e,t){(e=ri(e)).length>t&&Xn.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(t);return r.set(e,t-e.length),Yn(r)}function ai(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var si="0123456789abcdef";function ui(e,t){if(t||(t={}),"number"===typeof e){Xn.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=si[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),$n(e))return e.toHexString();if(ai(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Xn.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(ti(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=si[(240&o)>>4]+si[15&o]}return n}return Xn.throwArgumentError("invalid hexlify value","value",e)}function ci(e){if("string"!==typeof e)e=ui(e);else if(!ai(e)||e.length%2)return null;return(e.length-2)/2}function fi(e,t,r){return"string"!==typeof e?e=ui(e):(!ai(e)||e.length%2)&&Xn.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function li(e){var t="0x";return e.forEach((function(e){t+=ui(e).substring(2)})),t}function hi(e){var t=di(ui(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function di(e){"string"!==typeof e&&(e=ui(e)),ai(e)||Xn.throwArgumentError("invalid hex string","value",e),e=e.substring(2);for(var t=0;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function pi(e,t){for("string"!==typeof e?e=ui(e):ai(e)||Xn.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Xn.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function vi(e){var t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Qn(e)){var r=ri(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=ui(r.slice(0,32)),t.s=ui(r.slice(32,64))):65===r.length?(t.r=ui(r.slice(0,32)),t.s=ui(r.slice(32,64)),t.v=r[64]):Xn.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:Xn.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=ui(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){var n=oi(ri(t._vs),32);t._vs=ui(n);var i=n[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=i:t.recoveryParam!==i&&Xn.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;var o=ui(n);null==t.s?t.s=o:t.s!==o&&Xn.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?Xn.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{var a=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==a&&Xn.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&ai(t.r)?t.r=pi(t.r,32):Xn.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&ai(t.s)?t.s=pi(t.s,32):Xn.throwArgumentError("signature missing or invalid s","signature",e);var s=ri(t.s);s[0]>=128&&Xn.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(s[0]|=128);var u=ui(s);t._vs&&(ai(t._vs)||Xn.throwArgumentError("signature invalid _vs","signature",e),t._vs=pi(t._vs,32)),null==t._vs?t._vs=u:t._vs!==u&&Xn.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function gi(e){return ui(ni([(e=vi(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var mi=!1,yi=!1,bi={debug:1,default:2,info:2,warning:3,error:4,off:5},Ei=bi.default,wi=null;var Ni,ki,Ai=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Ni||(Ni={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(ki||(ki={}));var xi="0123456789abcdef",_i=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==bi[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Ei>bi[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(yi)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=xi[t[o]>>4],r+=xi[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case ki.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case ki.CALL_EXCEPTION:case ki.INSUFFICIENT_FUNDS:case ki.MISSING_NEW:case ki.NONCE_EXPIRED:case ki.REPLACEMENT_UNDERPRICED:case ki.TRANSACTION_REPLACED:case ki.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Ai&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ai})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return wi||(wi=new e("logger/5.7.0")),wi}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),mi){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}yi=!!t,mi=!!r}},{key:"setLogLevel",value:function(t){var r=bi[t.toLowerCase()];null!=r?Ei=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();_i.errors=ki,_i.levels=Ni;var Si=new _i("bytes/5.7.0");function Ii(e){return!!e.toHexString}function Ri(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Ri(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Ti(e){return"number"===typeof e&&e==e&&e%1===0}function Ci(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Ti(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Ti(r)||r<0||r>=256)return!1}return!0}function Pi(e,t){if(t||(t={}),"number"===typeof e){Si.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Ri(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ii(e)&&(e=e.toHexString()),Ui(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Si.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Ri(new Uint8Array(i))}return Ci(e)?Ri(new Uint8Array(e)):Si.throwArgumentError("invalid arrayify value","value",e)}function Oi(e){var t=e.map((function(e){return Pi(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),Ri(n)}function Ui(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Mi="0123456789abcdef";function Fi(e,t){if(t||(t={}),"number"===typeof e){Si.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=Mi[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ii(e))return e.toHexString();if(Ui(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Si.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Ci(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=Mi[(240&o)>>4]+Mi[15&o]}return n}return Si.throwArgumentError("invalid hexlify value","value",e)}function Di(e){var t="0x";return e.forEach((function(e){t+=Fi(e).substring(2)})),t}function Li(e,t){for("string"!==typeof e?e=Fi(e):Ui(e)||Si.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Si.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var Zi,Bi,Gi=new _i("strings/5.7.0");function Wi(e,t,r,n,i){if(e===Bi.BAD_PREFIX||e===Bi.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===Bi.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Zi||(Zi={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Bi||(Bi={}));var ji=Object.freeze({error:function(e,t,r,n,i){return Gi.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:Wi,replace:function(e,t,r,n,i){return e===Bi.OVERLONG?(n.push(i),0):(n.push(65533),Wi(e,t,r))}});function zi(e,t){null==t&&(t=ji.error),e=Pi(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(i>>7!==0){var o=null,a=null;if(192===(224&i))o=1,a=127;else if(224===(240&i))o=2,a=2047;else{if(240!==(248&i)){n+=t(128===(192&i)?Bi.UNEXPECTED_CONTINUE:Bi.BAD_PREFIX,n-1,e,r);continue}o=3,a=65535}if(n-1+o>=e.length)n+=t(Bi.OVERRUN,n-1,e,r);else{for(var s=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=e[n];if(128!=(192&c)){n+=t(Bi.MISSING_CONTINUE,n,e,r),s=null;break}s=s<<6|63&c,n++}null!==s&&(s>1114111?n+=t(Bi.OUT_OF_RANGE,n-1-o,e,r,s):s>=55296&&s<=57343?n+=t(Bi.UTF16_SURROGATE,n-1-o,e,r,s):s<=a?n+=t(Bi.OVERLONG,n-1-o,e,r,s):r.push(s))}}else r.push(i)}return r}function qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zi.current;t!=Zi.current&&(Gi.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return Pi(r)}function Vi(e){return e.map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}function Ki(e){return zi(qi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zi.current))}function Hi(e,t){t||(t=function(e){return[parseInt(e,16)]});var r=0,n={};return e.split(",").forEach((function(e){var i=e.split(":");r+=parseInt(i[0],16),n[r]=t(i[1])})),n}function Ji(e){var t=0;return e.split(",").map((function(e){var r=e.split("-");return 1===r.length?r[1]="0":""===r[1]&&(r[1]="1"),{l:t+parseInt(r[0],16),h:t=parseInt(r[1],16)}}))}function Xi(e,t){for(var r=0,n=0;n<t.length;n++){var i=t[n];if(e>=(r+=i.l)&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&-1!==i.e.indexOf(e-r))continue;return i}}return null}var $i=Ji("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Yi="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((function(e){return parseInt(e,16)})),Qi=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],eo=Hi("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),to=Hi("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),ro=Hi("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(e){if(e.length%4!==0)throw new Error("bad data");for(var t=[],r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t})),no=Ji("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function io(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();var t,r=Ki(e);t=r.map((function(e){if(Yi.indexOf(e)>=0)return[];if(e>=65024&&e<=65039)return[];var t=function(e){var t=Xi(e,Qi);if(t)return[e+t.s];var r=eo[e];if(r)return r;var n=to[e];return n?[e+n[0]]:ro[e]||null}(e);return t||[e]})),r=t.reduce((function(e,t){return t.forEach((function(t){e.push(t)})),e}),[]),(r=Ki(Vi(r),Zi.NFKC)).forEach((function(e){if(Xi(e,no))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),r.forEach((function(e){if(Xi(e,$i))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));var n=Vi(r);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");return n}function oo(e){return"0x"+Fe().keccak_256(Pi(e))}var ao="hash/5.6.1",so=new _i(ao),uo=new Uint8Array(32);uo.fill(0);var co=new RegExp("^((.*)\\.)?([^.]+)$");function fo(e){try{for(var t=e.split("."),r=0;r<t.length;r++)if(0===io(t[r]).length)throw new Error("empty");return!0}catch(n){}return!1}function lo(e){"string"!==typeof e&&so.throwArgumentError("invalid ENS name; not a string","name",e);for(var t=e,r=uo;t.length;){var n=t.match(co);null!=n&&""!==n[2]||so.throwArgumentError("invalid ENS address; missing component","name",e),r=oo(Oi([r,oo(qi(io(n[3])))])),t=n[2]||""}return Fi(r)}function ho(e){return Fi(Oi(e.split(".").map((function(e){var t=qi("_"+io(e));return t[0]=t.length-1,t}))))+"00"}var po="\x19Ethereum Signed Message:\n";function vo(e){return"string"===typeof e&&(e=qi(e)),oo(Oi([qi(po),qi(String(e.length)),e]))}function go(e){return oo(qi(e))}var mo=be().BN,yo=new _i("bignumber/5.7.0"),bo={},Eo=9007199254740991;var wo=!1,No=function(){function e(t,r){(0,N.Z)(this,e),t!==bo&&yo.throwError("cannot call constructor directly; use BigNumber.from",_i.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Ao(xo(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Ao(xo(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Ao(xo(this).add(xo(e)))}},{key:"sub",value:function(e){return Ao(xo(this).sub(xo(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&_o("division-by-zero","div"),Ao(xo(this).div(xo(t)))}},{key:"mul",value:function(e){return Ao(xo(this).mul(xo(e)))}},{key:"mod",value:function(e){var t=xo(e);return t.isNeg()&&_o("division-by-zero","mod"),Ao(xo(this).umod(t))}},{key:"pow",value:function(e){var t=xo(e);return t.isNeg()&&_o("negative-power","pow"),Ao(xo(this).pow(t))}},{key:"and",value:function(e){var t=xo(e);return(this.isNegative()||t.isNeg())&&_o("unbound-bitwise-result","and"),Ao(xo(this).and(t))}},{key:"or",value:function(e){var t=xo(e);return(this.isNegative()||t.isNeg())&&_o("unbound-bitwise-result","or"),Ao(xo(this).or(t))}},{key:"xor",value:function(e){var t=xo(e);return(this.isNegative()||t.isNeg())&&_o("unbound-bitwise-result","xor"),Ao(xo(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&_o("negative-width","mask"),Ao(xo(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&_o("negative-width","shl"),Ao(xo(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&_o("negative-width","shr"),Ao(xo(this).shrn(e))}},{key:"eq",value:function(e){return xo(this).eq(xo(e))}},{key:"lt",value:function(e){return xo(this).lt(xo(e))}},{key:"lte",value:function(e){return xo(this).lte(xo(e))}},{key:"gt",value:function(e){return xo(this).gt(xo(e))}},{key:"gte",value:function(e){return xo(this).gte(xo(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return xo(this).isZero()}},{key:"toNumber",value:function(){try{return xo(this).toNumber()}catch(e){_o("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return yo.throwError("this platform does not support BigInt",_i.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?wo||(wo=!0,yo.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?yo.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",_i.errors.UNEXPECTED_ARGUMENT,{}):yo.throwError("BigNumber.toString does not accept parameters",_i.errors.UNEXPECTED_ARGUMENT,{})),xo(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(bo,ko(t)):t.match(/^-?[0-9]+$/)?new e(bo,ko(new mo(t))):yo.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&_o("underflow","BigNumber.from",t),(t>=Eo||t<=-9007199254740991)&&_o("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(Ci(r))return e.from(Fi(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(Ui(i)||"-"===i[0]&&Ui(i.substring(1))))return e.from(i)}return yo.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function ko(e){if("string"!==typeof e)return ko(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&yo.throwArgumentError("invalid hex","value",e),"0x00"===(e=ko(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Ao(e){return No.from(ko(e))}function xo(e){var t=No.from(e).toHexString();return"-"===t[0]?new mo("-"+t.substring(3),16):new mo(t.substring(2),16)}function _o(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),yo.throwError(e,_i.errors.NUMERIC_FAULT,n)}var So=new _i("address/5.7.0");function Io(e){Ui(e,20)||So.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=Pi(oo(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var Ro={},To=0;To<10;To++)Ro[String(To)]=String(To);for(var Co=0;Co<26;Co++)Ro[String.fromCharCode(65+Co)]=String(10+Co);var Po=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Oo(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return Ro[e]})).join("");t.length>=Po;){var r=t.substring(0,Po);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function Uo(e){var t,r=null;if("string"!==typeof e&&So.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=Io(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&So.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Oo(e)&&So.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new mo(t,36).toString(16);r.length<40;)r="0"+r;r=Io("0x"+r)}else So.throwArgumentError("invalid address","address",e);return r}var Mo=new _i("properties/5.7.0");function Fo(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function Do(e){var t={};for(var r in e)t[r]=e[r];return t}var Lo={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Zo(e){if(void 0===e||null===e||Lo[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch(i){continue}if(!Zo(n))return!1}return!0}return Mo.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function Bo(e){if(Zo(e))return e;if(Array.isArray(e))return Object.freeze(e.map((function(e){return Go(e)})));if("object"===typeof e){var t={};for(var r in e){var n=e[r];void 0!==n&&Fo(t,r,Go(n))}return t}return Mo.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function Go(e){return Bo(e)}var Wo=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},jo=new _i(ao),zo=new Uint8Array(32);zo.fill(0);var qo=No.from(-1),Vo=No.from(0),Ko=No.from(1),Ho=No.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Jo=Li(Ko.toHexString(),32),Xo=Li(Vo.toHexString(),32),$o={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Yo=["name","version","chainId","verifyingContract","salt"];function Qo(e){return function(t){return"string"!==typeof t&&jo.throwArgumentError("invalid domain value for ".concat(JSON.stringify(e)),"domain.".concat(e),t),t}}var ea={name:Qo("name"),version:Qo("version"),chainId:function(e){try{return No.from(e).toString()}catch(t){}return jo.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Uo(e).toLowerCase()}catch(t){}return jo.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{var t=Pi(e);if(32!==t.length)throw new Error("bad length");return Fi(t)}catch(r){}return jo.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function ta(e){var t=e.match(/^(u?)int(\d*)$/);if(t){var r=""===t[1],n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&jo.throwArgumentError("invalid numeric width","type",e);var i=Ho.mask(r?n-1:n),o=r?i.add(Ko).mul(qo):Vo;return function(t){var r=No.from(t);return(r.lt(o)||r.gt(i))&&jo.throwArgumentError("value out-of-bounds for ".concat(e),"value",t),Li(r.toTwos(256).toHexString(),32)}}var a=e.match(/^bytes(\d+)$/);if(a){var s=parseInt(a[1]);return(0===s||s>32||a[1]!==String(s))&&jo.throwArgumentError("invalid bytes width","type",e),function(t){return Pi(t).length!==s&&jo.throwArgumentError("invalid length for ".concat(e),"value",t),function(e){var t=Pi(e),r=t.length%32;return r?Di([t,zo.slice(r)]):Fi(t)}(t)}}switch(e){case"address":return function(e){return Li(Uo(e),32)};case"bool":return function(e){return e?Jo:Xo};case"bytes":return function(e){return oo(e)};case"string":return function(e){return go(e)}}return null}function ra(e,t){return"".concat(e,"(").concat(t.map((function(e){var t=e.name;return e.type+" "+t})).join(","),")")}var na=function(){function e(t){(0,N.Z)(this,e),Fo(this,"types",Object.freeze(Go(t))),Fo(this,"_encoderCache",{}),Fo(this,"_types",{});var r={},n={},i={};Object.keys(t).forEach((function(e){r[e]={},n[e]=[],i[e]={}}));var o=function(e){var i={};t[e].forEach((function(o){i[o.name]&&jo.throwArgumentError("duplicate variable name ".concat(JSON.stringify(o.name)," in ").concat(JSON.stringify(e)),"types",t),i[o.name]=!0;var a=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];a===e&&jo.throwArgumentError("circular type reference to ".concat(JSON.stringify(a)),"types",t),ta(a)||(n[a]||jo.throwArgumentError("unknown type ".concat(JSON.stringify(a)),"types",t),n[a].push(e),r[e][a]=!0)}))};for(var a in t)o(a);var s=Object.keys(n).filter((function(e){return 0===n[e].length}));for(var u in 0===s.length?jo.throwArgumentError("missing primary type","types",t):s.length>1&&jo.throwArgumentError("ambiguous primary types or unused types: ".concat(s.map((function(e){return JSON.stringify(e)})).join(", ")),"types",t),Fo(this,"primaryType",s[0]),function e(o,a){a[o]&&jo.throwArgumentError("circular type reference to ".concat(JSON.stringify(o)),"types",t),a[o]=!0,Object.keys(r[o]).forEach((function(t){n[t]&&(e(t,a),Object.keys(a).forEach((function(e){i[e][t]=!0})))})),delete a[o]}(this.primaryType,{}),i){var c=Object.keys(i[u]);c.sort(),this._types[u]=ra(u,t[u])+c.map((function(e){return ra(e,t[e])})).join("")}}return(0,k.Z)(e,[{key:"getEncoder",value:function(e){var t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}},{key:"_getEncoder",value:function(e){var t=this,r=ta(e);if(r)return r;var n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){var i=n[1],o=this.getEncoder(i),a=parseInt(n[3]);return function(e){a>=0&&e.length!==a&&jo.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);var r=e.map(o);return t._types[i]&&(r=r.map(oo)),oo(Di(r))}}var s=this.types[e];if(s){var u=go(this._types[e]);return function(e){var r=s.map((function(r){var n=r.name,i=r.type,o=t.getEncoder(i)(e[n]);return t._types[i]?oo(o):o}));return r.unshift(u),Di(r)}}return jo.throwArgumentError("unknown type: ".concat(e),"type",e)}},{key:"encodeType",value:function(e){var t=this._types[e];return t||jo.throwArgumentError("unknown type: ".concat(JSON.stringify(e)),"name",e),t}},{key:"encodeData",value:function(e,t){return this.getEncoder(e)(t)}},{key:"hashStruct",value:function(e,t){return oo(this.encodeData(e,t))}},{key:"encode",value:function(e){return this.encodeData(this.primaryType,e)}},{key:"hash",value:function(e){return this.hashStruct(this.primaryType,e)}},{key:"_visit",value:function(e,t,r){var n=this;if(ta(e))return r(e,t);var i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&jo.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((function(e){return n._visit(o,e,r)}))}var s=this.types[e];return s?s.reduce((function(e,i){var o=i.name,a=i.type;return e[o]=n._visit(a,t[o],r),e}),{}):jo.throwArgumentError("unknown type: ".concat(e),"type",e)}},{key:"visit",value:function(e,t){return this._visit(this.primaryType,e,t)}}],[{key:"from",value:function(t){return new e(t)}},{key:"getPrimaryType",value:function(t){return e.from(t).primaryType}},{key:"hashStruct",value:function(t,r,n){return e.from(r).hashStruct(t,n)}},{key:"hashDomain",value:function(t){var r=[];for(var n in t){var i=$o[n];i||jo.throwArgumentError("invalid typed-data domain key: ".concat(JSON.stringify(n)),"domain",t),r.push({name:n,type:i})}return r.sort((function(e,t){return Yo.indexOf(e.name)-Yo.indexOf(t.name)})),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)}},{key:"encode",value:function(t,r,n){return Di(["0x1901",e.hashDomain(t),e.from(r).hash(n)])}},{key:"hash",value:function(t,r,n){return oo(e.encode(t,r,n))}},{key:"resolveNames",value:function(t,r,n,i){return Wo(this,void 0,void 0,(0,B.Z)().mark((function o(){var a,s,u;return(0,B.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=Do(t),a={},t.verifyingContract&&!Ui(t.verifyingContract,20)&&(a[t.verifyingContract]="0x"),(s=e.from(r)).visit(n,(function(e,t){return"address"!==e||Ui(t,20)||(a[t]="0x"),t})),o.t0=(0,B.Z)().keys(a);case 6:if((o.t1=o.t0()).done){o.next=13;break}return u=o.t1.value,o.next=10,i(u);case 10:a[u]=o.sent,o.next=6;break;case 13:return t.verifyingContract&&a[t.verifyingContract]&&(t.verifyingContract=a[t.verifyingContract]),n=s.visit(n,(function(e,t){return"address"===e&&a[t]?a[t]:t})),o.abrupt("return",{domain:t,value:n});case 16:case"end":return o.stop()}}),o)})))}},{key:"getPayload",value:function(t,r,n){e.hashDomain(t);var i={},o=[];Yo.forEach((function(e){var r=t[e];null!=r&&(i[e]=ea[e](r),o.push({name:e,type:$o[e]}))}));var a=e.from(r),s=Do(r);return s.EIP712Domain?jo.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):s.EIP712Domain=o,a.encode(n),{types:s,domain:i,primaryType:a.primaryType,message:a.visit(n,(function(e,t){if(e.match(/^bytes(\d*)/))return Fi(Pi(t));if(e.match(/^u?int/))return No.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!==typeof t&&jo.throwArgumentError("invalid string","value",t),t}return jo.throwArgumentError("unsupported type","type",e)}))}}}]),e}(),ia=!1,oa=!1,aa={debug:1,default:2,info:2,warning:3,error:4,off:5},sa=aa.default,ua=null;var ca,fa,la=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(ca||(ca={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(fa||(fa={}));var ha="0123456789abcdef",da=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==aa[r]&&this.throwArgumentError("invalid log level name","logLevel",e),sa>aa[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(oa)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=ha[t[o]>>4],r+=ha[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case fa.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case fa.CALL_EXCEPTION:case fa.INSUFFICIENT_FUNDS:case fa.MISSING_NEW:case fa.NONCE_EXPIRED:case fa.REPLACEMENT_UNDERPRICED:case fa.TRANSACTION_REPLACED:case fa.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),la&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:la})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return ua||(ua=new e("logger/5.7.0")),ua}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ia){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}oa=!!t,ia=!!r}},{key:"setLogLevel",value:function(t){var r=aa[t.toLowerCase()];null!=r?sa=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();da.errors=fa,da.levels=ca;var pa=new da("bytes/5.7.0");function va(e){return!!e.toHexString}function ga(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return ga(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function ma(e){return"number"===typeof e&&e==e&&e%1===0}function ya(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!ma(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!ma(r)||r<0||r>=256)return!1}return!0}function ba(e,t){if(t||(t={}),"number"===typeof e){pa.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),ga(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),va(e)&&(e=e.toHexString()),wa(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":pa.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return ga(new Uint8Array(i))}return ya(e)?ga(new Uint8Array(e)):pa.throwArgumentError("invalid arrayify value","value",e)}function Ea(e){var t=e.map((function(e){return ba(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),ga(n)}function wa(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Na="0123456789abcdef";function ka(e,t){if(t||(t={}),"number"===typeof e){pa.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=Na[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),va(e))return e.toHexString();if(wa(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":pa.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(ya(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=Na[(240&o)>>4]+Na[15&o]}return n}return pa.throwArgumentError("invalid hexlify value","value",e)}function Aa(e,t,r){return"string"!==typeof e?e=ka(e):(!wa(e)||e.length%2)&&pa.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function xa(e,t){for("string"!==typeof e?e=ka(e):wa(e)||pa.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&pa.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function _a(e){var t,r={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(wa(t=e)&&!(t.length%2)||ya(t)){var n=ba(e);64===n.length?(r.v=27+(n[32]>>7),n[32]&=127,r.r=ka(n.slice(0,32)),r.s=ka(n.slice(32,64))):65===n.length?(r.r=ka(n.slice(0,32)),r.s=ka(n.slice(32,64)),r.v=n[64]):pa.throwArgumentError("invalid signature string","signature",e),r.v<27&&(0===r.v||1===r.v?r.v+=27:pa.throwArgumentError("signature invalid v byte","signature",e)),r.recoveryParam=1-r.v%2,r.recoveryParam&&(n[32]|=128),r._vs=ka(n.slice(32,64))}else{if(r.r=e.r,r.s=e.s,r.v=e.v,r.recoveryParam=e.recoveryParam,r._vs=e._vs,null!=r._vs){var i=function(e,t){(e=ba(e)).length>t&&pa.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(t);return r.set(e,t-e.length),ga(r)}(ba(r._vs),32);r._vs=ka(i);var o=i[0]>=128?1:0;null==r.recoveryParam?r.recoveryParam=o:r.recoveryParam!==o&&pa.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),i[0]&=127;var a=ka(i);null==r.s?r.s=a:r.s!==a&&pa.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==r.recoveryParam)null==r.v?pa.throwArgumentError("signature missing v and recoveryParam","signature",e):0===r.v||1===r.v?r.recoveryParam=r.v:r.recoveryParam=1-r.v%2;else if(null==r.v)r.v=27+r.recoveryParam;else{var s=0===r.v||1===r.v?r.v:1-r.v%2;r.recoveryParam!==s&&pa.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=r.r&&wa(r.r)?r.r=xa(r.r,32):pa.throwArgumentError("signature missing or invalid r","signature",e),null!=r.s&&wa(r.s)?r.s=xa(r.s,32):pa.throwArgumentError("signature missing or invalid s","signature",e);var u=ba(r.s);u[0]>=128&&pa.throwArgumentError("signature s out of range","signature",e),r.recoveryParam&&(u[0]|=128);var c=ka(u);r._vs&&(wa(r._vs)||pa.throwArgumentError("signature invalid _vs","signature",e),r._vs=xa(r._vs,32)),null==r._vs?r._vs=c:r._vs!==c&&pa.throwArgumentError("signature _vs mismatch v and s","signature",e)}return r.yParityAndS=r._vs,r.compact=r.r+r.yParityAndS.substring(2),r}new da("properties/5.7.0");function Sa(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}var Ia=function(){function e(t){(0,N.Z)(this,e),Sa(this,"alphabet",t),Sa(this,"base",t.length),Sa(this,"_alphabetMap",{}),Sa(this,"_leader",t.charAt(0));for(var r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}return(0,k.Z)(e,[{key:"encode",value:function(e){var t=ba(e);if(0===t.length)return"";for(var r=[0],n=0;n<t.length;++n){for(var i=t[n],o=0;o<r.length;++o)i+=r[o]<<8,r[o]=i%this.base,i=i/this.base|0;for(;i>0;)r.push(i%this.base),i=i/this.base|0}for(var a="",s=0;0===t[s]&&s<t.length-1;++s)a+=this._leader;for(var u=r.length-1;u>=0;--u)a+=this.alphabet[r[u]];return a}},{key:"decode",value:function(e){if("string"!==typeof e)throw new TypeError("Expected String");var t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(var r=0;r<e.length;r++){var n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");for(var i=n,o=0;o<t.length;++o)i+=t[o]*this.base,t[o]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(var a=0;e[a]===this._leader&&a<e.length-1;++a)t.push(0);return ba(new Uint8Array(t.reverse()))}}]),e}(),Ra=(new Ia("abcdefghijklmnopqrstuvwxyz234567"),new Ia("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Ta=be().BN,Ca=new da("bignumber/5.7.0"),Pa={},Oa=9007199254740991;var Ua=!1,Ma=function(){function e(t,r){(0,N.Z)(this,e),t!==Pa&&Ca.throwError("cannot call constructor directly; use BigNumber.from",da.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Da(La(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Da(La(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Da(La(this).add(La(e)))}},{key:"sub",value:function(e){return Da(La(this).sub(La(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Za("division-by-zero","div"),Da(La(this).div(La(t)))}},{key:"mul",value:function(e){return Da(La(this).mul(La(e)))}},{key:"mod",value:function(e){var t=La(e);return t.isNeg()&&Za("division-by-zero","mod"),Da(La(this).umod(t))}},{key:"pow",value:function(e){var t=La(e);return t.isNeg()&&Za("negative-power","pow"),Da(La(this).pow(t))}},{key:"and",value:function(e){var t=La(e);return(this.isNegative()||t.isNeg())&&Za("unbound-bitwise-result","and"),Da(La(this).and(t))}},{key:"or",value:function(e){var t=La(e);return(this.isNegative()||t.isNeg())&&Za("unbound-bitwise-result","or"),Da(La(this).or(t))}},{key:"xor",value:function(e){var t=La(e);return(this.isNegative()||t.isNeg())&&Za("unbound-bitwise-result","xor"),Da(La(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Za("negative-width","mask"),Da(La(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Za("negative-width","shl"),Da(La(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Za("negative-width","shr"),Da(La(this).shrn(e))}},{key:"eq",value:function(e){return La(this).eq(La(e))}},{key:"lt",value:function(e){return La(this).lt(La(e))}},{key:"lte",value:function(e){return La(this).lte(La(e))}},{key:"gt",value:function(e){return La(this).gt(La(e))}},{key:"gte",value:function(e){return La(this).gte(La(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return La(this).isZero()}},{key:"toNumber",value:function(){try{return La(this).toNumber()}catch(e){Za("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return Ca.throwError("this platform does not support BigInt",da.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?Ua||(Ua=!0,Ca.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Ca.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",da.errors.UNEXPECTED_ARGUMENT,{}):Ca.throwError("BigNumber.toString does not accept parameters",da.errors.UNEXPECTED_ARGUMENT,{})),La(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Pa,Fa(t)):t.match(/^-?[0-9]+$/)?new e(Pa,Fa(new Ta(t))):Ca.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Za("underflow","BigNumber.from",t),(t>=Oa||t<=-9007199254740991)&&Za("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(ya(r))return e.from(ka(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(wa(i)||"-"===i[0]&&wa(i.substring(1))))return e.from(i)}return Ca.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function Fa(e){if("string"!==typeof e)return Fa(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Ca.throwArgumentError("invalid hex","value",e),"0x00"===(e=Fa(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Da(e){return Ma.from(Fa(e))}function La(e){var t=Ma.from(e).toHexString();return"-"===t[0]?new Ta("-"+t.substring(3),16):new Ta(t.substring(2),16)}function Za(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),Ca.throwError(e,da.errors.NUMERIC_FAULT,n)}var Ba,Ga,Wa=new da("strings/5.7.0");function ja(e,t,r,n,i){if(e===Ga.BAD_PREFIX||e===Ga.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===Ga.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Ba||(Ba={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Ga||(Ga={}));Object.freeze({error:function(e,t,r,n,i){return Wa.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:ja,replace:function(e,t,r,n,i){return e===Ga.OVERLONG?(n.push(i),0):(n.push(65533),ja(e,t,r))}});function za(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ba.current;t!=Ba.current&&(Wa.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return ba(r)}var qa,Va=r(37553),Ka=r.n(Va);!function(e){e.sha256="sha256",e.sha512="sha512"}(qa||(qa={}));var Ha=new da("sha2/5.7.0");function Ja(e){return"0x"+Ka().sha256().update(ba(e)).digest("hex")}function Xa(e,t,r){return qa[e]||Ha.throwError("unsupported algorithm "+e,da.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Ka().hmac(Ka()[e],ba(t)).update(ba(r)).digest("hex")}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self&&self;function $a(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&r.path)}},e(r,r.exports),r.exports}var Ya=Qa;function Qa(e,t){if(!e)throw new Error(t||"Assertion failed")}Qa.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var es=$a((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),ts=$a((function(e,t){var r=t;r.assert=Ya,r.toArray=es.toArray,r.zero2=es.zero2,r.toHex=es.toHex,r.encode=es.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0===(1&u)?0:3!==(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),s=0===(1&c)?0:3!==(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"===typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(be())(e,"hex","le")}})),rs=ts.getNAF,ns=ts.getJSF,is=ts.assert;function os(e,t){this.type=e,this.p=new(be())(t.p,16),this.red=t.prime?be().red(t.prime):be().mont(this.p),this.zero=new(be())(0).toRed(this.red),this.one=new(be())(1).toRed(this.red),this.two=new(be())(2).toRed(this.red),this.n=t.n&&new(be())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var as=os;function ss(e,t){this.curve=e,this.type=t,this.precomputed=null}os.prototype.point=function(){throw new Error("Not implemented")},os.prototype.validate=function(){throw new Error("Not implemented")},os.prototype._fixedNafMul=function(e,t){is(e.precomputed);var r=e._getDoubles(),n=rs(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var o,a,s=[];for(o=0;o<n.length;o+=r.step){a=0;for(var u=o+r.step-1;u>=o;u--)a=(a<<1)+n[u];s.push(a)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<s.length;o++)(a=s[o])===l?f=f.mixedAdd(r.points[o]):a===-l&&(f=f.mixedAdd(r.points[o].neg()));c=c.add(f)}return c.toP()},os.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=rs(t,r,this._bitLength),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var u=0;s>=0&&0===o[s];s--)u++;if(s>=0&&u++,a=a.dblp(u),s<0)break;var c=o[s];is(0!==c),a="affine"===e.type?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg())}return"affine"===e.type?a.toP():a},os.prototype._wnafMulAdd=function(e,t,r,n,i){var o,a,s,u=this._wnafT1,c=this._wnafT2,f=this._wnafT3,l=0;for(o=0;o<n;o++){var h=(s=t[o])._getNAFPoints(e);u[o]=h.wnd,c[o]=h.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var v=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(v[1]=t[d].add(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].add(t[p].neg())):(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=ns(r[d],r[p]);for(l=Math.max(m[0].length,l),f[d]=new Array(l),f[p]=new Array(l),a=0;a<l;a++){var y=0|m[0][a],b=0|m[1][a];f[d][a]=g[3*(y+1)+(b+1)],f[p][a]=0,c[d]=v}}else f[d]=rs(r[d],u[d],this._bitLength),f[p]=rs(r[p],u[p],this._bitLength),l=Math.max(f[d].length,l),l=Math.max(f[p].length,l)}var E=this.jpoint(null,null,null),w=this._wnafT4;for(o=l;o>=0;o--){for(var N=0;o>=0;){var k=!0;for(a=0;a<n;a++)w[a]=0|f[a][o],0!==w[a]&&(k=!1);if(!k)break;N++,o--}if(o>=0&&N++,E=E.dblp(N),o<0)break;for(a=0;a<n;a++){var A=w[a];0!==A&&(A>0?s=c[a][A-1>>1]:A<0&&(s=c[a][-A-1>>1].neg()),E="affine"===s.type?E.mixedAdd(s):E.add(s))}}for(o=0;o<n;o++)c[o]=null;return i?E:E.toP()},os.BasePoint=ss,ss.prototype.eq=function(){throw new Error("Not implemented")},ss.prototype.validate=function(){return this.curve.validate(this)},os.prototype.decodePoint=function(e,t){e=ts.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?is(e[e.length-1]%2===0):7===e[0]&&is(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},ss.prototype.encodeCompressed=function(e){return this.encode(e,!0)},ss.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},ss.prototype.encode=function(e,t){return ts.encode(this._encode(t),e)},ss.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},ss.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},ss.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},ss.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},ss.prototype._getBeta=function(){return null},ss.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var us=$a((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),cs=ts.assert;function fs(e){as.call(this,"short",e),this.a=new(be())(e.a,16).toRed(this.red),this.b=new(be())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}us(fs,as);var ls=fs;function hs(e,t,r,n){as.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(be())(t,16),this.y=new(be())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ds(e,t,r,n){as.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(be())(0)):(this.x=new(be())(t,16),this.y=new(be())(r,16),this.z=new(be())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}fs.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(be())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(be())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],cs(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(be())(e.a,16),b:new(be())(e.b,16)}})):this._getEndoBasis(r)}}},fs.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:be().mont(e),r=new(be())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(be())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},fs.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,a,s,u,c,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,h=this.n.clone(),d=new(be())(1),p=new(be())(0),v=new(be())(0),g=new(be())(1),m=0;0!==l.cmpn(0);){var y=h.div(l);u=h.sub(y.mul(l)),c=v.sub(y.mul(d));var b=g.sub(y.mul(p));if(!n&&u.cmp(f)<0)t=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++m)break;s=u,h=l,l=u,v=d,d=c,g=p,p=b}o=u.neg(),a=c;var E=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(E)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},fs.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(a).sub(s),k2:u.add(c).neg()}},fs.prototype.pointFromX=function(e,t){(e=new(be())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},fs.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},fs.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return c},us(hs,as.BasePoint),fs.prototype.point=function(e,t,r){return new hs(this,e,t,r)},fs.prototype.pointFromJSON=function(e,t){return hs.fromJSON(this,e,t)},hs.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},hs.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},hs.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},hs.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},hs.prototype.isInfinity=function(){return this.inf},hs.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},hs.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},hs.prototype.getX=function(){return this.x.fromRed()},hs.prototype.getY=function(){return this.y.fromRed()},hs.prototype.mul=function(e){return e=new(be())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},hs.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},hs.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},hs.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},hs.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},hs.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},us(ds,as.BasePoint),fs.prototype.jpoint=function(e,t,r){return new ds(this,e,t,r)},ds.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},ds.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ds.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),f=c.redMul(s),l=n.redMul(c),h=u.redSqr().redIAdd(f).redISub(l).redISub(l),d=u.redMul(l.redISub(h)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},ds.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),f=r.redMul(u),l=s.redSqr().redIAdd(c).redISub(f).redISub(f),h=s.redMul(f.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(l,h,d)},ds.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),l=c.redSqr(),h=l.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(u)),p=o.redMul(l),v=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(v),m=d.redMul(g);m=m.redIAdd(m).redISub(h);var y=c.redMul(s);t+1<e&&(u=u.redMul(h)),o=v,s=y,c=m}return this.curve.jpoint(o,c.redMul(i),s)},ds.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ds.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(f).redISub(h);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),v=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},ds.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),h=this.x.redMul(l),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},ds.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),f=s.redSqr().redISub(c.redAdd(c)),l=c.redISub(f),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(l).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,d,p)},ds.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),f=t.redMul(c);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(s).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(l,h,d)},ds.prototype.mul=function(e,t){return e=new(be())(e,t),this.curve._wnafMul(this,e)},ds.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},ds.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ds.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ds.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var ps=$a((function(e,t){var r=t;r.base=as,r.short=ls,r.mont=null,r.edwards=null})),vs=$a((function(e,t){var r,n=t,i=ts.assert;function o(e){"short"===e.type?this.curve=new ps.short(e):"edwards"===e.type?this.curve=new ps.edwards(e):this.curve=new ps.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ka().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ka().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ka().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ka().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ka().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(s){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ka().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function gs(e){if(!(this instanceof gs))return new gs(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=es.toArray(e.entropy,e.entropyEnc||"hex"),r=es.toArray(e.nonce,e.nonceEnc||"hex"),n=es.toArray(e.pers,e.persEnc||"hex");Ya(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var ms=gs;gs.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},gs.prototype._hmac=function(){return new(Ka().hmac)(this.hash,this.K)},gs.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},gs.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=es.toArray(e,t),r=es.toArray(r,n),Ya(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},gs.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=es.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,es.encode(o,t)};var ys=ts.assert;function bs(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Es=bs;bs.fromPublic=function(e,t,r){return t instanceof bs?t:new bs(e,{pub:t,pubEnc:r})},bs.fromPrivate=function(e,t,r){return t instanceof bs?t:new bs(e,{priv:t,privEnc:r})},bs.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},bs.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},bs.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},bs.prototype._importPrivate=function(e,t){this.priv=new(be())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},bs.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?ys(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||ys(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},bs.prototype.derive=function(e){return e.validate()||ys(e.validate(),"public point not validated"),e.mul(this.priv).getX()},bs.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},bs.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},bs.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var ws=ts.assert;function Ns(e,t){if(e instanceof Ns)return e;this._importDER(e,t)||(ws(e.r&&e.s,"Signature without r or s"),this.r=new(be())(e.r,16),this.s=new(be())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var ks=Ns;function As(){this.place=0}function xs(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=t.place;o<n;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function _s(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Ss(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Ns.prototype._importDER=function(e,t){e=ts.toArray(e,t);var r=new As;if(48!==e[r.place++])return!1;var n=xs(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=xs(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var a=xs(e,r);if(!1===a)return!1;if(e.length!==a+r.place)return!1;var s=e.slice(r.place,a+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new(be())(o),this.s=new(be())(s),this.recoveryParam=null,!0},Ns.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=_s(t),r=_s(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];Ss(n,t.length),(n=n.concat(t)).push(2),Ss(n,r.length);var i=n.concat(r),o=[48];return Ss(o,i.length),o=o.concat(i),ts.encode(o,e)};var Is=function(){throw new Error("unsupported")},Rs=ts.assert;function Ts(e){if(!(this instanceof Ts))return new Ts(e);"string"===typeof e&&(Rs(Object.prototype.hasOwnProperty.call(vs,e),"Unknown curve "+e),e=vs[e]),e instanceof vs.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Cs=Ts;Ts.prototype.keyPair=function(e){return new Es(this,e)},Ts.prototype.keyFromPrivate=function(e,t){return Es.fromPrivate(this,e,t)},Ts.prototype.keyFromPublic=function(e,t){return Es.fromPublic(this,e,t)},Ts.prototype.genKeyPair=function(e){e||(e={});for(var t=new ms({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Is(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(be())(2));;){var i=new(be())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Ts.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Ts.prototype.sign=function(e,t,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(be())(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i),s=new ms({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(be())(1)),c=0;;c++){var f=n.k?n.k(c):new(be())(s.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var h=l.getX(),d=h.umod(this.n);if(0!==d.cmpn(0)){var p=f.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var v=(l.getY().isOdd()?1:0)|(0!==h.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),v^=1),new ks({r:d,s:p,recoveryParam:v})}}}}}},Ts.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(be())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new ks(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,s=o.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},Ts.prototype.recoverPubKey=function(e,t,r,n){Rs((3&r)===r,"The recovery param is more than two bits"),t=new ks(t,n);var i=this.n,o=new(be())(e),a=t.r,s=t.s,u=1&r,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");a=c?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var f=t.r.invm(i),l=i.sub(o).mul(f).umod(i),h=s.mul(f).umod(i);return this.g.mulAdd(l,a,h)},Ts.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new ks(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Ps=$a((function(e,t){var r=t;r.version="6.5.4",r.utils=ts,r.rand=function(){throw new Error("unsupported")},r.curve=ps,r.curves=vs,r.ec=Cs,r.eddsa=null})).ec,Os=new da("signing-key/5.7.0"),Us=null;function Ms(){return Us||(Us=new Ps("secp256k1")),Us}var Fs=function(){function e(t){(0,N.Z)(this,e),Sa(this,"curve","secp256k1"),Sa(this,"privateKey",ka(t)),32!==function(e){if("string"!==typeof e)e=ka(e);else if(!wa(e)||e.length%2)return null;return(e.length-2)/2}(this.privateKey)&&Os.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var r=Ms().keyFromPrivate(ba(this.privateKey));Sa(this,"publicKey","0x"+r.getPublic(!1,"hex")),Sa(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Sa(this,"_isSigningKey",!0)}return(0,k.Z)(e,[{key:"_addPoint",value:function(e){var t=Ms().keyFromPublic(ba(this.publicKey)),r=Ms().keyFromPublic(ba(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(e){var t=Ms().keyFromPrivate(ba(this.privateKey)),r=ba(e);32!==r.length&&Os.throwArgumentError("bad digest length","digest",e);var n=t.sign(r,{canonical:!0});return _a({recoveryParam:n.recoveryParam,r:xa("0x"+n.r.toString(16),32),s:xa("0x"+n.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(e){var t=Ms().keyFromPrivate(ba(this.privateKey)),r=Ms().keyFromPublic(ba(Ds(e)));return xa("0x"+t.derive(r.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(e){return!(!e||!e._isSigningKey)}}]),e}();function Ds(e,t){var r=ba(e);if(32===r.length){var n=new Fs(r);return t?"0x"+Ms().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}return 33===r.length?t?ka(r):"0x"+Ms().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Ms().keyFromPublic(r).getPublic(!0,"hex"):ka(r):Os.throwArgumentError("invalid public or private key","key","[REDACTED]")}function Ls(e){return"0x"+Fe().keccak_256(ba(e))}var Zs=new da("address/5.7.0");function Bs(e){wa(e,20)||Zs.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=ba(Ls(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var Gs={},Ws=0;Ws<10;Ws++)Gs[String(Ws)]=String(Ws);for(var js=0;js<26;js++)Gs[String.fromCharCode(65+js)]=String(10+js);var zs=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function qs(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return Gs[e]})).join("");t.length>=zs;){var r=t.substring(0,zs);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function Vs(e){var t,r=null;if("string"!==typeof e&&Zs.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=Bs(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&Zs.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==qs(e)&&Zs.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new Ta(t,36).toString(16);r.length<40;)r="0"+r;r=Bs("0x"+r)}else Zs.throwArgumentError("invalid address","address",e);return r}var Ks;new da("transactions/5.7.0");!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Ks||(Ks={}));function Hs(e){return Vs(Aa(Ls(Aa(Ds(e),1)),12))}var Js=new da("wordlists/5.7.0"),Xs=function(){function e(t){(0,N.Z)(this,e),Js.checkAbstract(this instanceof e?this.constructor:void 0,e),Sa(this,"locale",t)}return(0,k.Z)(e,[{key:"split",value:function(e){return e.toLowerCase().split(/ +/g)}},{key:"join",value:function(e){return e.join(" ")}}],[{key:"check",value:function(e){for(var t=[],r=0;r<2048;r++){var n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Ls(za(t.join("\n")+"\n"))}},{key:"register",value:function(e,t){t||(t=e.locale)}}]),e}(),$s=null;function Ys(e){if(null==$s&&($s="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Xs.check(e)))throw $s=null,new Error("BIP39 Wordlist for en (English) FAILED")}var Qs=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.call(this,"en")}return(0,k.Z)(r,[{key:"getWord",value:function(e){return Ys(this),$s[e]}},{key:"getWordIndex",value:function(e){return Ys(this),$s.indexOf(e)}}]),r}(Xs),eu=new Qs;Xs.register(eu);var tu={en:eu},ru=new da("hdnode/5.6.2"),nu=Ma.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),iu=za("Bitcoin seed"),ou=2147483648;function au(e){return(1<<e)-1<<8-e}function su(e){return xa(ka(e),32)}function uu(e){return Ra.encode(Ea([e,Aa(Ja(Ja(e)),0,4)]))}function cu(e){if(null==e)return tu.en;if("string"===typeof e){var t=tu[e];return null==t&&ru.throwArgumentError("unknown locale","wordlist",e),t}return e}var fu={},lu="m/44'/60'/0'/0/0",hu=function(){function e(t,r,n,i,o,a,s,u){if((0,N.Z)(this,e),t!==fu)throw new Error("HDNode constructor cannot be called directly");if(r){var c=new Fs(r);Sa(this,"privateKey",c.privateKey),Sa(this,"publicKey",c.compressedPublicKey)}else Sa(this,"privateKey",null),Sa(this,"publicKey",ka(n));var f;Sa(this,"parentFingerprint",i),Sa(this,"fingerprint",Aa((f=Ja(this.publicKey),"0x"+Ka().ripemd160().update(ba(f)).digest("hex")),0,4)),Sa(this,"address",Hs(this.publicKey)),Sa(this,"chainCode",o),Sa(this,"index",a),Sa(this,"depth",s),null==u?(Sa(this,"mnemonic",null),Sa(this,"path",null)):"string"===typeof u?(Sa(this,"mnemonic",null),Sa(this,"path",u)):(Sa(this,"mnemonic",u),Sa(this,"path",u.path))}return(0,k.Z)(e,[{key:"extendedKey",get:function(){if(this.depth>=256)throw new Error("Depth too large!");return uu(Ea([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",ka(this.depth),this.parentFingerprint,xa(ka(this.index),4),this.chainCode,null!=this.privateKey?Ea(["0x00",this.privateKey]):this.publicKey]))}},{key:"neuter",value:function(){return new e(fu,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}},{key:"_derive",value:function(t){if(t>4294967295)throw new Error("invalid index - "+String(t));var r=this.path;r&&(r+="/"+(t&~ou));var n=new Uint8Array(37);if(t&ou){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(ba(this.privateKey),1),r&&(r+="'")}else n.set(ba(this.publicKey));for(var i=24;i>=0;i-=8)n[33+(i>>3)]=t>>24-i&255;var o=ba(Xa(qa.sha512,this.chainCode,n)),a=o.slice(0,32),s=o.slice(32),u=null,c=null;this.privateKey?u=su(Ma.from(a).add(this.privateKey).mod(nu)):c=new Fs(ka(a))._addPoint(this.publicKey);var f=r,l=this.mnemonic;return l&&(f=Object.freeze({phrase:l.phrase,path:r,locale:l.locale||"en"})),new e(fu,u,c,this.fingerprint,su(s),t,this.depth+1,f)}},{key:"derivePath",value:function(e){var t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();for(var r=this,n=0;n<t.length;n++){var i=t[n];if(i.match(/^[0-9]+'$/)){var o=parseInt(i.substring(0,i.length-1));if(o>=ou)throw new Error("invalid path index - "+i);r=r._derive(ou+o)}else{if(!i.match(/^[0-9]+$/))throw new Error("invalid path component - "+i);var a=parseInt(i);if(a>=ou)throw new Error("invalid path index - "+i);r=r._derive(a)}}return r}}],[{key:"_fromSeed",value:function(t,r){var n=ba(t);if(n.length<16||n.length>64)throw new Error("invalid seed");var i=ba(Xa(qa.sha512,iu,n));return new e(fu,su(i.slice(0,32)),null,"0x00000000",su(i.slice(32)),0,0,r)}},{key:"fromMnemonic",value:function(t,r,n){return t=vu(pu(t,n=cu(n)),n),e._fromSeed(du(t,r),{phrase:t,path:"m",locale:n.locale})}},{key:"fromSeed",value:function(t){return e._fromSeed(t,null)}},{key:"fromExtendedKey",value:function(t){var r=Ra.decode(t);82===r.length&&uu(r.slice(0,78))===t||ru.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");var n=r[4],i=ka(r.slice(5,9)),o=parseInt(ka(r.slice(9,13)).substring(2),16),a=ka(r.slice(13,45)),s=r.slice(45,78);switch(ka(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new e(fu,null,ka(s),i,a,o,n,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new e(fu,ka(s.slice(1)),null,i,a,o,n,null)}return ru.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}]),e}();function du(e,t){t||(t="");var r=za("mnemonic"+t,Ba.NFKD);return function(e,t,r,n,i){var o;e=ba(e),t=ba(t);var a,s,u=1,c=new Uint8Array(n),f=new Uint8Array(t.length+4);f.set(t);for(var l=1;l<=u;l++){f[t.length]=l>>24&255,f[t.length+1]=l>>16&255,f[t.length+2]=l>>8&255,f[t.length+3]=255&l;var h=ba(Xa(i,e,f));o||(o=h.length,s=new Uint8Array(o),a=n-((u=Math.ceil(n/o))-1)*o),s.set(h);for(var d=1;d<r;d++){h=ba(Xa(i,e,h));for(var p=0;p<o;p++)s[p]^=h[p]}var v=(l-1)*o,g=l===u?a:o;c.set(ba(s).slice(0,g),v)}return ka(c)}(za(e,Ba.NFKD),r,2048,64,"sha512")}function pu(e,t){t=cu(t),ru.checkNormalize();var r=t.split(e);if(r.length%3!==0)throw new Error("invalid mnemonic");for(var n=ba(new Uint8Array(Math.ceil(11*r.length/8))),i=0,o=0;o<r.length;o++){var a=t.getWordIndex(r[o].normalize("NFKD"));if(-1===a)throw new Error("invalid mnemonic");for(var s=0;s<11;s++)a&1<<10-s&&(n[i>>3]|=1<<7-i%8),i++}var u=32*r.length/3,c=au(r.length/3);if((ba(Ja(n.slice(0,u/8)))[0]&c)!==(n[n.length-1]&c))throw new Error("invalid checksum");return ka(n.slice(0,u/8))}function vu(e,t){if(t=cu(t),(e=ba(e)).length%4!==0||e.length<16||e.length>32)throw new Error("invalid entropy");for(var r=[0],n=11,i=0;i<e.length;i++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[i],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[i]>>8-n,r.push(e[i]&(1<<8-n)-1),n+=3);var o=e.length/4,a=ba(Ja(e))[0]&au(o);return r[r.length-1]<<=o,r[r.length-1]|=a>>8-o,t.join(r.map((function(e){return t.getWord(e)})))}function gu(e,t){try{return pu(e,t),!0}catch(r){}return!1}function mu(e){return("number"!==typeof e||e<0||e>=ou||e%1)&&ru.throwArgumentError("invalid account index","index",e),"m/44'/60'/".concat(e,"'/0/0")}var yu=!1,bu=!1,Eu={debug:1,default:2,info:2,warning:3,error:4,off:5},wu=Eu.default,Nu=null;var ku,Au,xu=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(ku||(ku={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Au||(Au={}));var _u="0123456789abcdef",Su=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Eu[r]&&this.throwArgumentError("invalid log level name","logLevel",e),wu>Eu[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(bu)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=_u[t[o]>>4],r+=_u[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case Au.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Au.CALL_EXCEPTION:case Au.INSUFFICIENT_FUNDS:case Au.MISSING_NEW:case Au.NONCE_EXPIRED:case Au.REPLACEMENT_UNDERPRICED:case Au.TRANSACTION_REPLACED:case Au.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),xu&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:xu})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Nu||(Nu=new e("logger/5.7.0")),Nu}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),yu){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}bu=!!t,yu=!!r}},{key:"setLogLevel",value:function(t){var r=Eu[t.toLowerCase()];null!=r?wu=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Su.errors=Au,Su.levels=ku;var Iu=new Su("bytes/5.7.0");function Ru(e){return!!e.toHexString}function Tu(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Tu(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Cu(e){return"number"===typeof e&&e==e&&e%1===0}function Pu(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Cu(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Cu(r)||r<0||r>=256)return!1}return!0}function Ou(e,t){if(t||(t={}),"number"===typeof e){Iu.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Tu(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ru(e)&&(e=e.toHexString()),Uu(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Iu.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Tu(new Uint8Array(i))}return Pu(e)?Tu(new Uint8Array(e)):Iu.throwArgumentError("invalid arrayify value","value",e)}function Uu(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Mu=be().BN;new Su("bignumber/5.7.0");var Fu=new Su("address/5.7.0");function Du(e){Uu(e,20)||Fu.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i,o=Ou((i=r,"0x"+Fe().keccak_256(Ou(i)))),a=0;a<40;a+=2)o[a>>1]>>4>=8&&(t[a]=t[a].toUpperCase()),(15&o[a>>1])>=8&&(t[a+1]=t[a+1].toUpperCase());return"0x"+t.join("")}for(var Lu={},Zu=0;Zu<10;Zu++)Lu[String(Zu)]=String(Zu);for(var Bu=0;Bu<26;Bu++)Lu[String.fromCharCode(65+Bu)]=String(10+Bu);var Gu=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Wu(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return Lu[e]})).join("");t.length>=Gu;){var r=t.substring(0,Gu);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function ju(e){var t,r=null;if("string"!==typeof e&&Fu.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=Du(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&Fu.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Wu(e)&&Fu.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new Mu(t,36).toString(16);r.length<40;)r="0"+r;r=Du("0x"+r)}else Fu.throwArgumentError("invalid address","address",e);return r}function zu(e){if(function(e){var t=null;try{t=JSON.parse(e)}catch(r){return!1}return t.encseed&&t.ethaddr}(e))try{return ju(JSON.parse(e).ethaddr)}catch(t){return null}if(function(e){var r=null;try{r=JSON.parse(e)}catch(t){return!1}return!(!r.version||parseInt(r.version)!==r.version||3!==parseInt(r.version))}(e))try{return ju(JSON.parse(e).address)}catch(t){return null}return null}var qu=!1,Vu=!1,Ku={debug:1,default:2,info:2,warning:3,error:4,off:5},Hu=Ku.default,Ju=null;var Xu,$u,Yu=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Xu||(Xu={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}($u||($u={}));var Qu="0123456789abcdef",ec=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Ku[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Hu>Ku[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Vu)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Qu[t[o]>>4],r+=Qu[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case $u.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case $u.CALL_EXCEPTION:case $u.INSUFFICIENT_FUNDS:case $u.MISSING_NEW:case $u.NONCE_EXPIRED:case $u.REPLACEMENT_UNDERPRICED:case $u.TRANSACTION_REPLACED:case $u.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Yu&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Yu})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Ju||(Ju=new e("logger/5.7.0")),Ju}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),qu){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Vu=!!t,qu=!!r}},{key:"setLogLevel",value:function(t){var r=Ku[t.toLowerCase()];null!=r?Hu=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();ec.errors=$u,ec.levels=Xu;var tc=new ec("bytes/5.7.0");function rc(e){return!!e.toHexString}function nc(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return nc(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function ic(e){return"number"===typeof e&&e==e&&e%1===0}function oc(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!ic(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!ic(r)||r<0||r>=256)return!1}return!0}function ac(e,t){if(t||(t={}),"number"===typeof e){tc.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),nc(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),rc(e)&&(e=e.toHexString()),sc(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":tc.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return nc(new Uint8Array(i))}return oc(e)?nc(new Uint8Array(e)):tc.throwArgumentError("invalid arrayify value","value",e)}function sc(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}function uc(e){return"0x"+Fe().keccak_256(ac(e))}var cc=!1,fc=!1,lc={debug:1,default:2,info:2,warning:3,error:4,off:5},hc=lc.default,dc=null;var pc,vc,gc=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(pc||(pc={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(vc||(vc={}));var mc="0123456789abcdef",yc=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==lc[r]&&this.throwArgumentError("invalid log level name","logLevel",e),hc>lc[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(fc)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=mc[t[o]>>4],r+=mc[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case vc.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case vc.CALL_EXCEPTION:case vc.INSUFFICIENT_FUNDS:case vc.MISSING_NEW:case vc.NONCE_EXPIRED:case vc.REPLACEMENT_UNDERPRICED:case vc.TRANSACTION_REPLACED:case vc.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),gc&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:gc})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return dc||(dc=new e("logger/5.6.0")),dc}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),cc){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}fc=!!t,cc=!!r}},{key:"setLogLevel",value:function(t){var r=lc[t.toLowerCase()];null!=r?hc=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();yc.errors=vc,yc.levels=pc;var bc=!1,Ec=!1,wc={debug:1,default:2,info:2,warning:3,error:4,off:5},Nc=wc.default,kc=null;var Ac,xc,_c=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Ac||(Ac={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(xc||(xc={}));var Sc="0123456789abcdef",Ic=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==wc[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Nc>wc[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Ec)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Sc[t[o]>>4],r+=Sc[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case xc.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case xc.CALL_EXCEPTION:case xc.INSUFFICIENT_FUNDS:case xc.MISSING_NEW:case xc.NONCE_EXPIRED:case xc.REPLACEMENT_UNDERPRICED:case xc.TRANSACTION_REPLACED:case xc.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),_c&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_c})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return kc||(kc=new e("logger/5.7.0")),kc}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),bc){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Ec=!!t,bc=!!r}},{key:"setLogLevel",value:function(t){var r=wc[t.toLowerCase()];null!=r?Nc=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Ic.errors=xc,Ic.levels=Ac;var Rc=new Ic("bytes/5.7.0");function Tc(e){return!!e.toHexString}function Cc(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Cc(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Pc(e){return"number"===typeof e&&e==e&&e%1===0}function Oc(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Pc(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Pc(r)||r<0||r>=256)return!1}return!0}function Uc(e,t){if(t||(t={}),"number"===typeof e){Rc.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Cc(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Tc(e)&&(e=e.toHexString()),Mc(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Rc.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Cc(new Uint8Array(i))}return Oc(e)?Cc(new Uint8Array(e)):Rc.throwArgumentError("invalid arrayify value","value",e)}function Mc(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Fc;!function(e){e.sha256="sha256",e.sha512="sha512"}(Fc||(Fc={}));var Dc=new Ic("sha2/5.6.1");function Lc(e){return"0x"+Ka().ripemd160().update(Uc(e)).digest("hex")}function Zc(e){return"0x"+Ka().sha256().update(Uc(e)).digest("hex")}function Bc(e){return"0x"+Ka().sha512().update(Uc(e)).digest("hex")}function Gc(e,t,r){return Fc[e]||Dc.throwError("unsupported algorithm "+e,Ic.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Ka().hmac(Ka()[e],Uc(t)).update(Uc(r)).digest("hex")}var Wc=!1,jc=!1,zc={debug:1,default:2,info:2,warning:3,error:4,off:5},qc=zc.default,Vc=null;var Kc,Hc,Jc=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Kc||(Kc={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Hc||(Hc={}));var Xc="0123456789abcdef",$c=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==zc[r]&&this.throwArgumentError("invalid log level name","logLevel",e),qc>zc[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(jc)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Xc[t[o]>>4],r+=Xc[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case Hc.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Hc.CALL_EXCEPTION:case Hc.INSUFFICIENT_FUNDS:case Hc.MISSING_NEW:case Hc.NONCE_EXPIRED:case Hc.REPLACEMENT_UNDERPRICED:case Hc.TRANSACTION_REPLACED:case Hc.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Jc&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Jc})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Vc||(Vc=new e("logger/5.7.0")),Vc}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Wc){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}jc=!!t,Wc=!!r}},{key:"setLogLevel",value:function(t){var r=zc[t.toLowerCase()];null!=r?qc=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();$c.errors=Hc,$c.levels=Kc;var Yc=new $c("bytes/5.7.0");function Qc(e){return!!e.toHexString}function ef(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return ef(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function tf(e){return"number"===typeof e&&e==e&&e%1===0}function rf(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!tf(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!tf(r)||r<0||r>=256)return!1}return!0}function nf(e,t){if(t||(t={}),"number"===typeof e){Yc.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),ef(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Qc(e)&&(e=e.toHexString()),sf(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Yc.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return ef(new Uint8Array(i))}return rf(e)?ef(new Uint8Array(e)):Yc.throwArgumentError("invalid arrayify value","value",e)}function of(e){var t=e.map((function(e){return nf(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),ef(n)}function af(e,t){(e=nf(e)).length>t&&Yc.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(t);return r.set(e,t-e.length),ef(r)}function sf(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var uf="0123456789abcdef";function cf(e,t){if(t||(t={}),"number"===typeof e){Yc.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=uf[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Qc(e))return e.toHexString();if(sf(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Yc.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(rf(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=uf[(240&o)>>4]+uf[15&o]}return n}return Yc.throwArgumentError("invalid hexlify value","value",e)}var ff=be().BN,lf=new $c("bignumber/5.7.0"),hf={},df=9007199254740991;var pf=!1,vf=function(){function e(t,r){(0,N.Z)(this,e),t!==hf&&lf.throwError("cannot call constructor directly; use BigNumber.from",$c.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return mf(yf(this).fromTwos(e))}},{key:"toTwos",value:function(e){return mf(yf(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return mf(yf(this).add(yf(e)))}},{key:"sub",value:function(e){return mf(yf(this).sub(yf(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&bf("division-by-zero","div"),mf(yf(this).div(yf(t)))}},{key:"mul",value:function(e){return mf(yf(this).mul(yf(e)))}},{key:"mod",value:function(e){var t=yf(e);return t.isNeg()&&bf("division-by-zero","mod"),mf(yf(this).umod(t))}},{key:"pow",value:function(e){var t=yf(e);return t.isNeg()&&bf("negative-power","pow"),mf(yf(this).pow(t))}},{key:"and",value:function(e){var t=yf(e);return(this.isNegative()||t.isNeg())&&bf("unbound-bitwise-result","and"),mf(yf(this).and(t))}},{key:"or",value:function(e){var t=yf(e);return(this.isNegative()||t.isNeg())&&bf("unbound-bitwise-result","or"),mf(yf(this).or(t))}},{key:"xor",value:function(e){var t=yf(e);return(this.isNegative()||t.isNeg())&&bf("unbound-bitwise-result","xor"),mf(yf(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&bf("negative-width","mask"),mf(yf(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&bf("negative-width","shl"),mf(yf(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&bf("negative-width","shr"),mf(yf(this).shrn(e))}},{key:"eq",value:function(e){return yf(this).eq(yf(e))}},{key:"lt",value:function(e){return yf(this).lt(yf(e))}},{key:"lte",value:function(e){return yf(this).lte(yf(e))}},{key:"gt",value:function(e){return yf(this).gt(yf(e))}},{key:"gte",value:function(e){return yf(this).gte(yf(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return yf(this).isZero()}},{key:"toNumber",value:function(){try{return yf(this).toNumber()}catch(e){bf("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return lf.throwError("this platform does not support BigInt",$c.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?pf||(pf=!0,lf.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?lf.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",$c.errors.UNEXPECTED_ARGUMENT,{}):lf.throwError("BigNumber.toString does not accept parameters",$c.errors.UNEXPECTED_ARGUMENT,{})),yf(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(hf,gf(t)):t.match(/^-?[0-9]+$/)?new e(hf,gf(new ff(t))):lf.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&bf("underflow","BigNumber.from",t),(t>=df||t<=-9007199254740991)&&bf("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(rf(r))return e.from(cf(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(sf(i)||"-"===i[0]&&sf(i.substring(1))))return e.from(i)}return lf.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function gf(e){if("string"!==typeof e)return gf(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&lf.throwArgumentError("invalid hex","value",e),"0x00"===(e=gf(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function mf(e){return vf.from(gf(e))}function yf(e){var t=vf.from(e).toHexString();return"-"===t[0]?new ff("-"+t.substring(3),16):new ff(t.substring(2),16)}function bf(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),lf.throwError(e,$c.errors.NUMERIC_FAULT,n)}new $c("sha2/5.7.0");var Ef,wf,Nf=new $c("strings/5.7.0");function kf(e,t,r,n,i){if(e===wf.BAD_PREFIX||e===wf.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===wf.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Ef||(Ef={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(wf||(wf={}));Object.freeze({error:function(e,t,r,n,i){return Nf.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:kf,replace:function(e,t,r,n,i){return e===wf.OVERLONG?(n.push(i),0):(n.push(65533),kf(e,t,r))}});function Af(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ef.current;t!=Ef.current&&(Nf.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return nf(r)}var xf=new RegExp("^bytes([0-9]+)$"),_f=new RegExp("^(u?int)([0-9]*)$"),Sf=new RegExp("^(.*)\\[([0-9]*)\\]$"),If="0000000000000000000000000000000000000000000000000000000000000000",Rf=new $c("solidity/5.6.1");function Tf(e,t,r){switch(e){case"address":return r?af(t,32):nf(t);case"string":return Af(t);case"bytes":return nf(t);case"bool":return t=t?"0x01":"0x00",r?af(t,32):nf(t)}var n=e.match(_f);if(n){var i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||0===i||i>256)&&Rf.throwArgumentError("invalid number type","type",e),r&&(i=256),af(t=vf.from(t).toTwos(i),i/8)}if(n=e.match(xf)){var o=parseInt(n[1]);return(String(o)!==n[1]||0===o||o>32)&&Rf.throwArgumentError("invalid bytes type","type",e),nf(t).byteLength!==o&&Rf.throwArgumentError("invalid value for ".concat(e),"value",t),r?nf((t+If).substring(0,66)):t}if((n=e.match(Sf))&&Array.isArray(t)){var a=n[1];parseInt(n[2]||String(t.length))!=t.length&&Rf.throwArgumentError("invalid array length for ".concat(e),"value",t);var s=[];return t.forEach((function(e){s.push(Tf(a,e,!0))})),of(s)}return Rf.throwArgumentError("invalid type","type",e)}function Cf(e,t){e.length!=t.length&&Rf.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);var r=[];return e.forEach((function(e,n){r.push(Tf(e,t[n]))})),cf(of(r))}function Pf(e,t){return r=Cf(e,t),"0x"+Fe().keccak_256(nf(r));var r}function Of(e,t){return r=Cf(e,t),"0x"+Ka().sha256().update(nf(r)).digest("hex");var r}var Uf=!1,Mf=!1,Ff={debug:1,default:2,info:2,warning:3,error:4,off:5},Df=Ff.default,Lf=null;var Zf,Bf,Gf=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Zf||(Zf={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Bf||(Bf={}));var Wf="0123456789abcdef",jf=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Ff[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Df>Ff[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Mf)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Wf[t[o]>>4],r+=Wf[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case Bf.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Bf.CALL_EXCEPTION:case Bf.INSUFFICIENT_FUNDS:case Bf.MISSING_NEW:case Bf.NONCE_EXPIRED:case Bf.REPLACEMENT_UNDERPRICED:case Bf.TRANSACTION_REPLACED:case Bf.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Gf&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Gf})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Lf||(Lf=new e("logger/5.7.0")),Lf}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Uf){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Mf=!!t,Uf=!!r}},{key:"setLogLevel",value:function(t){var r=Ff[t.toLowerCase()];null!=r?Df=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();jf.errors=Bf,jf.levels=Zf;var zf=new jf("bytes/5.7.0");function qf(e){return!!e.toHexString}function Vf(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Vf(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Kf(e){return"number"===typeof e&&e==e&&e%1===0}function Hf(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Kf(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Kf(r)||r<0||r>=256)return!1}return!0}function Jf(e,t){if(t||(t={}),"number"===typeof e){zf.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Vf(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),qf(e)&&(e=e.toHexString()),Xf(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":zf.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Vf(new Uint8Array(i))}return Hf(e)?Vf(new Uint8Array(e)):zf.throwArgumentError("invalid arrayify value","value",e)}function Xf(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var $f=new jf("random/5.6.1");var Yf=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}(),Qf=Yf.crypto||Yf.msCrypto;function el(e){(e<=0||e>1024||e%1||e!=e)&&$f.throwArgumentError("invalid length","length",e);var t=new Uint8Array(e);return Qf.getRandomValues(t),Jf(t)}function tl(e){for(var t=(e=e.slice()).length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}Qf&&Qf.getRandomValues||($f.warn("WARNING: Missing strong random number source"),Qf={getRandomValues:function(e){return $f.throwError("no secure random source avaialble",jf.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var rl=!1,nl=!1,il={debug:1,default:2,info:2,warning:3,error:4,off:5},ol=il.default,al=null;var sl,ul,cl=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(sl||(sl={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(ul||(ul={}));var fl="0123456789abcdef",ll=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==il[r]&&this.throwArgumentError("invalid log level name","logLevel",e),ol>il[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(nl)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=fl[t[o]>>4],r+=fl[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case ul.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case ul.CALL_EXCEPTION:case ul.INSUFFICIENT_FUNDS:case ul.MISSING_NEW:case ul.NONCE_EXPIRED:case ul.REPLACEMENT_UNDERPRICED:case ul.TRANSACTION_REPLACED:case ul.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),cl&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:cl})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return al||(al=new e("logger/5.7.0")),al}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),rl){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}nl=!!t,rl=!!r}},{key:"setLogLevel",value:function(t){var r=il[t.toLowerCase()];null!=r?ol=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();ll.errors=ul,ll.levels=sl;var hl=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},dl=new ll("properties/5.6.0");function pl(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function vl(e,t){for(var r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!==typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function gl(e){return hl(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.keys(e).map((function(t){var r=e[t];return Promise.resolve(r).then((function(e){return{key:t,value:e}}))})),t.next=3,Promise.all(r);case 3:return n=t.sent,t.abrupt("return",n.reduce((function(e,t){return e[t.key]=t.value,e}),{}));case 5:case"end":return t.stop()}}),t)})))}function ml(e,t){e&&"object"===typeof e||dl.throwArgumentError("invalid object","object",e),Object.keys(e).forEach((function(r){t[r]||dl.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)}))}function yl(e){var t={};for(var r in e)t[r]=e[r];return t}var bl={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function El(e){if(void 0===e||null===e||bl[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch(i){continue}if(!El(n))return!1}return!0}return dl.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function wl(e){if(El(e))return e;if(Array.isArray(e))return Object.freeze(e.map((function(e){return Nl(e)})));if("object"===typeof e){var t={};for(var r in e){var n=e[r];void 0!==n&&pl(t,r,Nl(n))}return t}return dl.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function Nl(e){return wl(e)}var kl=!1,Al=!1,xl={debug:1,default:2,info:2,warning:3,error:4,off:5},_l=xl.default,Sl=null;var Il,Rl,Tl=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Il||(Il={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Rl||(Rl={}));var Cl="0123456789abcdef",Pl=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==xl[r]&&this.throwArgumentError("invalid log level name","logLevel",e),_l>xl[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Al)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Cl[t[o]>>4],r+=Cl[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case Rl.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Rl.CALL_EXCEPTION:case Rl.INSUFFICIENT_FUNDS:case Rl.MISSING_NEW:case Rl.NONCE_EXPIRED:case Rl.REPLACEMENT_UNDERPRICED:case Rl.TRANSACTION_REPLACED:case Rl.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Tl&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Tl})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Sl||(Sl=new e("logger/5.7.0")),Sl}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),kl){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Al=!!t,kl=!!r}},{key:"setLogLevel",value:function(t){var r=xl[t.toLowerCase()];null!=r?_l=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Pl.errors=Rl,Pl.levels=Il;var Ol=new Pl("bytes/5.7.0");function Ul(e){return!!e.toHexString}function Ml(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Ml(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Fl(e){return Bl(e)&&!(e.length%2)||Ll(e)}function Dl(e){return"number"===typeof e&&e==e&&e%1===0}function Ll(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Dl(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Dl(r)||r<0||r>=256)return!1}return!0}function Zl(e,t){if(t||(t={}),"number"===typeof e){Ol.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Ml(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ul(e)&&(e=e.toHexString()),Bl(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Ol.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Ml(new Uint8Array(i))}return Ll(e)?Ml(new Uint8Array(e)):Ol.throwArgumentError("invalid arrayify value","value",e)}function Bl(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Gl="0123456789abcdef";function Wl(e,t){if(t||(t={}),"number"===typeof e){Ol.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=Gl[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Ul(e))return e.toHexString();if(Bl(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Ol.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Ll(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=Gl[(240&o)>>4]+Gl[15&o]}return n}return Ol.throwArgumentError("invalid hexlify value","value",e)}var jl=new Pl("rlp/5.6.1");function zl(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function ql(e,t,r){for(var n=0,i=0;i<r;i++)n=256*n+e[t+i];return n}function Vl(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat(Vl(e))})),t.length<=55)return t.unshift(192+t.length),t;var r=zl(t.length);return r.unshift(247+r.length),r.concat(t)}Fl(e)||jl.throwArgumentError("RLP object must be BytesLike","object",e);var n=Array.prototype.slice.call(Zl(e));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var i=zl(n.length);return i.unshift(183+i.length),i.concat(n)}function Kl(e){return Wl(Vl(e))}function Hl(e,t,r,n){for(var i=[];r<t+1+n;){var o=Jl(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&jl.throwError("child data too short",Pl.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Jl(e,t){if(0===e.length&&jl.throwError("data too short",Pl.errors.BUFFER_OVERRUN,{}),e[t]>=248){var r=e[t]-247;t+1+r>e.length&&jl.throwError("data short segment too short",Pl.errors.BUFFER_OVERRUN,{});var n=ql(e,t+1,r);return t+1+r+n>e.length&&jl.throwError("data long segment too short",Pl.errors.BUFFER_OVERRUN,{}),Hl(e,t,t+1+r,r+n)}if(e[t]>=192){var i=e[t]-192;return t+1+i>e.length&&jl.throwError("data array too short",Pl.errors.BUFFER_OVERRUN,{}),Hl(e,t,t+1,i)}if(e[t]>=184){var o=e[t]-183;t+1+o>e.length&&jl.throwError("data array too short",Pl.errors.BUFFER_OVERRUN,{});var a=ql(e,t+1,o);return t+1+o+a>e.length&&jl.throwError("data array too short",Pl.errors.BUFFER_OVERRUN,{}),{consumed:1+o+a,result:Wl(e.slice(t+1+o,t+1+o+a))}}if(e[t]>=128){var s=e[t]-128;return t+1+s>e.length&&jl.throwError("data too short",Pl.errors.BUFFER_OVERRUN,{}),{consumed:1+s,result:Wl(e.slice(t+1,t+1+s))}}return{consumed:1,result:Wl(e[t])}}function Xl(e){var t=Zl(e),r=Jl(t,0);return r.consumed!==t.length&&jl.throwArgumentError("invalid rlp data","data",e),r.result}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self&&self;function $l(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&r.path)}},e(r,r.exports),r.exports}var Yl=Ql;function Ql(e,t){if(!e)throw new Error(t||"Assertion failed")}Ql.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var eh=$l((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),th=$l((function(e,t){var r=t;r.assert=Yl,r.toArray=eh.toArray,r.zero2=eh.zero2,r.toHex=eh.toHex,r.encode=eh.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0===(1&u)?0:3!==(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),s=0===(1&c)?0:3!==(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"===typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(be())(e,"hex","le")}})),rh=th.getNAF,nh=th.getJSF,ih=th.assert;function oh(e,t){this.type=e,this.p=new(be())(t.p,16),this.red=t.prime?be().red(t.prime):be().mont(this.p),this.zero=new(be())(0).toRed(this.red),this.one=new(be())(1).toRed(this.red),this.two=new(be())(2).toRed(this.red),this.n=t.n&&new(be())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ah=oh;function sh(e,t){this.curve=e,this.type=t,this.precomputed=null}oh.prototype.point=function(){throw new Error("Not implemented")},oh.prototype.validate=function(){throw new Error("Not implemented")},oh.prototype._fixedNafMul=function(e,t){ih(e.precomputed);var r=e._getDoubles(),n=rh(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var o,a,s=[];for(o=0;o<n.length;o+=r.step){a=0;for(var u=o+r.step-1;u>=o;u--)a=(a<<1)+n[u];s.push(a)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<s.length;o++)(a=s[o])===l?f=f.mixedAdd(r.points[o]):a===-l&&(f=f.mixedAdd(r.points[o].neg()));c=c.add(f)}return c.toP()},oh.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=rh(t,r,this._bitLength),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var u=0;s>=0&&0===o[s];s--)u++;if(s>=0&&u++,a=a.dblp(u),s<0)break;var c=o[s];ih(0!==c),a="affine"===e.type?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg())}return"affine"===e.type?a.toP():a},oh.prototype._wnafMulAdd=function(e,t,r,n,i){var o,a,s,u=this._wnafT1,c=this._wnafT2,f=this._wnafT3,l=0;for(o=0;o<n;o++){var h=(s=t[o])._getNAFPoints(e);u[o]=h.wnd,c[o]=h.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var v=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(v[1]=t[d].add(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].add(t[p].neg())):(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=nh(r[d],r[p]);for(l=Math.max(m[0].length,l),f[d]=new Array(l),f[p]=new Array(l),a=0;a<l;a++){var y=0|m[0][a],b=0|m[1][a];f[d][a]=g[3*(y+1)+(b+1)],f[p][a]=0,c[d]=v}}else f[d]=rh(r[d],u[d],this._bitLength),f[p]=rh(r[p],u[p],this._bitLength),l=Math.max(f[d].length,l),l=Math.max(f[p].length,l)}var E=this.jpoint(null,null,null),w=this._wnafT4;for(o=l;o>=0;o--){for(var N=0;o>=0;){var k=!0;for(a=0;a<n;a++)w[a]=0|f[a][o],0!==w[a]&&(k=!1);if(!k)break;N++,o--}if(o>=0&&N++,E=E.dblp(N),o<0)break;for(a=0;a<n;a++){var A=w[a];0!==A&&(A>0?s=c[a][A-1>>1]:A<0&&(s=c[a][-A-1>>1].neg()),E="affine"===s.type?E.mixedAdd(s):E.add(s))}}for(o=0;o<n;o++)c[o]=null;return i?E:E.toP()},oh.BasePoint=sh,sh.prototype.eq=function(){throw new Error("Not implemented")},sh.prototype.validate=function(){return this.curve.validate(this)},oh.prototype.decodePoint=function(e,t){e=th.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?ih(e[e.length-1]%2===0):7===e[0]&&ih(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},sh.prototype.encodeCompressed=function(e){return this.encode(e,!0)},sh.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},sh.prototype.encode=function(e,t){return th.encode(this._encode(t),e)},sh.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},sh.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},sh.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},sh.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},sh.prototype._getBeta=function(){return null},sh.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var uh=$l((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),ch=th.assert;function fh(e){ah.call(this,"short",e),this.a=new(be())(e.a,16).toRed(this.red),this.b=new(be())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}uh(fh,ah);var lh=fh;function hh(e,t,r,n){ah.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(be())(t,16),this.y=new(be())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function dh(e,t,r,n){ah.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(be())(0)):(this.x=new(be())(t,16),this.y=new(be())(r,16),this.z=new(be())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}fh.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(be())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(be())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],ch(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(be())(e.a,16),b:new(be())(e.b,16)}})):this._getEndoBasis(r)}}},fh.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:be().mont(e),r=new(be())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(be())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},fh.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,a,s,u,c,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,h=this.n.clone(),d=new(be())(1),p=new(be())(0),v=new(be())(0),g=new(be())(1),m=0;0!==l.cmpn(0);){var y=h.div(l);u=h.sub(y.mul(l)),c=v.sub(y.mul(d));var b=g.sub(y.mul(p));if(!n&&u.cmp(f)<0)t=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++m)break;s=u,h=l,l=u,v=d,d=c,g=p,p=b}o=u.neg(),a=c;var E=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(E)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},fh.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(a).sub(s),k2:u.add(c).neg()}},fh.prototype.pointFromX=function(e,t){(e=new(be())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},fh.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},fh.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return c},uh(hh,ah.BasePoint),fh.prototype.point=function(e,t,r){return new hh(this,e,t,r)},fh.prototype.pointFromJSON=function(e,t){return hh.fromJSON(this,e,t)},hh.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},hh.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},hh.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},hh.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},hh.prototype.isInfinity=function(){return this.inf},hh.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},hh.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},hh.prototype.getX=function(){return this.x.fromRed()},hh.prototype.getY=function(){return this.y.fromRed()},hh.prototype.mul=function(e){return e=new(be())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},hh.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},hh.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},hh.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},hh.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},hh.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},uh(dh,ah.BasePoint),fh.prototype.jpoint=function(e,t,r){return new dh(this,e,t,r)},dh.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},dh.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},dh.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),f=c.redMul(s),l=n.redMul(c),h=u.redSqr().redIAdd(f).redISub(l).redISub(l),d=u.redMul(l.redISub(h)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},dh.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),f=r.redMul(u),l=s.redSqr().redIAdd(c).redISub(f).redISub(f),h=s.redMul(f.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(l,h,d)},dh.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),l=c.redSqr(),h=l.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(u)),p=o.redMul(l),v=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(v),m=d.redMul(g);m=m.redIAdd(m).redISub(h);var y=c.redMul(s);t+1<e&&(u=u.redMul(h)),o=v,s=y,c=m}return this.curve.jpoint(o,c.redMul(i),s)},dh.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},dh.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(f).redISub(h);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),v=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},dh.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),h=this.x.redMul(l),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},dh.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),f=s.redSqr().redISub(c.redAdd(c)),l=c.redISub(f),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(l).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,d,p)},dh.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),f=t.redMul(c);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(s).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(l,h,d)},dh.prototype.mul=function(e,t){return e=new(be())(e,t),this.curve._wnafMul(this,e)},dh.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},dh.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},dh.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},dh.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var ph=$l((function(e,t){var r=t;r.base=ah,r.short=lh,r.mont=null,r.edwards=null})),vh=$l((function(e,t){var r,n=t,i=th.assert;function o(e){"short"===e.type?this.curve=new ph.short(e):"edwards"===e.type?this.curve=new ph.edwards(e):this.curve=new ph.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ka().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ka().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ka().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ka().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ka().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(s){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ka().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function gh(e){if(!(this instanceof gh))return new gh(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=eh.toArray(e.entropy,e.entropyEnc||"hex"),r=eh.toArray(e.nonce,e.nonceEnc||"hex"),n=eh.toArray(e.pers,e.persEnc||"hex");Yl(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var mh=gh;gh.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},gh.prototype._hmac=function(){return new(Ka().hmac)(this.hash,this.K)},gh.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},gh.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=eh.toArray(e,t),r=eh.toArray(r,n),Yl(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},gh.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=eh.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,eh.encode(o,t)};var yh=th.assert;function bh(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Eh=bh;bh.fromPublic=function(e,t,r){return t instanceof bh?t:new bh(e,{pub:t,pubEnc:r})},bh.fromPrivate=function(e,t,r){return t instanceof bh?t:new bh(e,{priv:t,privEnc:r})},bh.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},bh.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},bh.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},bh.prototype._importPrivate=function(e,t){this.priv=new(be())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},bh.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?yh(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||yh(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},bh.prototype.derive=function(e){return e.validate()||yh(e.validate(),"public point not validated"),e.mul(this.priv).getX()},bh.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},bh.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},bh.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var wh=th.assert;function Nh(e,t){if(e instanceof Nh)return e;this._importDER(e,t)||(wh(e.r&&e.s,"Signature without r or s"),this.r=new(be())(e.r,16),this.s=new(be())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var kh=Nh;function Ah(){this.place=0}function xh(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=t.place;o<n;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function _h(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Sh(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}Nh.prototype._importDER=function(e,t){e=th.toArray(e,t);var r=new Ah;if(48!==e[r.place++])return!1;var n=xh(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=xh(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var a=xh(e,r);if(!1===a)return!1;if(e.length!==a+r.place)return!1;var s=e.slice(r.place,a+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new(be())(o),this.s=new(be())(s),this.recoveryParam=null,!0},Nh.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=_h(t),r=_h(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];Sh(n,t.length),(n=n.concat(t)).push(2),Sh(n,r.length);var i=n.concat(r),o=[48];return Sh(o,i.length),o=o.concat(i),th.encode(o,e)};var Ih=function(){throw new Error("unsupported")},Rh=th.assert;function Th(e){if(!(this instanceof Th))return new Th(e);"string"===typeof e&&(Rh(Object.prototype.hasOwnProperty.call(vh,e),"Unknown curve "+e),e=vh[e]),e instanceof vh.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Ch=Th;Th.prototype.keyPair=function(e){return new Eh(this,e)},Th.prototype.keyFromPrivate=function(e,t){return Eh.fromPrivate(this,e,t)},Th.prototype.keyFromPublic=function(e,t){return Eh.fromPublic(this,e,t)},Th.prototype.genKeyPair=function(e){e||(e={});for(var t=new mh({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Ih(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(be())(2));;){var i=new(be())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Th.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Th.prototype.sign=function(e,t,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(be())(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i),s=new mh({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(be())(1)),c=0;;c++){var f=n.k?n.k(c):new(be())(s.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var h=l.getX(),d=h.umod(this.n);if(0!==d.cmpn(0)){var p=f.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var v=(l.getY().isOdd()?1:0)|(0!==h.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),v^=1),new kh({r:d,s:p,recoveryParam:v})}}}}}},Th.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(be())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new kh(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,s=o.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},Th.prototype.recoverPubKey=function(e,t,r,n){Rh((3&r)===r,"The recovery param is more than two bits"),t=new kh(t,n);var i=this.n,o=new(be())(e),a=t.r,s=t.s,u=1&r,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");a=c?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var f=t.r.invm(i),l=i.sub(o).mul(f).umod(i),h=s.mul(f).umod(i);return this.g.mulAdd(l,a,h)},Th.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new kh(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Ph=$l((function(e,t){var r=t;r.version="6.5.4",r.utils=th,r.rand=function(){throw new Error("unsupported")},r.curve=ph,r.curves=vh,r.ec=Ch,r.eddsa=null})).ec,Oh=!1,Uh=!1,Mh={debug:1,default:2,info:2,warning:3,error:4,off:5},Fh=Mh.default,Dh=null;var Lh,Zh,Bh=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Lh||(Lh={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(Zh||(Zh={}));var Gh="0123456789abcdef",Wh=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Mh[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Fh>Mh[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Uh)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=Gh[t[o]>>4],r+=Gh[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case Zh.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case Zh.CALL_EXCEPTION:case Zh.INSUFFICIENT_FUNDS:case Zh.MISSING_NEW:case Zh.NONCE_EXPIRED:case Zh.REPLACEMENT_UNDERPRICED:case Zh.TRANSACTION_REPLACED:case Zh.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),Bh&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Bh})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Dh||(Dh=new e("logger/5.7.0")),Dh}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Oh){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Uh=!!t,Oh=!!r}},{key:"setLogLevel",value:function(t){var r=Mh[t.toLowerCase()];null!=r?Fh=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Wh.errors=Zh,Wh.levels=Lh;var jh=new Wh("bytes/5.7.0");function zh(e){return!!e.toHexString}function qh(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return qh(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Vh(e){return"number"===typeof e&&e==e&&e%1===0}function Kh(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Vh(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Vh(r)||r<0||r>=256)return!1}return!0}function Hh(e,t){if(t||(t={}),"number"===typeof e){jh.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),qh(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),zh(e)&&(e=e.toHexString()),Jh(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":jh.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return qh(new Uint8Array(i))}return Kh(e)?qh(new Uint8Array(e)):jh.throwArgumentError("invalid arrayify value","value",e)}function Jh(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Xh="0123456789abcdef";function $h(e,t){if(t||(t={}),"number"===typeof e){jh.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=Xh[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),zh(e))return e.toHexString();if(Jh(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":jh.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Kh(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=Xh[(240&o)>>4]+Xh[15&o]}return n}return jh.throwArgumentError("invalid hexlify value","value",e)}function Yh(e,t){for("string"!==typeof e?e=$h(e):Jh(e)||jh.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&jh.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Qh(e){var t,r={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Jh(t=e)&&!(t.length%2)||Kh(t)){var n=Hh(e);64===n.length?(r.v=27+(n[32]>>7),n[32]&=127,r.r=$h(n.slice(0,32)),r.s=$h(n.slice(32,64))):65===n.length?(r.r=$h(n.slice(0,32)),r.s=$h(n.slice(32,64)),r.v=n[64]):jh.throwArgumentError("invalid signature string","signature",e),r.v<27&&(0===r.v||1===r.v?r.v+=27:jh.throwArgumentError("signature invalid v byte","signature",e)),r.recoveryParam=1-r.v%2,r.recoveryParam&&(n[32]|=128),r._vs=$h(n.slice(32,64))}else{if(r.r=e.r,r.s=e.s,r.v=e.v,r.recoveryParam=e.recoveryParam,r._vs=e._vs,null!=r._vs){var i=function(e,t){(e=Hh(e)).length>t&&jh.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(t);return r.set(e,t-e.length),qh(r)}(Hh(r._vs),32);r._vs=$h(i);var o=i[0]>=128?1:0;null==r.recoveryParam?r.recoveryParam=o:r.recoveryParam!==o&&jh.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),i[0]&=127;var a=$h(i);null==r.s?r.s=a:r.s!==a&&jh.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==r.recoveryParam)null==r.v?jh.throwArgumentError("signature missing v and recoveryParam","signature",e):0===r.v||1===r.v?r.recoveryParam=r.v:r.recoveryParam=1-r.v%2;else if(null==r.v)r.v=27+r.recoveryParam;else{var s=0===r.v||1===r.v?r.v:1-r.v%2;r.recoveryParam!==s&&jh.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=r.r&&Jh(r.r)?r.r=Yh(r.r,32):jh.throwArgumentError("signature missing or invalid r","signature",e),null!=r.s&&Jh(r.s)?r.s=Yh(r.s,32):jh.throwArgumentError("signature missing or invalid s","signature",e);var u=Hh(r.s);u[0]>=128&&jh.throwArgumentError("signature s out of range","signature",e),r.recoveryParam&&(u[0]|=128);var c=$h(u);r._vs&&(Jh(r._vs)||jh.throwArgumentError("signature invalid _vs","signature",e),r._vs=Yh(r._vs,32)),null==r._vs?r._vs=c:r._vs!==c&&jh.throwArgumentError("signature _vs mismatch v and s","signature",e)}return r.yParityAndS=r._vs,r.compact=r.r+r.yParityAndS.substring(2),r}new Wh("properties/5.7.0");function ed(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}var td=new Wh("signing-key/5.6.2"),rd=null;function nd(){return rd||(rd=new Ph("secp256k1")),rd}var id=function(){function e(t){(0,N.Z)(this,e),ed(this,"curve","secp256k1"),ed(this,"privateKey",$h(t)),32!==function(e){if("string"!==typeof e)e=$h(e);else if(!Jh(e)||e.length%2)return null;return(e.length-2)/2}(this.privateKey)&&td.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var r=nd().keyFromPrivate(Hh(this.privateKey));ed(this,"publicKey","0x"+r.getPublic(!1,"hex")),ed(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ed(this,"_isSigningKey",!0)}return(0,k.Z)(e,[{key:"_addPoint",value:function(e){var t=nd().keyFromPublic(Hh(this.publicKey)),r=nd().keyFromPublic(Hh(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(e){var t=nd().keyFromPrivate(Hh(this.privateKey)),r=Hh(e);32!==r.length&&td.throwArgumentError("bad digest length","digest",e);var n=t.sign(r,{canonical:!0});return Qh({recoveryParam:n.recoveryParam,r:Yh("0x"+n.r.toString(16),32),s:Yh("0x"+n.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(e){var t=nd().keyFromPrivate(Hh(this.privateKey)),r=nd().keyFromPublic(Hh(ad(e)));return Yh("0x"+t.derive(r.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(e){return!(!e||!e._isSigningKey)}}]),e}();function od(e,t){var r=Qh(t),n={r:Hh(r.r),s:Hh(r.s)};return"0x"+nd().recoverPubKey(Hh(e),n,r.recoveryParam).encode("hex",!1)}function ad(e,t){var r=Hh(e);if(32===r.length){var n=new id(r);return t?"0x"+nd().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}return 33===r.length?t?$h(r):"0x"+nd().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+nd().keyFromPublic(r).getPublic(!0,"hex"):$h(r):td.throwArgumentError("invalid public or private key","key","[REDACTED]")}var sd=!1,ud=!1,cd={debug:1,default:2,info:2,warning:3,error:4,off:5},fd=cd.default,ld=null;var hd,dd,pd=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(hd||(hd={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(dd||(dd={}));var vd="0123456789abcdef",gd=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==cd[r]&&this.throwArgumentError("invalid log level name","logLevel",e),fd>cd[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(ud)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=vd[t[o]>>4],r+=vd[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case dd.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case dd.CALL_EXCEPTION:case dd.INSUFFICIENT_FUNDS:case dd.MISSING_NEW:case dd.NONCE_EXPIRED:case dd.REPLACEMENT_UNDERPRICED:case dd.TRANSACTION_REPLACED:case dd.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),pd&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:pd})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return ld||(ld=new e("logger/5.7.0")),ld}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),sd){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ud=!!t,sd=!!r}},{key:"setLogLevel",value:function(t){var r=cd[t.toLowerCase()];null!=r?fd=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();gd.errors=dd,gd.levels=hd;var md=new gd("bytes/5.7.0");function yd(e){return!!e.toHexString}function bd(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return bd(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Ed(e){return"number"===typeof e&&e==e&&e%1===0}function wd(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!Ed(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!Ed(r)||r<0||r>=256)return!1}return!0}function Nd(e,t){if(t||(t={}),"number"===typeof e){md.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),bd(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),yd(e)&&(e=e.toHexString()),Ad(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":md.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return bd(new Uint8Array(i))}return wd(e)?bd(new Uint8Array(e)):md.throwArgumentError("invalid arrayify value","value",e)}function kd(e){var t=e.map((function(e){return Nd(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),bd(n)}function Ad(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var xd="0123456789abcdef";function _d(e,t){if(t||(t={}),"number"===typeof e){md.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=xd[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),yd(e))return e.toHexString();if(Ad(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":md.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(wd(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=xd[(240&o)>>4]+xd[15&o]}return n}return md.throwArgumentError("invalid hexlify value","value",e)}var Sd,Id,Rd=new gd("strings/5.6.1");function Td(e,t,r,n,i){if(e===Id.BAD_PREFIX||e===Id.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===Id.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Sd||(Sd={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(Id||(Id={}));var Cd=Object.freeze({error:function(e,t,r,n,i){return Rd.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:Td,replace:function(e,t,r,n,i){return e===Id.OVERLONG?(n.push(i),0):(n.push(65533),Td(e,t,r))}});function Pd(e,t){null==t&&(t=Cd.error),e=Nd(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(i>>7!==0){var o=null,a=null;if(192===(224&i))o=1,a=127;else if(224===(240&i))o=2,a=2047;else{if(240!==(248&i)){n+=t(128===(192&i)?Id.UNEXPECTED_CONTINUE:Id.BAD_PREFIX,n-1,e,r);continue}o=3,a=65535}if(n-1+o>=e.length)n+=t(Id.OVERRUN,n-1,e,r);else{for(var s=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=e[n];if(128!=(192&c)){n+=t(Id.MISSING_CONTINUE,n,e,r),s=null;break}s=s<<6|63&c,n++}null!==s&&(s>1114111?n+=t(Id.OUT_OF_RANGE,n-1-o,e,r,s):s>=55296&&s<=57343?n+=t(Id.UTF16_SURROGATE,n-1-o,e,r,s):s<=a?n+=t(Id.OVERLONG,n-1-o,e,r,s):r.push(s))}}else r.push(i)}return r}function Od(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sd.current;t!=Sd.current&&(Rd.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return Nd(r)}function Ud(e){var t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function Md(e,t){return'"'+Pd(e,t).map((function(e){if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127)return String.fromCharCode(e)}return e<=65535?Ud(e):Ud(55296+((e-=65536)>>10&1023))+Ud(56320+(1023&e))})).join("")+'"'}function Fd(e){return e.map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}function Dd(e,t){return Fd(Pd(e,t))}function Ld(e){return Pd(Od(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sd.current))}function Zd(e,t){t||(t=function(e){return[parseInt(e,16)]});var r=0,n={};return e.split(",").forEach((function(e){var i=e.split(":");r+=parseInt(i[0],16),n[r]=t(i[1])})),n}function Bd(e){var t=0;return e.split(",").map((function(e){var r=e.split("-");return 1===r.length?r[1]="0":""===r[1]&&(r[1]="1"),{l:t+parseInt(r[0],16),h:t=parseInt(r[1],16)}}))}function Gd(e,t){for(var r=0,n=0;n<t.length;n++){var i=t[n];if(e>=(r+=i.l)&&e<=r+i.h&&(e-r)%(i.d||1)===0){if(i.e&&-1!==i.e.indexOf(e-r))continue;return i}}return null}var Wd=Bd("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),jd="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((function(e){return parseInt(e,16)})),zd=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],qd=Zd("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Vd=Zd("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Kd=Zd("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(e){if(e.length%4!==0)throw new Error("bad data");for(var t=[],r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t})),Hd=Bd("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Jd(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();var t,r=Ld(e);t=r.map((function(e){if(jd.indexOf(e)>=0)return[];if(e>=65024&&e<=65039)return[];var t=function(e){var t=Gd(e,zd);if(t)return[e+t.s];var r=qd[e];if(r)return r;var n=Vd[e];return n?[e+n[0]]:Kd[e]||null}(e);return t||[e]})),r=t.reduce((function(e,t){return t.forEach((function(t){e.push(t)})),e}),[]),(r=Ld(Fd(r),Sd.NFKC)).forEach((function(e){if(Gd(e,Hd))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),r.forEach((function(e){if(Gd(e,Wd))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));var n=Fd(r);if("-"===n.substring(0,1)||"--"===n.substring(2,4)||"-"===n.substring(n.length-1))throw new Error("invalid hyphen");if(n.length>63)throw new Error("too long");return n}var Xd="0x0000000000000000000000000000000000000000000000000000000000000000";function $d(e){var t=Od(e);if(t.length>31)throw new Error("bytes32 string must be less than 32 bytes");return _d(kd([t,Xd]).slice(0,32))}function Yd(e){var t=Nd(e);if(32!==t.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw new Error("invalid bytes32 string - no null terminator");for(var r=31;0===t[r-1];)r--;return Dd(t.slice(0,r))}var Qd=!1,ep=!1,tp={debug:1,default:2,info:2,warning:3,error:4,off:5},rp=tp.default,np=null;var ip,op,ap=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(ip||(ip={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(op||(op={}));var sp="0123456789abcdef",up=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==tp[r]&&this.throwArgumentError("invalid log level name","logLevel",e),rp>tp[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(ep)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=sp[t[o]>>4],r+=sp[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case op.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case op.CALL_EXCEPTION:case op.INSUFFICIENT_FUNDS:case op.MISSING_NEW:case op.NONCE_EXPIRED:case op.REPLACEMENT_UNDERPRICED:case op.TRANSACTION_REPLACED:case op.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),ap&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:ap})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return np||(np=new e("logger/5.7.0")),np}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Qd){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}ep=!!t,Qd=!!r}},{key:"setLogLevel",value:function(t){var r=tp[t.toLowerCase()];null!=r?rp=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();up.errors=op,up.levels=ip;var cp=new up("bytes/5.7.0");function fp(e){return!!e.toHexString}function lp(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return lp(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function hp(e){return mp(e)&&!(e.length%2)||pp(e)}function dp(e){return"number"===typeof e&&e==e&&e%1===0}function pp(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!dp(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!dp(r)||r<0||r>=256)return!1}return!0}function vp(e,t){if(t||(t={}),"number"===typeof e){cp.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),lp(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),fp(e)&&(e=e.toHexString()),mp(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":cp.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return lp(new Uint8Array(i))}return pp(e)?lp(new Uint8Array(e)):cp.throwArgumentError("invalid arrayify value","value",e)}function gp(e){var t=vp(e);if(0===t.length)return t;for(var r=0;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function mp(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var yp="0123456789abcdef";function bp(e,t){if(t||(t={}),"number"===typeof e){cp.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=yp[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),fp(e))return e.toHexString();if(mp(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":cp.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(pp(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=yp[(240&o)>>4]+yp[15&o]}return n}return cp.throwArgumentError("invalid hexlify value","value",e)}function Ep(e){if("string"!==typeof e)e=bp(e);else if(!mp(e)||e.length%2)return null;return(e.length-2)/2}function wp(e,t,r){return"string"!==typeof e?e=bp(e):(!mp(e)||e.length%2)&&cp.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Np(e){var t="0x";return e.forEach((function(e){t+=bp(e).substring(2)})),t}function kp(e,t){for("string"!==typeof e?e=bp(e):mp(e)||cp.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&cp.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Ap(e){var t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(hp(e)){var r=vp(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=bp(r.slice(0,32)),t.s=bp(r.slice(32,64))):65===r.length?(t.r=bp(r.slice(0,32)),t.s=bp(r.slice(32,64)),t.v=r[64]):cp.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:cp.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=bp(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){var n=function(e,t){(e=vp(e)).length>t&&cp.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(t);return r.set(e,t-e.length),lp(r)}(vp(t._vs),32);t._vs=bp(n);var i=n[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=i:t.recoveryParam!==i&&cp.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;var o=bp(n);null==t.s?t.s=o:t.s!==o&&cp.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?cp.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{var a=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==a&&cp.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&mp(t.r)?t.r=kp(t.r,32):cp.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&mp(t.s)?t.s=kp(t.s,32):cp.throwArgumentError("signature missing or invalid s","signature",e);var s=vp(t.s);s[0]>=128&&cp.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(s[0]|=128);var u=bp(s);t._vs&&(mp(t._vs)||cp.throwArgumentError("signature invalid _vs","signature",e),t._vs=kp(t._vs,32)),null==t._vs?t._vs=u:t._vs!==u&&cp.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}var xp=be().BN,_p=new up("bignumber/5.7.0"),Sp={},Ip=9007199254740991;var Rp=!1,Tp=function(){function e(t,r){(0,N.Z)(this,e),t!==Sp&&_p.throwError("cannot call constructor directly; use BigNumber.from",up.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Pp(Op(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Pp(Op(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Pp(Op(this).add(Op(e)))}},{key:"sub",value:function(e){return Pp(Op(this).sub(Op(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Up("division-by-zero","div"),Pp(Op(this).div(Op(t)))}},{key:"mul",value:function(e){return Pp(Op(this).mul(Op(e)))}},{key:"mod",value:function(e){var t=Op(e);return t.isNeg()&&Up("division-by-zero","mod"),Pp(Op(this).umod(t))}},{key:"pow",value:function(e){var t=Op(e);return t.isNeg()&&Up("negative-power","pow"),Pp(Op(this).pow(t))}},{key:"and",value:function(e){var t=Op(e);return(this.isNegative()||t.isNeg())&&Up("unbound-bitwise-result","and"),Pp(Op(this).and(t))}},{key:"or",value:function(e){var t=Op(e);return(this.isNegative()||t.isNeg())&&Up("unbound-bitwise-result","or"),Pp(Op(this).or(t))}},{key:"xor",value:function(e){var t=Op(e);return(this.isNegative()||t.isNeg())&&Up("unbound-bitwise-result","xor"),Pp(Op(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Up("negative-width","mask"),Pp(Op(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Up("negative-width","shl"),Pp(Op(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Up("negative-width","shr"),Pp(Op(this).shrn(e))}},{key:"eq",value:function(e){return Op(this).eq(Op(e))}},{key:"lt",value:function(e){return Op(this).lt(Op(e))}},{key:"lte",value:function(e){return Op(this).lte(Op(e))}},{key:"gt",value:function(e){return Op(this).gt(Op(e))}},{key:"gte",value:function(e){return Op(this).gte(Op(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return Op(this).isZero()}},{key:"toNumber",value:function(){try{return Op(this).toNumber()}catch(e){Up("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return _p.throwError("this platform does not support BigInt",up.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?Rp||(Rp=!0,_p.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?_p.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",up.errors.UNEXPECTED_ARGUMENT,{}):_p.throwError("BigNumber.toString does not accept parameters",up.errors.UNEXPECTED_ARGUMENT,{})),Op(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Sp,Cp(t)):t.match(/^-?[0-9]+$/)?new e(Sp,Cp(new xp(t))):_p.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Up("underflow","BigNumber.from",t),(t>=Ip||t<=-9007199254740991)&&Up("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(pp(r))return e.from(bp(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(mp(i)||"-"===i[0]&&mp(i.substring(1))))return e.from(i)}return _p.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function Cp(e){if("string"!==typeof e)return Cp(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&_p.throwArgumentError("invalid hex","value",e),"0x00"===(e=Cp(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Pp(e){return Tp.from(Cp(e))}function Op(e){var t=Tp.from(e).toHexString();return"-"===t[0]?new xp("-"+t.substring(3),16):new xp(t.substring(2),16)}function Up(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),_p.throwError(e,up.errors.NUMERIC_FAULT,n)}function Mp(e){return"0x"+Fe().keccak_256(vp(e))}var Fp=new up("address/5.7.0");function Dp(e){mp(e,20)||Fp.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=vp(Mp(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var Lp={},Zp=0;Zp<10;Zp++)Lp[String(Zp)]=String(Zp);for(var Bp=0;Bp<26;Bp++)Lp[String.fromCharCode(65+Bp)]=String(10+Bp);var Gp=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Wp(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return Lp[e]})).join("");t.length>=Gp;){var r=t.substring(0,Gp);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function jp(e){var t,r=null;if("string"!==typeof e&&Fp.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=Dp(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&Fp.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Wp(e)&&Fp.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new xp(t,36).toString(16);r.length<40;)r="0"+r;r=Dp("0x"+r)}else Fp.throwArgumentError("invalid address","address",e);return r}var zp=Tp.from(0),qp=new up("properties/5.7.0");function Vp(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}var Kp=new up("rlp/5.7.0");function Hp(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function Jp(e,t,r){for(var n=0,i=0;i<r;i++)n=256*n+e[t+i];return n}function Xp(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat(Xp(e))})),t.length<=55)return t.unshift(192+t.length),t;var r=Hp(t.length);return r.unshift(247+r.length),r.concat(t)}hp(e)||Kp.throwArgumentError("RLP object must be BytesLike","object",e);var n=Array.prototype.slice.call(vp(e));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var i=Hp(n.length);return i.unshift(183+i.length),i.concat(n)}function $p(e){return bp(Xp(e))}function Yp(e,t,r,n){for(var i=[];r<t+1+n;){var o=Qp(e,r);i.push(o.result),(r+=o.consumed)>t+1+n&&Kp.throwError("child data too short",up.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function Qp(e,t){if(0===e.length&&Kp.throwError("data too short",up.errors.BUFFER_OVERRUN,{}),e[t]>=248){var r=e[t]-247;t+1+r>e.length&&Kp.throwError("data short segment too short",up.errors.BUFFER_OVERRUN,{});var n=Jp(e,t+1,r);return t+1+r+n>e.length&&Kp.throwError("data long segment too short",up.errors.BUFFER_OVERRUN,{}),Yp(e,t,t+1+r,r+n)}if(e[t]>=192){var i=e[t]-192;return t+1+i>e.length&&Kp.throwError("data array too short",up.errors.BUFFER_OVERRUN,{}),Yp(e,t,t+1,i)}if(e[t]>=184){var o=e[t]-183;t+1+o>e.length&&Kp.throwError("data array too short",up.errors.BUFFER_OVERRUN,{});var a=Jp(e,t+1,o);return t+1+o+a>e.length&&Kp.throwError("data array too short",up.errors.BUFFER_OVERRUN,{}),{consumed:1+o+a,result:bp(e.slice(t+1+o,t+1+o+a))}}if(e[t]>=128){var s=e[t]-128;return t+1+s>e.length&&Kp.throwError("data too short",up.errors.BUFFER_OVERRUN,{}),{consumed:1+s,result:bp(e.slice(t+1,t+1+s))}}return{consumed:1,result:bp(e[t])}}function ev(e){var t=vp(e),r=Qp(t,0);return r.consumed!==t.length&&Kp.throwArgumentError("invalid rlp data","data",e),r.result}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self&&self;function tv(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&r.path)}},e(r,r.exports),r.exports}var rv=nv;function nv(e,t){if(!e)throw new Error(t||"Assertion failed")}nv.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var iv=tv((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),ov=tv((function(e,t){var r=t;r.assert=rv,r.toArray=iv.toArray,r.zero2=iv.zero2,r.toHex=iv.toHex,r.encode=iv.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0===(1&u)?0:3!==(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),s=0===(1&c)?0:3!==(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"===typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(be())(e,"hex","le")}})),av=ov.getNAF,sv=ov.getJSF,uv=ov.assert;function cv(e,t){this.type=e,this.p=new(be())(t.p,16),this.red=t.prime?be().red(t.prime):be().mont(this.p),this.zero=new(be())(0).toRed(this.red),this.one=new(be())(1).toRed(this.red),this.two=new(be())(2).toRed(this.red),this.n=t.n&&new(be())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var fv=cv;function lv(e,t){this.curve=e,this.type=t,this.precomputed=null}cv.prototype.point=function(){throw new Error("Not implemented")},cv.prototype.validate=function(){throw new Error("Not implemented")},cv.prototype._fixedNafMul=function(e,t){uv(e.precomputed);var r=e._getDoubles(),n=av(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var o,a,s=[];for(o=0;o<n.length;o+=r.step){a=0;for(var u=o+r.step-1;u>=o;u--)a=(a<<1)+n[u];s.push(a)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<s.length;o++)(a=s[o])===l?f=f.mixedAdd(r.points[o]):a===-l&&(f=f.mixedAdd(r.points[o].neg()));c=c.add(f)}return c.toP()},cv.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=av(t,r,this._bitLength),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var u=0;s>=0&&0===o[s];s--)u++;if(s>=0&&u++,a=a.dblp(u),s<0)break;var c=o[s];uv(0!==c),a="affine"===e.type?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg())}return"affine"===e.type?a.toP():a},cv.prototype._wnafMulAdd=function(e,t,r,n,i){var o,a,s,u=this._wnafT1,c=this._wnafT2,f=this._wnafT3,l=0;for(o=0;o<n;o++){var h=(s=t[o])._getNAFPoints(e);u[o]=h.wnd,c[o]=h.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var v=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(v[1]=t[d].add(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].add(t[p].neg())):(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=sv(r[d],r[p]);for(l=Math.max(m[0].length,l),f[d]=new Array(l),f[p]=new Array(l),a=0;a<l;a++){var y=0|m[0][a],b=0|m[1][a];f[d][a]=g[3*(y+1)+(b+1)],f[p][a]=0,c[d]=v}}else f[d]=av(r[d],u[d],this._bitLength),f[p]=av(r[p],u[p],this._bitLength),l=Math.max(f[d].length,l),l=Math.max(f[p].length,l)}var E=this.jpoint(null,null,null),w=this._wnafT4;for(o=l;o>=0;o--){for(var N=0;o>=0;){var k=!0;for(a=0;a<n;a++)w[a]=0|f[a][o],0!==w[a]&&(k=!1);if(!k)break;N++,o--}if(o>=0&&N++,E=E.dblp(N),o<0)break;for(a=0;a<n;a++){var A=w[a];0!==A&&(A>0?s=c[a][A-1>>1]:A<0&&(s=c[a][-A-1>>1].neg()),E="affine"===s.type?E.mixedAdd(s):E.add(s))}}for(o=0;o<n;o++)c[o]=null;return i?E:E.toP()},cv.BasePoint=lv,lv.prototype.eq=function(){throw new Error("Not implemented")},lv.prototype.validate=function(){return this.curve.validate(this)},cv.prototype.decodePoint=function(e,t){e=ov.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?uv(e[e.length-1]%2===0):7===e[0]&&uv(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},lv.prototype.encodeCompressed=function(e){return this.encode(e,!0)},lv.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},lv.prototype.encode=function(e,t){return ov.encode(this._encode(t),e)},lv.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},lv.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},lv.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},lv.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},lv.prototype._getBeta=function(){return null},lv.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var hv=tv((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),dv=ov.assert;function pv(e){fv.call(this,"short",e),this.a=new(be())(e.a,16).toRed(this.red),this.b=new(be())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}hv(pv,fv);var vv=pv;function gv(e,t,r,n){fv.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(be())(t,16),this.y=new(be())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function mv(e,t,r,n){fv.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(be())(0)):(this.x=new(be())(t,16),this.y=new(be())(r,16),this.z=new(be())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}pv.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(be())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(be())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],dv(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(be())(e.a,16),b:new(be())(e.b,16)}})):this._getEndoBasis(r)}}},pv.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:be().mont(e),r=new(be())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(be())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},pv.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,a,s,u,c,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,h=this.n.clone(),d=new(be())(1),p=new(be())(0),v=new(be())(0),g=new(be())(1),m=0;0!==l.cmpn(0);){var y=h.div(l);u=h.sub(y.mul(l)),c=v.sub(y.mul(d));var b=g.sub(y.mul(p));if(!n&&u.cmp(f)<0)t=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++m)break;s=u,h=l,l=u,v=d,d=c,g=p,p=b}o=u.neg(),a=c;var E=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(E)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},pv.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(a).sub(s),k2:u.add(c).neg()}},pv.prototype.pointFromX=function(e,t){(e=new(be())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},pv.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},pv.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return c},hv(gv,fv.BasePoint),pv.prototype.point=function(e,t,r){return new gv(this,e,t,r)},pv.prototype.pointFromJSON=function(e,t){return gv.fromJSON(this,e,t)},gv.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},gv.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},gv.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},gv.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},gv.prototype.isInfinity=function(){return this.inf},gv.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},gv.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},gv.prototype.getX=function(){return this.x.fromRed()},gv.prototype.getY=function(){return this.y.fromRed()},gv.prototype.mul=function(e){return e=new(be())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},gv.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},gv.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},gv.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},gv.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},gv.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},hv(mv,fv.BasePoint),pv.prototype.jpoint=function(e,t,r){return new mv(this,e,t,r)},mv.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},mv.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},mv.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),f=c.redMul(s),l=n.redMul(c),h=u.redSqr().redIAdd(f).redISub(l).redISub(l),d=u.redMul(l.redISub(h)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},mv.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),f=r.redMul(u),l=s.redSqr().redIAdd(c).redISub(f).redISub(f),h=s.redMul(f.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(l,h,d)},mv.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),l=c.redSqr(),h=l.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(u)),p=o.redMul(l),v=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(v),m=d.redMul(g);m=m.redIAdd(m).redISub(h);var y=c.redMul(s);t+1<e&&(u=u.redMul(h)),o=v,s=y,c=m}return this.curve.jpoint(o,c.redMul(i),s)},mv.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},mv.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(f).redISub(h);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),v=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},mv.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),h=this.x.redMul(l),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},mv.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),f=s.redSqr().redISub(c.redAdd(c)),l=c.redISub(f),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(l).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,d,p)},mv.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),f=t.redMul(c);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(s).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(l,h,d)},mv.prototype.mul=function(e,t){return e=new(be())(e,t),this.curve._wnafMul(this,e)},mv.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},mv.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},mv.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},mv.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var yv=tv((function(e,t){var r=t;r.base=fv,r.short=vv,r.mont=null,r.edwards=null})),bv=tv((function(e,t){var r,n=t,i=ov.assert;function o(e){"short"===e.type?this.curve=new yv.short(e):"edwards"===e.type?this.curve=new yv.edwards(e):this.curve=new yv.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ka().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ka().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ka().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ka().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ka().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(s){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ka().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function Ev(e){if(!(this instanceof Ev))return new Ev(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=iv.toArray(e.entropy,e.entropyEnc||"hex"),r=iv.toArray(e.nonce,e.nonceEnc||"hex"),n=iv.toArray(e.pers,e.persEnc||"hex");rv(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var wv=Ev;Ev.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Ev.prototype._hmac=function(){return new(Ka().hmac)(this.hash,this.K)},Ev.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Ev.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=iv.toArray(e,t),r=iv.toArray(r,n),rv(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},Ev.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=iv.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,iv.encode(o,t)};var Nv=ov.assert;function kv(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var Av=kv;kv.fromPublic=function(e,t,r){return t instanceof kv?t:new kv(e,{pub:t,pubEnc:r})},kv.fromPrivate=function(e,t,r){return t instanceof kv?t:new kv(e,{priv:t,privEnc:r})},kv.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},kv.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},kv.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},kv.prototype._importPrivate=function(e,t){this.priv=new(be())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},kv.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?Nv(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||Nv(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},kv.prototype.derive=function(e){return e.validate()||Nv(e.validate(),"public point not validated"),e.mul(this.priv).getX()},kv.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},kv.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},kv.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var xv=ov.assert;function _v(e,t){if(e instanceof _v)return e;this._importDER(e,t)||(xv(e.r&&e.s,"Signature without r or s"),this.r=new(be())(e.r,16),this.s=new(be())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Sv=_v;function Iv(){this.place=0}function Rv(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=t.place;o<n;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function Tv(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Cv(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}_v.prototype._importDER=function(e,t){e=ov.toArray(e,t);var r=new Iv;if(48!==e[r.place++])return!1;var n=Rv(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Rv(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var a=Rv(e,r);if(!1===a)return!1;if(e.length!==a+r.place)return!1;var s=e.slice(r.place,a+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new(be())(o),this.s=new(be())(s),this.recoveryParam=null,!0},_v.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=Tv(t),r=Tv(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];Cv(n,t.length),(n=n.concat(t)).push(2),Cv(n,r.length);var i=n.concat(r),o=[48];return Cv(o,i.length),o=o.concat(i),ov.encode(o,e)};var Pv=function(){throw new Error("unsupported")},Ov=ov.assert;function Uv(e){if(!(this instanceof Uv))return new Uv(e);"string"===typeof e&&(Ov(Object.prototype.hasOwnProperty.call(bv,e),"Unknown curve "+e),e=bv[e]),e instanceof bv.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Mv=Uv;Uv.prototype.keyPair=function(e){return new Av(this,e)},Uv.prototype.keyFromPrivate=function(e,t){return Av.fromPrivate(this,e,t)},Uv.prototype.keyFromPublic=function(e,t){return Av.fromPublic(this,e,t)},Uv.prototype.genKeyPair=function(e){e||(e={});for(var t=new wv({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Pv(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(be())(2));;){var i=new(be())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},Uv.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Uv.prototype.sign=function(e,t,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(be())(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i),s=new wv({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(be())(1)),c=0;;c++){var f=n.k?n.k(c):new(be())(s.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var h=l.getX(),d=h.umod(this.n);if(0!==d.cmpn(0)){var p=f.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var v=(l.getY().isOdd()?1:0)|(0!==h.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),v^=1),new Sv({r:d,s:p,recoveryParam:v})}}}}}},Uv.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(be())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new Sv(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,s=o.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},Uv.prototype.recoverPubKey=function(e,t,r,n){Ov((3&r)===r,"The recovery param is more than two bits"),t=new Sv(t,n);var i=this.n,o=new(be())(e),a=t.r,s=t.s,u=1&r,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");a=c?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var f=t.r.invm(i),l=i.sub(o).mul(f).umod(i),h=s.mul(f).umod(i);return this.g.mulAdd(l,a,h)},Uv.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new Sv(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Fv=tv((function(e,t){var r=t;r.version="6.5.4",r.utils=ov,r.rand=function(){throw new Error("unsupported")},r.curve=yv,r.curves=bv,r.ec=Mv,r.eddsa=null})).ec,Dv=new up("signing-key/5.7.0"),Lv=null;function Zv(){return Lv||(Lv=new Fv("secp256k1")),Lv}var Bv=function(){function e(t){(0,N.Z)(this,e),Vp(this,"curve","secp256k1"),Vp(this,"privateKey",bp(t)),32!==Ep(this.privateKey)&&Dv.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var r=Zv().keyFromPrivate(vp(this.privateKey));Vp(this,"publicKey","0x"+r.getPublic(!1,"hex")),Vp(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Vp(this,"_isSigningKey",!0)}return(0,k.Z)(e,[{key:"_addPoint",value:function(e){var t=Zv().keyFromPublic(vp(this.publicKey)),r=Zv().keyFromPublic(vp(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(e){var t=Zv().keyFromPrivate(vp(this.privateKey)),r=vp(e);32!==r.length&&Dv.throwArgumentError("bad digest length","digest",e);var n=t.sign(r,{canonical:!0});return Ap({recoveryParam:n.recoveryParam,r:kp("0x"+n.r.toString(16),32),s:kp("0x"+n.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(e){var t=Zv().keyFromPrivate(vp(this.privateKey)),r=Zv().keyFromPublic(vp(Gv(e)));return kp("0x"+t.derive(r.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(e){return!(!e||!e._isSigningKey)}}]),e}();function Gv(e,t){var r=vp(e);if(32===r.length){var n=new Bv(r);return t?"0x"+Zv().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}return 33===r.length?t?bp(r):"0x"+Zv().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Zv().keyFromPublic(r).getPublic(!0,"hex"):bp(r):Dv.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Wv,jv=new up("transactions/5.6.2");function zv(e){return"0x"===e?null:jp(e)}function qv(e){return"0x"===e?zp:Tp.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Wv||(Wv={}));var Vv=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Kv={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Hv(e){return jp(wp(Mp(wp(Gv(e),1)),12))}function Jv(e,t){return Hv(function(e,t){var r=Ap(t),n={r:vp(r.r),s:vp(r.s)};return"0x"+Zv().recoverPubKey(vp(e),n,r.recoveryParam).encode("hex",!1)}(vp(e),t))}function Xv(e,t){var r=gp(Tp.from(e).toHexString());return r.length>32&&jv.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function $v(e,t){return{address:jp(e),storageKeys:(t||[]).map((function(t,r){return 32!==Ep(t)&&jv.throwArgumentError("invalid access list storageKey","accessList[".concat(e,":").concat(r,"]"),t),t.toLowerCase()}))}}function Yv(e){if(Array.isArray(e))return e.map((function(e,t){return Array.isArray(e)?(e.length>2&&jv.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value[".concat(t,"]"),e),$v(e[0],e[1])):$v(e.address,e.storageKeys)}));var t=Object.keys(e).map((function(t){var r=e[t].reduce((function(e,t){return e[t]=!0,e}),{});return $v(t,Object.keys(r).sort())}));return t.sort((function(e,t){return e.address.localeCompare(t.address)})),t}function Qv(e){return Yv(e).map((function(e){return[e.address,e.storageKeys]}))}function eg(e,t){if(null!=e.gasPrice){var r=Tp.from(e.gasPrice),n=Tp.from(e.maxFeePerGas||0);r.eq(n)||jv.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:n})}var i=[Xv(e.chainId||0,"chainId"),Xv(e.nonce||0,"nonce"),Xv(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Xv(e.maxFeePerGas||0,"maxFeePerGas"),Xv(e.gasLimit||0,"gasLimit"),null!=e.to?jp(e.to):"0x",Xv(e.value||0,"value"),e.data||"0x",Qv(e.accessList||[])];if(t){var o=Ap(t);i.push(Xv(o.recoveryParam,"recoveryParam")),i.push(gp(o.r)),i.push(gp(o.s))}return Np(["0x02",$p(i)])}function tg(e,t){var r=[Xv(e.chainId||0,"chainId"),Xv(e.nonce||0,"nonce"),Xv(e.gasPrice||0,"gasPrice"),Xv(e.gasLimit||0,"gasLimit"),null!=e.to?jp(e.to):"0x",Xv(e.value||0,"value"),e.data||"0x",Qv(e.accessList||[])];if(t){var n=Ap(t);r.push(Xv(n.recoveryParam,"recoveryParam")),r.push(gp(n.r)),r.push(gp(n.s))}return Np(["0x01",$p(r)])}function rg(e,t){var r,n;n=Kv,(r=e)&&"object"===typeof r||qp.throwArgumentError("invalid object","object",r),Object.keys(r).forEach((function(e){n[e]||qp.throwArgumentError("invalid object key - "+e,"transaction:"+e,r)}));var i=[];Vv.forEach((function(t){var r=e[t.name]||[],n={};t.numeric&&(n.hexPad="left"),r=vp(bp(r,n)),t.length&&r.length!==t.length&&r.length>0&&jv.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,r),t.maxLength&&(r=gp(r)).length>t.maxLength&&jv.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,r),i.push(bp(r))}));var o=0;if(null!=e.chainId?"number"!==typeof(o=e.chainId)&&jv.throwArgumentError("invalid transaction.chainId","transaction",e):t&&!hp(t)&&t.v>28&&(o=Math.floor((t.v-35)/2)),0!==o&&(i.push(bp(o)),i.push("0x"),i.push("0x")),!t)return $p(i);var a=Ap(t),s=27+a.recoveryParam;return 0!==o?(i.pop(),i.pop(),i.pop(),s+=2*o+8,a.v>28&&a.v!==s&&jv.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):a.v!==s&&jv.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),i.push(bp(s)),i.push(gp(vp(a.r))),i.push(gp(vp(a.s))),$p(i)}function ng(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&jv.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),rg(e,t);switch(e.type){case 1:return tg(e,t);case 2:return eg(e,t)}return jv.throwError("unsupported transaction type: ".concat(e.type),up.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function ig(e,t,r){try{var n=qv(t[0]).toNumber();if(0!==n&&1!==n)throw new Error("bad recid");e.v=n}catch(o){jv.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=kp(t[1],32),e.s=kp(t[2],32);try{var i=Mp(r(e));e.from=Jv(i,{r:e.r,s:e.s,recoveryParam:e.v})}catch(o){}}function og(e){var t=vp(e);if(t[0]>127)return function(e){var t=ev(e);9!==t.length&&6!==t.length&&jv.throwArgumentError("invalid raw transaction","rawTransaction",e);var r={nonce:qv(t[0]).toNumber(),gasPrice:qv(t[1]),gasLimit:qv(t[2]),to:zv(t[3]),value:qv(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=Tp.from(t[6]).toNumber()}catch(a){return r}if(r.r=kp(t[7],32),r.s=kp(t[8],32),Tp.from(r.r).isZero()&&Tp.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);var n=r.v-27,i=t.slice(0,6);0!==r.chainId&&(i.push(bp(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);var o=Mp($p(i));try{r.from=Jv(o,{r:bp(r.r),s:bp(r.s),recoveryParam:n})}catch(a){}r.hash=Mp(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){var t=ev(e.slice(1));8!==t.length&&11!==t.length&&jv.throwArgumentError("invalid component count for transaction type: 1","payload",bp(e));var r={type:1,chainId:qv(t[0]).toNumber(),nonce:qv(t[1]).toNumber(),gasPrice:qv(t[2]),gasLimit:qv(t[3]),to:zv(t[4]),value:qv(t[5]),data:t[6],accessList:Yv(t[7])};return 8===t.length||(r.hash=Mp(e),ig(r,t.slice(8),tg)),r}(t);case 2:return function(e){var t=ev(e.slice(1));9!==t.length&&12!==t.length&&jv.throwArgumentError("invalid component count for transaction type: 2","payload",bp(e));var r=qv(t[2]),n=qv(t[3]),i={type:2,chainId:qv(t[0]).toNumber(),nonce:qv(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:qv(t[4]),to:zv(t[5]),value:qv(t[6]),data:t[7],accessList:Yv(t[8])};return 9===t.length||(i.hash=Mp(e),ig(i,t.slice(9),eg)),i}(t)}return jv.throwError("unsupported transaction type: ".concat(t[0]),up.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var ag=!1,sg=!1,ug={debug:1,default:2,info:2,warning:3,error:4,off:5},cg=ug.default,fg=null;var lg,hg,dg=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(lg||(lg={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(hg||(hg={}));var pg="0123456789abcdef",vg=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==ug[r]&&this.throwArgumentError("invalid log level name","logLevel",e),cg>ug[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(sg)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=pg[t[o]>>4],r+=pg[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case hg.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case hg.CALL_EXCEPTION:case hg.INSUFFICIENT_FUNDS:case hg.MISSING_NEW:case hg.NONCE_EXPIRED:case hg.REPLACEMENT_UNDERPRICED:case hg.TRANSACTION_REPLACED:case hg.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),dg&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:dg})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return fg||(fg=new e("logger/5.7.0")),fg}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),ag){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}sg=!!t,ag=!!r}},{key:"setLogLevel",value:function(t){var r=ug[t.toLowerCase()];null!=r?cg=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();vg.errors=hg,vg.levels=lg;var gg=new vg("bytes/5.7.0");function mg(e){return!!e.toHexString}function yg(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return yg(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function bg(e){return"number"===typeof e&&e==e&&e%1===0}function Eg(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!bg(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!bg(r)||r<0||r>=256)return!1}return!0}function wg(e,t){if(t||(t={}),"number"===typeof e){gg.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),yg(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),mg(e)&&(e=e.toHexString()),Ng(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":gg.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return yg(new Uint8Array(i))}return Eg(e)?yg(new Uint8Array(e)):gg.throwArgumentError("invalid arrayify value","value",e)}function Ng(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var kg="0123456789abcdef";function Ag(e,t){if(t||(t={}),"number"===typeof e){gg.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=kg[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),mg(e))return e.toHexString();if(Ng(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":gg.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Eg(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=kg[(240&o)>>4]+kg[15&o]}return n}return gg.throwArgumentError("invalid hexlify value","value",e)}function xg(e,t){for("string"!==typeof e?e=Ag(e):Ng(e)||gg.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&gg.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var _g="bignumber/5.7.0",Sg=be().BN,Ig=new vg(_g),Rg={},Tg=9007199254740991;var Cg=!1,Pg=function(){function e(t,r){(0,N.Z)(this,e),t!==Rg&&Ig.throwError("cannot call constructor directly; use BigNumber.from",vg.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Ug(Mg(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Ug(Mg(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Ug(Mg(this).add(Mg(e)))}},{key:"sub",value:function(e){return Ug(Mg(this).sub(Mg(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Fg("division-by-zero","div"),Ug(Mg(this).div(Mg(t)))}},{key:"mul",value:function(e){return Ug(Mg(this).mul(Mg(e)))}},{key:"mod",value:function(e){var t=Mg(e);return t.isNeg()&&Fg("division-by-zero","mod"),Ug(Mg(this).umod(t))}},{key:"pow",value:function(e){var t=Mg(e);return t.isNeg()&&Fg("negative-power","pow"),Ug(Mg(this).pow(t))}},{key:"and",value:function(e){var t=Mg(e);return(this.isNegative()||t.isNeg())&&Fg("unbound-bitwise-result","and"),Ug(Mg(this).and(t))}},{key:"or",value:function(e){var t=Mg(e);return(this.isNegative()||t.isNeg())&&Fg("unbound-bitwise-result","or"),Ug(Mg(this).or(t))}},{key:"xor",value:function(e){var t=Mg(e);return(this.isNegative()||t.isNeg())&&Fg("unbound-bitwise-result","xor"),Ug(Mg(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Fg("negative-width","mask"),Ug(Mg(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Fg("negative-width","shl"),Ug(Mg(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Fg("negative-width","shr"),Ug(Mg(this).shrn(e))}},{key:"eq",value:function(e){return Mg(this).eq(Mg(e))}},{key:"lt",value:function(e){return Mg(this).lt(Mg(e))}},{key:"lte",value:function(e){return Mg(this).lte(Mg(e))}},{key:"gt",value:function(e){return Mg(this).gt(Mg(e))}},{key:"gte",value:function(e){return Mg(this).gte(Mg(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return Mg(this).isZero()}},{key:"toNumber",value:function(){try{return Mg(this).toNumber()}catch(e){Fg("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return Ig.throwError("this platform does not support BigInt",vg.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?Cg||(Cg=!0,Ig.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Ig.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",vg.errors.UNEXPECTED_ARGUMENT,{}):Ig.throwError("BigNumber.toString does not accept parameters",vg.errors.UNEXPECTED_ARGUMENT,{})),Mg(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Rg,Og(t)):t.match(/^-?[0-9]+$/)?new e(Rg,Og(new Sg(t))):Ig.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Fg("underflow","BigNumber.from",t),(t>=Tg||t<=-9007199254740991)&&Fg("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(Eg(r))return e.from(Ag(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(Ng(i)||"-"===i[0]&&Ng(i.substring(1))))return e.from(i)}return Ig.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function Og(e){if("string"!==typeof e)return Og(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Ig.throwArgumentError("invalid hex","value",e),"0x00"===(e=Og(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Ug(e){return Pg.from(Og(e))}function Mg(e){var t=Pg.from(e).toHexString();return"-"===t[0]?new Sg("-"+t.substring(3),16):new Sg(t.substring(2),16)}function Fg(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),Ig.throwError(e,vg.errors.NUMERIC_FAULT,n)}var Dg=new vg(_g),Lg={},Zg=Pg.from(0),Bg=Pg.from(-1);function Gg(e,t,r,n){var i={fault:t,operation:r};return void 0!==n&&(i.value=n),Dg.throwError(e,vg.errors.NUMERIC_FAULT,i)}for(var Wg="0";Wg.length<256;)Wg+=Wg;function jg(e){if("number"!==typeof e)try{e=Pg.from(e).toNumber()}catch(t){}return"number"===typeof e&&e>=0&&e<=256&&!(e%1)?"1"+Wg.substring(0,e):Dg.throwArgumentError("invalid decimal size","decimals",e)}function zg(e,t){null==t&&(t=0);var r=jg(t),n=(e=Pg.from(e)).lt(Zg);n&&(e=e.mul(Bg));for(var i=e.mod(r).toString();i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];var o=e.div(r).toString();return e=1===r.length?o:o+"."+i,n&&(e="-"+e),e}function qg(e,t){null==t&&(t=0);var r=jg(t);"string"===typeof e&&e.match(/^-?[0-9.]+$/)||Dg.throwArgumentError("invalid decimal value","value",e);var n="-"===e.substring(0,1);n&&(e=e.substring(1)),"."===e&&Dg.throwArgumentError("missing value","value",e);var i=e.split(".");i.length>2&&Dg.throwArgumentError("too many decimal points","value",e);var o=i[0],a=i[1];for(o||(o="0"),a||(a="0");"0"===a[a.length-1];)a=a.substring(0,a.length-1);for(a.length>r.length-1&&Gg("fractional component exceeds decimals","underflow","parseFixed"),""===a&&(a="0");a.length<r.length-1;)a+="0";var s=Pg.from(o),u=Pg.from(a),c=s.mul(r).add(u);return n&&(c=c.mul(Bg)),c}var Vg=function(){function e(t,r,n,i){(0,N.Z)(this,e),t!==Lg&&Dg.throwError("cannot use FixedFormat constructor; use FixedFormat.from",vg.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=jg(i),Object.freeze(this)}return(0,k.Z)(e,null,[{key:"from",value:function(t){if(t instanceof e)return t;"number"===typeof t&&(t="fixed128x".concat(t));var r=!0,n=128,i=18;if("string"===typeof t)if("fixed"===t);else if("ufixed"===t)r=!1;else{var o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Dg.throwArgumentError("invalid fixed format","format",t),r="u"!==o[1],n=parseInt(o[2]),i=parseInt(o[3])}else if(t){var a=function(e,r,n){return null==t[e]?n:(typeof t[e]!==r&&Dg.throwArgumentError("invalid fixed format ("+e+" not "+r+")","format."+e,t[e]),t[e])};r=a("signed","boolean",r),n=a("width","number",n),i=a("decimals","number",i)}return n%8&&Dg.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&Dg.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new e(Lg,r,n,i)}}]),e}(),Kg=function(){function e(t,r,n,i){(0,N.Z)(this,e),t!==Lg&&Dg.throwError("cannot use FixedNumber constructor; use FixedNumber.from",vg.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"_checkFormat",value:function(e){this.format.name!==e.format.name&&Dg.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}},{key:"addUnsafe",value:function(t){this._checkFormat(t);var r=qg(this._value,this.format.decimals),n=qg(t._value,t.format.decimals);return e.fromValue(r.add(n),this.format.decimals,this.format)}},{key:"subUnsafe",value:function(t){this._checkFormat(t);var r=qg(this._value,this.format.decimals),n=qg(t._value,t.format.decimals);return e.fromValue(r.sub(n),this.format.decimals,this.format)}},{key:"mulUnsafe",value:function(t){this._checkFormat(t);var r=qg(this._value,this.format.decimals),n=qg(t._value,t.format.decimals);return e.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}},{key:"divUnsafe",value:function(t){this._checkFormat(t);var r=qg(this._value,this.format.decimals),n=qg(t._value,t.format.decimals);return e.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}},{key:"floor",value:function(){var t=this.toString().split(".");1===t.length&&t.push("0");var r=e.from(t[0],this.format),n=!t[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(Hg.toFormat(r.format))),r}},{key:"ceiling",value:function(){var t=this.toString().split(".");1===t.length&&t.push("0");var r=e.from(t[0],this.format),n=!t[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(Hg.toFormat(r.format))),r}},{key:"round",value:function(t){null==t&&(t=0);var r=this.toString().split(".");if(1===r.length&&r.push("0"),(t<0||t>80||t%1)&&Dg.throwArgumentError("invalid decimal count","decimals",t),r[1].length<=t)return this;var n=e.from("1"+Wg.substring(0,t),this.format),i=Jg.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}},{key:"isZero",value:function(){return"0.0"===this._value||"0"===this._value}},{key:"isNegative",value:function(){return"-"===this._value[0]}},{key:"toString",value:function(){return this._value}},{key:"toHexString",value:function(e){return null==e?this._hex:(e%8&&Dg.throwArgumentError("invalid byte width","width",e),xg(Pg.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}},{key:"toUnsafeFloat",value:function(){return parseFloat(this.toString())}},{key:"toFormat",value:function(t){return e.fromString(this._value,t)}}],[{key:"fromValue",value:function(t,r,n){return null!=n||null==r||function(e){return null!=e&&(Pg.isBigNumber(e)||"number"===typeof e&&e%1===0||"string"===typeof e&&!!e.match(/^-?[0-9]+$/)||Ng(e)||"bigint"===typeof e||Eg(e))}(r)||(n=r,r=null),null==r&&(r=0),null==n&&(n="fixed"),e.fromString(zg(t,r),Vg.from(n))}},{key:"fromString",value:function(t,r){null==r&&(r="fixed");var n=Vg.from(r),i=qg(t,n.decimals);!n.signed&&i.lt(Zg)&&Gg("unsigned value cannot be negative","overflow","value",t);var o=null;o=n.signed?i.toTwos(n.width).toHexString():xg(o=i.toHexString(),n.width/8);var a=zg(i,n.decimals);return new e(Lg,o,a,n)}},{key:"fromBytes",value:function(t,r){null==r&&(r="fixed");var n=Vg.from(r);if(wg(t).length>n.width/8)throw new Error("overflow");var i=Pg.from(t);n.signed&&(i=i.fromTwos(n.width));var o=i.toTwos((n.signed?0:1)+n.width).toHexString(),a=zg(i,n.decimals);return new e(Lg,o,a,n)}},{key:"from",value:function(t,r){if("string"===typeof t)return e.fromString(t,r);if(Eg(t))return e.fromBytes(t,r);try{return e.fromValue(t,0,r)}catch(n){if(n.code!==vg.errors.INVALID_ARGUMENT)throw n}return Dg.throwArgumentError("invalid FixedNumber value","value",t)}},{key:"isFixedNumber",value:function(e){return!(!e||!e._isFixedNumber)}}]),e}(),Hg=Kg.from(1),Jg=Kg.from("0.5"),Xg=new vg("units/5.6.1"),$g=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Yg(e){var t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&Xg.throwArgumentError("invalid value","value",e);var r=t[0],n="";for("-"===r.substring(0,1)&&(n="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");var i="";for(2===t.length&&(i="."+(t[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);for(var o=[];r.length;){if(r.length<=3){o.unshift(r);break}var a=r.length-3;o.unshift(r.substring(a)),r=r.substring(0,a)}return n+o.join(",")+i}function Qg(e,t){if("string"===typeof t){var r=$g.indexOf(t);-1!==r&&(t=3*r)}return zg(e,null!=t?t:18)}function em(e,t){if("string"!==typeof e&&Xg.throwArgumentError("value must be a string","value",e),"string"===typeof t){var r=$g.indexOf(t);-1!==r&&(t=3*r)}return qg(e,null!=t?t:18)}function tm(e){return Qg(e,18)}function rm(e){return em(e,18)}var nm=r(97326),im=!1,om=!1,am={debug:1,default:2,info:2,warning:3,error:4,off:5},sm=am.default,um=null;var cm,fm,lm=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(cm||(cm={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(fm||(fm={}));var hm="0123456789abcdef",dm=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==am[r]&&this.throwArgumentError("invalid log level name","logLevel",e),sm>am[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(om)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=hm[t[o]>>4],r+=hm[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case fm.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case fm.CALL_EXCEPTION:case fm.INSUFFICIENT_FUNDS:case fm.MISSING_NEW:case fm.NONCE_EXPIRED:case fm.REPLACEMENT_UNDERPRICED:case fm.TRANSACTION_REPLACED:case fm.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),lm&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:lm})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return um||(um=new e("logger/5.7.0")),um}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),im){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}om=!!t,im=!!r}},{key:"setLogLevel",value:function(t){var r=am[t.toLowerCase()];null!=r?sm=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();dm.errors=fm,dm.levels=cm;var pm=new dm("bytes/5.7.0");function vm(e){return!!e.toHexString}function gm(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return gm(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function mm(e){return km(e)&&!(e.length%2)||bm(e)}function ym(e){return"number"===typeof e&&e==e&&e%1===0}function bm(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!ym(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!ym(r)||r<0||r>=256)return!1}return!0}function Em(e,t){if(t||(t={}),"number"===typeof e){pm.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),gm(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),vm(e)&&(e=e.toHexString()),km(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":pm.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return gm(new Uint8Array(i))}return bm(e)?gm(new Uint8Array(e)):pm.throwArgumentError("invalid arrayify value","value",e)}function wm(e){var t=e.map((function(e){return Em(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),gm(n)}function Nm(e){var t=Em(e);if(0===t.length)return t;for(var r=0;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function km(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var Am="0123456789abcdef";function xm(e,t){if(t||(t={}),"number"===typeof e){pm.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=Am[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),vm(e))return e.toHexString();if(km(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":pm.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(bm(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=Am[(240&o)>>4]+Am[15&o]}return n}return pm.throwArgumentError("invalid hexlify value","value",e)}function _m(e){if("string"!==typeof e)e=xm(e);else if(!km(e)||e.length%2)return null;return(e.length-2)/2}function Sm(e,t,r){return"string"!==typeof e?e=xm(e):(!km(e)||e.length%2)&&pm.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function Im(e){var t="0x";return e.forEach((function(e){t+=xm(e).substring(2)})),t}function Rm(e,t){for("string"!==typeof e?e=xm(e):km(e)||pm.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&pm.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function Tm(e){var t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(mm(e)){var r=Em(e);64===r.length?(t.v=27+(r[32]>>7),r[32]&=127,t.r=xm(r.slice(0,32)),t.s=xm(r.slice(32,64))):65===r.length?(t.r=xm(r.slice(0,32)),t.s=xm(r.slice(32,64)),t.v=r[64]):pm.throwArgumentError("invalid signature string","signature",e),t.v<27&&(0===t.v||1===t.v?t.v+=27:pm.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=xm(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){var n=function(e,t){(e=Em(e)).length>t&&pm.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(t);return r.set(e,t-e.length),gm(r)}(Em(t._vs),32);t._vs=xm(n);var i=n[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=i:t.recoveryParam!==i&&pm.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),n[0]&=127;var o=xm(n);null==t.s?t.s=o:t.s!==o&&pm.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?pm.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{var a=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==a&&pm.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&km(t.r)?t.r=Rm(t.r,32):pm.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&km(t.s)?t.s=Rm(t.s,32):pm.throwArgumentError("signature missing or invalid s","signature",e);var s=Em(t.s);s[0]>=128&&pm.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(s[0]|=128);var u=xm(s);t._vs&&(km(t._vs)||pm.throwArgumentError("signature invalid _vs","signature",e),t._vs=Rm(t._vs,32)),null==t._vs?t._vs=u:t._vs!==u&&pm.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function Cm(e){return xm(wm([(e=Tm(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var Pm=be().BN,Om=new dm("bignumber/5.7.0"),Um={},Mm=9007199254740991;var Fm=!1,Dm=function(){function e(t,r){(0,N.Z)(this,e),t!==Um&&Om.throwError("cannot call constructor directly; use BigNumber.from",dm.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return Zm(Bm(this).fromTwos(e))}},{key:"toTwos",value:function(e){return Zm(Bm(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return Zm(Bm(this).add(Bm(e)))}},{key:"sub",value:function(e){return Zm(Bm(this).sub(Bm(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&Gm("division-by-zero","div"),Zm(Bm(this).div(Bm(t)))}},{key:"mul",value:function(e){return Zm(Bm(this).mul(Bm(e)))}},{key:"mod",value:function(e){var t=Bm(e);return t.isNeg()&&Gm("division-by-zero","mod"),Zm(Bm(this).umod(t))}},{key:"pow",value:function(e){var t=Bm(e);return t.isNeg()&&Gm("negative-power","pow"),Zm(Bm(this).pow(t))}},{key:"and",value:function(e){var t=Bm(e);return(this.isNegative()||t.isNeg())&&Gm("unbound-bitwise-result","and"),Zm(Bm(this).and(t))}},{key:"or",value:function(e){var t=Bm(e);return(this.isNegative()||t.isNeg())&&Gm("unbound-bitwise-result","or"),Zm(Bm(this).or(t))}},{key:"xor",value:function(e){var t=Bm(e);return(this.isNegative()||t.isNeg())&&Gm("unbound-bitwise-result","xor"),Zm(Bm(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&Gm("negative-width","mask"),Zm(Bm(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&Gm("negative-width","shl"),Zm(Bm(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&Gm("negative-width","shr"),Zm(Bm(this).shrn(e))}},{key:"eq",value:function(e){return Bm(this).eq(Bm(e))}},{key:"lt",value:function(e){return Bm(this).lt(Bm(e))}},{key:"lte",value:function(e){return Bm(this).lte(Bm(e))}},{key:"gt",value:function(e){return Bm(this).gt(Bm(e))}},{key:"gte",value:function(e){return Bm(this).gte(Bm(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return Bm(this).isZero()}},{key:"toNumber",value:function(){try{return Bm(this).toNumber()}catch(e){Gm("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return Om.throwError("this platform does not support BigInt",dm.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?Fm||(Fm=!0,Om.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Om.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",dm.errors.UNEXPECTED_ARGUMENT,{}):Om.throwError("BigNumber.toString does not accept parameters",dm.errors.UNEXPECTED_ARGUMENT,{})),Bm(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(Um,Lm(t)):t.match(/^-?[0-9]+$/)?new e(Um,Lm(new Pm(t))):Om.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&Gm("underflow","BigNumber.from",t),(t>=Mm||t<=-9007199254740991)&&Gm("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(bm(r))return e.from(xm(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(km(i)||"-"===i[0]&&km(i.substring(1))))return e.from(i)}return Om.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function Lm(e){if("string"!==typeof e)return Lm(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Om.throwArgumentError("invalid hex","value",e),"0x00"===(e=Lm(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function Zm(e){return Dm.from(Lm(e))}function Bm(e){var t=Dm.from(e).toHexString();return"-"===t[0]?new Pm("-"+t.substring(3),16):new Pm(t.substring(2),16)}function Gm(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),Om.throwError(e,dm.errors.NUMERIC_FAULT,n)}function Wm(e){return"0x"+Fe().keccak_256(Em(e))}var jm=new dm("address/5.7.0");function zm(e){km(e,20)||jm.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=Em(Wm(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var qm={},Vm=0;Vm<10;Vm++)qm[String(Vm)]=String(Vm);for(var Km=0;Km<26;Km++)qm[String.fromCharCode(65+Km)]=String(10+Km);var Hm=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function Jm(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return qm[e]})).join("");t.length>=Hm;){var r=t.substring(0,Hm);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function Xm(e){var t,r=null;if("string"!==typeof e&&jm.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=zm(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&jm.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==Jm(e)&&jm.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new Pm(t,36).toString(16);r.length<40;)r="0"+r;r=zm("0x"+r)}else jm.throwArgumentError("invalid address","address",e);return r}var $m=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ym=new dm("properties/5.7.0");function Qm(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function ey(e){return $m(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.keys(e).map((function(t){var r=e[t];return Promise.resolve(r).then((function(e){return{key:t,value:e}}))})),t.next=3,Promise.all(r);case 3:return n=t.sent,t.abrupt("return",n.reduce((function(e,t){return e[t.key]=t.value,e}),{}));case 5:case"end":return t.stop()}}),t)})))}function ty(e){var t={};for(var r in e)t[r]=e[r];return t}var ry={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function ny(e){if(void 0===e||null===e||ry[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch(i){continue}if(!ny(n))return!1}return!0}return Ym.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function iy(e){if(ny(e))return e;if(Array.isArray(e))return Object.freeze(e.map((function(e){return oy(e)})));if("object"===typeof e){var t={};for(var r in e){var n=e[r];void 0!==n&&Qm(t,r,oy(n))}return t}return Ym.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function oy(e){return iy(e)}var ay,sy,uy=(0,k.Z)((function e(t){for(var r in(0,N.Z)(this,e),t)this[r]=oy(t[r])})),cy=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},fy=new dm("abstract-provider/5.7.0"),ly=function(){function e(){(0,N.Z)(this,e),fy.checkAbstract(this instanceof e?this.constructor:void 0,e),Qm(this,"_isProvider",!0)}return(0,k.Z)(e,[{key:"getFeeData",value:function(){return cy(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r,n,i,o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ey({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((function(e){return null}))});case 2:return t=e.sent,r=t.block,n=t.gasPrice,i=null,o=null,a=null,r&&r.baseFeePerGas&&(i=r.baseFeePerGas,a=Dm.from("1500000000"),o=r.baseFeePerGas.mul(2).add(a)),e.abrupt("return",{lastBaseFeePerGas:i,maxFeePerGas:o,maxPriorityFeePerGas:a,gasPrice:n});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"addListener",value:function(e,t){return this.on(e,t)}},{key:"removeListener",value:function(e,t){return this.off(e,t)}}],[{key:"isProvider",value:function(e){return!(!e||!e._isProvider)}}]),e}(),hy=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},dy=new dm("abstract-signer/5.7.0"),py=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],vy=[dm.errors.INSUFFICIENT_FUNDS,dm.errors.NONCE_EXPIRED,dm.errors.REPLACEMENT_UNDERPRICED],gy=function(){function e(){(0,N.Z)(this,e),dy.checkAbstract(this instanceof e?this.constructor:void 0,e),Qm(this,"_isSigner",!0)}return(0,k.Z)(e,[{key:"getBalance",value:function(e){return hy(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getBalance"),t.next=3,this.provider.getBalance(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getTransactionCount",value:function(e){return hy(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getTransactionCount"),t.next=3,this.provider.getTransactionCount(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"estimateGas",value:function(e){return hy(this,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("estimateGas"),t.next=3,ey(this.checkTransaction(e));case 3:return r=t.sent,t.next=6,this.provider.estimateGas(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"call",value:function(e,t){return hy(this,void 0,void 0,(0,B.Z)().mark((function r(){var n;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this._checkProvider("call"),r.next=3,ey(this.checkTransaction(e));case 3:return n=r.sent,r.next=6,this.provider.call(n,t);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"sendTransaction",value:function(e){return hy(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("sendTransaction"),t.next=3,this.populateTransaction(e);case 3:return r=t.sent,t.next=6,this.signTransaction(r);case 6:return n=t.sent,t.next=9,this.provider.sendTransaction(n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getChainId",value:function(){return hy(this,void 0,void 0,(0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getChainId"),e.next=3,this.provider.getNetwork();case 3:return t=e.sent,e.abrupt("return",t.chainId);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getGasPrice",value:function(){return hy(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getGasPrice"),e.next=3,this.provider.getGasPrice();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getFeeData",value:function(){return hy(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getFeeData"),e.next=3,this.provider.getFeeData();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resolveName",value:function(e){return hy(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("resolveName"),t.next=3,this.provider.resolveName(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"checkTransaction",value:function(e){for(var t in e)-1===py.indexOf(t)&&dy.throwArgumentError("invalid transaction key: "+t,"transaction",e);var r=ty(e);return null==r.from?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then((function(t){return t[0].toLowerCase()!==t[1].toLowerCase()&&dy.throwArgumentError("from address mismatch","transaction",e),t[0]})),r}},{key:"populateTransaction",value:function(e){return hy(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i,o,a=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ey(this.checkTransaction(e));case 2:if(null!=(r=t.sent).to&&(r.to=Promise.resolve(r.to).then((function(e){return hy(a,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.resolveName(e);case 4:return null==(r=t.sent)&&dy.throwArgumentError("provided ENS name resolves to null","tx.to",e),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})))})),r.to.catch((function(e){}))),n=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas,null==r.gasPrice||2!==r.type&&!n?0!==r.type&&1!==r.type||!n||dy.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):dy.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas){t.next=10;break}r.type=2,t.next=18;break;case 10:if(0!==r.type&&1!==r.type){t.next=14;break}null==r.gasPrice&&(r.gasPrice=this.getGasPrice()),t.next=18;break;case 14:return t.next=16,this.getFeeData();case 16:i=t.sent,null==r.type?null!=i.maxFeePerGas&&null!=i.maxPriorityFeePerGas?(r.type=2,null!=r.gasPrice?(o=r.gasPrice,delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o):(null==r.maxFeePerGas&&(r.maxFeePerGas=i.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))):null!=i.gasPrice?(n&&dy.throwError("network does not support EIP-1559",dm.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=i.gasPrice),r.type=0):dy.throwError("failed to get consistent fee data",dm.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"}):2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=i.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas));case 18:return null==r.nonce&&(r.nonce=this.getTransactionCount("pending")),null==r.gasLimit&&(r.gasLimit=this.estimateGas(r).catch((function(e){if(vy.indexOf(e.code)>=0)throw e;return dy.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",dm.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:r})}))),null==r.chainId?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then((function(t){return 0!==t[1]&&t[0]!==t[1]&&dy.throwArgumentError("chainId address mismatch","transaction",e),t[0]})),t.next=23,ey(r);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"_checkProvider",value:function(e){this.provider||dy.throwError("missing provider",dm.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}}],[{key:"isSigner",value:function(e){return!(!e||!e._isSigner)}}]),e}(),my=new dm("strings/5.7.0");function yy(e,t,r,n,i){if(e===sy.BAD_PREFIX||e===sy.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===sy.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(ay||(ay={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(sy||(sy={}));Object.freeze({error:function(e,t,r,n,i){return my.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:yy,replace:function(e,t,r,n,i){return e===sy.OVERLONG?(n.push(i),0):(n.push(65533),yy(e,t,r))}});function by(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ay.current;t!=ay.current&&(my.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return Em(r)}var Ey="\x19Ethereum Signed Message:\n";function wy(e){return"string"===typeof e&&(e=by(e)),Wm(wm([by(Ey),by(String(e.length)),e]))}function Ny(e){return Wm(by(e))}var ky=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Ay=new dm("hash/5.7.0"),xy=new Uint8Array(32);xy.fill(0);var _y=Dm.from(-1),Sy=Dm.from(0),Iy=Dm.from(1),Ry=Dm.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Ty=Rm(Iy.toHexString(),32),Cy=Rm(Sy.toHexString(),32),Py={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Oy=["name","version","chainId","verifyingContract","salt"];function Uy(e){return function(t){return"string"!==typeof t&&Ay.throwArgumentError("invalid domain value for ".concat(JSON.stringify(e)),"domain.".concat(e),t),t}}var My={name:Uy("name"),version:Uy("version"),chainId:function(e){try{return Dm.from(e).toString()}catch(t){}return Ay.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return Xm(e).toLowerCase()}catch(t){}return Ay.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{var t=Em(e);if(32!==t.length)throw new Error("bad length");return xm(t)}catch(r){}return Ay.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function Fy(e){var t=e.match(/^(u?)int(\d*)$/);if(t){var r=""===t[1],n=parseInt(t[2]||"256");(n%8!==0||n>256||t[2]&&t[2]!==String(n))&&Ay.throwArgumentError("invalid numeric width","type",e);var i=Ry.mask(r?n-1:n),o=r?i.add(Iy).mul(_y):Sy;return function(t){var r=Dm.from(t);return(r.lt(o)||r.gt(i))&&Ay.throwArgumentError("value out-of-bounds for ".concat(e),"value",t),Rm(r.toTwos(256).toHexString(),32)}}var a=e.match(/^bytes(\d+)$/);if(a){var s=parseInt(a[1]);return(0===s||s>32||a[1]!==String(s))&&Ay.throwArgumentError("invalid bytes width","type",e),function(t){return Em(t).length!==s&&Ay.throwArgumentError("invalid length for ".concat(e),"value",t),function(e){var t=Em(e),r=t.length%32;return r?Im([t,xy.slice(r)]):xm(t)}(t)}}switch(e){case"address":return function(e){return Rm(Xm(e),32)};case"bool":return function(e){return e?Ty:Cy};case"bytes":return function(e){return Wm(e)};case"string":return function(e){return Ny(e)}}return null}function Dy(e,t){return"".concat(e,"(").concat(t.map((function(e){var t=e.name;return e.type+" "+t})).join(","),")")}var Ly,Zy=function(){function e(t){(0,N.Z)(this,e),Qm(this,"types",Object.freeze(oy(t))),Qm(this,"_encoderCache",{}),Qm(this,"_types",{});var r={},n={},i={};Object.keys(t).forEach((function(e){r[e]={},n[e]=[],i[e]={}}));var o=function(e){var i={};t[e].forEach((function(o){i[o.name]&&Ay.throwArgumentError("duplicate variable name ".concat(JSON.stringify(o.name)," in ").concat(JSON.stringify(e)),"types",t),i[o.name]=!0;var a=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];a===e&&Ay.throwArgumentError("circular type reference to ".concat(JSON.stringify(a)),"types",t),Fy(a)||(n[a]||Ay.throwArgumentError("unknown type ".concat(JSON.stringify(a)),"types",t),n[a].push(e),r[e][a]=!0)}))};for(var a in t)o(a);var s=Object.keys(n).filter((function(e){return 0===n[e].length}));for(var u in 0===s.length?Ay.throwArgumentError("missing primary type","types",t):s.length>1&&Ay.throwArgumentError("ambiguous primary types or unused types: ".concat(s.map((function(e){return JSON.stringify(e)})).join(", ")),"types",t),Qm(this,"primaryType",s[0]),function e(o,a){a[o]&&Ay.throwArgumentError("circular type reference to ".concat(JSON.stringify(o)),"types",t),a[o]=!0,Object.keys(r[o]).forEach((function(t){n[t]&&(e(t,a),Object.keys(a).forEach((function(e){i[e][t]=!0})))})),delete a[o]}(this.primaryType,{}),i){var c=Object.keys(i[u]);c.sort(),this._types[u]=Dy(u,t[u])+c.map((function(e){return Dy(e,t[e])})).join("")}}return(0,k.Z)(e,[{key:"getEncoder",value:function(e){var t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}},{key:"_getEncoder",value:function(e){var t=this,r=Fy(e);if(r)return r;var n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){var i=n[1],o=this.getEncoder(i),a=parseInt(n[3]);return function(e){a>=0&&e.length!==a&&Ay.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);var r=e.map(o);return t._types[i]&&(r=r.map(Wm)),Wm(Im(r))}}var s=this.types[e];if(s){var u=Ny(this._types[e]);return function(e){var r=s.map((function(r){var n=r.name,i=r.type,o=t.getEncoder(i)(e[n]);return t._types[i]?Wm(o):o}));return r.unshift(u),Im(r)}}return Ay.throwArgumentError("unknown type: ".concat(e),"type",e)}},{key:"encodeType",value:function(e){var t=this._types[e];return t||Ay.throwArgumentError("unknown type: ".concat(JSON.stringify(e)),"name",e),t}},{key:"encodeData",value:function(e,t){return this.getEncoder(e)(t)}},{key:"hashStruct",value:function(e,t){return Wm(this.encodeData(e,t))}},{key:"encode",value:function(e){return this.encodeData(this.primaryType,e)}},{key:"hash",value:function(e){return this.hashStruct(this.primaryType,e)}},{key:"_visit",value:function(e,t,r){var n=this;if(Fy(e))return r(e,t);var i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],a=parseInt(i[3]);return a>=0&&t.length!==a&&Ay.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map((function(e){return n._visit(o,e,r)}))}var s=this.types[e];return s?s.reduce((function(e,i){var o=i.name,a=i.type;return e[o]=n._visit(a,t[o],r),e}),{}):Ay.throwArgumentError("unknown type: ".concat(e),"type",e)}},{key:"visit",value:function(e,t){return this._visit(this.primaryType,e,t)}}],[{key:"from",value:function(t){return new e(t)}},{key:"getPrimaryType",value:function(t){return e.from(t).primaryType}},{key:"hashStruct",value:function(t,r,n){return e.from(r).hashStruct(t,n)}},{key:"hashDomain",value:function(t){var r=[];for(var n in t){var i=Py[n];i||Ay.throwArgumentError("invalid typed-data domain key: ".concat(JSON.stringify(n)),"domain",t),r.push({name:n,type:i})}return r.sort((function(e,t){return Oy.indexOf(e.name)-Oy.indexOf(t.name)})),e.hashStruct("EIP712Domain",{EIP712Domain:r},t)}},{key:"encode",value:function(t,r,n){return Im(["0x1901",e.hashDomain(t),e.from(r).hash(n)])}},{key:"hash",value:function(t,r,n){return Wm(e.encode(t,r,n))}},{key:"resolveNames",value:function(t,r,n,i){return ky(this,void 0,void 0,(0,B.Z)().mark((function o(){var a,s,u;return(0,B.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=ty(t),a={},t.verifyingContract&&!km(t.verifyingContract,20)&&(a[t.verifyingContract]="0x"),(s=e.from(r)).visit(n,(function(e,t){return"address"!==e||km(t,20)||(a[t]="0x"),t})),o.t0=(0,B.Z)().keys(a);case 6:if((o.t1=o.t0()).done){o.next=13;break}return u=o.t1.value,o.next=10,i(u);case 10:a[u]=o.sent,o.next=6;break;case 13:return t.verifyingContract&&a[t.verifyingContract]&&(t.verifyingContract=a[t.verifyingContract]),n=s.visit(n,(function(e,t){return"address"===e&&a[t]?a[t]:t})),o.abrupt("return",{domain:t,value:n});case 16:case"end":return o.stop()}}),o)})))}},{key:"getPayload",value:function(t,r,n){e.hashDomain(t);var i={},o=[];Oy.forEach((function(e){var r=t[e];null!=r&&(i[e]=My[e](r),o.push({name:e,type:Py[e]}))}));var a=e.from(r),s=ty(r);return s.EIP712Domain?Ay.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):s.EIP712Domain=o,a.encode(n),{types:s,domain:i,primaryType:a.primaryType,message:a.visit(n,(function(e,t){if(e.match(/^bytes(\d*)/))return xm(Em(t));if(e.match(/^u?int/))return Dm.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!==typeof t&&Ay.throwArgumentError("invalid string","value",t),t}return Ay.throwArgumentError("unsupported type","type",e)}))}}}]),e}(),By=function(){function e(t){(0,N.Z)(this,e),Qm(this,"alphabet",t),Qm(this,"base",t.length),Qm(this,"_alphabetMap",{}),Qm(this,"_leader",t.charAt(0));for(var r=0;r<t.length;r++)this._alphabetMap[t.charAt(r)]=r}return(0,k.Z)(e,[{key:"encode",value:function(e){var t=Em(e);if(0===t.length)return"";for(var r=[0],n=0;n<t.length;++n){for(var i=t[n],o=0;o<r.length;++o)i+=r[o]<<8,r[o]=i%this.base,i=i/this.base|0;for(;i>0;)r.push(i%this.base),i=i/this.base|0}for(var a="",s=0;0===t[s]&&s<t.length-1;++s)a+=this._leader;for(var u=r.length-1;u>=0;--u)a+=this.alphabet[r[u]];return a}},{key:"decode",value:function(e){if("string"!==typeof e)throw new TypeError("Expected String");var t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(var r=0;r<e.length;r++){var n=this._alphabetMap[e[r]];if(void 0===n)throw new Error("Non-base"+this.base+" character");for(var i=n,o=0;o<t.length;++o)i+=t[o]*this.base,t[o]=255&i,i>>=8;for(;i>0;)t.push(255&i),i>>=8}for(var a=0;e[a]===this._leader&&a<e.length-1;++a)t.push(0);return Em(new Uint8Array(t.reverse()))}}]),e}(),Gy=(new By("abcdefghijklmnopqrstuvwxyz234567"),new By("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));!function(e){e.sha256="sha256",e.sha512="sha512"}(Ly||(Ly={}));var Wy=new dm("sha2/5.7.0");function jy(e){return"0x"+Ka().sha256().update(Em(e)).digest("hex")}function zy(e,t,r){return Ly[e]||Wy.throwError("unsupported algorithm "+e,dm.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+Ka().hmac(Ka()[e],Em(t)).update(Em(r)).digest("hex")}function qy(e,t,r,n,i){var o;e=Em(e),t=Em(t);var a,s,u=1,c=new Uint8Array(n),f=new Uint8Array(t.length+4);f.set(t);for(var l=1;l<=u;l++){f[t.length]=l>>24&255,f[t.length+1]=l>>16&255,f[t.length+2]=l>>8&255,f[t.length+3]=255&l;var h=Em(zy(i,e,f));o||(o=h.length,s=new Uint8Array(o),a=n-((u=Math.ceil(n/o))-1)*o),s.set(h);for(var d=1;d<r;d++){h=Em(zy(i,e,h));for(var p=0;p<o;p++)s[p]^=h[p]}var v=(l-1)*o,g=l===u?a:o;c.set(Em(s).slice(0,g),v)}return xm(c)}"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof r.g?r.g:"undefined"!==typeof self&&self;function Vy(e,t,r){return r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===t||null===t)&&r.path)}},e(r,r.exports),r.exports}var Ky=Hy;function Hy(e,t){if(!e)throw new Error(t||"Assertion failed")}Hy.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)};var Jy=Vy((function(e,t){var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",r=0;r<e.length;r++)t+=n(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var i=e.charCodeAt(n),o=i>>8,a=255&i;o?r.push(o,a):r.push(a)}return r},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}})),Xy=Vy((function(e,t){var r=t;r.assert=Ky,r.toArray=Jy.toArray,r.zero2=Jy.zero2,r.toHex=Jy.toHex,r.encode=Jy.encode,r.getNAF=function(e,t,r){var n=new Array(Math.max(e.bitLength(),r)+1);n.fill(0);for(var i=1<<t+1,o=e.clone(),a=0;a<n.length;a++){var s,u=o.andln(i-1);o.isOdd()?(s=u>(i>>1)-1?(i>>1)-u:u,o.isubn(s)):s=0,n[a]=s,o.iushrn(1)}return n},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,i=0,o=0;e.cmpn(-i)>0||t.cmpn(-o)>0;){var a,s,u=e.andln(3)+i&3,c=t.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),a=0===(1&u)?0:3!==(n=e.andln(7)+i&7)&&5!==n||2!==c?u:-u,r[0].push(a),s=0===(1&c)?0:3!==(n=t.andln(7)+o&7)&&5!==n||2!==u?c:-c,r[1].push(s),2*i===a+1&&(i=1-i),2*o===s+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},r.parseBytes=function(e){return"string"===typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(be())(e,"hex","le")}})),$y=Xy.getNAF,Yy=Xy.getJSF,Qy=Xy.assert;function eb(e,t){this.type=e,this.p=new(be())(t.p,16),this.red=t.prime?be().red(t.prime):be().mont(this.p),this.zero=new(be())(0).toRed(this.red),this.one=new(be())(1).toRed(this.red),this.two=new(be())(2).toRed(this.red),this.n=t.n&&new(be())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var tb=eb;function rb(e,t){this.curve=e,this.type=t,this.precomputed=null}eb.prototype.point=function(){throw new Error("Not implemented")},eb.prototype.validate=function(){throw new Error("Not implemented")},eb.prototype._fixedNafMul=function(e,t){Qy(e.precomputed);var r=e._getDoubles(),n=$y(t,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var o,a,s=[];for(o=0;o<n.length;o+=r.step){a=0;for(var u=o+r.step-1;u>=o;u--)a=(a<<1)+n[u];s.push(a)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<s.length;o++)(a=s[o])===l?f=f.mixedAdd(r.points[o]):a===-l&&(f=f.mixedAdd(r.points[o].neg()));c=c.add(f)}return c.toP()},eb.prototype._wnafMul=function(e,t){var r=4,n=e._getNAFPoints(r);r=n.wnd;for(var i=n.points,o=$y(t,r,this._bitLength),a=this.jpoint(null,null,null),s=o.length-1;s>=0;s--){for(var u=0;s>=0&&0===o[s];s--)u++;if(s>=0&&u++,a=a.dblp(u),s<0)break;var c=o[s];Qy(0!==c),a="affine"===e.type?c>0?a.mixedAdd(i[c-1>>1]):a.mixedAdd(i[-c-1>>1].neg()):c>0?a.add(i[c-1>>1]):a.add(i[-c-1>>1].neg())}return"affine"===e.type?a.toP():a},eb.prototype._wnafMulAdd=function(e,t,r,n,i){var o,a,s,u=this._wnafT1,c=this._wnafT2,f=this._wnafT3,l=0;for(o=0;o<n;o++){var h=(s=t[o])._getNAFPoints(e);u[o]=h.wnd,c[o]=h.points}for(o=n-1;o>=1;o-=2){var d=o-1,p=o;if(1===u[d]&&1===u[p]){var v=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(v[1]=t[d].add(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].add(t[p].neg())):(v[1]=t[d].toJ().mixedAdd(t[p]),v[2]=t[d].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=Yy(r[d],r[p]);for(l=Math.max(m[0].length,l),f[d]=new Array(l),f[p]=new Array(l),a=0;a<l;a++){var y=0|m[0][a],b=0|m[1][a];f[d][a]=g[3*(y+1)+(b+1)],f[p][a]=0,c[d]=v}}else f[d]=$y(r[d],u[d],this._bitLength),f[p]=$y(r[p],u[p],this._bitLength),l=Math.max(f[d].length,l),l=Math.max(f[p].length,l)}var E=this.jpoint(null,null,null),w=this._wnafT4;for(o=l;o>=0;o--){for(var N=0;o>=0;){var k=!0;for(a=0;a<n;a++)w[a]=0|f[a][o],0!==w[a]&&(k=!1);if(!k)break;N++,o--}if(o>=0&&N++,E=E.dblp(N),o<0)break;for(a=0;a<n;a++){var A=w[a];0!==A&&(A>0?s=c[a][A-1>>1]:A<0&&(s=c[a][-A-1>>1].neg()),E="affine"===s.type?E.mixedAdd(s):E.add(s))}}for(o=0;o<n;o++)c[o]=null;return i?E:E.toP()},eb.BasePoint=rb,rb.prototype.eq=function(){throw new Error("Not implemented")},rb.prototype.validate=function(){return this.curve.validate(this)},eb.prototype.decodePoint=function(e,t){e=Xy.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?Qy(e[e.length-1]%2===0):7===e[0]&&Qy(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},rb.prototype.encodeCompressed=function(e){return this.encode(e,!0)},rb.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},rb.prototype.encode=function(e,t){return Xy.encode(this._encode(t),e)},rb.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},rb.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},rb.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,i=0;i<t;i+=e){for(var o=0;o<e;o++)n=n.dbl();r.push(n)}return{step:e,points:r}},rb.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),i=1;i<r;i++)t[i]=t[i-1].add(n);return{wnd:e,points:t}},rb.prototype._getBeta=function(){return null},rb.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var nb=Vy((function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}})),ib=Xy.assert;function ob(e){tb.call(this,"short",e),this.a=new(be())(e.a,16).toRed(this.red),this.b=new(be())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}nb(ob,tb);var ab=ob;function sb(e,t,r,n){tb.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(be())(t,16),this.y=new(be())(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function ub(e,t,r,n){tb.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===n?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(be())(0)):(this.x=new(be())(t,16),this.y=new(be())(r,16),this.z=new(be())(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ob.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(be())(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=(t=n[0].cmp(n[1])<0?n[0]:n[1]).toRed(this.red)}if(e.lambda)r=new(be())(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?r=i[0]:(r=i[1],ib(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new(be())(e.a,16),b:new(be())(e.b,16)}})):this._getEndoBasis(r)}}},ob.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:be().mont(e),r=new(be())(2).toRed(t).redInvm(),n=r.redNeg(),i=new(be())(3).toRed(t).redNeg().redSqrt().redMul(r);return[n.redAdd(i).fromRed(),n.redSub(i).fromRed()]},ob.prototype._getEndoBasis=function(e){for(var t,r,n,i,o,a,s,u,c,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,h=this.n.clone(),d=new(be())(1),p=new(be())(0),v=new(be())(0),g=new(be())(1),m=0;0!==l.cmpn(0);){var y=h.div(l);u=h.sub(y.mul(l)),c=v.sub(y.mul(d));var b=g.sub(y.mul(p));if(!n&&u.cmp(f)<0)t=s.neg(),r=d,n=u.neg(),i=c;else if(n&&2===++m)break;s=u,h=l,l=u,v=d,d=c,g=p,p=b}o=u.neg(),a=c;var E=n.sqr().add(i.sqr());return o.sqr().add(a.sqr()).cmp(E)>=0&&(o=t,a=r),n.negative&&(n=n.neg(),i=i.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:n,b:i},{a:o,b:a}]},ob.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],i=n.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),a=i.mul(r.a),s=o.mul(n.a),u=i.mul(r.b),c=o.mul(n.b);return{k1:e.sub(a).sub(s),k2:u.add(c).neg()}},ob.prototype.pointFromX=function(e,t){(e=new(be())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=r.redSqrt();if(0!==n.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var i=n.fromRed().isOdd();return(t&&!i||!t&&i)&&(n=n.redNeg()),this.point(e,n)},ob.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(i).cmpn(0)},ob.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,i=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(t[o]),s=e[o],u=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),u=u.neg(!0)),n[2*o]=s,n[2*o+1]=u,i[2*o]=a.k1,i[2*o+1]=a.k2}for(var c=this._wnafMulAdd(1,n,i,2*o,r),f=0;f<2*o;f++)n[f]=null,i[f]=null;return c},nb(sb,tb.BasePoint),ob.prototype.point=function(e,t,r){return new sb(this,e,t,r)},ob.prototype.pointFromJSON=function(e,t){return sb.fromJSON(this,e,t)},sb.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},sb.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},sb.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function i(t){return e.point(t[0],t[1],r)}var o=t[2];return n.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[n].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[n].concat(o.naf.points.map(i))}},n},sb.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},sb.prototype.isInfinity=function(){return this.inf},sb.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},sb.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),o=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)},sb.prototype.getX=function(){return this.x.fromRed()},sb.prototype.getY=function(){return this.y.fromRed()},sb.prototype.mul=function(e){return e=new(be())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},sb.prototype.mulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i):this.curve._wnafMulAdd(1,n,i,2)},sb.prototype.jmulAdd=function(e,t,r){var n=[this,t],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,i,!0):this.curve._wnafMulAdd(1,n,i,2,!0)},sb.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},sb.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},sb.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},nb(ub,tb.BasePoint),ob.prototype.jpoint=function(e,t,r){return new ub(this,e,t,r)},ub.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},ub.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},ub.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),i=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(r.redMul(this.z)),s=n.redSub(i),u=o.redSub(a);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),f=c.redMul(s),l=n.redMul(c),h=u.redSqr().redIAdd(f).redISub(l).redISub(l),d=u.redMul(l.redISub(h)).redISub(o.redMul(f)),p=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,d,p)},ub.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),i=this.y,o=e.y.redMul(t).redMul(this.z),a=r.redSub(n),s=i.redSub(o);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),f=r.redMul(u),l=s.redSqr().redIAdd(c).redISub(f).redISub(f),h=s.redMul(f.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(a);return this.curve.jpoint(l,h,d)},ub.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,i=this.curve.tinv,o=this.x,a=this.y,s=this.z,u=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var f=o.redSqr(),l=c.redSqr(),h=l.redSqr(),d=f.redAdd(f).redIAdd(f).redIAdd(n.redMul(u)),p=o.redMul(l),v=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(v),m=d.redMul(g);m=m.redIAdd(m).redISub(h);var y=c.redMul(s);t+1<e&&(u=u.redMul(h)),o=v,s=y,c=m}return this.curve.jpoint(o,c.redMul(i),s)},ub.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},ub.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n),u=s.redSqr().redISub(a).redISub(a),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=u,t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),l=this.y.redSqr(),h=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(f).redISub(h);d=d.redIAdd(d);var p=f.redAdd(f).redIAdd(f),v=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=v.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},ub.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(n).redISub(o);a=a.redIAdd(a);var s=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),u=s.redSqr().redISub(a).redISub(a);e=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(u)).redISub(c),r=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),l=this.y.redSqr(),h=this.x.redMul(l),d=this.x.redSub(f).redMul(this.x.redAdd(f));d=d.redAdd(d).redIAdd(d);var p=h.redIAdd(h),v=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(l).redISub(f);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},ub.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,i=n.redSqr().redSqr(),o=t.redSqr(),a=r.redSqr(),s=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(i)),u=t.redAdd(t),c=(u=u.redIAdd(u)).redMul(a),f=s.redSqr().redISub(c.redAdd(c)),l=c.redISub(f),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=s.redMul(l).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(f,d,p)},ub.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),i=e.redAdd(e).redIAdd(e),o=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(o)).redSqr(),u=n.redIAdd(n);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(a).redSqr().redISub(o).redISub(s).redISub(u),f=t.redMul(c);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.x.redMul(s).redISub(f);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.y.redMul(c.redMul(u.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var d=this.z.redAdd(a).redSqr().redISub(r).redISub(s);return this.curve.jpoint(l,h,d)},ub.prototype.mul=function(e,t){return e=new(be())(e,t),this.curve._wnafMul(this,e)},ub.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),i=r.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(n)).cmpn(0)},ub.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),0===this.x.cmp(r))return!0}},ub.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},ub.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var cb=Vy((function(e,t){var r=t;r.base=tb,r.short=ab,r.mont=null,r.edwards=null})),fb=Vy((function(e,t){var r,n=t,i=Xy.assert;function o(e){"short"===e.type?this.curve=new cb.short(e):"edwards"===e.type?this.curve=new cb.edwards(e):this.curve=new cb.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ka().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ka().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ka().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ka().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ka().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ka().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(s){r=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ka().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function lb(e){if(!(this instanceof lb))return new lb(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Jy.toArray(e.entropy,e.entropyEnc||"hex"),r=Jy.toArray(e.nonce,e.nonceEnc||"hex"),n=Jy.toArray(e.pers,e.persEnc||"hex");Ky(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,n)}var hb=lb;lb.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},lb.prototype._hmac=function(){return new(Ka().hmac)(this.hash,this.K)},lb.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},lb.prototype.reseed=function(e,t,r,n){"string"!==typeof t&&(n=r,r=t,t=null),e=Jy.toArray(e,t),r=Jy.toArray(r,n),Ky(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},lb.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(n=r,r=t,t=null),r&&(r=Jy.toArray(r,n||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,e);return this._update(r),this._reseed++,Jy.encode(o,t)};var db=Xy.assert;function pb(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var vb=pb;pb.fromPublic=function(e,t,r){return t instanceof pb?t:new pb(e,{pub:t,pubEnc:r})},pb.fromPrivate=function(e,t,r){return t instanceof pb?t:new pb(e,{priv:t,privEnc:r})},pb.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},pb.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},pb.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},pb.prototype._importPrivate=function(e,t){this.priv=new(be())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},pb.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?db(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||db(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},pb.prototype.derive=function(e){return e.validate()||db(e.validate(),"public point not validated"),e.mul(this.priv).getX()},pb.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},pb.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},pb.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var gb=Xy.assert;function mb(e,t){if(e instanceof mb)return e;this._importDER(e,t)||(gb(e.r&&e.s,"Signature without r or s"),this.r=new(be())(e.r,16),this.s=new(be())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var yb=mb;function bb(){this.place=0}function Eb(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;for(var i=0,o=0,a=t.place;o<n;o++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function wb(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function Nb(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}mb.prototype._importDER=function(e,t){e=Xy.toArray(e,t);var r=new bb;if(48!==e[r.place++])return!1;var n=Eb(e,r);if(!1===n)return!1;if(n+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=Eb(e,r);if(!1===i)return!1;var o=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var a=Eb(e,r);if(!1===a)return!1;if(e.length!==a+r.place)return!1;var s=e.slice(r.place,a+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new(be())(o),this.s=new(be())(s),this.recoveryParam=null,!0},mb.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=wb(t),r=wb(r);!r[0]&&!(128&r[1]);)r=r.slice(1);var n=[2];Nb(n,t.length),(n=n.concat(t)).push(2),Nb(n,r.length);var i=n.concat(r),o=[48];return Nb(o,i.length),o=o.concat(i),Xy.encode(o,e)};var kb=function(){throw new Error("unsupported")},Ab=Xy.assert;function xb(e){if(!(this instanceof xb))return new xb(e);"string"===typeof e&&(Ab(Object.prototype.hasOwnProperty.call(fb,e),"Unknown curve "+e),e=fb[e]),e instanceof fb.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var _b=xb;xb.prototype.keyPair=function(e){return new vb(this,e)},xb.prototype.keyFromPrivate=function(e,t){return vb.fromPrivate(this,e,t)},xb.prototype.keyFromPublic=function(e,t){return vb.fromPublic(this,e,t)},xb.prototype.genKeyPair=function(e){e||(e={});for(var t=new hb({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||kb(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),n=this.n.sub(new(be())(2));;){var i=new(be())(t.generate(r));if(!(i.cmp(n)>0))return i.iaddn(1),this.keyFromPrivate(i)}},xb.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},xb.prototype.sign=function(e,t,r,n){"object"===typeof r&&(n=r,r=null),n||(n={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(be())(e,16));for(var i=this.n.byteLength(),o=t.getPrivate().toArray("be",i),a=e.toArray("be",i),s=new hb({hash:this.hash,entropy:o,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),u=this.n.sub(new(be())(1)),c=0;;c++){var f=n.k?n.k(c):new(be())(s.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(u)>=0)){var l=this.g.mul(f);if(!l.isInfinity()){var h=l.getX(),d=h.umod(this.n);if(0!==d.cmpn(0)){var p=f.invm(this.n).mul(d.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var v=(l.getY().isOdd()?1:0)|(0!==h.cmp(d)?2:0);return n.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),v^=1),new yb({r:d,s:p,recoveryParam:v})}}}}}},xb.prototype.verify=function(e,t,r,n){e=this._truncateToN(new(be())(e,16)),r=this.keyFromPublic(r,n);var i=(t=new yb(t,"hex")).r,o=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,s=o.invm(this.n),u=s.mul(e).umod(this.n),c=s.mul(i).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(u,r.getPublic(),c)).isInfinity()&&a.eqXToP(i):!(a=this.g.mulAdd(u,r.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(i)},xb.prototype.recoverPubKey=function(e,t,r,n){Ab((3&r)===r,"The recovery param is more than two bits"),t=new yb(t,n);var i=this.n,o=new(be())(e),a=t.r,s=t.s,u=1&r,c=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");a=c?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var f=t.r.invm(i),l=i.sub(o).mul(f).umod(i),h=s.mul(f).umod(i);return this.g.mulAdd(l,a,h)},xb.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new yb(t,n)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(e,t,i)}catch(e){continue}if(o.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Sb=Vy((function(e,t){var r=t;r.version="6.5.4",r.utils=Xy,r.rand=function(){throw new Error("unsupported")},r.curve=cb,r.curves=fb,r.ec=_b,r.eddsa=null})).ec,Ib=new dm("signing-key/5.7.0"),Rb=null;function Tb(){return Rb||(Rb=new Sb("secp256k1")),Rb}var Cb=function(){function e(t){(0,N.Z)(this,e),Qm(this,"curve","secp256k1"),Qm(this,"privateKey",xm(t)),32!==_m(this.privateKey)&&Ib.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var r=Tb().keyFromPrivate(Em(this.privateKey));Qm(this,"publicKey","0x"+r.getPublic(!1,"hex")),Qm(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),Qm(this,"_isSigningKey",!0)}return(0,k.Z)(e,[{key:"_addPoint",value:function(e){var t=Tb().keyFromPublic(Em(this.publicKey)),r=Tb().keyFromPublic(Em(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(e){var t=Tb().keyFromPrivate(Em(this.privateKey)),r=Em(e);32!==r.length&&Ib.throwArgumentError("bad digest length","digest",e);var n=t.sign(r,{canonical:!0});return Tm({recoveryParam:n.recoveryParam,r:Rm("0x"+n.r.toString(16),32),s:Rm("0x"+n.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(e){var t=Tb().keyFromPrivate(Em(this.privateKey)),r=Tb().keyFromPublic(Em(Pb(e)));return Rm("0x"+t.derive(r.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(e){return!(!e||!e._isSigningKey)}}]),e}();function Pb(e,t){var r=Em(e);if(32===r.length){var n=new Cb(r);return t?"0x"+Tb().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}return 33===r.length?t?xm(r):"0x"+Tb().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+Tb().keyFromPublic(r).getPublic(!0,"hex"):xm(r):Ib.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Ob=new dm("rlp/5.7.0");function Ub(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function Mb(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat(Mb(e))})),t.length<=55)return t.unshift(192+t.length),t;var r=Ub(t.length);return r.unshift(247+r.length),r.concat(t)}mm(e)||Ob.throwArgumentError("RLP object must be BytesLike","object",e);var n=Array.prototype.slice.call(Em(e));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var i=Ub(n.length);return i.unshift(183+i.length),i.concat(n)}function Fb(e){return xm(Mb(e))}var Db,Lb=new dm("transactions/5.7.0");!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(Db||(Db={}));var Zb=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],Bb={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function Gb(e){return Xm(Sm(Wm(Sm(Pb(e),1)),12))}function Wb(e,t){return Gb(function(e,t){var r=Tm(t),n={r:Em(r.r),s:Em(r.s)};return"0x"+Tb().recoverPubKey(Em(e),n,r.recoveryParam).encode("hex",!1)}(Em(e),t))}function jb(e,t){var r=Nm(Dm.from(e).toHexString());return r.length>32&&Lb.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function zb(e,t){return{address:Xm(e),storageKeys:(t||[]).map((function(t,r){return 32!==_m(t)&&Lb.throwArgumentError("invalid access list storageKey","accessList[".concat(e,":").concat(r,"]"),t),t.toLowerCase()}))}}function qb(e){if(Array.isArray(e))return e.map((function(e,t){return Array.isArray(e)?(e.length>2&&Lb.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value[".concat(t,"]"),e),zb(e[0],e[1])):zb(e.address,e.storageKeys)}));var t=Object.keys(e).map((function(t){var r=e[t].reduce((function(e,t){return e[t]=!0,e}),{});return zb(t,Object.keys(r).sort())}));return t.sort((function(e,t){return e.address.localeCompare(t.address)})),t}function Vb(e){return qb(e).map((function(e){return[e.address,e.storageKeys]}))}function Kb(e,t){if(null!=e.gasPrice){var r=Dm.from(e.gasPrice),n=Dm.from(e.maxFeePerGas||0);r.eq(n)||Lb.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:n})}var i=[jb(e.chainId||0,"chainId"),jb(e.nonce||0,"nonce"),jb(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),jb(e.maxFeePerGas||0,"maxFeePerGas"),jb(e.gasLimit||0,"gasLimit"),null!=e.to?Xm(e.to):"0x",jb(e.value||0,"value"),e.data||"0x",Vb(e.accessList||[])];if(t){var o=Tm(t);i.push(jb(o.recoveryParam,"recoveryParam")),i.push(Nm(o.r)),i.push(Nm(o.s))}return Im(["0x02",Fb(i)])}function Hb(e,t){var r=[jb(e.chainId||0,"chainId"),jb(e.nonce||0,"nonce"),jb(e.gasPrice||0,"gasPrice"),jb(e.gasLimit||0,"gasLimit"),null!=e.to?Xm(e.to):"0x",jb(e.value||0,"value"),e.data||"0x",Vb(e.accessList||[])];if(t){var n=Tm(t);r.push(jb(n.recoveryParam,"recoveryParam")),r.push(Nm(n.r)),r.push(Nm(n.s))}return Im(["0x01",Fb(r)])}function Jb(e,t){var r,n;n=Bb,(r=e)&&"object"===typeof r||Ym.throwArgumentError("invalid object","object",r),Object.keys(r).forEach((function(e){n[e]||Ym.throwArgumentError("invalid object key - "+e,"transaction:"+e,r)}));var i=[];Zb.forEach((function(t){var r=e[t.name]||[],n={};t.numeric&&(n.hexPad="left"),r=Em(xm(r,n)),t.length&&r.length!==t.length&&r.length>0&&Lb.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,r),t.maxLength&&(r=Nm(r)).length>t.maxLength&&Lb.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,r),i.push(xm(r))}));var o=0;if(null!=e.chainId?"number"!==typeof(o=e.chainId)&&Lb.throwArgumentError("invalid transaction.chainId","transaction",e):t&&!mm(t)&&t.v>28&&(o=Math.floor((t.v-35)/2)),0!==o&&(i.push(xm(o)),i.push("0x"),i.push("0x")),!t)return Fb(i);var a=Tm(t),s=27+a.recoveryParam;return 0!==o?(i.pop(),i.pop(),i.pop(),s+=2*o+8,a.v>28&&a.v!==s&&Lb.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):a.v!==s&&Lb.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),i.push(xm(s)),i.push(Nm(Em(a.r))),i.push(Nm(Em(a.s))),Fb(i)}function Xb(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&Lb.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),Jb(e,t);switch(e.type){case 1:return Hb(e,t);case 2:return Kb(e,t)}return Lb.throwError("unsupported transaction type: ".concat(e.type),dm.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}var $b=new dm("wordlists/5.7.0"),Yb=function(){function e(t){(0,N.Z)(this,e),$b.checkAbstract(this instanceof e?this.constructor:void 0,e),Qm(this,"locale",t)}return(0,k.Z)(e,[{key:"split",value:function(e){return e.toLowerCase().split(/ +/g)}},{key:"join",value:function(e){return e.join(" ")}}],[{key:"check",value:function(e){for(var t=[],r=0;r<2048;r++){var n=e.getWord(r);if(r!==e.getWordIndex(n))return"0x";t.push(n)}return Ny(t.join("\n")+"\n")}},{key:"register",value:function(e,t){t||(t=e.locale)}}]),e}(),Qb=null;function eE(e){if(null==Qb&&(Qb="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==Yb.check(e)))throw Qb=null,new Error("BIP39 Wordlist for en (English) FAILED")}var tE=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.call(this,"en")}return(0,k.Z)(r,[{key:"getWord",value:function(e){return eE(this),Qb[e]}},{key:"getWordIndex",value:function(e){return eE(this),Qb.indexOf(e)}}]),r}(Yb),rE=new tE;Yb.register(rE);var nE={en:rE},iE=new dm("hdnode/5.7.0"),oE=Dm.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aE=by("Bitcoin seed"),sE=2147483648;function uE(e){return(1<<e)-1<<8-e}function cE(e){return Rm(xm(e),32)}function fE(e){return Gy.encode(wm([e,Sm(jy(jy(e)),0,4)]))}function lE(e){if(null==e)return nE.en;if("string"===typeof e){var t=nE[e];return null==t&&iE.throwArgumentError("unknown locale","wordlist",e),t}return e}var hE={},dE="m/44'/60'/0'/0/0",pE=function(){function e(t,r,n,i,o,a,s,u){if((0,N.Z)(this,e),t!==hE)throw new Error("HDNode constructor cannot be called directly");if(r){var c=new Cb(r);Qm(this,"privateKey",c.privateKey),Qm(this,"publicKey",c.compressedPublicKey)}else Qm(this,"privateKey",null),Qm(this,"publicKey",xm(n));var f;Qm(this,"parentFingerprint",i),Qm(this,"fingerprint",Sm((f=jy(this.publicKey),"0x"+Ka().ripemd160().update(Em(f)).digest("hex")),0,4)),Qm(this,"address",Gb(this.publicKey)),Qm(this,"chainCode",o),Qm(this,"index",a),Qm(this,"depth",s),null==u?(Qm(this,"mnemonic",null),Qm(this,"path",null)):"string"===typeof u?(Qm(this,"mnemonic",null),Qm(this,"path",u)):(Qm(this,"mnemonic",u),Qm(this,"path",u.path))}return(0,k.Z)(e,[{key:"extendedKey",get:function(){if(this.depth>=256)throw new Error("Depth too large!");return fE(wm([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",xm(this.depth),this.parentFingerprint,Rm(xm(this.index),4),this.chainCode,null!=this.privateKey?wm(["0x00",this.privateKey]):this.publicKey]))}},{key:"neuter",value:function(){return new e(hE,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}},{key:"_derive",value:function(t){if(t>4294967295)throw new Error("invalid index - "+String(t));var r=this.path;r&&(r+="/"+(2147483647&t));var n=new Uint8Array(37);if(t&sE){if(!this.privateKey)throw new Error("cannot derive child of neutered node");n.set(Em(this.privateKey),1),r&&(r+="'")}else n.set(Em(this.publicKey));for(var i=24;i>=0;i-=8)n[33+(i>>3)]=t>>24-i&255;var o=Em(zy(Ly.sha512,this.chainCode,n)),a=o.slice(0,32),s=o.slice(32),u=null,c=null;this.privateKey?u=cE(Dm.from(a).add(this.privateKey).mod(oE)):c=new Cb(xm(a))._addPoint(this.publicKey);var f=r,l=this.mnemonic;return l&&(f=Object.freeze({phrase:l.phrase,path:r,locale:l.locale||"en"})),new e(hE,u,c,this.fingerprint,cE(s),t,this.depth+1,f)}},{key:"derivePath",value:function(e){var t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw new Error("invalid path - "+e);"m"===t[0]&&t.shift();for(var r=this,n=0;n<t.length;n++){var i=t[n];if(i.match(/^[0-9]+'$/)){var o=parseInt(i.substring(0,i.length-1));if(o>=sE)throw new Error("invalid path index - "+i);r=r._derive(sE+o)}else{if(!i.match(/^[0-9]+$/))throw new Error("invalid path component - "+i);var a=parseInt(i);if(a>=sE)throw new Error("invalid path index - "+i);r=r._derive(a)}}return r}}],[{key:"_fromSeed",value:function(t,r){var n=Em(t);if(n.length<16||n.length>64)throw new Error("invalid seed");var i=Em(zy(Ly.sha512,aE,n));return new e(hE,cE(i.slice(0,32)),null,"0x00000000",cE(i.slice(32)),0,0,r)}},{key:"fromMnemonic",value:function(t,r,n){return t=gE(vE(t,n=lE(n)),n),e._fromSeed(function(e,t){t||(t="");var r=by("mnemonic"+t,ay.NFKD);return qy(by(e,ay.NFKD),r,2048,64,"sha512")}(t,r),{phrase:t,path:"m",locale:n.locale})}},{key:"fromSeed",value:function(t){return e._fromSeed(t,null)}},{key:"fromExtendedKey",value:function(t){var r=Gy.decode(t);82===r.length&&fE(r.slice(0,78))===t||iE.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");var n=r[4],i=xm(r.slice(5,9)),o=parseInt(xm(r.slice(9,13)).substring(2),16),a=xm(r.slice(13,45)),s=r.slice(45,78);switch(xm(r.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new e(hE,null,xm(s),i,a,o,n,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new e(hE,xm(s.slice(1)),null,i,a,o,n,null)}return iE.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}]),e}();function vE(e,t){t=lE(t),iE.checkNormalize();var r=t.split(e);if(r.length%3!==0)throw new Error("invalid mnemonic");for(var n=Em(new Uint8Array(Math.ceil(11*r.length/8))),i=0,o=0;o<r.length;o++){var a=t.getWordIndex(r[o].normalize("NFKD"));if(-1===a)throw new Error("invalid mnemonic");for(var s=0;s<11;s++)a&1<<10-s&&(n[i>>3]|=1<<7-i%8),i++}var u=32*r.length/3,c=uE(r.length/3);if((Em(jy(n.slice(0,u/8)))[0]&c)!==(n[n.length-1]&c))throw new Error("invalid checksum");return xm(n.slice(0,u/8))}function gE(e,t){if(t=lE(t),(e=Em(e)).length%4!==0||e.length<16||e.length>32)throw new Error("invalid entropy");for(var r=[0],n=11,i=0;i<e.length;i++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[i],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[i]>>8-n,r.push(e[i]&(1<<8-n)-1),n+=3);var o=e.length/4,a=Em(jy(e))[0]&uE(o);return r[r.length-1]<<=o,r[r.length-1]|=a>>8-o,t.join(r.map((function(e){return t.getWord(e)})))}var mE=new dm("random/5.7.0");var yE=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}(),bE=yE.crypto||yE.msCrypto;function EE(e){(e<=0||e>1024||e%1||e!=e)&&mE.throwArgumentError("invalid length","length",e);var t=new Uint8Array(e);return bE.getRandomValues(t),Em(t)}bE&&bE.getRandomValues||(mE.warn("WARNING: Missing strong random number source"),bE={getRandomValues:function(e){return mE.throwError("no secure random source avaialble",dm.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var wE=r(37532),NE=r.n(wE),kE=r(46125),AE=r.n(kE);function xE(e){return"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Em(e)}function _E(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function SE(e){return"string"===typeof e?by(e,ay.NFKC):Em(e)}function IE(e,t){for(var r=e,n=t.toLowerCase().split("/"),i=0;i<n.length;i++){var o=null;for(var a in r)if(a.toLowerCase()===n[i]){o=r[a];break}if(null===o)return null;r=o}return r}function RE(e){var t=Em(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;var r=xm(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}var TE="json-wallets/5.7.0",CE=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},PE=new dm(TE);function OE(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}var UE=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"isKeystoreAccount",value:function(e){return!(!e||!e._isKeystoreAccount)}}]),r}(uy);function ME(e,t){var r=xE(IE(e,"crypto/ciphertext"));if(xm(Wm(wm([t.slice(16,32),r]))).substring(2)!==IE(e,"crypto/mac").toLowerCase())throw new Error("invalid password");var n=function(e,t,r){if("aes-128-ctr"===IE(e,"crypto/cipher")){var n=xE(IE(e,"crypto/cipherparams/iv")),i=new(NE().Counter)(n);return Em(new(NE().ModeOfOperation.ctr)(t,i).decrypt(r))}return null}(e,t.slice(0,16),r);n||PE.throwError("unsupported cipher",dm.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});var i=t.slice(32,64),o=Gb(n);if(e.address){var a=e.address.toLowerCase();if("0x"!==a.substring(0,2)&&(a="0x"+a),Xm(a)!==o)throw new Error("address mismatch")}var s={_isKeystoreAccount:!0,address:o,privateKey:xm(n)};if("0.1"===IE(e,"x-ethers/version")){var u=xE(IE(e,"x-ethers/mnemonicCiphertext")),c=xE(IE(e,"x-ethers/mnemonicCounter")),f=new(NE().Counter)(c),l=new(NE().ModeOfOperation.ctr)(i,f),h=IE(e,"x-ethers/path")||dE,d=IE(e,"x-ethers/locale")||"en",p=Em(l.decrypt(u));try{var v=gE(p,d),g=pE.fromMnemonic(v,null,d).derivePath(h);if(g.privateKey!=s.privateKey)throw new Error("mnemonic mismatch");s.mnemonic=g.mnemonic}catch(m){if(m.code!==dm.errors.INVALID_ARGUMENT||"wordlist"!==m.argument)throw m}}return new UE(s)}function FE(e,t,r,n,i){return Em(qy(e,t,r,n,i))}function DE(e,t,r,n,i){return Promise.resolve(FE(e,t,r,n,i))}function LE(e,t,r,n,i){var o=SE(t),a=IE(e,"crypto/kdf");if(a&&"string"===typeof a){var s=function(e,t){return PE.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===a.toLowerCase()){var u=xE(IE(e,"crypto/kdfparams/salt")),c=parseInt(IE(e,"crypto/kdfparams/n")),f=parseInt(IE(e,"crypto/kdfparams/r")),l=parseInt(IE(e,"crypto/kdfparams/p"));c&&f&&l||s("kdf",a),0!==(c&c-1)&&s("N",c);var h=parseInt(IE(e,"crypto/kdfparams/dklen"));return 32!==h&&s("dklen",h),n(o,u,c,f,l,64,i)}if("pbkdf2"===a.toLowerCase()){var d=xE(IE(e,"crypto/kdfparams/salt")),p=null,v=IE(e,"crypto/kdfparams/prf");"hmac-sha256"===v?p="sha256":"hmac-sha512"===v?p="sha512":s("prf",v);var g=parseInt(IE(e,"crypto/kdfparams/c")),m=parseInt(IE(e,"crypto/kdfparams/dklen"));return 32!==m&&s("dklen",m),r(o,d,g,m,p)}}return PE.throwArgumentError("unsupported key-derivation function","kdf",a)}var ZE=new dm(TE),BE=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"isCrowdsaleAccount",value:function(e){return!(!e||!e._isCrowdsaleAccount)}}]),r}(uy);function GE(e,t){var r=JSON.parse(e);t=SE(t);var n=Xm(IE(r,"ethaddr")),i=xE(IE(r,"encseed"));i&&i.length%16===0||ZE.throwArgumentError("invalid encseed","json",e);for(var o=Em(qy(t,t,2e3,32,"sha256")).slice(0,16),a=i.slice(0,16),s=i.slice(16),u=new(NE().ModeOfOperation.cbc)(o,a),c=NE().padding.pkcs7.strip(Em(u.decrypt(s))),f="",l=0;l<c.length;l++)f+=String.fromCharCode(c[l]);var h=Wm(by(f));return new BE({_isCrowdsaleAccount:!0,address:n,privateKey:h})}function WE(e){var t=null;try{t=JSON.parse(e)}catch(r){return!1}return t.encseed&&t.ethaddr}function jE(e){var t=null;try{t=JSON.parse(e)}catch(r){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}function zE(e,t,r){if(WE(e)){r&&r(0);var n=GE(e,t);return r&&r(1),Promise.resolve(n)}return jE(e)?function(e,t,r){return CE(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=JSON.parse(e),n.next=3,LE(i,t,DE,AE().scrypt,r);case 3:return o=n.sent,n.abrupt("return",ME(i,o));case 5:case"end":return n.stop()}}),n)})))}(e,t,r):Promise.reject(new Error("invalid JSON wallet"))}function qE(e,t){if(WE(e))return GE(e,t);if(jE(e))return function(e,t){var r=JSON.parse(e);return ME(r,LE(r,t,FE,AE().syncScrypt))}(e,t);throw new Error("invalid JSON wallet")}var VE=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},KE=new dm("wallet/5.6.2");var HE=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i,o;if((0,N.Z)(this,r),i=t.call(this),null!=(o=e)&&km(o.privateKey,32)&&null!=o.address){var a=new Cb(e.privateKey);if(Qm((0,nm.Z)(i),"_signingKey",(function(){return a})),Qm((0,nm.Z)(i),"address",Gb(i.publicKey)),i.address!==Xm(e.address)&&KE.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){var t=e.mnemonic;return t&&t.phrase}(e)){var s=e.mnemonic;Qm((0,nm.Z)(i),"_mnemonic",(function(){return{phrase:s.phrase,path:s.path||dE,locale:s.locale||"en"}}));var u=i.mnemonic;Gb(pE.fromMnemonic(u.phrase,null,u.locale).derivePath(u.path).privateKey)!==i.address&&KE.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else Qm((0,nm.Z)(i),"_mnemonic",(function(){return null}))}else{if(Cb.isSigningKey(e))"secp256k1"!==e.curve&&KE.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),Qm((0,nm.Z)(i),"_signingKey",(function(){return e}));else{"string"===typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);var c=new Cb(e);Qm((0,nm.Z)(i),"_signingKey",(function(){return c}))}Qm((0,nm.Z)(i),"_mnemonic",(function(){return null})),Qm((0,nm.Z)(i),"address",Gb(i.publicKey))}return n&&!ly.isProvider(n)&&KE.throwArgumentError("invalid provider","provider",n),Qm((0,nm.Z)(i),"provider",n||null),i}return(0,k.Z)(r,[{key:"mnemonic",get:function(){return this._mnemonic()}},{key:"privateKey",get:function(){return this._signingKey().privateKey}},{key:"publicKey",get:function(){return this._signingKey().publicKey}},{key:"getAddress",value:function(){return Promise.resolve(this.address)}},{key:"connect",value:function(e){return new r(this,e)}},{key:"signTransaction",value:function(e){var t=this;return ey(e).then((function(r){null!=r.from&&(Xm(r.from)!==t.address&&KE.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete r.from);var n=t._signingKey().signDigest(Wm(Xb(r)));return Xb(r,n)}))}},{key:"signMessage",value:function(e){return VE(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Cm(this._signingKey().signDigest(wy(e))));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"_signTypedData",value:function(e,t,r){return VE(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o=this;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zy.resolveNames(e,t,r,(function(e){return null==o.provider&&KE.throwError("cannot resolve ENS names without a provider",dm.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),o.provider.resolveName(e)}));case 2:return i=n.sent,n.abrupt("return",Cm(this._signingKey().signDigest(Zy.hash(i.domain,t,i.value))));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"encrypt",value:function(e,t,r){if("function"!==typeof t||r||(r=t,t={}),r&&"function"!==typeof r)throw new Error("invalid callback");return t||(t={}),function(e,t,r,n){try{if(Xm(e.address)!==Gb(e.privateKey))throw new Error("address/privateKey mismatch");if(OE(e)){var i=e.mnemonic;if(pE.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path||dE).privateKey!=e.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}"function"!==typeof r||n||(n=r,r={}),r||(r={});var o=Em(e.privateKey),a=SE(t),s=null,u=null,c=null;if(OE(e)){var f=e.mnemonic;s=Em(vE(f.phrase,f.locale||"en")),u=f.path||dE,c=f.locale||"en"}var l=r.client;l||(l="ethers.js");var h=null;h=r.salt?Em(r.salt):EE(32);var d=null;if(r.iv){if(16!==(d=Em(r.iv)).length)throw new Error("invalid iv")}else d=EE(16);var p=null;if(r.uuid){if(16!==(p=Em(r.uuid)).length)throw new Error("invalid uuid")}else p=EE(16);var v=1<<17,g=8,m=1;return r.scrypt&&(r.scrypt.N&&(v=r.scrypt.N),r.scrypt.r&&(g=r.scrypt.r),r.scrypt.p&&(m=r.scrypt.p)),AE().scrypt(a,h,v,g,m,64,n).then((function(t){var r=(t=Em(t)).slice(0,16),n=t.slice(16,32),i=t.slice(32,64),a=new(NE().Counter)(d),f=Em(new(NE().ModeOfOperation.ctr)(r,a).encrypt(o)),y=Wm(wm([n,f])),b={address:e.address.substring(2).toLowerCase(),id:RE(p),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:xm(d).substring(2)},ciphertext:xm(f).substring(2),kdf:"scrypt",kdfparams:{salt:xm(h).substring(2),n:v,dklen:32,p:m,r:g},mac:y.substring(2)}};if(s){var E=EE(16),w=new(NE().Counter)(E),N=Em(new(NE().ModeOfOperation.ctr)(i,w).encrypt(s)),k=new Date,A=k.getUTCFullYear()+"-"+_E(k.getUTCMonth()+1,2)+"-"+_E(k.getUTCDate(),2)+"T"+_E(k.getUTCHours(),2)+"-"+_E(k.getUTCMinutes(),2)+"-"+_E(k.getUTCSeconds(),2)+".0Z";b["x-ethers"]={client:l,gethFilename:"UTC--"+A+"--"+b.address,mnemonicCounter:xm(E).substring(2),mnemonicCiphertext:xm(N).substring(2),path:u,locale:c,version:"0.1"}}return JSON.stringify(b)}))}(this,e,t,r)}}],[{key:"createRandom",value:function(e){var t=EE(16);e||(e={}),e.extraEntropy&&(t=Em(Sm(Wm(wm([t,e.extraEntropy])),0,16)));var n=gE(t,e.locale);return r.fromMnemonic(n,e.path,e.locale)}},{key:"fromEncryptedJson",value:function(e,t,n){return zE(e,t,n).then((function(e){return new r(e)}))}},{key:"fromEncryptedJsonSync",value:function(e,t){return new r(qE(e,t))}},{key:"fromMnemonic",value:function(e,t,n){return t||(t=dE),new r(pE.fromMnemonic(e,null,n).derivePath(t))}}]),r}(gy);function JE(e,t){return Wb(wy(e),t)}function XE(e,t,r,n){return Wb(Zy.hash(e,t,r),n)}var $E=!1,YE=!1,QE={debug:1,default:2,info:2,warning:3,error:4,off:5},ew=QE.default,tw=null;var rw,nw,iw=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(rw||(rw={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(nw||(nw={}));var ow="0123456789abcdef",aw=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==QE[r]&&this.throwArgumentError("invalid log level name","logLevel",e),ew>QE[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(YE)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=ow[t[o]>>4],r+=ow[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case nw.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case nw.CALL_EXCEPTION:case nw.INSUFFICIENT_FUNDS:case nw.MISSING_NEW:case nw.NONCE_EXPIRED:case nw.REPLACEMENT_UNDERPRICED:case nw.TRANSACTION_REPLACED:case nw.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),iw&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:iw})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return tw||(tw=new e("logger/5.7.0")),tw}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),$E){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}YE=!!t,$E=!!r}},{key:"setLogLevel",value:function(t){var r=QE[t.toLowerCase()];null!=r?ew=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();aw.errors=nw,aw.levels=rw;var sw=new aw("bytes/5.7.0");function uw(e){return!!e.toHexString}function cw(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return cw(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function fw(e){return pw(e)&&!(e.length%2)||hw(e)}function lw(e){return"number"===typeof e&&e==e&&e%1===0}function hw(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!lw(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!lw(r)||r<0||r>=256)return!1}return!0}function dw(e,t){if(t||(t={}),"number"===typeof e){sw.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),cw(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),uw(e)&&(e=e.toHexString()),pw(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":sw.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return cw(new Uint8Array(i))}return hw(e)?cw(new Uint8Array(e)):sw.throwArgumentError("invalid arrayify value","value",e)}function pw(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var vw="0123456789abcdef";function gw(e,t){if(t||(t={}),"number"===typeof e){sw.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=vw[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),uw(e))return e.toHexString();if(pw(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":sw.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(hw(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=vw[(240&o)>>4]+vw[15&o]}return n}return sw.throwArgumentError("invalid hexlify value","value",e)}function mw(e){e=atob(e);for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return dw(t)}function yw(e){e=dw(e);for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}new aw("properties/5.7.0");function bw(e){var t={};for(var r in e)t[r]=e[r];return t}var Ew,ww,Nw=new aw("strings/5.7.0");function kw(e,t,r,n,i){if(e===ww.BAD_PREFIX||e===ww.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===ww.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(Ew||(Ew={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(ww||(ww={}));var Aw=Object.freeze({error:function(e,t,r,n,i){return Nw.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:kw,replace:function(e,t,r,n,i){return e===ww.OVERLONG?(n.push(i),0):(n.push(65533),kw(e,t,r))}});function xw(e,t){null==t&&(t=Aw.error),e=dw(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(i>>7!==0){var o=null,a=null;if(192===(224&i))o=1,a=127;else if(224===(240&i))o=2,a=2047;else{if(240!==(248&i)){n+=t(128===(192&i)?ww.UNEXPECTED_CONTINUE:ww.BAD_PREFIX,n-1,e,r);continue}o=3,a=65535}if(n-1+o>=e.length)n+=t(ww.OVERRUN,n-1,e,r);else{for(var s=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=e[n];if(128!=(192&c)){n+=t(ww.MISSING_CONTINUE,n,e,r),s=null;break}s=s<<6|63&c,n++}null!==s&&(s>1114111?n+=t(ww.OUT_OF_RANGE,n-1-o,e,r,s):s>=55296&&s<=57343?n+=t(ww.UTF16_SURROGATE,n-1-o,e,r,s):s<=a?n+=t(ww.OVERLONG,n-1-o,e,r,s):r.push(s))}}else r.push(i)}return r}function _w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ew.current;t!=Ew.current&&(Nw.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return dw(r)}function Sw(e,t){return xw(e,t).map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}var Iw=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};function Rw(e,t){return Iw(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i,o,a;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==t&&(t={}),n={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0},!0!==t.skipFetchSetup&&(n.mode="cors",n.cache="no-cache",n.credentials="same-origin",n.redirect="follow",n.referrer="client"),r.next=6,fetch(e,n);case 6:return i=r.sent,r.next=9,i.arrayBuffer();case 9:return o=r.sent,a={},i.headers.forEach?i.headers.forEach((function(e,t){a[t.toLowerCase()]=e})):i.headers.keys().forEach((function(e){a[e.toLowerCase()]=i.headers.get(e)})),r.abrupt("return",{headers:a,statusCode:i.status,statusMessage:i.statusText,body:dw(new Uint8Array(o))});case 13:case"end":return r.stop()}}),r)})))}var Tw=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Cw=new aw("web/5.6.1");function Pw(e){return new Promise((function(t){setTimeout(t,e)}))}function Ow(e,t){if(null==e)return null;if("string"===typeof e)return e;if(fw(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return Sw(e)}catch(r){}return gw(e)}return e}function Uw(e,t,r){var n="object"===typeof e&&null!=e.throttleLimit?e.throttleLimit:12;Cw.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);var i="object"===typeof e?e.throttleCallback:null,o="object"===typeof e&&"number"===typeof e.throttleSlotInterval?e.throttleSlotInterval:100;Cw.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);var a="object"===typeof e&&!!e.errorPassThrough,s={},u=null,c={method:"GET"},f=!1,l=12e4;if("string"===typeof e)u=e;else if("object"===typeof e){if(null!=e&&null!=e.url||Cw.throwArgumentError("missing URL","connection.url",e),u=e.url,"number"===typeof e.timeout&&e.timeout>0&&(l=e.timeout),e.headers)for(var h in e.headers)s[h.toLowerCase()]={key:h,value:String(e.headers[h])},["if-none-match","if-modified-since"].indexOf(h.toLowerCase())>=0&&(f=!0);if(c.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==u.substring(0,6)&&!0!==e.allowInsecureAuthentication&&Cw.throwError("basic authentication requires a secure https url",aw.errors.INVALID_ARGUMENT,{argument:"url",url:u,user:e.user,password:"[REDACTED]"});var d=e.user+":"+e.password;s.authorization={key:"Authorization",value:"Basic "+yw(_w(d))}}null!=e.skipFetchSetup&&(c.skipFetchSetup=!!e.skipFetchSetup)}var p=new RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),v=u?u.match(p):null;if(v)try{var g={statusCode:200,statusMessage:"OK",headers:{"content-type":v[1]},body:mw(v[2])},m=g.body;return r&&(m=r(g.body,g)),Promise.resolve(m)}catch(w){Cw.throwError("processing response error",aw.errors.SERVER_ERROR,{body:Ow(v[1],v[2]),error:w,requestBody:null,requestMethod:"GET",url:u})}t&&(c.method="POST",c.body=t,null==s["content-type"]&&(s["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==s["content-length"]&&(s["content-length"]={key:"Content-Length",value:String(t.length)}));var y={};Object.keys(s).forEach((function(e){var t=s[e];y[t.key]=t.value})),c.headers=y;var b=function(){var e=null;return{promise:new Promise((function(t,r){l&&(e=setTimeout((function(){null!=e&&(e=null,r(Cw.makeError("timeout",aw.errors.TIMEOUT,{requestBody:Ow(c.body,y["content-type"]),requestMethod:c.method,timeout:l,url:u})))}),l))})),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),E=function(){return Tw(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,s,l,h,d,p,v,g,m,E;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n)){e.next=65;break}return s=null,e.prev=3,e.next=6,Rw(u,c);case 6:if(s=e.sent,!(t<n)){e.next=28;break}if(301!==s.statusCode&&302!==s.statusCode){e.next=15;break}if(l=s.headers.location||"","GET"!==c.method||!l.match(/^https:/)){e.next=13;break}return u=s.headers.location,e.abrupt("continue",62);case 13:e.next=28;break;case 15:if(429!==s.statusCode){e.next=28;break}if(h=!0,!i){e.next=21;break}return e.next=20,i(t,u);case 20:h=e.sent;case 21:if(!h){e.next=28;break}return d=0,p=s.headers["retry-after"],d="string"===typeof p&&p.match(/^[1-9][0-9]*$/)?1e3*parseInt(p):o*parseInt(String(Math.random()*Math.pow(2,t))),e.next=27,Pw(d);case 27:return e.abrupt("continue",62);case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(3),null==(s=e.t0.response)&&(b.cancel(),Cw.throwError("missing response",aw.errors.SERVER_ERROR,{requestBody:Ow(c.body,y["content-type"]),requestMethod:c.method,serverError:e.t0,url:u}));case 34:if(v=s.body,f&&304===s.statusCode?v=null:!a&&(s.statusCode<200||s.statusCode>=300)&&(b.cancel(),Cw.throwError("bad response",aw.errors.SERVER_ERROR,{status:s.statusCode,headers:s.headers,body:Ow(v,s.headers?s.headers["content-type"]:null),requestBody:Ow(c.body,y["content-type"]),requestMethod:c.method,url:u})),!r){e.next=60;break}return e.prev=37,e.next=40,r(v,s);case 40:return g=e.sent,b.cancel(),e.abrupt("return",g);case 45:if(e.prev=45,e.t1=e.catch(37),!(e.t1.throttleRetry&&t<n)){e.next=58;break}if(m=!0,!i){e.next=53;break}return e.next=52,i(t,u);case 52:m=e.sent;case 53:if(!m){e.next=58;break}return E=o*parseInt(String(Math.random()*Math.pow(2,t))),e.next=57,Pw(E);case 57:return e.abrupt("continue",62);case 58:b.cancel(),Cw.throwError("processing response error",aw.errors.SERVER_ERROR,{body:Ow(v,s.headers?s.headers["content-type"]:null),error:e.t1,requestBody:Ow(c.body,y["content-type"]),requestMethod:c.method,url:u});case 60:return b.cancel(),e.abrupt("return",v);case 62:t++,e.next=1;break;case 65:return e.abrupt("return",Cw.throwError("failed response",aw.errors.SERVER_ERROR,{requestBody:Ow(c.body,y["content-type"]),requestMethod:c.method,url:u}));case 66:case"end":return e.stop()}}),e,null,[[3,30],[37,45]])})))}();return Promise.race([b.promise,E])}function Mw(e,t,r){var n=null;if(null!=t){n=_w(t);var i="string"===typeof e?{url:e}:bw(e);if(i.headers)0!==Object.keys(i.headers).filter((function(e){return"content-type"===e.toLowerCase()})).length||(i.headers=bw(i.headers),i.headers["content-type"]="application/json");else i.headers={"content-type":"application/json"};e=i}return Uw(e,n,(function(e,t){var n=null;if(null!=e)try{n=JSON.parse(Sw(e))}catch(i){Cw.throwError("invalid JSON",aw.errors.SERVER_ERROR,{body:e,error:i})}return r&&(n=r(n,t)),n}))}function Fw(e,t){return t||(t={}),null==(t=bw(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise((function(r,n){var i=null,o=!1,a=function(){return!o&&(o=!0,i&&clearTimeout(i),!0)};t.timeout&&(i=setTimeout((function(){a()&&n(new Error("timeout"))}),t.timeout));var s=t.retryLimit,u=0;!function i(){return e().then((function(e){if(void 0!==e)a()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",i);else if(t.onceBlock)t.onceBlock.once("block",i);else if(!o){if(++u>s)return void(a()&&n(new Error("retry limit reached")));var c=t.interval*parseInt(String(Math.random()*Math.pow(2,u)));c<t.floor&&(c=t.floor),c>t.ceiling&&(c=t.ceiling),setTimeout(i,c)}return null}),(function(e){a()&&n(e)}))}()}))}var Dw=!1,Lw=!1,Zw={debug:1,default:2,info:2,warning:3,error:4,off:5},Bw=Zw.default,Gw=null;var Ww,jw,zw=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(Ww||(Ww={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(jw||(jw={}));var qw="0123456789abcdef",Vw=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==Zw[r]&&this.throwArgumentError("invalid log level name","logLevel",e),Bw>Zw[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(Lw)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=qw[t[o]>>4],r+=qw[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case jw.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case jw.CALL_EXCEPTION:case jw.INSUFFICIENT_FUNDS:case jw.MISSING_NEW:case jw.NONCE_EXPIRED:case jw.REPLACEMENT_UNDERPRICED:case jw.TRANSACTION_REPLACED:case jw.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),zw&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:zw})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Gw||(Gw=new e("logger/5.7.0")),Gw}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Dw){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Lw=!!t,Dw=!!r}},{key:"setLogLevel",value:function(t){var r=Zw[t.toLowerCase()];null!=r?Bw=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Vw.errors=jw,Vw.levels=Ww;var Kw=new Vw("bytes/5.7.0");function Hw(e){return!!e.toHexString}function Jw(e){return e.slice||(e.slice=function(){var t=Array.prototype.slice.call(arguments);return Jw(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function Xw(e){return tN(e)&&!(e.length%2)||Yw(e)}function $w(e){return"number"===typeof e&&e==e&&e%1===0}function Yw(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!$w(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!$w(r)||r<0||r>=256)return!1}return!0}function Qw(e,t){if(t||(t={}),"number"===typeof e){Kw.checkSafeUint53(e,"invalid arrayify value");for(var r=[];e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),Jw(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Hw(e)&&(e=e.toHexString()),tN(e)){var n=e.substring(2);n.length%2&&("left"===t.hexPad?n="0"+n:"right"===t.hexPad?n+="0":Kw.throwArgumentError("hex data is odd-length","value",e));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return Jw(new Uint8Array(i))}return Yw(e)?Jw(new Uint8Array(e)):Kw.throwArgumentError("invalid arrayify value","value",e)}function eN(e){var t=e.map((function(e){return Qw(e)})),r=t.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(r);return t.reduce((function(e,t){return n.set(t,e),e+t.length}),0),Jw(n)}function tN(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var rN="0123456789abcdef";function nN(e,t){if(t||(t={}),"number"===typeof e){Kw.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=rN[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),Hw(e))return e.toHexString();if(tN(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Kw.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(Yw(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=rN[(240&o)>>4]+rN[15&o]}return n}return Kw.throwArgumentError("invalid hexlify value","value",e)}function iN(e,t,r){return"string"!==typeof e?e=nN(e):(!tN(e)||e.length%2)&&Kw.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function oN(e,t){for("string"!==typeof e?e=nN(e):tN(e)||Kw.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&Kw.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}var aN=be().BN,sN=new Vw("bignumber/5.7.0"),uN={},cN=9007199254740991;var fN=!1,lN=function(){function e(t,r){(0,N.Z)(this,e),t!==uN&&sN.throwError("cannot call constructor directly; use BigNumber.from",Vw.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return dN(pN(this).fromTwos(e))}},{key:"toTwos",value:function(e){return dN(pN(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return dN(pN(this).add(pN(e)))}},{key:"sub",value:function(e){return dN(pN(this).sub(pN(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&vN("division-by-zero","div"),dN(pN(this).div(pN(t)))}},{key:"mul",value:function(e){return dN(pN(this).mul(pN(e)))}},{key:"mod",value:function(e){var t=pN(e);return t.isNeg()&&vN("division-by-zero","mod"),dN(pN(this).umod(t))}},{key:"pow",value:function(e){var t=pN(e);return t.isNeg()&&vN("negative-power","pow"),dN(pN(this).pow(t))}},{key:"and",value:function(e){var t=pN(e);return(this.isNegative()||t.isNeg())&&vN("unbound-bitwise-result","and"),dN(pN(this).and(t))}},{key:"or",value:function(e){var t=pN(e);return(this.isNegative()||t.isNeg())&&vN("unbound-bitwise-result","or"),dN(pN(this).or(t))}},{key:"xor",value:function(e){var t=pN(e);return(this.isNegative()||t.isNeg())&&vN("unbound-bitwise-result","xor"),dN(pN(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&vN("negative-width","mask"),dN(pN(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&vN("negative-width","shl"),dN(pN(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&vN("negative-width","shr"),dN(pN(this).shrn(e))}},{key:"eq",value:function(e){return pN(this).eq(pN(e))}},{key:"lt",value:function(e){return pN(this).lt(pN(e))}},{key:"lte",value:function(e){return pN(this).lte(pN(e))}},{key:"gt",value:function(e){return pN(this).gt(pN(e))}},{key:"gte",value:function(e){return pN(this).gte(pN(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return pN(this).isZero()}},{key:"toNumber",value:function(){try{return pN(this).toNumber()}catch(e){vN("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return sN.throwError("this platform does not support BigInt",Vw.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?fN||(fN=!0,sN.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?sN.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Vw.errors.UNEXPECTED_ARGUMENT,{}):sN.throwError("BigNumber.toString does not accept parameters",Vw.errors.UNEXPECTED_ARGUMENT,{})),pN(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(uN,hN(t)):t.match(/^-?[0-9]+$/)?new e(uN,hN(new aN(t))):sN.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&vN("underflow","BigNumber.from",t),(t>=cN||t<=-9007199254740991)&&vN("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(Yw(r))return e.from(nN(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(tN(i)||"-"===i[0]&&tN(i.substring(1))))return e.from(i)}return sN.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function hN(e){if("string"!==typeof e)return hN(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&sN.throwArgumentError("invalid hex","value",e),"0x00"===(e=hN(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function dN(e){return lN.from(hN(e))}function pN(e){var t=lN.from(e).toHexString();return"-"===t[0]?new aN("-"+t.substring(3),16):new aN(t.substring(2),16)}function vN(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),sN.throwError(e,Vw.errors.NUMERIC_FAULT,n)}var gN=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},mN=new Vw("properties/5.7.0");function yN(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function bN(e,t){for(var r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!==typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function EN(e){return gN(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.keys(e).map((function(t){var r=e[t];return Promise.resolve(r).then((function(e){return{key:t,value:e}}))})),t.next=3,Promise.all(r);case 3:return n=t.sent,t.abrupt("return",n.reduce((function(e,t){return e[t.key]=t.value,e}),{}));case 5:case"end":return t.stop()}}),t)})))}function wN(e){var t={};for(var r in e)t[r]=e[r];return t}var NN={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function kN(e){if(void 0===e||null===e||NN[typeof e])return!0;if(Array.isArray(e)||"object"===typeof e){if(!Object.isFrozen(e))return!1;for(var t=Object.keys(e),r=0;r<t.length;r++){var n=null;try{n=e[t[r]]}catch(i){continue}if(!kN(n))return!1}return!0}return mN.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function AN(e){if(kN(e))return e;if(Array.isArray(e))return Object.freeze(e.map((function(e){return xN(e)})));if("object"===typeof e){var t={};for(var r in e){var n=e[r];void 0!==n&&yN(t,r,xN(n))}return t}return mN.throwArgumentError("Cannot deepCopy ".concat(typeof e),"object",e)}function xN(e){return AN(e)}var _N=(0,k.Z)((function e(t){for(var r in(0,N.Z)(this,e),t)this[r]=xN(t[r])})),SN="abi/5.7.0",IN=new Vw(SN);var RN=function(){function e(t,r,n,i){(0,N.Z)(this,e),this.name=t,this.type=r,this.localName=n,this.dynamic=i}return(0,k.Z)(e,[{key:"_throwError",value:function(e,t){IN.throwArgumentError(e,this.localName,t)}}]),e}(),TN=function(){function e(t){(0,N.Z)(this,e),yN(this,"wordSize",t||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(t)}return(0,k.Z)(e,[{key:"data",get:function(){return function(e){var t="0x";return e.forEach((function(e){t+=nN(e).substring(2)})),t}(this._data)}},{key:"length",get:function(){return this._dataLength}},{key:"_writeData",value:function(e){return this._data.push(e),this._dataLength+=e.length,e.length}},{key:"appendWriter",value:function(e){return this._writeData(eN(e._data))}},{key:"writeBytes",value:function(e){var t=Qw(e),r=t.length%this.wordSize;return r&&(t=eN([t,this._padding.slice(r)])),this._writeData(t)}},{key:"_getValue",value:function(e){var t=Qw(lN.from(e));return t.length>this.wordSize&&IN.throwError("value out-of-bounds",Vw.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=eN([this._padding.slice(t.length%this.wordSize),t])),t}},{key:"writeValue",value:function(e){return this._writeData(this._getValue(e))}},{key:"writeUpdatableValue",value:function(){var e=this,t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,function(r){e._data[t]=e._getValue(r)}}}]),e}(),CN=function(){function e(t,r,n,i){(0,N.Z)(this,e),yN(this,"_data",Qw(t)),yN(this,"wordSize",r||32),yN(this,"_coerceFunc",n),yN(this,"allowLoose",i),this._offset=0}return(0,k.Z)(e,[{key:"data",get:function(){return nN(this._data)}},{key:"consumed",get:function(){return this._offset}},{key:"coerce",value:function(t,r){return this._coerceFunc?this._coerceFunc(t,r):e.coerce(t,r)}},{key:"_peekBytes",value:function(e,t,r){var n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:IN.throwError("data out-of-bounds",Vw.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}},{key:"subReader",value:function(t){return new e(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)}},{key:"readBytes",value:function(e,t){var r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}},{key:"readValue",value:function(){return lN.from(this.readBytes(this.wordSize))}}],[{key:"coerce",value:function(e,t){var r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}}]),e}();function PN(e){return"0x"+Fe().keccak_256(Qw(e))}var ON=new Vw("rlp/5.7.0");function UN(e){for(var t=[];e;)t.unshift(255&e),e>>=8;return t}function MN(e){if(Array.isArray(e)){var t=[];if(e.forEach((function(e){t=t.concat(MN(e))})),t.length<=55)return t.unshift(192+t.length),t;var r=UN(t.length);return r.unshift(247+r.length),r.concat(t)}Xw(e)||ON.throwArgumentError("RLP object must be BytesLike","object",e);var n=Array.prototype.slice.call(Qw(e));if(1===n.length&&n[0]<=127)return n;if(n.length<=55)return n.unshift(128+n.length),n;var i=UN(n.length);return i.unshift(183+i.length),i.concat(n)}function FN(e){return nN(MN(e))}var DN=new Vw("address/5.7.0");function LN(e){tN(e,20)||DN.throwArgumentError("invalid address","address",e);for(var t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=t[n].charCodeAt(0);for(var i=Qw(PN(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&i[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}for(var ZN={},BN=0;BN<10;BN++)ZN[String(BN)]=String(BN);for(var GN=0;GN<26;GN++)ZN[String.fromCharCode(65+GN)]=String(10+GN);var WN=Math.floor(function(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}(9007199254740991));function jN(e){for(var t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map((function(e){return ZN[e]})).join("");t.length>=WN;){var r=t.substring(0,WN);t=parseInt(r,10)%97+t.substring(r.length)}for(var n=String(98-parseInt(t,10)%97);n.length<2;)n="0"+n;return n}function zN(e){var t,r=null;if("string"!==typeof e&&DN.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=LN(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&DN.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==jN(e)&&DN.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new aN(t,36).toString(16);r.length<40;)r="0"+r;r=LN("0x"+r)}else DN.throwArgumentError("invalid address","address",e);return r}function qN(e){var t=null;try{t=zN(e.from)}catch(r){DN.throwArgumentError("missing from address","transaction",e)}return zN(iN(PN(FN([t,function(e){var t=Qw(e);if(0===t.length)return t;for(var r=0;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}(Qw(lN.from(e.nonce).toHexString()))])),12))}var VN,KN,HN=new Vw("strings/5.7.0");function JN(e,t,r,n,i){if(e===KN.BAD_PREFIX||e===KN.UNEXPECTED_CONTINUE){for(var o=0,a=t+1;a<r.length&&r[a]>>6===2;a++)o++;return o}return e===KN.OVERRUN?r.length-t-1:0}!function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"}(VN||(VN={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(KN||(KN={}));var XN=Object.freeze({error:function(e,t,r,n,i){return HN.throwArgumentError("invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",r)},ignore:JN,replace:function(e,t,r,n,i){return e===KN.OVERLONG?(n.push(i),0):(n.push(65533),JN(e,t,r))}});function $N(e,t){null==t&&(t=XN.error),e=Qw(e);for(var r=[],n=0;n<e.length;){var i=e[n++];if(i>>7!==0){var o=null,a=null;if(192===(224&i))o=1,a=127;else if(224===(240&i))o=2,a=2047;else{if(240!==(248&i)){n+=t(128===(192&i)?KN.UNEXPECTED_CONTINUE:KN.BAD_PREFIX,n-1,e,r);continue}o=3,a=65535}if(n-1+o>=e.length)n+=t(KN.OVERRUN,n-1,e,r);else{for(var s=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=e[n];if(128!=(192&c)){n+=t(KN.MISSING_CONTINUE,n,e,r),s=null;break}s=s<<6|63&c,n++}null!==s&&(s>1114111?n+=t(KN.OUT_OF_RANGE,n-1-o,e,r,s):s>=55296&&s<=57343?n+=t(KN.UTF16_SURROGATE,n-1-o,e,r,s):s<=a?n+=t(KN.OVERLONG,n-1-o,e,r,s):r.push(s))}}else r.push(i)}return r}function YN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VN.current;t!=VN.current&&(HN.checkNormalize(),e=e.normalize(t));for(var r=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if(55296==(64512&i)){n++;var o=e.charCodeAt(n);if(n>=e.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var a=65536+((1023&i)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return Qw(r)}function QN(e,t){return $N(e,t).map((function(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))})).join("")}function ek(e){return PN(YN(e))}var tk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"address","address",e,!1)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"encode",value:function(e,t){try{t=zN(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}},{key:"decode",value:function(e){return zN(oN(e.readValue().toHexString(),20))}}]),r}(RN),rk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this,e.name,e.type,void 0,e.dynamic)).coder=e,n}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return this.coder.defaultValue()}},{key:"encode",value:function(e,t){return this.coder.encode(e,t)}},{key:"decode",value:function(e){return this.coder.decode(e)}}]),r}(RN),nk=new Vw(SN);function ik(e,t,r){var n=null;if(Array.isArray(r))n=r;else if(r&&"object"===typeof r){var i={};n=t.map((function(e){var t=e.localName;return t||nk.throwError("cannot encode object for signature with missing names",Vw.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),i[t]&&nk.throwError("cannot encode object for signature with duplicate names",Vw.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),i[t]=!0,r[t]}))}else nk.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&nk.throwArgumentError("types/value length mismatch","tuple",r);var o=new TN(e.wordSize),a=new TN(e.wordSize),s=[];t.forEach((function(e,t){var r=n[t];if(e.dynamic){var i=a.length;e.encode(a,r);var u=o.writeUpdatableValue();s.push((function(e){u(e+i)}))}else e.encode(o,r)})),s.forEach((function(e){e(o.length)}));var u=e.appendWriter(o);return u+=e.appendWriter(a)}function ok(e,t){var r=[],n=e.subReader(0);t.forEach((function(t){var i=null;if(t.dynamic){var o=e.readValue(),a=n.subReader(o.toNumber());try{i=t.decode(a)}catch(s){if(s.code===Vw.errors.BUFFER_OVERRUN)throw s;(i=s).baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(s){if(s.code===Vw.errors.BUFFER_OVERRUN)throw s;(i=s).baseType=t.name,i.name=t.localName,i.type=t.type}void 0!=i&&r.push(i)}));var i=t.reduce((function(e,t){var r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});t.forEach((function(e,t){var n=e.localName;if(n&&1===i[n]&&("length"===n&&(n="_length"),null==r[n])){var o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:function(){throw o}}):r[n]=o}}));for(var o=function(){var e=r[a];e instanceof Error&&Object.defineProperty(r,a,{enumerable:!0,get:function(){throw e}})},a=0;a<r.length;a++)o();return Object.freeze(r)}var ak=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n,i){var o;(0,N.Z)(this,r);var a=e.type+"["+(n>=0?n:"")+"]",s=-1===n||e.dynamic;return(o=t.call(this,"array",a,i,s)).coder=e,o.length=n,o}return(0,k.Z)(r,[{key:"defaultValue",value:function(){for(var e=this.coder.defaultValue(),t=[],r=0;r<this.length;r++)t.push(e);return t}},{key:"encode",value:function(e,t){Array.isArray(t)||this._throwError("expected array value",t);var r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),nk.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));for(var n=[],i=0;i<t.length;i++)n.push(this.coder);return ik(e,n,t)}},{key:"decode",value:function(e){var t=this.length;-1===t&&32*(t=e.readValue().toNumber())>e._data.length&&nk.throwError("insufficient data length",Vw.errors.BUFFER_OVERRUN,{length:e._data.length,count:t});for(var r=[],n=0;n<t;n++)r.push(new rk(this.coder));return e.coerce(this.name,ok(e,r))}}]),r}(RN),sk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"bool","bool",e,!1)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return!1}},{key:"encode",value:function(e,t){return e.writeValue(t?1:0)}},{key:"decode",value:function(e){return e.coerce(this.type,!e.readValue().isZero())}}]),r}(RN),uk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){return(0,N.Z)(this,r),t.call(this,e,e,n,!0)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return"0x"}},{key:"encode",value:function(e,t){t=Qw(t);var r=e.writeValue(t.length);return r+=e.writeBytes(t)}},{key:"decode",value:function(e){return e.readBytes(e.readValue().toNumber(),!0)}}]),r}(RN),ck=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"bytes",e)}return(0,k.Z)(r,[{key:"decode",value:function(e){return e.coerce(this.name,nN((0,rt.Z)((0,nt.Z)(r.prototype),"decode",this).call(this,e)))}}]),r}(uk),fk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r);var o="bytes"+String(e);return(i=t.call(this,o,o,n,!1)).size=e,i}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}},{key:"encode",value:function(e,t){var r=Qw(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}},{key:"decode",value:function(e){return e.coerce(this.name,nN(e.readBytes(this.size)))}}]),r}(RN),lk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"null","",e,!1)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return null}},{key:"encode",value:function(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}},{key:"decode",value:function(e){return e.readBytes(0),e.coerce(this.name,null)}}]),r}(RN),hk=lN.from(-1),dk=lN.from(0),pk=lN.from(1),vk=lN.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),gk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n,i){var o;(0,N.Z)(this,r);var a=(n?"int":"uint")+8*e;return(o=t.call(this,a,a,i,!1)).size=e,o.signed=n,o}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return 0}},{key:"encode",value:function(e,t){var r=lN.from(t),n=vk.mask(8*e.wordSize);if(this.signed){var i=n.mask(8*this.size-1);(r.gt(i)||r.lt(i.add(pk).mul(hk)))&&this._throwError("value out-of-bounds",t)}else(r.lt(dk)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}},{key:"decode",value:function(e){var t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}]),r}(RN),mk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){return(0,N.Z)(this,r),t.call(this,"string",e)}return(0,k.Z)(r,[{key:"defaultValue",value:function(){return""}},{key:"encode",value:function(e,t){return(0,rt.Z)((0,nt.Z)(r.prototype),"encode",this).call(this,e,YN(t))}},{key:"decode",value:function(e){return QN((0,rt.Z)((0,nt.Z)(r.prototype),"decode",this).call(this,e))}}]),r}(uk),yk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r);var o=!1,a=[];e.forEach((function(e){e.dynamic&&(o=!0),a.push(e.type)}));var s="tuple("+a.join(",")+")";return(i=t.call(this,"tuple",s,n,o)).coders=e,i}return(0,k.Z)(r,[{key:"defaultValue",value:function(){var e=[];this.coders.forEach((function(t){e.push(t.defaultValue())}));var t=this.coders.reduce((function(e,t){var r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach((function(r,n){var i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)}},{key:"encode",value:function(e,t){return ik(e,this.coders,t)}},{key:"decode",value:function(e){return e.coerce(this.name,ok(e,this.coders))}}]),r}(RN),bk=new Vw(SN),Ek={},wk={calldata:!0,memory:!0,storage:!0},Nk={calldata:!0,memory:!0};function kk(e,t){if("bytes"===e||"string"===e){if(wk[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&Nk[t])return!0;return(wk[t]||"payable"===t)&&bk.throwArgumentError("invalid modifier","name",t),!1}function Ak(e,t){for(var r in t)yN(e,r,t[r])}var xk=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),_k=new RegExp(/^(.*)\[([0-9]*)\]$/),Sk=function(){function e(t,r){(0,N.Z)(this,e),t!==Ek&&bk.throwError("use fromString",Vw.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Ak(this,r);var n=this.type.match(_k);Ak(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:e.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"format",value:function(e){if(e||(e=xk.sighash),xk[e]||bk.throwArgumentError("invalid format type","format",e),e===xk.json){var t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((function(t){return JSON.parse(t.format(e))}))),JSON.stringify(t)}var r="";return"array"===this.baseType?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==xk.sighash&&(r+=this.type),r+="("+this.components.map((function(t){return t.format(e)})).join(e===xk.full?", ":",")+")"):r+=this.type,e!==xk.sighash&&(!0===this.indexed&&(r+=" indexed"),e===xk.full&&this.name&&(r+=" "+this.name)),r}}],[{key:"from",value:function(t,r){return"string"===typeof t?e.fromString(t,r):e.fromObject(t)}},{key:"fromObject",value:function(t){return e.isParamType(t)?t:new e(Ek,{name:t.name||null,type:Lk(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(e.fromObject):null})}},{key:"fromString",value:function(t,r){return n=function(e,t){var r=e;function n(t){bk.throwArgumentError("unexpected character at position ".concat(t),"param",e)}function i(e){var r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");for(var o={type:"",name:"",state:{allowType:!0}},a=o,s=0;s<e.length;s++){var u=e[s];switch(u){case"(":a.state.allowType&&""===a.type?a.type="tuple":a.state.allowParams||n(s),a.state.allowType=!1,a.type=Lk(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,"indexed"===a.name&&(t||n(s),a.indexed=!0,a.name=""),kk(a.type,a.name)&&(a.name=""),a.type=Lk(a.type);var c=a;(a=a.parent)||n(s),delete c.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,"indexed"===a.name&&(t||n(s),a.indexed=!0,a.name=""),kk(a.type,a.name)&&(a.name=""),a.type=Lk(a.type);var f=i(a.parent);a.parent.components.push(f),delete a.parent,a=f;break;case" ":a.state.allowType&&""!==a.type&&(a.type=Lk(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&""!==a.name&&("indexed"===a.name?(t||n(s),a.indexed&&n(s),a.indexed=!0,a.name=""):kk(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(s),a.type+=u,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(s),a.type+=u,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=u,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=u,delete a.state.allowArray):a.state.readArray?a.type+=u:n(s)}}return a.parent&&bk.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===a.name?(t||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):kk(a.type,a.name)&&(a.name=""),o.type=Lk(o.type),o}(t,!!r),e.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n}},{key:"isParamType",value:function(e){return!(null==e||!e._isParamType)}}]),e}();function Ik(e,t){return function(e){e=e.trim();for(var t=[],r="",n=0,i=0;i<e.length;i++){var o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&-1===--n&&bk.throwArgumentError("unbalanced parenthesis","value",e))}r&&t.push(r);return t}(e).map((function(e){return Sk.fromString(e,t)}))}var Rk=function(){function e(t,r){(0,N.Z)(this,e),t!==Ek&&bk.throwError("use a static from method",Vw.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Ak(this,r),this._isFragment=!0,Object.freeze(this)}return(0,k.Z)(e,null,[{key:"from",value:function(t){return e.isFragment(t)?t:"string"===typeof t?e.fromString(t):e.fromObject(t)}},{key:"fromObject",value:function(t){if(e.isFragment(t))return t;switch(t.type){case"function":return Mk.fromObject(t);case"event":return Tk.fromObject(t);case"constructor":return Uk.fromObject(t);case"error":return Dk.fromObject(t);case"fallback":case"receive":return null}return bk.throwArgumentError("invalid fragment object","value",t)}},{key:"fromString",value:function(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?Tk.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?Mk.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?Uk.fromString(e.trim()):"error"===e.split(" ")[0]?Dk.fromString(e.substring(5).trim()):bk.throwArgumentError("unsupported fragment","value",e)}},{key:"isFragment",value:function(e){return!(!e||!e._isFragment)}}]),e}(),Tk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=xk.sighash),xk[e]||bk.throwArgumentError("invalid format type","format",e),e===xk.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==xk.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===xk.full?", ":",")+") ",e!==xk.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isEventFragment(e))return e;"event"!==e.type&&bk.throwArgumentError("invalid event object","value",e);var t={name:Bk(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Sk.fromObject):[],type:"event"};return new r(Ek,t)}},{key:"fromString",value:function(e){var t=e.match(Gk);t||bk.throwArgumentError("invalid event string","value",e);var n=!1;return t[3].split(" ").forEach((function(e){switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:bk.warn("unknown modifier: "+e)}})),r.fromObject({name:t[1].trim(),anonymous:n,inputs:Ik(t[2],!0),type:"event"})}},{key:"isEventFragment",value:function(e){return e&&e._isFragment&&"event"===e.type}}]),r}(Rk);function Ck(e,t){t.gas=null;var r=e.split("@");return 1!==r.length?(r.length>2&&bk.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||bk.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=lN.from(r[1]),r[0]):e}function Pk(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((function(e){switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function Ok(e){var t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&bk.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&bk.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||bk.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&bk.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&bk.throwArgumentError("unable to determine stateMutability","value",e),t}var Uk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=xk.sighash),xk[e]||bk.throwArgumentError("invalid format type","format",e),e===xk.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});e===xk.sighash&&bk.throwError("cannot format a constructor for sighash",Vw.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});var t="constructor("+this.inputs.map((function(t){return t.format(e)})).join(e===xk.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isConstructorFragment(e))return e;"constructor"!==e.type&&bk.throwArgumentError("invalid constructor object","value",e);var t=Ok(e);t.constant&&bk.throwArgumentError("constructor cannot be constant","value",e);var n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Sk.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?lN.from(e.gas):null};return new r(Ek,n)}},{key:"fromString",value:function(e){var t={type:"constructor"},n=(e=Ck(e,t)).match(Gk);return n&&"constructor"===n[1].trim()||bk.throwArgumentError("invalid constructor string","value",e),t.inputs=Ik(n[2].trim(),!1),Pk(n[3].trim(),t),r.fromObject(t)}},{key:"isConstructorFragment",value:function(e){return e&&e._isFragment&&"constructor"===e.type}}]),r}(Rk),Mk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=xk.sighash),xk[e]||bk.throwArgumentError("invalid format type","format",e),e===xk.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))})),outputs:this.outputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==xk.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===xk.full?", ":",")+") ",e!==xk.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((function(t){return t.format(e)})).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isFunctionFragment(e))return e;"function"!==e.type&&bk.throwArgumentError("invalid function object","value",e);var t=Ok(e),n={type:e.type,name:Bk(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(Sk.fromObject):[],outputs:e.outputs?e.outputs.map(Sk.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?lN.from(e.gas):null};return new r(Ek,n)}},{key:"fromString",value:function(e){var t={type:"function"},n=(e=Ck(e,t)).split(" returns ");n.length>2&&bk.throwArgumentError("invalid function string","value",e);var i=n[0].match(Gk);if(i||bk.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&Bk(t.name),t.inputs=Ik(i[2],!1),Pk(i[3].trim(),t),n.length>1){var o=n[1].match(Gk);""==o[1].trim()&&""==o[3].trim()||bk.throwArgumentError("unexpected tokens","value",e),t.outputs=Ik(o[2],!1)}else t.outputs=[];return r.fromObject(t)}},{key:"isFunctionFragment",value:function(e){return e&&e._isFragment&&"function"===e.type}}]),r}(Uk);function Fk(e){var t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||bk.throwArgumentError("cannot specify user defined ".concat(t," error"),"fragment",e),e}var Dk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"format",value:function(e){if(e||(e=xk.sighash),xk[e]||bk.throwArgumentError("invalid format type","format",e),e===xk.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==xk.sighash&&(t+="error "),(t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===xk.full?", ":",")+") ").trim()}}],[{key:"from",value:function(e){return"string"===typeof e?r.fromString(e):r.fromObject(e)}},{key:"fromObject",value:function(e){if(r.isErrorFragment(e))return e;"error"!==e.type&&bk.throwArgumentError("invalid error object","value",e);var t={type:e.type,name:Bk(e.name),inputs:e.inputs?e.inputs.map(Sk.fromObject):[]};return Fk(new r(Ek,t))}},{key:"fromString",value:function(e){var t={type:"error"},n=e.match(Gk);return n||bk.throwArgumentError("invalid error signature","value",e),t.name=n[1].trim(),t.name&&Bk(t.name),t.inputs=Ik(n[2],!1),Fk(r.fromObject(t))}},{key:"isErrorFragment",value:function(e){return e&&e._isFragment&&"error"===e.type}}]),r}(Rk);function Lk(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}var Zk=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Bk(e){return e&&e.match(Zk)||bk.throwArgumentError('invalid identifier "'.concat(e,'"'),"value",e),e}var Gk=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var Wk=new Vw(SN),jk=new RegExp(/^bytes([0-9]*)$/),zk=new RegExp(/^(u?int)([0-9]*)$/),qk=function(){function e(t){(0,N.Z)(this,e),yN(this,"coerceFunc",t||null)}return(0,k.Z)(e,[{key:"_getCoder",value:function(e){var t=this;switch(e.baseType){case"address":return new tk(e.name);case"bool":return new sk(e.name);case"string":return new mk(e.name);case"bytes":return new ck(e.name);case"array":return new ak(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new yk((e.components||[]).map((function(e){return t._getCoder(e)})),e.name);case"":return new lk(e.name)}var r=e.type.match(zk);if(r){var n=parseInt(r[2]||"256");return(0===n||n>256||n%8!==0)&&Wk.throwArgumentError("invalid "+r[1]+" bit length","param",e),new gk(n/8,"int"===r[1],e.name)}if(r=e.type.match(jk)){var i=parseInt(r[1]);return(0===i||i>32)&&Wk.throwArgumentError("invalid bytes length","param",e),new fk(i,e.name)}return Wk.throwArgumentError("invalid type","type",e.type)}},{key:"_getWordSize",value:function(){return 32}},{key:"_getReader",value:function(e,t){return new CN(e,this._getWordSize(),this.coerceFunc,t)}},{key:"_getWriter",value:function(){return new TN(this._getWordSize())}},{key:"getDefaultValue",value:function(e){var t=this,r=e.map((function(e){return t._getCoder(Sk.from(e))}));return new yk(r,"_").defaultValue()}},{key:"encode",value:function(e,t){var r=this;e.length!==t.length&&Wk.throwError("types/values length mismatch",Vw.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});var n=e.map((function(e){return r._getCoder(Sk.from(e))})),i=new yk(n,"_"),o=this._getWriter();return i.encode(o,t),o.data}},{key:"decode",value:function(e,t,r){var n=this,i=e.map((function(e){return n._getCoder(Sk.from(e))}));return new yk(i,"_").decode(this._getReader(Qw(t),r))}}]),e}(),Vk=new qk,Kk=new Vw(SN),Hk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(_N),Jk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(_N),Xk=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(_N),$k=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,null,[{key:"isIndexed",value:function(e){return!(!e||!e._isIndexed)}}]),r}(_N),Yk={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Qk(e,t){var r=new Error("deferred error during ABI decoding triggered accessing ".concat(e));return r.error=t,r}var eA,tA=function(){function e(t){var r=this;(0,N.Z)(this,e);yN(this,"fragments",("string"===typeof t?JSON.parse(t):t).map((function(e){return Rk.from(e)})).filter((function(e){return null!=e}))),yN(this,"_abiCoder",bN(this instanceof e?this.constructor:void 0,"getAbiCoder")()),yN(this,"functions",{}),yN(this,"errors",{}),yN(this,"events",{}),yN(this,"structs",{}),this.fragments.forEach((function(e){var t=null;switch(e.type){case"constructor":return r.deploy?void Kk.warn("duplicate definition - constructor"):void yN(r,"deploy",e);case"function":t=r.functions;break;case"event":t=r.events;break;case"error":t=r.errors;break;default:return}var n=e.format();t[n]?Kk.warn("duplicate definition - "+n):t[n]=e})),this.deploy||yN(this,"deploy",Uk.from({payable:!1,type:"constructor"})),yN(this,"_isInterface",!0)}return(0,k.Z)(e,[{key:"format",value:function(e){e||(e=xk.full),e===xk.sighash&&Kk.throwArgumentError("interface does not support formatting sighash","format",e);var t=this.fragments.map((function(t){return t.format(e)}));return e===xk.json?JSON.stringify(t.map((function(e){return JSON.parse(e)}))):t}},{key:"getFunction",value:function(e){if(tN(e)){for(var t in this.functions)if(e===this.getSighash(t))return this.functions[t];Kk.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){var r=e.trim(),n=Object.keys(this.functions).filter((function(e){return e.split("(")[0]===r}));return 0===n.length?Kk.throwArgumentError("no matching function","name",r):n.length>1&&Kk.throwArgumentError("multiple matching functions","name",r),this.functions[n[0]]}var i=this.functions[Mk.fromString(e).format()];return i||Kk.throwArgumentError("no matching function","signature",e),i}},{key:"getEvent",value:function(e){if(tN(e)){var t=e.toLowerCase();for(var r in this.events)if(t===this.getEventTopic(r))return this.events[r];Kk.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){var n=e.trim(),i=Object.keys(this.events).filter((function(e){return e.split("(")[0]===n}));return 0===i.length?Kk.throwArgumentError("no matching event","name",n):i.length>1&&Kk.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}var o=this.events[Tk.fromString(e).format()];return o||Kk.throwArgumentError("no matching event","signature",e),o}},{key:"getError",value:function(e){if(tN(e)){var t=bN(this.constructor,"getSighash");for(var r in this.errors){if(e===t(this.errors[r]))return this.errors[r]}Kk.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){var n=e.trim(),i=Object.keys(this.errors).filter((function(e){return e.split("(")[0]===n}));return 0===i.length?Kk.throwArgumentError("no matching error","name",n):i.length>1&&Kk.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}var o=this.errors[Mk.fromString(e).format()];return o||Kk.throwArgumentError("no matching error","signature",e),o}},{key:"getSighash",value:function(e){if("string"===typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(r){throw t}}return bN(this.constructor,"getSighash")(e)}},{key:"getEventTopic",value:function(e){return"string"===typeof e&&(e=this.getEvent(e)),bN(this.constructor,"getEventTopic")(e)}},{key:"_decodeParams",value:function(e,t){return this._abiCoder.decode(e,t)}},{key:"_encodeParams",value:function(e,t){return this._abiCoder.encode(e,t)}},{key:"encodeDeploy",value:function(e){return this._encodeParams(this.deploy.inputs,e||[])}},{key:"decodeErrorResult",value:function(e,t){"string"===typeof e&&(e=this.getError(e));var r=Qw(t);return nN(r.slice(0,4))!==this.getSighash(e)&&Kk.throwArgumentError("data signature does not match error ".concat(e.name,"."),"data",nN(r)),this._decodeParams(e.inputs,r.slice(4))}},{key:"encodeErrorResult",value:function(e,t){return"string"===typeof e&&(e=this.getError(e)),nN(eN([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}},{key:"decodeFunctionData",value:function(e,t){"string"===typeof e&&(e=this.getFunction(e));var r=Qw(t);return nN(r.slice(0,4))!==this.getSighash(e)&&Kk.throwArgumentError("data signature does not match function ".concat(e.name,"."),"data",nN(r)),this._decodeParams(e.inputs,r.slice(4))}},{key:"encodeFunctionData",value:function(e,t){return"string"===typeof e&&(e=this.getFunction(e)),nN(eN([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}},{key:"decodeFunctionResult",value:function(e,t){"string"===typeof e&&(e=this.getFunction(e));var r=Qw(t),n=null,i="",o=null,a=null,s=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(f){}break;case 4:var u=nN(r.slice(0,4)),c=Yk[u];if(c)o=this._abiCoder.decode(c.inputs,r.slice(4)),a=c.name,s=c.signature,c.reason&&(n=o[0]),"Error"===a?i="; VM Exception while processing transaction: reverted with reason string ".concat(JSON.stringify(o[0])):"Panic"===a&&(i="; VM Exception while processing transaction: reverted with panic code ".concat(o[0]));else try{var f=this.getError(u);o=this._abiCoder.decode(f.inputs,r.slice(4)),a=f.name,s=f.format()}catch(f){}}return Kk.throwError("call revert exception"+i,Vw.errors.CALL_EXCEPTION,{method:e.format(),data:nN(t),errorArgs:o,errorName:a,errorSignature:s,reason:n})}},{key:"encodeFunctionResult",value:function(e,t){return"string"===typeof e&&(e=this.getFunction(e)),nN(this._abiCoder.encode(e.outputs,t||[]))}},{key:"encodeFilterTopics",value:function(e,t){var r=this;"string"===typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&Kk.throwError("too many arguments for "+e.format(),Vw.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});var n=[];e.anonymous||n.push(this.getEventTopic(e));var i=function(e,t){return"string"===e.type?ek(t):"bytes"===e.type?PN(nN(t)):("bool"===e.type&&"boolean"===typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=lN.from(t).toHexString()),"address"===e.type&&r._abiCoder.encode(["address"],[t]),oN(nN(t),32))};for(t.forEach((function(t,r){var o=e.inputs[r];o.indexed?null==t?n.push(null):"array"===o.baseType||"tuple"===o.baseType?Kk.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?n.push(t.map((function(e){return i(o,e)}))):n.push(i(o,t)):null!=t&&Kk.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n}},{key:"encodeEventLog",value:function(e,t){var r=this;"string"===typeof e&&(e=this.getEvent(e));var n=[],i=[],o=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&Kk.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((function(e,a){var s=t[a];if(e.indexed)if("string"===e.type)n.push(ek(s));else if("bytes"===e.type)n.push(PN(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(r._abiCoder.encode([e.type],[s]))}else i.push(e),o.push(s)})),{data:this._abiCoder.encode(i,o),topics:n}}},{key:"decodeEventLog",value:function(e,t,r){if("string"===typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){var n=this.getEventTopic(e);tN(r[0],32)&&r[0].toLowerCase()===n||Kk.throwError("fragment/topic mismatch",Vw.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:n,value:r[0]}),r=r.slice(1)}var i=[],o=[],a=[];e.inputs.forEach((function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(i.push(Sk.fromObject({type:"bytes32",name:e.name})),a.push(!0)):(i.push(e),a.push(!1)):(o.push(e),a.push(!1))}));var s=null!=r?this._abiCoder.decode(i,eN(r)):null,u=this._abiCoder.decode(o,t,!0),c=[],f=0,l=0;e.inputs.forEach((function(e,t){if(e.indexed)if(null==s)c[t]=new $k({_isIndexed:!0,hash:null});else if(a[t])c[t]=new $k({_isIndexed:!0,hash:s[l++]});else try{c[t]=s[l++]}catch(n){c[t]=n}else try{c[t]=u[f++]}catch(n){c[t]=n}if(e.name&&null==c[e.name]){var r=c[t];r instanceof Error?Object.defineProperty(c,e.name,{enumerable:!0,get:function(){throw Qk("property ".concat(JSON.stringify(e.name)),r)}}):c[e.name]=r}}));for(var h=function(e){var t=c[e];t instanceof Error&&Object.defineProperty(c,e,{enumerable:!0,get:function(){throw Qk("index ".concat(e),t)}})},d=0;d<c.length;d++)h(d);return Object.freeze(c)}},{key:"parseTransaction",value:function(e){var t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new Jk({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:lN.from(e.value||"0")}):null}},{key:"parseLog",value:function(e){var t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new Hk({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}},{key:"parseError",value:function(e){var t=nN(e),r=this.getError(t.substring(0,10).toLowerCase());return r?new Xk({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}}],[{key:"getAbiCoder",value:function(){return Vk}},{key:"getAddress",value:function(e){return zN(e)}},{key:"getSighash",value:function(e){return iN(ek(e.format()),0,4)}},{key:"getEventTopic",value:function(e){return ek(e.format())}},{key:"isInterface",value:function(e){return!(!e||!e._isInterface)}}]),e}(),rA=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},nA=new Vw("abstract-provider/5.7.0"),iA=function(){function e(){(0,N.Z)(this,e),nA.checkAbstract(this instanceof e?this.constructor:void 0,e),yN(this,"_isProvider",!0)}return(0,k.Z)(e,[{key:"getFeeData",value:function(){return rA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r,n,i,o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EN({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((function(e){return null}))});case 2:return t=e.sent,r=t.block,n=t.gasPrice,i=null,o=null,a=null,r&&r.baseFeePerGas&&(i=r.baseFeePerGas,a=lN.from("1500000000"),o=r.baseFeePerGas.mul(2).add(a)),e.abrupt("return",{lastBaseFeePerGas:i,maxFeePerGas:o,maxPriorityFeePerGas:a,gasPrice:n});case 8:case"end":return e.stop()}}),e,this)})))}},{key:"addListener",value:function(e,t){return this.on(e,t)}},{key:"removeListener",value:function(e,t){return this.off(e,t)}}],[{key:"isProvider",value:function(e){return!(!e||!e._isProvider)}}]),e}(),oA=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},aA=new Vw("abstract-signer/5.7.0"),sA=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],uA=[Vw.errors.INSUFFICIENT_FUNDS,Vw.errors.NONCE_EXPIRED,Vw.errors.REPLACEMENT_UNDERPRICED],cA=function(){function e(){(0,N.Z)(this,e),aA.checkAbstract(this instanceof e?this.constructor:void 0,e),yN(this,"_isSigner",!0)}return(0,k.Z)(e,[{key:"getBalance",value:function(e){return oA(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getBalance"),t.next=3,this.provider.getBalance(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getTransactionCount",value:function(e){return oA(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getTransactionCount"),t.next=3,this.provider.getTransactionCount(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"estimateGas",value:function(e){return oA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("estimateGas"),t.next=3,EN(this.checkTransaction(e));case 3:return r=t.sent,t.next=6,this.provider.estimateGas(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"call",value:function(e,t){return oA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this._checkProvider("call"),r.next=3,EN(this.checkTransaction(e));case 3:return n=r.sent,r.next=6,this.provider.call(n,t);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"sendTransaction",value:function(e){return oA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("sendTransaction"),t.next=3,this.populateTransaction(e);case 3:return r=t.sent,t.next=6,this.signTransaction(r);case 6:return n=t.sent,t.next=9,this.provider.sendTransaction(n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getChainId",value:function(){return oA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getChainId"),e.next=3,this.provider.getNetwork();case 3:return t=e.sent,e.abrupt("return",t.chainId);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getGasPrice",value:function(){return oA(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getGasPrice"),e.next=3,this.provider.getGasPrice();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getFeeData",value:function(){return oA(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getFeeData"),e.next=3,this.provider.getFeeData();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resolveName",value:function(e){return oA(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("resolveName"),t.next=3,this.provider.resolveName(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"checkTransaction",value:function(e){for(var t in e)-1===sA.indexOf(t)&&aA.throwArgumentError("invalid transaction key: "+t,"transaction",e);var r=wN(e);return null==r.from?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then((function(t){return t[0].toLowerCase()!==t[1].toLowerCase()&&aA.throwArgumentError("from address mismatch","transaction",e),t[0]})),r}},{key:"populateTransaction",value:function(e){return oA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i,o,a=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,EN(this.checkTransaction(e));case 2:if(null!=(r=t.sent).to&&(r.to=Promise.resolve(r.to).then((function(e){return oA(a,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.resolveName(e);case 4:return null==(r=t.sent)&&aA.throwArgumentError("provided ENS name resolves to null","tx.to",e),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})))})),r.to.catch((function(e){}))),n=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas,null==r.gasPrice||2!==r.type&&!n?0!==r.type&&1!==r.type||!n||aA.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):aA.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas){t.next=10;break}r.type=2,t.next=18;break;case 10:if(0!==r.type&&1!==r.type){t.next=14;break}null==r.gasPrice&&(r.gasPrice=this.getGasPrice()),t.next=18;break;case 14:return t.next=16,this.getFeeData();case 16:i=t.sent,null==r.type?null!=i.maxFeePerGas&&null!=i.maxPriorityFeePerGas?(r.type=2,null!=r.gasPrice?(o=r.gasPrice,delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o):(null==r.maxFeePerGas&&(r.maxFeePerGas=i.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))):null!=i.gasPrice?(n&&aA.throwError("network does not support EIP-1559",Vw.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=i.gasPrice),r.type=0):aA.throwError("failed to get consistent fee data",Vw.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"}):2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=i.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas));case 18:return null==r.nonce&&(r.nonce=this.getTransactionCount("pending")),null==r.gasLimit&&(r.gasLimit=this.estimateGas(r).catch((function(e){if(uA.indexOf(e.code)>=0)throw e;return aA.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Vw.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:r})}))),null==r.chainId?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then((function(t){return 0!==t[1]&&t[0]!==t[1]&&aA.throwArgumentError("chainId address mismatch","transaction",e),t[0]})),t.next=23,EN(r);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"_checkProvider",value:function(e){this.provider||aA.throwError("missing provider",Vw.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}}],[{key:"isSigner",value:function(e){return!(!e||!e._isSigner)}}]),e}(),fA=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),i=t.call(this),yN((0,nm.Z)(i),"address",e),yN((0,nm.Z)(i),"provider",n||null),i}return(0,k.Z)(r,[{key:"getAddress",value:function(){return Promise.resolve(this.address)}},{key:"_fail",value:function(e,t){return Promise.resolve().then((function(){aA.throwError(e,Vw.errors.UNSUPPORTED_OPERATION,{operation:t})}))}},{key:"signMessage",value:function(e){return this._fail("VoidSigner cannot sign messages","signMessage")}},{key:"signTransaction",value:function(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}},{key:"_signTypedData",value:function(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}},{key:"connect",value:function(e){return new r(this.address,e)}}]),r}(cA),lA=new Vw("transactions/5.7.0");!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(eA||(eA={}));function hA(e,t){return{address:zN(e),storageKeys:(t||[]).map((function(t,r){return 32!==function(e){if("string"!==typeof e)e=nN(e);else if(!tN(e)||e.length%2)return null;return(e.length-2)/2}(t)&&lA.throwArgumentError("invalid access list storageKey","accessList[".concat(e,":").concat(r,"]"),t),t.toLowerCase()}))}}function dA(e){if(Array.isArray(e))return e.map((function(e,t){return Array.isArray(e)?(e.length>2&&lA.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value[".concat(t,"]"),e),hA(e[0],e[1])):hA(e.address,e.storageKeys)}));var t=Object.keys(e).map((function(t){var r=e[t].reduce((function(e,t){return e[t]=!0,e}),{});return hA(t,Object.keys(r).sort())}));return t.sort((function(e,t){return e.address.localeCompare(t.address)})),t}var pA=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},vA=new Vw("contracts/5.6.2");function gA(e,t){return pA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t;case 2:return"string"!==typeof(n=r.sent)&&vA.throwArgumentError("invalid address or ENS name","name",n),r.prev=4,r.abrupt("return",zN(n));case 8:r.prev=8,r.t0=r.catch(4);case 10:return e||vA.throwError("a provider or signer is needed to resolve ENS names",Vw.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"}),r.next=13,e.resolveName(n);case 13:return null==(i=r.sent)&&vA.throwArgumentError("resolver or addr is not configured for ENS name","name",n),r.abrupt("return",i);case 16:case"end":return r.stop()}}),r,null,[[4,8]])})))}function mA(e,t,r){return pA(this,void 0,void 0,(0,B.Z)().mark((function n(){return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Array.isArray(r)){n.next=4;break}return n.next=3,Promise.all(r.map((function(r,n){return mA(e,Array.isArray(t)?t[n]:t[r.name],r)})));case 3:case 7:case 11:case 17:return n.abrupt("return",n.sent);case 4:if("address"!==r.type){n.next=8;break}return n.next=7,gA(e,t);case 8:if("tuple"!==r.type){n.next=12;break}return n.next=11,mA(e,t,r.components);case 12:if("array"!==r.baseType){n.next=18;break}if(Array.isArray(t)){n.next=15;break}return n.abrupt("return",Promise.reject(vA.makeError("invalid value for array",Vw.errors.INVALID_ARGUMENT,{argument:"value",value:t})));case 15:return n.next=17,Promise.all(t.map((function(t){return mA(e,t,r.arrayChildren)})));case 18:return n.abrupt("return",t);case 19:case"end":return n.stop()}}),n)})))}function yA(e,t,r){return pA(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o,a,s,u,c,f,l,h,d,p=this;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={},r.length===t.inputs.length+1&&"object"===typeof r[r.length-1]&&(i=wN(r.pop())),vA.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?i.from?i.from=EN({override:gA(e.signer,i.from),signer:e.signer.getAddress()}).then((function(e){return pA(p,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return zN(e.signer)!==e.override&&vA.throwError("Contract with a Signer cannot override from",Vw.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),t.abrupt("return",e.override);case 2:case"end":return t.stop()}}),t)})))})):i.from=e.signer.getAddress():i.from&&(i.from=gA(e.provider,i.from)),n.next=6,EN({args:mA(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:EN(i)||{}});case 6:if(o=n.sent,a=e.interface.encodeFunctionData(t,o.args),s={data:a,to:o.address},null!=(u=o.overrides).nonce&&(s.nonce=lN.from(u.nonce).toNumber()),null!=u.gasLimit&&(s.gasLimit=lN.from(u.gasLimit)),null!=u.gasPrice&&(s.gasPrice=lN.from(u.gasPrice)),null!=u.maxFeePerGas&&(s.maxFeePerGas=lN.from(u.maxFeePerGas)),null!=u.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=lN.from(u.maxPriorityFeePerGas)),null!=u.from&&(s.from=u.from),null!=u.type&&(s.type=u.type),null!=u.accessList&&(s.accessList=dA(u.accessList)),null==s.gasLimit&&null!=t.gas){for(c=21e3,f=Qw(a),l=0;l<f.length;l++)c+=4,f[l]&&(c+=64);s.gasLimit=lN.from(t.gas).add(c)}return u.value&&((h=lN.from(u.value)).isZero()||t.payable||vA.throwError("non-payable method cannot override value",Vw.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:i.value}),s.value=h),u.customData&&(s.customData=wN(u.customData)),u.ccipReadEnabled&&(s.ccipReadEnabled=!!u.ccipReadEnabled),delete i.nonce,delete i.gasLimit,delete i.gasPrice,delete i.from,delete i.value,delete i.type,delete i.accessList,delete i.maxFeePerGas,delete i.maxPriorityFeePerGas,delete i.customData,delete i.ccipReadEnabled,d=Object.keys(i).filter((function(e){return null!=i[e]})),d.length&&vA.throwError("cannot override ".concat(d.map((function(e){return JSON.stringify(e)})).join(",")),Vw.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:d}),n.abrupt("return",s);case 36:case"end":return n.stop()}}),n)})))}function bA(e,t){var r=t.wait.bind(t);t.wait=function(t){return r(t).then((function(t){return t.events=t.logs.map((function(r){var n=xN(r),i=null;try{i=e.interface.parseLog(r)}catch(o){}return i&&(n.args=i.args,n.decode=function(t,r){return e.interface.decodeEventLog(i.eventFragment,t,r)},n.event=i.name,n.eventSignature=i.signature),n.removeListener=function(){return e.provider},n.getBlock=function(){return e.provider.getBlock(t.blockHash)},n.getTransaction=function(){return e.provider.getTransaction(t.transactionHash)},n.getTransactionReceipt=function(){return Promise.resolve(t)},n})),t}))}}function EA(e,t,r){var n=e.signer||e.provider;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return pA(this,void 0,void 0,(0,B.Z)().mark((function i(){var a,s,u,c,f;return(0,B.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=void 0,o.length!==t.inputs.length+1||"object"!==typeof o[o.length-1]){i.next=9;break}if(null==(s=wN(o.pop())).blockTag){i.next=7;break}return i.next=6,s.blockTag;case 6:a=i.sent;case 7:delete s.blockTag,o.push(s);case 9:if(null==e.deployTransaction){i.next=12;break}return i.next=12,e._deployed(a);case 12:return i.next=14,yA(e,t,o);case 14:return u=i.sent,i.next=17,n.call(u,a);case 17:return c=i.sent,i.prev=18,f=e.interface.decodeFunctionResult(t,c),r&&1===t.outputs.length&&(f=f[0]),i.abrupt("return",f);case 24:throw i.prev=24,i.t0=i.catch(18),i.t0.code===Vw.errors.CALL_EXCEPTION&&(i.t0.address=e.address,i.t0.args=o,i.t0.transaction=u),i.t0;case 28:case"end":return i.stop()}}),i,null,[[18,24]])})))}}function wA(e,t,r){return t.constant?EA(e,t,r):function(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return pA(this,void 0,void 0,(0,B.Z)().mark((function r(){var i,o;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.signer||vA.throwError("sending a transaction requires a signer",Vw.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null==e.deployTransaction){r.next=4;break}return r.next=4,e._deployed();case 4:return r.next=6,yA(e,t,n);case 6:return i=r.sent,r.next=9,e.signer.sendTransaction(i);case 9:return o=r.sent,bA(e,o),r.abrupt("return",o);case 12:case"end":return r.stop()}}),r)})))}}(e,t)}function NA(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((function(e){return Array.isArray(e)?e.join("|"):e})).join(":"):""):"*"}var kA=function(){function e(t,r){(0,N.Z)(this,e),yN(this,"tag",t),yN(this,"filter",r),this._listeners=[]}return(0,k.Z)(e,[{key:"addListener",value:function(e,t){this._listeners.push({listener:e,once:t})}},{key:"removeListener",value:function(e){var t=!1;this._listeners=this._listeners.filter((function(r){return!(!t&&r.listener===e)||(t=!0,!1)}))}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"listeners",value:function(){return this._listeners.map((function(e){return e.listener}))}},{key:"listenerCount",value:function(){return this._listeners.length}},{key:"run",value:function(e){var t=this,r=this.listenerCount();return this._listeners=this._listeners.filter((function(r){var n=e.slice();return setTimeout((function(){r.listener.apply(t,n)}),0),!r.once})),r}},{key:"prepareEvent",value:function(e){}},{key:"getEmit",value:function(e){return[e]}}]),e}(),AA=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.call(this,"error",null)}return(0,k.Z)(r)}(kA),xA=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n,i,o){var a;(0,N.Z)(this,r);var s={address:e},u=n.getEventTopic(i);return o?(u!==o[0]&&vA.throwArgumentError("topic mismatch","topics",o),s.topics=o.slice()):s.topics=[u],a=t.call(this,NA(s),s),yN((0,nm.Z)(a),"address",e),yN((0,nm.Z)(a),"interface",n),yN((0,nm.Z)(a),"fragment",i),a}return(0,k.Z)(r,[{key:"prepareEvent",value:function(e){var t=this;(0,rt.Z)((0,nt.Z)(r.prototype),"prepareEvent",this).call(this,e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=function(e,r){return t.interface.decodeEventLog(t.fragment,e,r)};try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(n){e.args=null,e.decodeError=n}}},{key:"getEmit",value:function(e){var t=function(e){var t=[];return function e(r,n){if(Array.isArray(n))for(var i in n){var o=r.slice();o.push(i);try{e(o,n[i])}catch(a){t.push({path:o,error:a})}}}([],e),t}(e.args);if(t.length)throw t[0].error;var r=(e.args||[]).slice();return r.push(e),r}}]),r}(kA),_A=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),i=t.call(this,"*",{address:e}),yN((0,nm.Z)(i),"address",e),yN((0,nm.Z)(i),"interface",n),i}return(0,k.Z)(r,[{key:"prepareEvent",value:function(e){var t=this;(0,rt.Z)((0,nt.Z)(r.prototype),"prepareEvent",this).call(this,e);try{var n=this.interface.parseLog(e);e.event=n.name,e.eventSignature=n.signature,e.decode=function(e,r){return t.interface.decodeEventLog(n.eventFragment,e,r)},e.args=n.args}catch(i){}}}]),r}(kA),SA=function(){function e(t,r,n){var i=this;(0,N.Z)(this,e),yN(this,"interface",bN(this instanceof e?this.constructor:void 0,"getInterface")(r)),null==n?(yN(this,"provider",null),yN(this,"signer",null)):cA.isSigner(n)?(yN(this,"provider",n.provider||null),yN(this,"signer",n)):iA.isProvider(n)?(yN(this,"provider",n),yN(this,"signer",null)):vA.throwArgumentError("invalid signer or provider","signerOrProvider",n),yN(this,"callStatic",{}),yN(this,"estimateGas",{}),yN(this,"functions",{}),yN(this,"populateTransaction",{}),yN(this,"filters",{});var o={};if(Object.keys(this.interface.events).forEach((function(e){var t=i.interface.events[e];yN(i.filters,e,(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return{address:i.address,topics:i.interface.encodeFilterTopics(t,r)}})),o[t.name]||(o[t.name]=[]),o[t.name].push(e)})),Object.keys(o).forEach((function(e){var t=o[e];1===t.length?yN(i.filters,e,i.filters[t[0]]):vA.warn("Duplicate definition of ".concat(e," (").concat(t.join(", "),")"))})),yN(this,"_runningEvents",{}),yN(this,"_wrappedEmits",{}),null==t&&vA.throwArgumentError("invalid contract address or ENS name","addressOrName",t),yN(this,"address",t),this.provider)yN(this,"resolvedAddress",gA(this.provider,t));else try{yN(this,"resolvedAddress",Promise.resolve(zN(t)))}catch(u){vA.throwError("provider is required to use ENS name as contract address",Vw.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch((function(e){}));var a={},s={};Object.keys(this.interface.functions).forEach((function(e){var t=i.interface.functions[e];if(s[e])vA.warn("Duplicate ABI entry for ".concat(JSON.stringify(e)));else{s[e]=!0;var r=t.name;a["%".concat(r)]||(a["%".concat(r)]=[]),a["%".concat(r)].push(e),null==i[e]&&yN(i,e,wA(i,t,!0)),null==i.functions[e]&&yN(i.functions,e,wA(i,t,!1)),null==i.callStatic[e]&&yN(i.callStatic,e,EA(i,t,!0)),null==i.populateTransaction[e]&&yN(i.populateTransaction,e,function(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return yA(e,t,n)}}(i,t)),null==i.estimateGas[e]&&yN(i.estimateGas,e,function(e,t){var r=e.signer||e.provider;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return pA(this,void 0,void 0,(0,B.Z)().mark((function n(){var o;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r||vA.throwError("estimate require a provider or signer",Vw.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),n.next=3,yA(e,t,i);case 3:return o=n.sent,n.next=6,r.estimateGas(o);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})))}}(i,t))}})),Object.keys(a).forEach((function(e){var t=a[e];if(!(t.length>1)){e=e.substring(1);var r=t[0];try{null==i[e]&&yN(i,e,i[r])}catch(n){}null==i.functions[e]&&yN(i.functions,e,i.functions[r]),null==i.callStatic[e]&&yN(i.callStatic,e,i.callStatic[r]),null==i.populateTransaction[e]&&yN(i.populateTransaction,e,i.populateTransaction[r]),null==i.estimateGas[e]&&yN(i.estimateGas,e,i.estimateGas[r])}}))}return(0,k.Z)(e,[{key:"deployed",value:function(){return this._deployed()}},{key:"_deployed",value:function(e){var t=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return t})):this._deployedPromise=this.provider.getCode(this.address,e).then((function(e){return"0x"===e&&vA.throwError("contract not deployed",Vw.errors.UNSUPPORTED_OPERATION,{contractAddress:t.address,operation:"getDeployed"}),t}))),this._deployedPromise}},{key:"fallback",value:function(e){var t=this;this.signer||vA.throwError("sending a transactions require a signer",Vw.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var r=wN(e||{});return["from","to"].forEach((function(e){null!=r[e]&&vA.throwError("cannot override "+e,Vw.errors.UNSUPPORTED_OPERATION,{operation:e})})),r.to=this.resolvedAddress,this.deployed().then((function(){return t.signer.sendTransaction(r)}))}},{key:"connect",value:function(e){"string"===typeof e&&(e=new fA(e,this.provider));var t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&yN(t,"deployTransaction",this.deployTransaction),t}},{key:"attach",value:function(e){return new this.constructor(e,this.interface,this.signer||this.provider)}},{key:"_normalizeRunningEvent",value:function(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}},{key:"_getRunningEvent",value:function(e){if("string"===typeof e){if("error"===e)return this._normalizeRunningEvent(new AA);if("event"===e)return this._normalizeRunningEvent(new kA("event",null));if("*"===e)return this._normalizeRunningEvent(new _A(this.address,this.interface));var t=this.interface.getEvent(e);return this._normalizeRunningEvent(new xA(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{var r=e.topics[0];if("string"!==typeof r)throw new Error("invalid topic");var n=this.interface.getEvent(r);return this._normalizeRunningEvent(new xA(this.address,this.interface,n,e.topics))}catch(o){}var i={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new kA(NA(i),i))}return this._normalizeRunningEvent(new _A(this.address,this.interface))}},{key:"_checkRunningEvents",value:function(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];var t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}},{key:"_wrapEvent",value:function(e,t,r){var n=this,i=xN(t);return i.removeListener=function(){r&&(e.removeListener(r),n._checkRunningEvents(e))},i.getBlock=function(){return n.provider.getBlock(t.blockHash)},i.getTransaction=function(){return n.provider.getTransaction(t.transactionHash)},i.getTransactionReceipt=function(){return n.provider.getTransactionReceipt(t.transactionHash)},e.prepareEvent(i),i}},{key:"_addEventListener",value:function(e,t,r){var n=this;if(this.provider||vA.throwError("events require a provider or a signer with a provider",Vw.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){var i=function(r){var i=n._wrapEvent(e,r,t);if(null==i.decodeError)try{var o=e.getEmit(i);n.emit.apply(n,[e.filter].concat((0,Z.Z)(o)))}catch(a){i.decodeError=a.error}null!=e.filter&&n.emit("event",i),null!=i.decodeError&&n.emit("error",i.decodeError,i)};this._wrappedEmits[e.tag]=i,null!=e.filter&&this.provider.on(e.filter,i)}}},{key:"queryFilter",value:function(e,t,r){var n=this,i=this._getRunningEvent(e),o=wN(i.filter);return"string"===typeof t&&tN(t,32)?(null!=r&&vA.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),o.blockHash=t):(o.fromBlock=null!=t?t:0,o.toBlock=null!=r?r:"latest"),this.provider.getLogs(o).then((function(e){return e.map((function(e){return n._wrapEvent(i,e,null)}))}))}},{key:"on",value:function(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}},{key:"once",value:function(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}},{key:"emit",value:function(e){if(!this.provider)return!1;for(var t=this._getRunningEvent(e),r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=t.run(n)>0;return this._checkRunningEvents(t),o}},{key:"listenerCount",value:function(e){var t=this;return this.provider?null==e?Object.keys(this._runningEvents).reduce((function(e,r){return e+t._runningEvents[r].listenerCount()}),0):this._getRunningEvent(e).listenerCount():0}},{key:"listeners",value:function(e){if(!this.provider)return[];if(null==e){var t=[];for(var r in this._runningEvents)this._runningEvents[r].listeners().forEach((function(e){t.push(e)}));return t}return this._getRunningEvent(e).listeners()}},{key:"removeAllListeners",value:function(e){if(!this.provider)return this;if(null==e){for(var t in this._runningEvents){var r=this._runningEvents[t];r.removeAllListeners(),this._checkRunningEvents(r)}return this}var n=this._getRunningEvent(e);return n.removeAllListeners(),this._checkRunningEvents(n),this}},{key:"off",value:function(e,t){if(!this.provider)return this;var r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}},{key:"removeListener",value:function(e,t){return this.off(e,t)}}],[{key:"getContractAddress",value:function(e){return qN(e)}},{key:"getInterface",value:function(e){return tA.isInterface(e)?e:new tA(e)}},{key:"isIndexed",value:function(e){return $k.isIndexed(e)}}]),e}(),IA=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}(SA),RA=r(72388),TA=r(19560),CA=r(52009),PA=r(26454),OA=r(54812),UA=r(91953),MA=r(65958),FA=r(28786),DA=r(2735),LA="providers/5.6.8",ZA=r(15157),BA=r(48853),GA=r(44247),WA=r(44160),jA=r(68565),zA=r(88133),qA=r(43984),VA=r(65109),KA=r.n(VA),HA=r(28552),JA=r(81895),XA=new DA.Yd(LA),$A=function(){function e(){(0,N.Z)(this,e),this.formats=this.getDefaultFormats()}return(0,k.Z)(e,[{key:"getDefaultFormats",value:function(){var t=this,r={},n=this.address.bind(this),i=this.bigNumber.bind(this),o=this.blockTag.bind(this),a=this.data.bind(this),s=this.hash.bind(this),u=this.hex.bind(this),c=this.number.bind(this),f=this.type.bind(this);return r.transaction={hash:s,type:f,accessList:e.allowNull(this.accessList.bind(this),null),blockHash:e.allowNull(s,null),blockNumber:e.allowNull(c,null),transactionIndex:e.allowNull(c,null),confirmations:e.allowNull(c,null),from:n,gasPrice:e.allowNull(i),maxPriorityFeePerGas:e.allowNull(i),maxFeePerGas:e.allowNull(i),gasLimit:i,to:e.allowNull(n,null),value:i,nonce:c,data:a,r:e.allowNull(this.uint256),s:e.allowNull(this.uint256),v:e.allowNull(c),creates:e.allowNull(n,null),raw:e.allowNull(a)},r.transactionRequest={from:e.allowNull(n),nonce:e.allowNull(c),gasLimit:e.allowNull(i),gasPrice:e.allowNull(i),maxPriorityFeePerGas:e.allowNull(i),maxFeePerGas:e.allowNull(i),to:e.allowNull(n),value:e.allowNull(i),data:e.allowNull((function(e){return t.data(e,!0)})),type:e.allowNull(c),accessList:e.allowNull(this.accessList.bind(this),null)},r.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:s,address:n,topics:e.arrayOf(s),data:a,logIndex:c,blockHash:s},r.receipt={to:e.allowNull(this.address,null),from:e.allowNull(this.address,null),contractAddress:e.allowNull(n,null),transactionIndex:c,root:e.allowNull(u),gasUsed:i,logsBloom:e.allowNull(a),blockHash:s,transactionHash:s,logs:e.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:e.allowNull(c,null),cumulativeGasUsed:i,effectiveGasPrice:e.allowNull(i),status:e.allowNull(c),type:f},r.block={hash:e.allowNull(s),parentHash:s,number:c,timestamp:c,nonce:e.allowNull(u),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:e.allowNull(n),extraData:a,transactions:e.allowNull(e.arrayOf(s)),baseFeePerGas:e.allowNull(i)},r.blockWithTransactions=(0,OA.DC)(r.block),r.blockWithTransactions.transactions=e.allowNull(e.arrayOf(this.transactionResponse.bind(this))),r.filter={fromBlock:e.allowNull(o,void 0),toBlock:e.allowNull(o,void 0),blockHash:e.allowNull(s,void 0),address:e.allowNull(n,void 0),topics:e.allowNull(this.topics.bind(this),void 0)},r.filterLog={blockNumber:e.allowNull(c),blockHash:e.allowNull(s),transactionIndex:c,removed:e.allowNull(this.boolean.bind(this)),address:n,data:e.allowFalsish(a,"0x"),topics:e.arrayOf(s),transactionHash:s,logIndex:c},r}},{key:"accessList",value:function(e){return(0,MA.z7)(e||[])}},{key:"number",value:function(e){return"0x"===e?0:TA.O$.from(e).toNumber()}},{key:"type",value:function(e){return"0x"===e||null==e?0:TA.O$.from(e).toNumber()}},{key:"bigNumber",value:function(e){return TA.O$.from(e)}},{key:"boolean",value:function(e){if("boolean"===typeof e)return e;if("string"===typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)}},{key:"hex",value:function(e,t){return"string"===typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),(0,CA.A7)(e))?e.toLowerCase():XA.throwArgumentError("invalid hash","value",e)}},{key:"data",value:function(e,t){var r=this.hex(e,t);if(r.length%2!==0)throw new Error("invalid data; odd-length - "+e);return r}},{key:"address",value:function(e){return(0,HA.Kn)(e)}},{key:"callAddress",value:function(e){if(!(0,CA.A7)(e,32))return null;var t=(0,HA.Kn)((0,CA.p3)(e,12));return t===JA.d?null:t}},{key:"contractAddress",value:function(e){return(0,HA.CR)(e)}},{key:"blockTag",value:function(e){if(null==e)return"latest";if("earliest"===e)return"0x0";if("latest"===e||"pending"===e)return e;if("number"===typeof e||(0,CA.A7)(e))return(0,CA.$P)(e);throw new Error("invalid blockTag")}},{key:"hash",value:function(e,t){var r=this.hex(e,t);return 32!==(0,CA.E1)(r)?XA.throwArgumentError("invalid hash","value",e):r}},{key:"difficulty",value:function(e){if(null==e)return null;var t=TA.O$.from(e);try{return t.toNumber()}catch(r){}return null}},{key:"uint256",value:function(e){if(!(0,CA.A7)(e))throw new Error("invalid uint256");return(0,CA.$m)(e,32)}},{key:"_block",value:function(t,r){null!=t.author&&null==t.miner&&(t.miner=t.author);var n=null!=t._difficulty?t._difficulty:t.difficulty,i=e.check(r,t);return i._difficulty=null==n?null:TA.O$.from(n),i}},{key:"block",value:function(e){return this._block(e,this.formats.block)}},{key:"blockWithTransactions",value:function(e){return this._block(e,this.formats.blockWithTransactions)}},{key:"transactionRequest",value:function(t){return e.check(this.formats.transactionRequest,t)}},{key:"transactionResponse",value:function(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&TA.O$.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);var r=e.check(this.formats.transaction,t);if(null!=t.chainId){var n=t.chainId;(0,CA.A7)(n)&&(n=TA.O$.from(n).toNumber()),r.chainId=n}else{var i=t.networkId;null==i&&null==r.v&&(i=t.chainId),(0,CA.A7)(i)&&(i=TA.O$.from(i).toNumber()),"number"!==typeof i&&null!=r.v&&((i=(r.v-35)/2)<0&&(i=0),i=parseInt(i)),"number"!==typeof i&&(i=0),r.chainId=i}return r.blockHash&&"x"===r.blockHash.replace(/0/g,"")&&(r.blockHash=null),r}},{key:"transaction",value:function(e){return(0,MA.Qc)(e)}},{key:"receiptLog",value:function(t){return e.check(this.formats.receiptLog,t)}},{key:"receipt",value:function(t){var r=e.check(this.formats.receipt,t);if(null!=r.root)if(r.root.length<=4){var n=TA.O$.from(r.root).toNumber();0===n||1===n?(null!=r.status&&r.status!==n&&XA.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):XA.throwArgumentError("invalid alt-root-status","value.root",r.root)}else 66!==r.root.length&&XA.throwArgumentError("invalid root hash","value.root",r.root);return null!=r.status&&(r.byzantium=!0),r}},{key:"topics",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.topics(e)})):null!=e?this.hash(e,!0):null}},{key:"filter",value:function(t){return e.check(this.formats.filter,t)}},{key:"filterLog",value:function(t){return e.check(this.formats.filterLog,t)}}],[{key:"check",value:function(e,t){var r={};for(var n in e)try{var i=e[n](t[n]);void 0!==i&&(r[n]=i)}catch(o){throw o.checkKey=n,o.checkValue=t[n],o}return r}},{key:"allowNull",value:function(e,t){return function(r){return null==r?t:e(r)}}},{key:"allowFalsish",value:function(e,t){return function(r){return r?e(r):t}}},{key:"arrayOf",value:function(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");var r=[];return t.forEach((function(t){r.push(e(t))})),r}}}]),e}();var YA=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},QA=new DA.Yd(LA);function ex(e){return null==e?"null":(32!==(0,CA.E1)(e)&&QA.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function tx(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((function(e){if(Array.isArray(e)){var t={};e.forEach((function(e){t[ex(e)]=!0}));var r=Object.keys(t);return r.sort(),r.join("|")}return ex(e)})).join("&")}function rx(e){if("string"===typeof e){if(e=e.toLowerCase(),32===(0,CA.E1)(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+tx(e);if(ZA.Sg.isForkEvent(e))throw QA.warn("not implemented"),new Error("not implemented");if(e&&"object"===typeof e)return"filter:"+(e.address||"*")+":"+tx(e.topics||[])}throw new Error("invalid event - "+e)}function nx(){return(new Date).getTime()}function ix(e){return new Promise((function(t){setTimeout(t,e)}))}var ox=["block","network","pending","poll"],ax=function(){function e(t,r,n){(0,N.Z)(this,e),(0,OA.zG)(this,"tag",t),(0,OA.zG)(this,"listener",r),(0,OA.zG)(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}return(0,k.Z)(e,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}},{key:"filter",get:function(){var e=this.tag.split(":");if("filter"!==e[0])return null;var t,r=e[1],n=""===(t=e[2])?[]:t.split(/&/g).map((function(e){if(""===e)return[];var t=e.split("|").map((function(e){return"null"===e?null:e}));return 1===t.length?t[0]:t})),i={};return n.length>0&&(i.topics=n),r&&"*"!==r&&(i.address=r),i}},{key:"pollable",value:function(){return this.tag.indexOf(":")>=0||ox.indexOf(this.tag)>=0}}]),e}(),sx={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ux(e){return(0,CA.$m)(TA.O$.from(e).toHexString(),32)}function cx(e){return GA.eU.encode((0,CA.zo)([e,(0,CA.p3)((0,qA.JQ)((0,qA.JQ)(e)),0,4)]))}var fx=new RegExp("^(ipfs)://(.*)$","i"),lx=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),fx,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function hx(e,t){try{return(0,UA.ZN)(dx(e,t))}catch(r){}return null}function dx(e,t){if("0x"===e)return null;var r=TA.O$.from((0,CA.p3)(e,t,t+32)).toNumber(),n=TA.O$.from((0,CA.p3)(e,r,r+32)).toNumber();return(0,CA.p3)(e,r+32,r+32+n)}function px(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):QA.throwArgumentError("unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/".concat(e)}function vx(e){var t=(0,CA.lE)(e);if(t.length>32)throw new Error("internal; should not happen");var r=new Uint8Array(32);return r.set(t,32-t.length),r}function gx(e){if(e.length%32===0)return e;var t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function mx(e){for(var t=[],r=0,n=0;n<e.length;n++)t.push(null),r+=32;for(var i=0;i<e.length;i++){var o=(0,CA.lE)(e[i]);t[i]=vx(r),t.push(vx(o.length)),t.push(gx(o)),r+=32+32*Math.ceil(o.length/32)}return(0,CA.xs)(t)}var yx=function(){function e(t,r,n,i){(0,N.Z)(this,e),(0,OA.zG)(this,"provider",t),(0,OA.zG)(this,"name",n),(0,OA.zG)(this,"address",t.formatter.address(r)),(0,OA.zG)(this,"_resolvedAddress",i)}return(0,k.Z)(e,[{key:"supportsWildcard",value:function(){var e=this;return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((function(e){return TA.O$.from(e).eq(1)})).catch((function(t){if(t.code===DA.Yd.errors.CALL_EXCEPTION)return!1;throw e._supportsEip2544=null,t}))),this._supportsEip2544}},{key:"_fetch",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i,o;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n={to:this.address,ccipReadEnabled:!0,data:(0,CA.xs)([e,(0,jA.VM)(this.name),t||"0x"])},i=!1,r.next=4,this.supportsWildcard();case 4:if(!r.sent){r.next=7;break}i=!0,n.data=(0,CA.xs)(["0x9061b923",mx([(0,jA.Kn)(this.name),n.data])]);case 7:return r.prev=7,r.next=10,this.provider.call(n);case 10:return o=r.sent,(0,CA.lE)(o).length%32===4&&QA.throwError("resolver threw error",DA.Yd.errors.CALL_EXCEPTION,{transaction:n,data:o}),i&&(o=dx(o,0)),r.abrupt("return",o);case 16:if(r.prev=16,r.t0=r.catch(7),r.t0.code!==DA.Yd.errors.CALL_EXCEPTION){r.next=20;break}return r.abrupt("return",null);case 20:throw r.t0;case 21:case"end":return r.stop()}}),r,this,[[7,16]])})))}},{key:"_fetchBytes",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._fetch(e,t);case 2:if(null==(n=r.sent)){r.next=5;break}return r.abrupt("return",dx(n,0));case 5:return r.abrupt("return",null);case 6:case"end":return r.stop()}}),r,this)})))}},{key:"_getAddress",value:function(e,t){var r=sx[String(e)];if(null==r&&QA.throwError("unsupported coin type: ".concat(e),DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress(".concat(e,")")}),"eth"===r.ilk)return this.provider.formatter.address(t);var n=(0,CA.lE)(t);if(null!=r.p2pkh){var i=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){var o=parseInt(i[1],16);if(i[2].length===2*o&&o>=1&&o<=75)return cx((0,CA.zo)([[r.p2pkh],"0x"+i[2]]))}}if(null!=r.p2sh){var a=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){var s=parseInt(a[1],16);if(a[2].length===2*s&&s>=1&&s<=75)return cx((0,CA.zo)([[r.p2sh],"0x"+a[2]]))}}if(null!=r.prefix){var u=n[1],c=n[0];if(0===c?20!==u&&32!==u&&(c=-1):c=-1,c>=0&&n.length===2+u&&u>=1&&u<=75){var f=KA().toWords(n.slice(2));return f.unshift(c),KA().encode(r.prefix,f)}}return null}},{key:"getAddress",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e&&(e=60),60!==e){t.next=16;break}return t.prev=2,t.next=5,this._fetch("0x3b3b57de");case 5:if("0x"!==(r=t.sent)&&r!==WA.R){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",this.provider.formatter.callAddress(r));case 11:if(t.prev=11,t.t0=t.catch(2),t.t0.code!==DA.Yd.errors.CALL_EXCEPTION){t.next=15;break}return t.abrupt("return",null);case 15:throw t.t0;case 16:return t.next=18,this._fetchBytes("0xf1cb7e06",ux(e));case 18:if(null!=(n=t.sent)&&"0x"!==n){t.next=21;break}return t.abrupt("return",null);case 21:return null==(i=this._getAddress(e,n))&&QA.throwError("invalid or unsupported coin data",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress(".concat(e,")"),coinType:e,data:n}),t.abrupt("return",i);case 24:case"end":return t.stop()}}),t,this,[[2,11]])})))}},{key:"getAvatar",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r,n,i,o,a,s,u,c,f,l,h,d,p,v,g;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{type:"name",content:this.name}],e.prev=1,e.next=4,this.getText("avatar");case 4:if(null!=(r=e.sent)){e.next=7;break}return e.abrupt("return",null);case 7:n=0;case 8:if(!(n<lx.length)){e.next=91;break}if(null!=(i=r.match(lx[n]))){e.next=12;break}return e.abrupt("continue",88);case 12:o=i[1].toLowerCase(),e.t0=o,e.next="https"===e.t0?16:"data"===e.t0?18:"ipfs"===e.t0?20:"erc721"===e.t0||"erc1155"===e.t0?22:88;break;case 16:return t.push({type:"url",content:r}),e.abrupt("return",{linkage:t,url:r});case 18:return t.push({type:"data",content:r}),e.abrupt("return",{linkage:t,url:r});case 20:return t.push({type:"ipfs",content:r}),e.abrupt("return",{linkage:t,url:px(r)});case 22:if(a="erc721"===o?"0xc87b56dd":"0x0e89341c",t.push({type:o,content:r}),e.t1=this._resolvedAddress,e.t1){e.next=29;break}return e.next=28,this.getAddress();case 28:e.t1=e.sent;case 29:if(s=e.t1,2===(u=(i[2]||"").split("/")).length){e.next=33;break}return e.abrupt("return",null);case 33:return e.next=35,this.provider.formatter.address(u[0]);case 35:if(c=e.sent,f=(0,CA.$m)(TA.O$.from(u[1]).toHexString(),32),"erc721"!==o){e.next=48;break}return e.t2=this.provider.formatter,e.next=41,this.provider.call({to:c,data:(0,CA.xs)(["0x6352211e",f])});case 41:if(e.t3=e.sent,l=e.t2.callAddress.call(e.t2,e.t3),s===l){e.next=45;break}return e.abrupt("return",null);case 45:t.push({type:"owner",content:l}),e.next=57;break;case 48:if("erc1155"!==o){e.next=57;break}return e.t4=TA.O$,e.next=52,this.provider.call({to:c,data:(0,CA.xs)(["0x00fdd58e",(0,CA.$m)(s,32),f])});case 52:if(e.t5=e.sent,!(h=e.t4.from.call(e.t4,e.t5)).isZero()){e.next=56;break}return e.abrupt("return",null);case 56:t.push({type:"balance",content:h.toString()});case 57:return d={to:this.provider.formatter.address(u[0]),data:(0,CA.xs)([a,f])},e.t6=hx,e.next=61,this.provider.call(d);case 61:if(e.t7=e.sent,null!=(p=(0,e.t6)(e.t7,0))){e.next=65;break}return e.abrupt("return",null);case 65:return t.push({type:"metadata-url-base",content:p}),"erc1155"===o&&(p=p.replace("{id}",f.substring(2)),t.push({type:"metadata-url-expanded",content:p})),p.match(/^ipfs:/i)&&(p=px(p)),t.push({type:"metadata-url",content:p}),e.next=71,(0,FA.rd)(p);case 71:if(v=e.sent){e.next=74;break}return e.abrupt("return",null);case 74:if(t.push({type:"metadata",content:JSON.stringify(v)}),"string"===typeof(g=v.image)){e.next=78;break}return e.abrupt("return",null);case 78:if(!g.match(/^(https:\/\/|data:)/i)){e.next=81;break}e.next=86;break;case 81:if(null!=g.match(fx)){e.next=84;break}return e.abrupt("return",null);case 84:t.push({type:"url-ipfs",content:g}),g=px(g);case 86:return t.push({type:"url",content:g}),e.abrupt("return",{linkage:t,url:g});case 88:n++,e.next=8;break;case 91:e.next=95;break;case 93:e.prev=93,e.t8=e.catch(1);case 95:return e.abrupt("return",null);case 96:case"end":return e.stop()}}),e,this,[[1,93]])})))}},{key:"getContentHash",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r,n,i,o,a,s,u,c;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchBytes("0xbc1c58d1");case 2:if(null!=(t=e.sent)&&"0x"!==t){e.next=5;break}return e.abrupt("return",null);case 5:if(!(r=t.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){e.next=10;break}if(n=parseInt(r[3],16),r[4].length!==2*n){e.next=10;break}return e.abrupt("return","ipfs://"+GA.eU.encode("0x"+r[1]));case 10:if(!(i=t.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){e.next=15;break}if(o=parseInt(i[3],16),i[4].length!==2*o){e.next=15;break}return e.abrupt("return","ipns://"+GA.eU.encode("0x"+i[1]));case 15:if(!(a=t.match(/^0xe40101fa011b20([0-9a-f]*)$/))){e.next=19;break}if(64!==a[1].length){e.next=19;break}return e.abrupt("return","bzz://"+a[1]);case 19:if(!(s=t.match(/^0x90b2c605([0-9a-f]*)$/))){e.next=25;break}if(68!==s[1].length){e.next=25;break}return u={"=":"","+":"-","/":"_"},c=(0,BA.c)("0x"+s[1]).replace(/[=+\/]/g,(function(e){return u[e]})),e.abrupt("return","sia://"+c);case 25:return e.abrupt("return",QA.throwError("invalid or unsupported content hash data",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:t}));case 26:case"end":return e.stop()}}),e,this)})))}},{key:"getText",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,UA.Y0)(e),(r=(0,CA.zo)([ux(64),ux(r.length),r])).length%32!==0&&(r=(0,CA.zo)([r,(0,CA.$m)("0x",32-e.length%32)])),t.next=5,this._fetchBytes("0x59d1d43c",(0,CA.Dv)(r));case 5:if(null!=(n=t.sent)&&"0x"!==n){t.next=8;break}return t.abrupt("return",null);case 8:return t.abrupt("return",(0,UA.ZN)(n));case 9:case"end":return t.stop()}}),t,this)})))}}]),e}(),bx=null,Ex=1,wx=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;if((0,N.Z)(this,r),(n=t.call(this))._events=[],n._emitted={block:-2},n.disableCcipRead=!1,n.formatter=(this instanceof r?this.constructor:void 0).getFormatter(),(0,OA.zG)((0,nm.Z)(n),"anyNetwork","any"===e),n.anyNetwork&&(e=n.detectNetwork()),e instanceof Promise)n._networkPromise=e,e.catch((function(e){})),n._ready().catch((function(e){}));else{var i=(0,OA.tu)(this instanceof r?this.constructor:void 0,"getNetwork")(e);i?((0,OA.zG)((0,nm.Z)(n),"_network",i),n.emit("network",i,null)):QA.throwArgumentError("invalid network","network",e)}return n._maxInternalBlockNumber=-1024,n._lastBlockNumber=-2,n._maxFilterBlockRange=10,n._pollingInterval=4e3,n._fastQueryDate=0,n}return(0,k.Z)(r,[{key:"_ready",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._network){e.next=17;break}if(t=null,!this._networkPromise){e.next=11;break}return e.prev=3,e.next=6,this._networkPromise;case 6:t=e.sent,e.next=11;break;case 9:e.prev=9,e.t0=e.catch(3);case 11:if(null!=t){e.next=15;break}return e.next=14,this.detectNetwork();case 14:t=e.sent;case 15:t||QA.throwError("no network detected",DA.Yd.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=t:(0,OA.zG)(this,"_network",t),this.emit("network",t,null));case 17:return e.abrupt("return",this._network);case 18:case"end":return e.stop()}}),e,this,[[3,9]])})))}},{key:"ready",get:function(){var e=this;return(0,FA.$l)((function(){return e._ready().then((function(e){return e}),(function(e){if(e.code!==DA.Yd.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}))}},{key:"ccipReadFetch",value:function(e,t,r){return YA(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o,a,s,u,c,f,l,h;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.disableCcipRead&&0!==r.length){n.next=2;break}return n.abrupt("return",null);case 2:i=e.to.toLowerCase(),o=t.toLowerCase(),a=[],s=0;case 6:if(!(s<r.length)){n.next=22;break}return u=r[s],c=u.replace("{sender}",i).replace("{data}",o),f=u.indexOf("{data}")>=0?null:JSON.stringify({data:o,sender:i}),n.next=12,(0,FA.rd)({url:c,errorPassThrough:!0},f,(function(e,t){return e.status=t.statusCode,e}));case 12:if(!(l=n.sent).data){n.next=15;break}return n.abrupt("return",l.data);case 15:if(h=l.message||"unknown error",!(l.status>=400&&l.status<500)){n.next=18;break}return n.abrupt("return",QA.throwError("response not found during CCIP fetch: ".concat(h),DA.Yd.errors.SERVER_ERROR,{url:u,errorMessage:h}));case 18:a.push(h);case 19:s++,n.next=6;break;case 22:return n.abrupt("return",QA.throwError("error encountered during CCIP fetch: ".concat(a.map((function(e){return JSON.stringify(e)})).join(", ")),DA.Yd.errors.SERVER_ERROR,{urls:r,errorMessages:a}));case 23:case"end":return n.stop()}}),n,this)})))}},{key:"_getInternalBlockNumber",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i,o,a=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready();case 2:if(!(e>0)){t.next=20;break}case 3:if(!this._internalBlockNumber){t.next=20;break}return r=this._internalBlockNumber,t.prev=5,t.next=8,r;case 8:if(n=t.sent,!(nx()-n.respTime<=e)){t.next=11;break}return t.abrupt("return",n.blockNumber);case 11:return t.abrupt("break",20);case 14:if(t.prev=14,t.t0=t.catch(5),this._internalBlockNumber!==r){t.next=18;break}return t.abrupt("break",20);case 18:t.next=3;break;case 20:return i=nx(),o=(0,OA.mE)({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((function(e){return null}),(function(e){return e}))}).then((function(e){var t=e.blockNumber,r=e.networkError;if(r)throw a._internalBlockNumber===o&&(a._internalBlockNumber=null),r;var n=nx();return(t=TA.O$.from(t).toNumber())<a._maxInternalBlockNumber&&(t=a._maxInternalBlockNumber),a._maxInternalBlockNumber=t,a._setFastBlockNumber(t),{blockNumber:t,reqTime:i,respTime:n}})),this._internalBlockNumber=o,o.catch((function(e){a._internalBlockNumber===o&&(a._internalBlockNumber=null)})),t.next=26,o;case 26:return t.abrupt("return",t.sent.blockNumber);case 27:case"end":return t.stop()}}),t,this,[[5,14]])})))}},{key:"poll",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r,n,i,o=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ex++,r=[],n=null,e.prev=3,e.next=6,this._getInternalBlockNumber(100+this.pollingInterval/2);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),this.emit("error",e.t0),e.abrupt("return");case 13:if(this._setFastBlockNumber(n),this.emit("poll",t,n),n!==this._lastBlockNumber){e.next=18;break}return this.emit("didPoll",t),e.abrupt("return");case 18:if(-2===this._emitted.block&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)QA.warn("network block skew detected; skipping block events (emitted=".concat(this._emitted.block," blockNumber").concat(n,")")),this.emit("error",QA.makeError("network block skew detected",DA.Yd.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(i=this._emitted.block+1;i<=n;i++)this.emit("block",i);return this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach((function(e){if("block"!==e){var t=o._emitted[e];"pending"!==t&&n-t>12&&delete o._emitted[e]}}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=n-1),this._events.forEach((function(e){switch(e.type){case"tx":var t=e.hash,i=o.getTransactionReceipt(t).then((function(e){return e&&null!=e.blockNumber?(o._emitted["t:"+t]=e.blockNumber,o.emit(t,e),null):null})).catch((function(e){o.emit("error",e)}));r.push(i);break;case"filter":if(!e._inflight){e._inflight=!0;var a=e.filter;a.fromBlock=e._lastBlockNumber+1,a.toBlock=n,a.toBlock-o._maxFilterBlockRange>a.fromBlock&&(a.fromBlock=a.toBlock-o._maxFilterBlockRange);var s=o.getLogs(a).then((function(t){e._inflight=!1,0!==t.length&&t.forEach((function(t){t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),o._emitted["b:"+t.blockHash]=t.blockNumber,o._emitted["t:"+t.transactionHash]=t.blockNumber,o.emit(a,t)}))})).catch((function(t){o.emit("error",t),e._inflight=!1}));r.push(s)}}})),this._lastBlockNumber=n,Promise.all(r).then((function(){o.emit("didPoll",t)})).catch((function(e){o.emit("error",e)})),e.abrupt("return");case 26:case"end":return e.stop()}}),e,this,[[3,9]])})))}},{key:"resetEventsBlock",value:function(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}},{key:"network",get:function(){return this._network}},{key:"detectNetwork",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",QA.throwError("provider does not support network detection",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"}));case 1:case"end":return e.stop()}}),e)})))}},{key:"getNetwork",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready();case 2:return t=e.sent,e.next=5,this.detectNetwork();case 5:if(r=e.sent,t.chainId===r.chainId){e.next=23;break}if(!this.anyNetwork){e.next=20;break}return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,t),e.next=19,ix(0);case 19:return e.abrupt("return",this._network);case 20:throw n=QA.makeError("underlying network changed",DA.Yd.errors.NETWORK_ERROR,{event:"changed",network:t,detectedNetwork:r}),this.emit("error",n),n;case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e,this)})))}},{key:"blockNumber",get:function(){var e=this;return this._getInternalBlockNumber(100+this.pollingInterval/2).then((function(t){e._setFastBlockNumber(t)}),(function(e){})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}},{key:"polling",get:function(){return null!=this._poller},set:function(e){var t=this;e&&!this._poller?(this._poller=setInterval((function(){t.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((function(){t.poll(),t._bootstrapPoll=setTimeout((function(){t._poller||t.poll(),t._bootstrapPoll=null}),t.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(e){var t=this;if("number"!==typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){t.poll()}),this._pollingInterval))}},{key:"_getFastBlockNumber",value:function(){var e=this,t=nx();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((function(t){return(null==e._fastBlockNumber||t>e._fastBlockNumber)&&(e._fastBlockNumber=t),e._fastBlockNumber}))),this._fastBlockNumberPromise}},{key:"_setFastBlockNumber",value:function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=nx(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}},{key:"waitForTransaction",value:function(e,t,r){return YA(this,void 0,void 0,(0,B.Z)().mark((function n(){return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this._waitForTransaction(e,null==t?1:t,r||0,null));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"_waitForTransaction",value:function(e,t,r,n){return YA(this,void 0,void 0,(0,B.Z)().mark((function i(){var o,a=this;return(0,B.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getTransactionReceipt(e);case 2:if(!(((o=i.sent)?o.confirmations:0)>=t)){i.next=5;break}return i.abrupt("return",o);case 5:return i.abrupt("return",new Promise((function(i,o){var s=[],u=!1,c=function(){return!!u||(u=!0,s.forEach((function(e){e()})),!1)},f=function(e){e.confirmations<t||c()||i(e)};if(a.on(e,f),s.push((function(){a.removeListener(e,f)})),n){var l=n.startBlock,h=null,d=function r(i){return YA(a,void 0,void 0,(0,B.Z)().mark((function a(){var s=this;return(0,B.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!u){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,ix(1e3);case 4:this.getTransactionCount(n.from).then((function(a){return YA(s,void 0,void 0,(0,B.Z)().mark((function s(){var f,d,p,v,g,m;return(0,B.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!u){s.next=2;break}return s.abrupt("return");case 2:if(!(a<=n.nonce)){s.next=6;break}l=i,s.next=41;break;case 6:return s.next=8,this.getTransaction(e);case 8:if(!(f=s.sent)||null==f.blockNumber){s.next=11;break}return s.abrupt("return");case 11:null==h&&(h=l-3)<n.startBlock&&(h=n.startBlock);case 12:if(!(h<=i)){s.next=41;break}if(!u){s.next=15;break}return s.abrupt("return");case 15:return s.next=17,this.getBlockWithTransactions(h);case 17:d=s.sent,p=0;case 19:if(!(p<d.transactions.length)){s.next=38;break}if((v=d.transactions[p]).hash!==e){s.next=23;break}return s.abrupt("return");case 23:if(v.from!==n.from||v.nonce!==n.nonce){s.next=35;break}if(!u){s.next=26;break}return s.abrupt("return");case 26:return s.next=28,this.waitForTransaction(v.hash,t);case 28:if(g=s.sent,!c()){s.next=31;break}return s.abrupt("return");case 31:return m="replaced",v.data===n.data&&v.to===n.to&&v.value.eq(n.value)?m="repriced":"0x"===v.data&&v.from===v.to&&v.value.isZero()&&(m="cancelled"),o(QA.makeError("transaction was replaced",DA.Yd.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===m||"cancelled"===m,reason:m,replacement:this._wrapTransaction(v),hash:e,receipt:g})),s.abrupt("return");case 35:p++,s.next=19;break;case 38:h++,s.next=12;break;case 41:if(!u){s.next=43;break}return s.abrupt("return");case 43:this.once("block",r);case 44:case"end":return s.stop()}}),s,this)})))}),(function(e){u||s.once("block",r)}));case 5:case"end":return a.stop()}}),a,this)})))};if(u)return;a.once("block",d),s.push((function(){a.removeListener("block",d)}))}if("number"===typeof r&&r>0){var p=setTimeout((function(){c()||o(QA.makeError("timeout exceeded",DA.Yd.errors.TIMEOUT,{timeout:r}))}),r);p.unref&&p.unref(),s.push((function(){clearTimeout(p)}))}})));case 6:case"end":return i.stop()}}),i,this)})))}},{key:"getBlockNumber",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getInternalBlockNumber(0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getGasPrice",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,this.perform("getGasPrice",{});case 4:return t=e.sent,e.prev=5,e.abrupt("return",TA.O$.from(t));case 9:return e.prev=9,e.t0=e.catch(5),e.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"getGasPrice",result:t,error:e.t0}));case 12:case"end":return e.stop()}}),e,this,[[5,9]])})))}},{key:"getBalance",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,(0,OA.mE)({address:this._getAddress(e),blockTag:this._getBlockTag(t)});case 4:return n=r.sent,r.next=7,this.perform("getBalance",n);case 7:return i=r.sent,r.prev=8,r.abrupt("return",TA.O$.from(i));case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:r.t0}));case 15:case"end":return r.stop()}}),r,this,[[8,12]])})))}},{key:"getTransactionCount",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,(0,OA.mE)({address:this._getAddress(e),blockTag:this._getBlockTag(t)});case 4:return n=r.sent,r.next=7,this.perform("getTransactionCount",n);case 7:return i=r.sent,r.prev=8,r.abrupt("return",TA.O$.from(i).toNumber());case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:r.t0}));case 15:case"end":return r.stop()}}),r,this,[[8,12]])})))}},{key:"getCode",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,(0,OA.mE)({address:this._getAddress(e),blockTag:this._getBlockTag(t)});case 4:return n=r.sent,r.next=7,this.perform("getCode",n);case 7:return i=r.sent,r.prev=8,r.abrupt("return",(0,CA.Dv)(i));case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:r.t0}));case 15:case"end":return r.stop()}}),r,this,[[8,12]])})))}},{key:"getStorageAt",value:function(e,t,r){return YA(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,(0,OA.mE)({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((function(e){return(0,CA.$P)(e)}))});case 4:return i=n.sent,n.next=7,this.perform("getStorageAt",i);case 7:return o=n.sent,n.prev=8,n.abrupt("return",(0,CA.Dv)(o));case 12:return n.prev=12,n.t0=n.catch(8),n.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:o,error:n.t0}));case 15:case"end":return n.stop()}}),n,this,[[8,12]])})))}},{key:"_wrapTransaction",value:function(e,t,r){var n=this;if(null!=t&&32!==(0,CA.E1)(t))throw new Error("invalid response - sendTransaction");var i=e;return null!=t&&e.hash!==t&&QA.throwError("Transaction hash mismatch from Provider.sendTransaction.",DA.Yd.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=function(t,i){return YA(n,void 0,void 0,(0,B.Z)().mark((function n(){var o,a;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null==t&&(t=1),null==i&&(i=0),o=void 0,0!==t&&null!=r&&(o={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r}),n.next=6,this._waitForTransaction(e.hash,t,i,o);case 6:if(null!=(a=n.sent)||0!==t){n.next=9;break}return n.abrupt("return",null);case 9:return this._emitted["t:"+e.hash]=a.blockNumber,0===a.status&&QA.throwError("transaction failed",DA.Yd.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:a}),n.abrupt("return",a);case 12:case"end":return n.stop()}}),n,this)})))},i}},{key:"sendTransaction",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i,o;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,Promise.resolve(e).then((function(e){return(0,CA.Dv)(e)}));case 4:return r=t.sent,null==(n=this.formatter.transaction(e)).confirmations&&(n.confirmations=0),t.next=9,this._getInternalBlockNumber(100+2*this.pollingInterval);case 9:return i=t.sent,t.prev=10,t.next=13,this.perform("sendTransaction",{signedTransaction:r});case 13:return o=t.sent,t.abrupt("return",this._wrapTransaction(n,o,i));case 17:throw t.prev=17,t.t0=t.catch(10),t.t0.transaction=n,t.t0.transactionHash=n.hash,t.t0;case 22:case"end":return t.stop()}}),t,this,[[10,17]])})))}},{key:"_getTransactionRequest",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return r=t.sent,n={},["from","to"].forEach((function(e){null!=r[e]&&(n[e]=Promise.resolve(r[e]).then((function(e){return e?i._getAddress(e):null})))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((function(e){null!=r[e]&&(n[e]=Promise.resolve(r[e]).then((function(e){return e?TA.O$.from(e):null})))})),["type"].forEach((function(e){null!=r[e]&&(n[e]=Promise.resolve(r[e]).then((function(e){return null!=e?e:null})))})),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach((function(e){null!=r[e]&&(n[e]=Promise.resolve(r[e]).then((function(e){return e?(0,CA.Dv)(e):null})))})),t.t0=this.formatter,t.next=12,(0,OA.mE)(n);case 12:return t.t1=t.sent,t.abrupt("return",t.t0.transactionRequest.call(t.t0,t.t1));case 14:case"end":return t.stop()}}),t,this)})))}},{key:"_getFilter",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return e=t.sent,r={},null!=e.address&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach((function(t){null!=e[t]&&(r[t]=e[t])})),["fromBlock","toBlock"].forEach((function(t){null!=e[t]&&(r[t]=n._getBlockTag(e[t]))})),t.t0=this.formatter,t.next=10,(0,OA.mE)(r);case 10:return t.t1=t.sent,t.abrupt("return",t.t0.filter.call(t.t0,t.t1));case 12:case"end":return t.stop()}}),t,this)})))}},{key:"_call",value:function(e,t,r){return YA(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o,a,s,u,c,f,l,h,d,p,v,g,m,y;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r>=10&&QA.throwError("CCIP read exceeded maximum redirections",DA.Yd.errors.SERVER_ERROR,{redirects:r,transaction:e}),i=e.to,n.next=4,this.perform("call",{transaction:e,blockTag:t});case 4:if(o=n.sent,!(r>=0&&"latest"===t&&null!=i&&"0x556f1830"===o.substring(0,10)&&(0,CA.E1)(o)%32===4)){n.next=31;break}for(n.prev=6,a=(0,CA.p3)(o,4),s=(0,CA.p3)(a,0,32),TA.O$.from(s).eq(i)||QA.throwError("CCIP Read sender did not match",DA.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),u=[],c=TA.O$.from((0,CA.p3)(a,32,64)).toNumber(),f=TA.O$.from((0,CA.p3)(a,c,c+32)).toNumber(),l=(0,CA.p3)(a,c+32),h=0;h<f;h++)null==(d=hx(l,32*h))&&QA.throwError("CCIP Read contained corrupt URL string",DA.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),u.push(d);return p=dx(a,64),TA.O$.from((0,CA.p3)(a,100,128)).isZero()||QA.throwError("CCIP Read callback selector included junk",DA.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),v=(0,CA.p3)(a,96,100),g=dx(a,128),n.next=21,this.ccipReadFetch(e,p,u);case 21:return null==(m=n.sent)&&QA.throwError("CCIP Read disabled or provided no URLs",DA.Yd.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:o}),y={to:i,data:(0,CA.xs)([v,mx([m,g])])},n.abrupt("return",this._call(y,t,r+1));case 27:if(n.prev=27,n.t0=n.catch(6),n.t0.code!==DA.Yd.errors.SERVER_ERROR){n.next=31;break}throw n.t0;case 31:return n.prev=31,n.abrupt("return",(0,CA.Dv)(o));case 35:return n.prev=35,n.t1=n.catch(31),n.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:o,error:n.t1}));case 38:case"end":return n.stop()}}),n,this,[[6,27],[31,35]])})))}},{key:"call",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,(0,OA.mE)({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});case 4:return n=r.sent,r.abrupt("return",this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1));case 6:case"end":return r.stop()}}),r,this)})))}},{key:"estimateGas",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,(0,OA.mE)({transaction:this._getTransactionRequest(e)});case 4:return r=t.sent,t.next=7,this.perform("estimateGas",r);case 7:return n=t.sent,t.prev=8,t.abrupt("return",TA.O$.from(n));case 12:return t.prev=12,t.t0=t.catch(8),t.abrupt("return",QA.throwError("bad result from backend",DA.Yd.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:t.t0}));case 15:case"end":return t.stop()}}),t,this,[[8,12]])})))}},{key:"_getAddress",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return"string"!==typeof(e=t.sent)&&QA.throwArgumentError("invalid address or ENS name","name",e),t.next=6,this.resolveName(e);case 6:return null==(r=t.sent)&&QA.throwError("ENS name not configured",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"resolveName(".concat(JSON.stringify(e),")")}),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})))}},{key:"_getBlock",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i,o=this;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,e;case 4:if(e=r.sent,n=-128,i={includeTransactions:!!t},!(0,CA.A7)(e,32)){r.next=11;break}i.blockHash=e,r.next=21;break;case 11:return r.prev=11,r.next=14,this._getBlockTag(e);case 14:i.blockTag=r.sent,(0,CA.A7)(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16)),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(11),QA.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e);case 21:return r.abrupt("return",(0,FA.$l)((function(){return YA(o,void 0,void 0,(0,B.Z)().mark((function e(){var r,o,a,s,u,c,f=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("getBlock",i);case 2:if(null!=(r=e.sent)){e.next=11;break}if(null==i.blockHash){e.next=7;break}if(null!=this._emitted["b:"+i.blockHash]){e.next=7;break}return e.abrupt("return",null);case 7:if(null==i.blockTag){e.next=10;break}if(!(n>this._emitted.block)){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",void 0);case 11:if(!t){e.next=34;break}o=null,a=0;case 14:if(!(a<r.transactions.length)){e.next=31;break}if(null!=(s=r.transactions[a]).blockNumber){e.next=20;break}s.confirmations=0,e.next=28;break;case 20:if(null!=s.confirmations){e.next=28;break}if(null!=o){e.next=25;break}return e.next=24,this._getInternalBlockNumber(100+2*this.pollingInterval);case 24:o=e.sent;case 25:(u=o-s.blockNumber+1)<=0&&(u=1),s.confirmations=u;case 28:a++,e.next=14;break;case 31:return(c=this.formatter.blockWithTransactions(r)).transactions=c.transactions.map((function(e){return f._wrapTransaction(e)})),e.abrupt("return",c);case 34:return e.abrupt("return",this.formatter.block(r));case 35:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this}));case 22:case"end":return r.stop()}}),r,this,[[11,18]])})))}},{key:"getBlock",value:function(e){return this._getBlock(e,!1)}},{key:"getBlockWithTransactions",value:function(e){return this._getBlock(e,!0)}},{key:"getTransaction",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,e;case 4:return e=t.sent,r={transactionHash:this.formatter.hash(e,!0)},t.abrupt("return",(0,FA.$l)((function(){return YA(n,void 0,void 0,(0,B.Z)().mark((function t(){var n,i,o,a;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perform("getTransaction",r);case 2:if(null!=(n=t.sent)){t.next=7;break}if(null!=this._emitted["t:"+e]){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",void 0);case 7:if(null!=(i=this.formatter.transactionResponse(n)).blockNumber){t.next=12;break}i.confirmations=0,t.next=19;break;case 12:if(null!=i.confirmations){t.next=19;break}return t.next=15,this._getInternalBlockNumber(100+2*this.pollingInterval);case 15:o=t.sent,(a=o-i.blockNumber+1)<=0&&(a=1),i.confirmations=a;case 19:return t.abrupt("return",this._wrapTransaction(i));case 20:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getTransactionReceipt",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,e;case 4:return e=t.sent,r={transactionHash:this.formatter.hash(e,!0)},t.abrupt("return",(0,FA.$l)((function(){return YA(n,void 0,void 0,(0,B.Z)().mark((function t(){var n,i,o,a;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perform("getTransactionReceipt",r);case 2:if(null!=(n=t.sent)){t.next=7;break}if(null!=this._emitted["t:"+e]){t.next=6;break}return t.abrupt("return",null);case 6:return t.abrupt("return",void 0);case 7:if(null!=n.blockHash){t.next=9;break}return t.abrupt("return",void 0);case 9:if(null!=(i=this.formatter.receipt(n)).blockNumber){t.next=14;break}i.confirmations=0,t.next=21;break;case 14:if(null!=i.confirmations){t.next=21;break}return t.next=17,this._getInternalBlockNumber(100+2*this.pollingInterval);case 17:o=t.sent,(a=o-i.blockNumber+1)<=0&&(a=1),i.confirmations=a;case 21:return t.abrupt("return",i);case 22:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"getLogs",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,(0,OA.mE)({filter:this._getFilter(e)});case 4:return r=t.sent,t.next=7,this.perform("getLogs",r);case 7:return(n=t.sent).forEach((function(e){null==e.removed&&(e.removed=!1)})),t.abrupt("return",$A.arrayOf(this.formatter.filterLog.bind(this.formatter))(n));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getEtherPrice",value:function(){return YA(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.abrupt("return",this.perform("getEtherPrice",{}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"_getBlockTag",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(!("number"===typeof(e=t.sent)&&e<0)){t.next=11;break}return e%1&&QA.throwArgumentError("invalid BlockTag","blockTag",e),t.next=7,this._getInternalBlockNumber(100+2*this.pollingInterval);case 7:return r=t.sent,(r+=e)<0&&(r=0),t.abrupt("return",this.formatter.blockTag(r));case 11:return t.abrupt("return",this.formatter.blockTag(e));case 12:case"end":return t.stop()}}),t,this)})))}},{key:"getResolver",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e;case 1:if(""!==r&&"."!==r){t.next=4;break}return t.abrupt("return",null);case 4:if("eth"===e||"eth"!==r){t.next=6;break}return t.abrupt("return",null);case 6:return t.next=8,this._getResolver(r,"getResolver");case 8:if(null==(n=t.sent)){t.next=19;break}if(i=new yx(this,n,e),t.t0=r!==e,!t.t0){t.next=16;break}return t.next=15,i.supportsWildcard();case 15:t.t0=!t.sent;case 16:if(!t.t0){t.next=18;break}return t.abrupt("return",null);case 18:return t.abrupt("return",i);case 19:r=r.split(".").slice(1).join("."),t.next=1;break;case 22:case"end":return t.stop()}}),t,this)})))}},{key:"_getResolver",value:function(e,t){return YA(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==t&&(t="ENS"),r.next=3,this.getNetwork();case 3:return(n=r.sent).ensAddress||QA.throwError("network does not support ENS",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:t,network:n.name}),r.prev=5,r.next=8,this.call({to:n.ensAddress,data:"0x0178b8bf"+(0,jA.VM)(e).substring(2)});case 8:return i=r.sent,r.abrupt("return",this.formatter.callAddress(i));case 12:r.prev=12,r.t0=r.catch(5);case 14:return r.abrupt("return",null);case 15:case"end":return r.stop()}}),r,this,[[5,12]])})))}},{key:"resolveName",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return e=t.sent,t.prev=3,t.abrupt("return",Promise.resolve(this.formatter.address(e)));case 7:if(t.prev=7,t.t0=t.catch(3),!(0,CA.A7)(e)){t.next=11;break}throw t.t0;case 11:return"string"!==typeof e&&QA.throwArgumentError("invalid ENS name","name",e),t.next=14,this.getResolver(e);case 14:if(r=t.sent){t.next=17;break}return t.abrupt("return",null);case 17:return t.next=19,r.getAddress();case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t,this,[[3,7]])})))}},{key:"lookupAddress",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:return e=t.sent,e=this.formatter.address(e),r=e.substring(2).toLowerCase()+".addr.reverse",t.next=7,this._getResolver(r,"lookupAddress");case 7:if(null!=(n=t.sent)){t.next=10;break}return t.abrupt("return",null);case 10:return t.t0=hx,t.next=13,this.call({to:n,data:"0x691f3431"+(0,jA.VM)(r).substring(2)});case 13:return t.t1=t.sent,i=(0,t.t0)(t.t1,0),t.next=17,this.resolveName(i);case 17:if(t.sent==e){t.next=20;break}return t.abrupt("return",null);case 20:return t.abrupt("return",i);case 21:case"end":return t.stop()}}),t,this)})))}},{key:"getAvatar",value:function(e){return YA(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i,o,a,s,u;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,!(0,CA.A7)(e)){t.next=40;break}return n=this.formatter.address(e),i=n.substring(2).toLowerCase()+".addr.reverse",t.next=6,this._getResolver(i,"getAvatar");case 6:if(o=t.sent){t.next=9;break}return t.abrupt("return",null);case 9:return r=new yx(this,o,i),t.prev=10,t.next=13,r.getAvatar();case 13:if(!(a=t.sent)){t.next=16;break}return t.abrupt("return",a.url);case 16:t.next=22;break;case 18:if(t.prev=18,t.t0=t.catch(10),t.t0.code===DA.Yd.errors.CALL_EXCEPTION){t.next=22;break}throw t.t0;case 22:return t.prev=22,t.t1=hx,t.next=26,this.call({to:o,data:"0x691f3431"+(0,jA.VM)(i).substring(2)});case 26:return t.t2=t.sent,s=(0,t.t1)(t.t2,0),t.next=30,this.getResolver(s);case 30:r=t.sent,t.next=38;break;case 33:if(t.prev=33,t.t3=t.catch(22),t.t3.code===DA.Yd.errors.CALL_EXCEPTION){t.next=37;break}throw t.t3;case 37:return t.abrupt("return",null);case 38:t.next=45;break;case 40:return t.next=42,this.getResolver(e);case 42:if(r=t.sent){t.next=45;break}return t.abrupt("return",null);case 45:return t.next=47,r.getAvatar();case 47:if(null!=(u=t.sent)){t.next=50;break}return t.abrupt("return",null);case 50:return t.abrupt("return",u.url);case 51:case"end":return t.stop()}}),t,this,[[10,18],[22,33]])})))}},{key:"perform",value:function(e,t){return QA.throwError(e+" not implemented",DA.Yd.errors.NOT_IMPLEMENTED,{operation:e})}},{key:"_startEvent",value:function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0}},{key:"_stopEvent",value:function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0}},{key:"_addEventListener",value:function(e,t,r){var n=new ax(rx(e),t,r);return this._events.push(n),this._startEvent(n),this}},{key:"on",value:function(e,t){return this._addEventListener(e,t,!1)}},{key:"once",value:function(e,t){return this._addEventListener(e,t,!0)}},{key:"emit",value:function(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=!1,a=[],s=rx(e);return this._events=this._events.filter((function(e){return e.tag!==s||(setTimeout((function(){e.listener.apply(t,n)}),0),o=!0,!e.once||(a.push(e),!1))})),a.forEach((function(e){t._stopEvent(e)})),o}},{key:"listenerCount",value:function(e){if(!e)return this._events.length;var t=rx(e);return this._events.filter((function(e){return e.tag===t})).length}},{key:"listeners",value:function(e){if(null==e)return this._events.map((function(e){return e.listener}));var t=rx(e);return this._events.filter((function(e){return e.tag===t})).map((function(e){return e.listener}))}},{key:"off",value:function(e,t){var r=this;if(null==t)return this.removeAllListeners(e);var n=[],i=!1,o=rx(e);return this._events=this._events.filter((function(e){return e.tag!==o||e.listener!=t||(!!i||(i=!0,n.push(e),!1))})),n.forEach((function(e){r._stopEvent(e)})),this}},{key:"removeAllListeners",value:function(e){var t=this,r=[];if(null==e)r=this._events,this._events=[];else{var n=rx(e);this._events=this._events.filter((function(e){return e.tag!==n||(r.push(e),!1)}))}return r.forEach((function(e){t._stopEvent(e)})),this}}],[{key:"getFormatter",value:function(){return null==bx&&(bx=new $A),bx}},{key:"getNetwork",value:function(e){return(0,zA.H)(null==e?"homestead":e)}}]),r}(ZA.zt),Nx=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},kx=new DA.Yd(LA),Ax=["call","estimateGas"];function xx(e,t){if(null==e)return null;if("string"===typeof e.message&&e.message.match("reverted")){var r=(0,CA.A7)(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"===typeof e){for(var n in e){var i=xx(e[n],t);if(i)return i}return null}if("string"===typeof e)try{return xx(JSON.parse(e),t)}catch(o){}return null}function _x(e,t,r){var n=r.transaction||r.signedTransaction;if("call"===e){var i=xx(t,!0);if(i)return i.data;kx.throwError("missing revert data in call exception; Transaction reverted without a reason string",DA.Yd.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}if("estimateGas"===e){var o=xx(t.body,!1);null==o&&(o=xx(t,!1)),o&&kx.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",DA.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{reason:o.message,method:e,transaction:n,error:t})}var a=t.message;throw t.code===DA.Yd.errors.SERVER_ERROR&&t.error&&"string"===typeof t.error.message?a=t.error.message:"string"===typeof t.body?a=t.body:"string"===typeof t.responseText&&(a=t.responseText),(a=(a||"").toLowerCase()).match(/insufficient funds|base fee exceeds gas limit/i)&&kx.throwError("insufficient funds for intrinsic transaction cost",DA.Yd.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),a.match(/nonce (is )?too low/i)&&kx.throwError("nonce has already been used",DA.Yd.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),a.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&kx.throwError("replacement fee too low",DA.Yd.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),a.match(/only replay-protected/i)&&kx.throwError("legacy pre-eip-155 transactions not supported",DA.Yd.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),Ax.indexOf(e)>=0&&a.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&kx.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",DA.Yd.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function Sx(e){return new Promise((function(t){setTimeout(t,e)}))}function Ix(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function Rx(e){return e?e.toLowerCase():e}var Tx={},Cx=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n,i){var o;if((0,N.Z)(this,r),o=t.call(this),e!==Tx)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return(0,OA.zG)((0,nm.Z)(o),"provider",n),null==i&&(i=0),"string"===typeof i?((0,OA.zG)((0,nm.Z)(o),"_address",o.provider.formatter.address(i)),(0,OA.zG)((0,nm.Z)(o),"_index",null)):"number"===typeof i?((0,OA.zG)((0,nm.Z)(o),"_index",i),(0,OA.zG)((0,nm.Z)(o),"_address",null)):kx.throwArgumentError("invalid address or index","addressOrIndex",i),o}return(0,k.Z)(r,[{key:"connect",value:function(e){return kx.throwError("cannot alter JSON-RPC Signer connection",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}},{key:"connectUnchecked",value:function(){return new Px(Tx,this.provider,this._address||this._index)}},{key:"getAddress",value:function(){var e=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(t){return t.length<=e._index&&kx.throwError("unknown account #"+e._index,DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e.provider.formatter.address(t[e._index])}))}},{key:"sendUncheckedTransaction",value:function(e){var t=this;e=(0,OA.DC)(e);var r=this.getAddress().then((function(e){return e&&(e=e.toLowerCase()),e}));if(null==e.gasLimit){var n=(0,OA.DC)(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((function(e){return Nx(t,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.provider.resolveName(e);case 4:return null==(r=t.sent)&&kx.throwArgumentError("provided ENS name resolves to null","tx.to",e),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})))}))),(0,OA.mE)({tx:(0,OA.mE)(e),sender:r}).then((function(r){var n=r.tx,i=r.sender;null!=n.from?n.from.toLowerCase()!==i&&kx.throwArgumentError("from address mismatch","transaction",e):n.from=i;var o=t.provider.constructor.hexlifyTransaction(n,{from:!0});return t.provider.send("eth_sendTransaction",[o]).then((function(e){return e}),(function(e){return _x("sendTransaction",e,o)}))}))}},{key:"signTransaction",value:function(e){return kx.throwError("signing transactions is unsupported",DA.Yd.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}},{key:"sendTransaction",value:function(e){return Nx(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);case 2:return r=t.sent,t.next=5,this.sendUncheckedTransaction(e);case 5:return n=t.sent,t.prev=6,t.next=9,(0,FA.$l)((function(){return Nx(i,void 0,void 0,(0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.getTransaction(n);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",this.provider._wrapTransaction(t,n,r));case 6:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this.provider});case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t.catch(6),t.t0.transactionHash=n,t.t0;case 16:case"end":return t.stop()}}),t,this,[[6,12]])})))}},{key:"signMessage",value:function(e){return Nx(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="string"===typeof e?(0,UA.Y0)(e):e,t.next=3,this.getAddress();case 3:return n=t.sent,t.next=6,this.provider.send("personal_sign",[(0,CA.Dv)(r),n.toLowerCase()]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"_legacySignMessage",value:function(e){return Nx(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="string"===typeof e?(0,UA.Y0)(e):e,t.next=3,this.getAddress();case 3:return n=t.sent,t.next=6,this.provider.send("eth_sign",[n.toLowerCase(),(0,CA.Dv)(r)]);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"_signTypedData",value:function(e,t,r){return Nx(this,void 0,void 0,(0,B.Z)().mark((function n(){var i,o,a=this;return(0,B.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,PA.E.resolveNames(e,t,r,(function(e){return a.provider.resolveName(e)}));case 2:return i=n.sent,n.next=5,this.getAddress();case 5:return o=n.sent,n.next=8,this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(PA.E.getPayload(i.domain,t,i.value))]);case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"unlock",value:function(e){return Nx(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.provider,t.next=3,this.getAddress();case 3:return n=t.sent,t.abrupt("return",r.send("personal_unlockAccount",[n.toLowerCase(),e,null]));case 5:case"end":return t.stop()}}),t,this)})))}}]),r}(RA.E),Px=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"sendTransaction",value:function(e){var t=this;return this.sendUncheckedTransaction(e).then((function(e){return{hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:function(r){return t.provider.waitForTransaction(e,r)}}}))}}]),r}(Cx),Ox={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},Ux=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r);var o=n;return null==o&&(o=new Promise((function(e,t){setTimeout((function(){i.detectNetwork().then((function(t){e(t)}),(function(e){t(e)}))}),0)}))),i=t.call(this,o),e||(e=(0,OA.tu)(i.constructor,"defaultUrl")()),"string"===typeof e?(0,OA.zG)((0,nm.Z)(i),"connection",Object.freeze({url:e})):(0,OA.zG)((0,nm.Z)(i),"connection",Object.freeze((0,OA.DC)(e))),i._nextId=42,i}return(0,k.Z)(r,[{key:"_cache",get:function(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}},{key:"detectNetwork",value:function(){var e=this;return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((function(){e._cache.detectNetwork=null}),0)),this._cache.detectNetwork}},{key:"_uncachedDetectNetwork",value:function(){return Nx(this,void 0,void 0,(0,B.Z)().mark((function e(){var t,r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sx(0);case 2:return t=null,e.prev=3,e.next=6,this.send("eth_chainId",[]);case 6:t=e.sent,e.next=19;break;case 9:return e.prev=9,e.t0=e.catch(3),e.prev=11,e.next=14,this.send("net_version",[]);case 14:t=e.sent,e.next=19;break;case 17:e.prev=17,e.t1=e.catch(11);case 19:if(null==t){e.next=28;break}return r=(0,OA.tu)(this.constructor,"getNetwork"),e.prev=21,e.abrupt("return",r(TA.O$.from(t).toNumber()));case 25:return e.prev=25,e.t2=e.catch(21),e.abrupt("return",kx.throwError("could not detect network",DA.Yd.errors.NETWORK_ERROR,{chainId:t,event:"invalidNetwork",serverError:e.t2}));case 28:return e.abrupt("return",kx.throwError("could not detect network",DA.Yd.errors.NETWORK_ERROR,{event:"noNetwork"}));case 29:case"end":return e.stop()}}),e,this,[[3,9],[11,17],[21,25]])})))}},{key:"getSigner",value:function(e){return new Cx(Tx,this,e)}},{key:"getUncheckedSigner",value:function(e){return this.getSigner(e).connectUnchecked()}},{key:"listAccounts",value:function(){var e=this;return this.send("eth_accounts",[]).then((function(t){return t.map((function(t){return e.formatter.address(t)}))}))}},{key:"send",value:function(e,t){var r=this,n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:(0,OA.p$)(n),provider:this});var i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];var o=(0,FA.rd)(this.connection,JSON.stringify(n),Ix).then((function(e){return r.emit("debug",{action:"response",request:n,response:e,provider:r}),e}),(function(e){throw r.emit("debug",{action:"response",error:e,request:n,provider:r}),e}));return i&&(this._cache[e]=o,setTimeout((function(){r._cache[e]=null}),0)),o}},{key:"prepareRequest",value:function(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Rx(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Rx(t.address),t.blockTag]];case"getCode":return["eth_getCode",[Rx(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Rx(t.address),(0,CA.$m)(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[(0,OA.tu)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[(0,OA.tu)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=Rx(t.filter.address)),["eth_getLogs",[t.filter]]}return null}},{key:"perform",value:function(e,t){return Nx(this,void 0,void 0,(0,B.Z)().mark((function r(){var n,i,o;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("call"!==e&&"estimateGas"!==e){r.next=8;break}if(!(n=t.transaction)||null==n.type||!TA.O$.from(n.type).isZero()){r.next=8;break}if(null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas){r.next=8;break}return r.next=6,this.getFeeData();case 6:null==(i=r.sent).maxFeePerGas&&null==i.maxPriorityFeePerGas&&((t=(0,OA.DC)(t)).transaction=(0,OA.DC)(n),delete t.transaction.type);case 8:return null==(o=this.prepareRequest(e,t))&&kx.throwError(e+" not implemented",DA.Yd.errors.NOT_IMPLEMENTED,{operation:e}),r.prev=10,r.next=13,this.send(o[0],o[1]);case 13:return r.abrupt("return",r.sent);case 16:return r.prev=16,r.t0=r.catch(10),r.abrupt("return",_x(e,r.t0,t));case 19:case"end":return r.stop()}}),r,this,[[10,16]])})))}},{key:"_startEvent",value:function(e){"pending"===e.tag&&this._startPending(),(0,rt.Z)((0,nt.Z)(r.prototype),"_startEvent",this).call(this,e)}},{key:"_startPending",value:function(){if(null==this._pendingFilter){var e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;var n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return Sx(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((function(e){}))}(),r})).catch((function(e){}))}}},{key:"_stopEvent",value:function(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),(0,rt.Z)((0,nt.Z)(r.prototype),"_stopEvent",this).call(this,e)}}],[{key:"defaultUrl",value:function(){return"http://localhost:8545"}},{key:"hexlifyTransaction",value:function(e,t){var r=(0,OA.DC)(Ox);if(t)for(var n in t)t[n]&&(r[n]=!0);(0,OA.uj)(e,r);var i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null!=e[t]){var r=(0,CA.$P)(TA.O$.from(e[t]));"gasLimit"===t&&(t="gas"),i[t]=r}})),["from","to","data"].forEach((function(t){null!=e[t]&&(i[t]=(0,CA.Dv)(e[t]))})),e.accessList&&(i.accessList=(0,MA.z7)(e.accessList)),i}}]),r}(wx),Mx="function"===typeof atob,Fx="function"===typeof btoa,Dx="function"===typeof Buffer,Lx="function"===typeof TextDecoder?new TextDecoder:void 0,Zx="function"===typeof TextEncoder?new TextEncoder:void 0,Bx=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),Gx=function(e){var t={};return e.forEach((function(e,r){return t[e]=r})),t}(Bx),Wx=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,jx=String.fromCharCode.bind(String),zx="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){return new Uint8Array(Array.prototype.slice.call(e,0))},qx=function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))},Vx=function(e){return e.replace(/[^A-Za-z0-9\+\/]/g,"")},Kx=function(e){for(var t,r,n,i,o="",a=e.length%3,s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(i=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");o+=Bx[(t=r<<16|n<<8|i)>>18&63]+Bx[t>>12&63]+Bx[t>>6&63]+Bx[63&t]}return a?o.slice(0,a-3)+"===".substring(a):o},Hx=Fx?function(e){return btoa(e)}:Dx?function(e){return Buffer.from(e,"binary").toString("base64")}:Kx,Jx=Dx?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=[],r=0,n=e.length;r<n;r+=4096)t.push(jx.apply(null,e.subarray(r,r+4096)));return Hx(t.join(""))},Xx=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?jx(192|t>>>6)+jx(128|63&t):jx(224|t>>>12&15)+jx(128|t>>>6&63)+jx(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return jx(240|t>>>18&7)+jx(128|t>>>12&63)+jx(128|t>>>6&63)+jx(128|63&t)},$x=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Yx=function(e){return e.replace($x,Xx)},Qx=Dx?function(e){return Buffer.from(e,"utf8").toString("base64")}:Zx?function(e){return Jx(Zx.encode(e))}:function(e){return Hx(Yx(e))},e_=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?qx(Qx(e)):Qx(e)},t_=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,r_=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return jx(55296+(t>>>10))+jx(56320+(1023&t));case 3:return jx((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return jx((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},n_=function(e){return e.replace(t_,r_)},i_=function(e){if(e=e.replace(/\s+/g,""),!Wx.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));for(var t,r,n,i="",o=0;o<e.length;)t=Gx[e.charAt(o++)]<<18|Gx[e.charAt(o++)]<<12|(r=Gx[e.charAt(o++)])<<6|(n=Gx[e.charAt(o++)]),i+=64===r?jx(t>>16&255):64===n?jx(t>>16&255,t>>8&255):jx(t>>16&255,t>>8&255,255&t);return i},o_=Mx?function(e){return atob(Vx(e))}:Dx?function(e){return Buffer.from(e,"base64").toString("binary")}:i_,a_=Dx?function(e){return zx(Buffer.from(e,"base64"))}:function(e){return zx(o_(e).split("").map((function(e){return e.charCodeAt(0)})))},s_=Dx?function(e){return Buffer.from(e,"base64").toString("utf8")}:Lx?function(e){return Lx.decode(a_(e))}:function(e){return n_(o_(e))},u_=function(e){return Vx(e.replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})))},c_=function(e){return s_(u_(e))},f_=e_,l_=c_,h_=function(){return h_=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},h_.apply(this,arguments)};function d_(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function p_(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}var v_=function(e){return na.hash(e.domain,e.types,e.message)},g_=function(){function e(e){this.prefix=N_,this.address=(null===e||void 0===e?void 0:e.address)?e.address.toLowerCase():"",this.claims=(null===e||void 0===e?void 0:e.claims)?e.claims:{app:"",iat:0,exp:0,v:w_},this.signature=(null===e||void 0===e?void 0:e.signature)?e.signature:"",this.extra=(null===e||void 0===e?void 0:e.extra)?e.extra:""}return e.prototype.setIssuedAtNow=function(){this.claims.iat=Math.round((new Date).getTime()/1e3)},e.prototype.setExpiryIn=function(e){this.claims.exp=Math.round((new Date).getTime()/1e3)+e},e.prototype.validateClaims=function(){return m_(this.claims)},e.prototype.messageDigest=function(){var e=this.validateClaims();if(e.err)throw e.err;return ri(v_(this.messageTypedData()))},e.prototype.messageTypedData=function(){var e={domain:h_({},k_),types:{Claims:[]},message:{}};return this.claims.app&&this.claims.app.length>0&&(e.types.Claims.push({name:"app",type:"string"}),e.message.app=this.claims.app),this.claims.iat&&this.claims.iat>0&&(e.types.Claims.push({name:"iat",type:"int64"}),e.message.iat=this.claims.iat),this.claims.exp&&this.claims.exp>0&&(e.types.Claims.push({name:"exp",type:"int64"}),e.message.exp=this.claims.exp),this.claims.n&&this.claims.n>0&&(e.types.Claims.push({name:"n",type:"uint64"}),e.message.n=this.claims.n),this.claims.typ&&this.claims.typ.length>0&&(e.types.Claims.push({name:"typ",type:"string"}),e.message.typ=this.claims.typ),this.claims.ogn&&this.claims.ogn.length>0&&(e.types.Claims.push({name:"ogn",type:"string"}),e.message.ogn=this.claims.ogn),this.claims.v&&this.claims.v.length>0&&(e.types.Claims.push({name:"v",type:"string"}),e.message.v=this.claims.v),e},e}(),m_=function(e){if(""===e.app)return{ok:!1,err:new Error("claims: app is empty")};var t=Math.round((new Date).getTime()/1e3),r=31536300;return""===e.v?{ok:!1,err:new Error("claims: ethauth version is empty")}:e.iat&&0!==e.iat&&(e.iat>t+300||e.iat<t-r)?{ok:!1,err:new Error("claims: iat is invalid")}:e.exp<t-300||e.exp>t+r?{ok:!1,err:new Error("claims: token has expired")}:{ok:!0}},y_=function(e,t,r){return d_(void 0,void 0,void 0,(function(){var e,t;return p_(this,(function(n){return e=r.messageDigest(),"0x"===(t=JE(e,r.signature)).slice(0,2)&&42===t.length&&t.toLowerCase()===r.address.toLowerCase()?[2,{isValid:!0,address:r.address}]:[2,{isValid:!1}]}))}))},b_=function(e,t,r){return d_(void 0,void 0,void 0,(function(){var t,n,i;return p_(this,(function(o){switch(o.label){case 0:return e&&void 0!==e?(t=r.messageDigest(),[4,e.getCode(r.address)]):[2,{isValid:!1}];case 1:if("0x"===(n=o.sent())||n.length<=2)throw new Error("ValidateContractAccountProof failed. unable to fetch wallet contract code");return i=["function isValidSignature(bytes32, bytes) public view returns (bytes4)"],[4,new IA(r.address,i,e).isValidSignature(t,ri(r.signature))];case 2:return o.sent()===E_?[2,{isValid:!0,address:r.address}]:[2,{isValid:!1}]}}))}))},E_="0x1626ba7e",w_="1",N_="eth",k_={name:"ETHAuth",version:w_},A_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this;this.configJsonRpcProvider=function(e){return d_(r,void 0,void 0,(function(){var t;return p_(this,(function(r){switch(r.label){case 0:return this.provider=new Ux(e),[4,this.provider.send("net_version",[])];case 1:if(t=r.sent(),this.chainId=parseInt(t),!this.chainId||0===this.chainId||NaN===this.chainId)throw new Error("ethauth: unable to get chainId");return this.ethereumJsonRpcURL=e,[2]}}))}))},this.configValidators=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0==e.length)throw new Error("validators list is empty");r.validators=e},this.encodeProof=function(e,t){return void 0===t&&(t=!1),d_(r,void 0,void 0,(function(){var r,n;return p_(this,(function(i){switch(i.label){case 0:if(42!==e.address.length||"0x"!==e.address.slice(0,2))throw new Error("ethauth: invalid address");if(""===e.signature||"0x"!==e.signature.slice(0,2))throw new Error("ethauth: invalid signature");if(e.extra&&"0x"!==e.extra.slice(0,2))throw new Error("ethauth: invalid extra encoding, expecting hex data");return[4,this.validateProof(e,t)];case 1:if(!i.sent())throw new Error("ethauth: proof is invalid");return r=JSON.stringify(e.claims),n=N_+"."+e.address.toLowerCase()+"."+f_(r,!0)+"."+e.signature,e.extra&&e.extra.length>0&&(n+="."+e.extra),[2,n]}}))}))},this.decodeProof=function(e,t){return void 0===t&&(t=!1),d_(r,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,f;return p_(this,(function(l){switch(l.label){case 0:if((r=e.split(".")).length<4||r.length>5)throw new Error("ethauth: invalid proof string");if(n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],n!==N_)throw new Error("ethauth: not an ethauth proof");return u=l_(o),c=JSON.parse(u),f=new g_({address:i,claims:c,signature:a,extra:s}),[4,this.validateProof(f,t)];case 1:if(!l.sent())throw new Error("ethauth: proof is invalid");return[2,f]}}))}))},this.validateProof=function(e,t){return void 0===t&&(t=!1),d_(r,void 0,void 0,(function(){var r;return p_(this,(function(n){switch(n.label){case 0:if((r=this.validateProofClaims(e)).err)throw new Error("ethauth: proof claims are invalid ".concat(r.err));return!0===t?[3,2]:[4,this.validateProofSignature(e)];case 1:if(!0!==n.sent())throw new Error("ethauth: proof signature is invalid");n.label=2;case 2:return[2,!0]}}))}))},this.validateProofSignature=function(e){return d_(r,void 0,void 0,(function(){var t,r,n;return p_(this,(function(i){switch(i.label){case 0:t=[],n=0,i.label=1;case 1:if(!(n<this.validators.length))return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,(0,this.validators[n])(this.provider,this.chainId,e)];case 3:return!0===(r=i.sent().isValid)?[2,!0]:(t.push(r),[3,5]);case 4:return i.sent(),t.push(!1),[3,5];case 5:return n++,[3,1];case 6:for(n=0;n<t.length;n++)if(t[n])return[2,!0];return[2,!1]}}))}))},this.validateProofClaims=function(e){return e.validateClaims()},0==e.length?this.validators=[y_,b_]:this.validators=e},x_=!1,__=!1,S_={debug:1,default:2,info:2,warning:3,error:4,off:5},I_=S_.default,R_=null;var T_,C_,P_=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(T_||(T_={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(C_||(C_={}));var O_="0123456789abcdef",U_=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==S_[r]&&this.throwArgumentError("invalid log level name","logLevel",e),I_>S_[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(__)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=O_[t[o]>>4],r+=O_[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case C_.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case C_.CALL_EXCEPTION:case C_.INSUFFICIENT_FUNDS:case C_.MISSING_NEW:case C_.NONCE_EXPIRED:case C_.REPLACEMENT_UNDERPRICED:case C_.TRANSACTION_REPLACED:case C_.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),P_&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:P_})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return R_||(R_=new e("logger/5.7.0")),R_}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),x_){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}__=!!t,x_=!!r}},{key:"setLogLevel",value:function(t){var r=S_[t.toLowerCase()];null!=r?I_=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();U_.errors=C_,U_.levels=T_;var M_=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))};new U_("properties/5.7.0");function F_(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function D_(e){return M_(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.keys(e).map((function(t){var r=e[t];return Promise.resolve(r).then((function(e){return{key:t,value:e}}))})),t.next=3,Promise.all(r);case 3:return n=t.sent,t.abrupt("return",n.reduce((function(e,t){return e[t.key]=t.value,e}),{}));case 5:case"end":return t.stop()}}),t)})))}var L_=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},Z_=new U_("abstract-signer/5.6.2"),B_=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],G_=[U_.errors.INSUFFICIENT_FUNDS,U_.errors.NONCE_EXPIRED,U_.errors.REPLACEMENT_UNDERPRICED],W_=function(){function e(){(0,N.Z)(this,e),Z_.checkAbstract(this instanceof e?this.constructor:void 0,e),F_(this,"_isSigner",!0)}return(0,k.Z)(e,[{key:"getBalance",value:function(e){return L_(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getBalance"),t.next=3,this.provider.getBalance(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getTransactionCount",value:function(e){return L_(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getTransactionCount"),t.next=3,this.provider.getTransactionCount(this.getAddress(),e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"estimateGas",value:function(e){return L_(this,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("estimateGas"),t.next=3,D_(this.checkTransaction(e));case 3:return r=t.sent,t.next=6,this.provider.estimateGas(r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"call",value:function(e,t){return L_(this,void 0,void 0,(0,B.Z)().mark((function r(){var n;return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this._checkProvider("call"),r.next=3,D_(this.checkTransaction(e));case 3:return n=r.sent,r.next=6,this.provider.call(n,t);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}},{key:"sendTransaction",value:function(e){return L_(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("sendTransaction"),t.next=3,this.populateTransaction(e);case 3:return r=t.sent,t.next=6,this.signTransaction(r);case 6:return n=t.sent,t.next=9,this.provider.sendTransaction(n);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"getChainId",value:function(){return L_(this,void 0,void 0,(0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getChainId"),e.next=3,this.provider.getNetwork();case 3:return t=e.sent,e.abrupt("return",t.chainId);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getGasPrice",value:function(){return L_(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getGasPrice"),e.next=3,this.provider.getGasPrice();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getFeeData",value:function(){return L_(this,void 0,void 0,(0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getFeeData"),e.next=3,this.provider.getFeeData();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"resolveName",value:function(e){return L_(this,void 0,void 0,(0,B.Z)().mark((function t(){return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("resolveName"),t.next=3,this.provider.resolveName(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"checkTransaction",value:function(e){for(var t in e)-1===B_.indexOf(t)&&Z_.throwArgumentError("invalid transaction key: "+t,"transaction",e);var r=function(e){var t={};for(var r in e)t[r]=e[r];return t}(e);return null==r.from?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then((function(t){return t[0].toLowerCase()!==t[1].toLowerCase()&&Z_.throwArgumentError("from address mismatch","transaction",e),t[0]})),r}},{key:"populateTransaction",value:function(e){return L_(this,void 0,void 0,(0,B.Z)().mark((function t(){var r,n,i,o,a=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D_(this.checkTransaction(e));case 2:if(null!=(r=t.sent).to&&(r.to=Promise.resolve(r.to).then((function(e){return L_(a,void 0,void 0,(0,B.Z)().mark((function t(){var r;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,this.resolveName(e);case 4:return null==(r=t.sent)&&Z_.throwArgumentError("provided ENS name resolves to null","tx.to",e),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})))})),r.to.catch((function(e){}))),n=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas,null==r.gasPrice||2!==r.type&&!n?0!==r.type&&1!==r.type||!n||Z_.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e):Z_.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e),2!==r.type&&null!=r.type||null==r.maxFeePerGas||null==r.maxPriorityFeePerGas){t.next=10;break}r.type=2,t.next=18;break;case 10:if(0!==r.type&&1!==r.type){t.next=14;break}null==r.gasPrice&&(r.gasPrice=this.getGasPrice()),t.next=18;break;case 14:return t.next=16,this.getFeeData();case 16:i=t.sent,null==r.type?null!=i.maxFeePerGas&&null!=i.maxPriorityFeePerGas?(r.type=2,null!=r.gasPrice?(o=r.gasPrice,delete r.gasPrice,r.maxFeePerGas=o,r.maxPriorityFeePerGas=o):(null==r.maxFeePerGas&&(r.maxFeePerGas=i.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))):null!=i.gasPrice?(n&&Z_.throwError("network does not support EIP-1559",U_.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=i.gasPrice),r.type=0):Z_.throwError("failed to get consistent fee data",U_.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"}):2===r.type&&(null==r.maxFeePerGas&&(r.maxFeePerGas=i.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas));case 18:return null==r.nonce&&(r.nonce=this.getTransactionCount("pending")),null==r.gasLimit&&(r.gasLimit=this.estimateGas(r).catch((function(e){if(G_.indexOf(e.code)>=0)throw e;return Z_.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",U_.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:r})}))),null==r.chainId?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then((function(t){return 0!==t[1]&&t[0]!==t[1]&&Z_.throwArgumentError("chainId address mismatch","transaction",e),t[0]})),t.next=23,D_(r);case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"_checkProvider",value:function(e){this.provider||Z_.throwError("missing provider",U_.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}}],[{key:"isSigner",value:function(e){return!(!e||!e._isSigner)}}]),e}(),j_=!1,z_=!1,q_={debug:1,default:2,info:2,warning:3,error:4,off:5},V_=q_.default,K_=null;var H_,J_,X_=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(H_||(H_={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(J_||(J_={}));var $_="0123456789abcdef",Y_=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==q_[r]&&this.throwArgumentError("invalid log level name","logLevel",e),V_>q_[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(z_)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=$_[t[o]>>4],r+=$_[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case J_.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case J_.CALL_EXCEPTION:case J_.INSUFFICIENT_FUNDS:case J_.MISSING_NEW:case J_.NONCE_EXPIRED:case J_.REPLACEMENT_UNDERPRICED:case J_.TRANSACTION_REPLACED:case J_.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),X_&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:X_})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return K_||(K_=new e("logger/5.7.0")),K_}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),j_){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}z_=!!t,j_=!!r}},{key:"setLogLevel",value:function(t){var r=q_[t.toLowerCase()];null!=r?V_=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();Y_.errors=J_,Y_.levels=H_;var Q_=new Y_("bytes/5.7.0");function eS(e){return!!e.toHexString}function tS(e){return"number"===typeof e&&e==e&&e%1===0}function rS(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!tS(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!tS(r)||r<0||r>=256)return!1}return!0}function nS(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var iS="0123456789abcdef";function oS(e,t){if(t||(t={}),"number"===typeof e){Q_.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=iS[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),eS(e))return e.toHexString();if(nS(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":Q_.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(rS(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=iS[(240&o)>>4]+iS[15&o]}return n}return Q_.throwArgumentError("invalid hexlify value","value",e)}var aS=be().BN,sS=new Y_("bignumber/5.6.2"),uS={},cS=9007199254740991;var fS=!1,lS=function(){function e(t,r){(0,N.Z)(this,e),t!==uS&&sS.throwError("cannot call constructor directly; use BigNumber.from",Y_.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return dS(pS(this).fromTwos(e))}},{key:"toTwos",value:function(e){return dS(pS(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return dS(pS(this).add(pS(e)))}},{key:"sub",value:function(e){return dS(pS(this).sub(pS(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&vS("division-by-zero","div"),dS(pS(this).div(pS(t)))}},{key:"mul",value:function(e){return dS(pS(this).mul(pS(e)))}},{key:"mod",value:function(e){var t=pS(e);return t.isNeg()&&vS("division-by-zero","mod"),dS(pS(this).umod(t))}},{key:"pow",value:function(e){var t=pS(e);return t.isNeg()&&vS("negative-power","pow"),dS(pS(this).pow(t))}},{key:"and",value:function(e){var t=pS(e);return(this.isNegative()||t.isNeg())&&vS("unbound-bitwise-result","and"),dS(pS(this).and(t))}},{key:"or",value:function(e){var t=pS(e);return(this.isNegative()||t.isNeg())&&vS("unbound-bitwise-result","or"),dS(pS(this).or(t))}},{key:"xor",value:function(e){var t=pS(e);return(this.isNegative()||t.isNeg())&&vS("unbound-bitwise-result","xor"),dS(pS(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&vS("negative-width","mask"),dS(pS(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&vS("negative-width","shl"),dS(pS(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&vS("negative-width","shr"),dS(pS(this).shrn(e))}},{key:"eq",value:function(e){return pS(this).eq(pS(e))}},{key:"lt",value:function(e){return pS(this).lt(pS(e))}},{key:"lte",value:function(e){return pS(this).lte(pS(e))}},{key:"gt",value:function(e){return pS(this).gt(pS(e))}},{key:"gte",value:function(e){return pS(this).gte(pS(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return pS(this).isZero()}},{key:"toNumber",value:function(){try{return pS(this).toNumber()}catch(e){vS("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return sS.throwError("this platform does not support BigInt",Y_.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?fS||(fS=!0,sS.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?sS.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Y_.errors.UNEXPECTED_ARGUMENT,{}):sS.throwError("BigNumber.toString does not accept parameters",Y_.errors.UNEXPECTED_ARGUMENT,{})),pS(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(uS,hS(t)):t.match(/^-?[0-9]+$/)?new e(uS,hS(new aS(t))):sS.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&vS("underflow","BigNumber.from",t),(t>=cS||t<=-9007199254740991)&&vS("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(rS(r))return e.from(oS(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(nS(i)||"-"===i[0]&&nS(i.substring(1))))return e.from(i)}return sS.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function hS(e){if("string"!==typeof e)return hS(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&sS.throwArgumentError("invalid hex","value",e),"0x00"===(e=hS(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function dS(e){return lS.from(hS(e))}function pS(e){var t=lS.from(e).toHexString();return"-"===t[0]?new aS("-"+t.substring(3),16):new aS(t.substring(2),16)}function vS(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),sS.throwError(e,Y_.errors.NUMERIC_FAULT,n)}var gS=!1,mS=!1,yS={debug:1,default:2,info:2,warning:3,error:4,off:5},bS=yS.default,ES=null;var wS,NS,kS=function(){try{var e=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(t){try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}})),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"}(wS||(wS={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"}(NS||(NS={}));var AS="0123456789abcdef",xS=function(){function e(t){(0,N.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}return(0,k.Z)(e,[{key:"_log",value:function(e,t){var r=e.toLowerCase();null==yS[r]&&this.throwArgumentError("invalid log level name","logLevel",e),bS>yS[r]||console.log.apply(console,t)}},{key:"debug",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.DEBUG,r)}},{key:"info",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.INFO,r)}},{key:"warn",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];this._log(e.levels.WARNING,r)}},{key:"makeError",value:function(t,r,n){if(mS)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});var i=[];Object.keys(n).forEach((function(e){var t=n[e];try{if(t instanceof Uint8Array){for(var r="",o=0;o<t.length;o++)r+=AS[t[o]>>4],r+=AS[15&t[o]];i.push(e+"=Uint8Array(0x"+r+")")}else i.push(e+"="+JSON.stringify(t))}catch(u){i.push(e+"="+JSON.stringify(n[e].toString()))}})),i.push("code=".concat(r)),i.push("version=".concat(this.version));var o=t,a="";switch(r){case NS.NUMERIC_FAULT:a="NUMERIC_FAULT";var s=t;switch(s){case"overflow":case"underflow":case"division-by-zero":a+="-"+s;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result"}break;case NS.CALL_EXCEPTION:case NS.INSUFFICIENT_FUNDS:case NS.MISSING_NEW:case NS.NONCE_EXPIRED:case NS.REPLACEMENT_UNDERPRICED:case NS.TRANSACTION_REPLACED:case NS.UNPREDICTABLE_GAS_LIMIT:a=r}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),i.length&&(t+=" ("+i.join(", ")+")");var u=new Error(t);return u.reason=o,u.code=r,Object.keys(n).forEach((function(e){u[e]=n[e]})),u}},{key:"throwError",value:function(e,t,r){throw this.makeError(e,t,r)}},{key:"throwArgumentError",value:function(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}},{key:"assert",value:function(e,t,r,n){e||this.throwError(t,r,n)}},{key:"assertArgument",value:function(e,t,r,n){e||this.throwArgumentError(t,r,n)}},{key:"checkNormalize",value:function(t){null==t&&(t="platform missing String.prototype.normalize"),kS&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:kS})}},{key:"checkSafeUint53",value:function(t,r){"number"===typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}},{key:"checkArgumentCount",value:function(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}},{key:"checkNew",value:function(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return ES||(ES=new e("logger/5.7.0")),ES}},{key:"setCensorship",value:function(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),gS){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}mS=!!t,gS=!!r}},{key:"setLogLevel",value:function(t){var r=yS[t.toLowerCase()];null!=r?bS=r:e.globalLogger().warn("invalid log level - "+t)}},{key:"from",value:function(t){return new e(t)}}]),e}();xS.errors=NS,xS.levels=wS;var _S=new xS("bytes/5.7.0");function SS(e){return!!e.toHexString}function IS(e){return"number"===typeof e&&e==e&&e%1===0}function RS(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"===typeof e)return!1;if(!IS(e.length)||e.length<0)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(!IS(r)||r<0||r>=256)return!1}return!0}function TS(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}var CS="0123456789abcdef";function PS(e,t){if(t||(t={}),"number"===typeof e){_S.checkSafeUint53(e,"invalid hexlify value");for(var r="";e;)r=CS[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"===typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"===typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),SS(e))return e.toHexString();if(TS(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":_S.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(RS(e)){for(var n="0x",i=0;i<e.length;i++){var o=e[i];n+=CS[(240&o)>>4]+CS[15&o]}return n}return _S.throwArgumentError("invalid hexlify value","value",e)}var OS=be().BN,US=new xS("bignumber/5.7.0"),MS={},FS=9007199254740991;var DS=!1,LS=function(){function e(t,r){(0,N.Z)(this,e),t!==MS&&US.throwError("cannot call constructor directly; use BigNumber.from",xS.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return(0,k.Z)(e,[{key:"fromTwos",value:function(e){return BS(GS(this).fromTwos(e))}},{key:"toTwos",value:function(e){return BS(GS(this).toTwos(e))}},{key:"abs",value:function(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}},{key:"add",value:function(e){return BS(GS(this).add(GS(e)))}},{key:"sub",value:function(e){return BS(GS(this).sub(GS(e)))}},{key:"div",value:function(t){return e.from(t).isZero()&&WS("division-by-zero","div"),BS(GS(this).div(GS(t)))}},{key:"mul",value:function(e){return BS(GS(this).mul(GS(e)))}},{key:"mod",value:function(e){var t=GS(e);return t.isNeg()&&WS("division-by-zero","mod"),BS(GS(this).umod(t))}},{key:"pow",value:function(e){var t=GS(e);return t.isNeg()&&WS("negative-power","pow"),BS(GS(this).pow(t))}},{key:"and",value:function(e){var t=GS(e);return(this.isNegative()||t.isNeg())&&WS("unbound-bitwise-result","and"),BS(GS(this).and(t))}},{key:"or",value:function(e){var t=GS(e);return(this.isNegative()||t.isNeg())&&WS("unbound-bitwise-result","or"),BS(GS(this).or(t))}},{key:"xor",value:function(e){var t=GS(e);return(this.isNegative()||t.isNeg())&&WS("unbound-bitwise-result","xor"),BS(GS(this).xor(t))}},{key:"mask",value:function(e){return(this.isNegative()||e<0)&&WS("negative-width","mask"),BS(GS(this).maskn(e))}},{key:"shl",value:function(e){return(this.isNegative()||e<0)&&WS("negative-width","shl"),BS(GS(this).shln(e))}},{key:"shr",value:function(e){return(this.isNegative()||e<0)&&WS("negative-width","shr"),BS(GS(this).shrn(e))}},{key:"eq",value:function(e){return GS(this).eq(GS(e))}},{key:"lt",value:function(e){return GS(this).lt(GS(e))}},{key:"lte",value:function(e){return GS(this).lte(GS(e))}},{key:"gt",value:function(e){return GS(this).gt(GS(e))}},{key:"gte",value:function(e){return GS(this).gte(GS(e))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return GS(this).isZero()}},{key:"toNumber",value:function(){try{return GS(this).toNumber()}catch(e){WS("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(e){}return US.throwError("this platform does not support BigInt",xS.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?DS||(DS=!0,US.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?US.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",xS.errors.UNEXPECTED_ARGUMENT,{}):US.throwError("BigNumber.toString does not accept parameters",xS.errors.UNEXPECTED_ARGUMENT,{})),GS(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(e){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(t){if(t instanceof e)return t;if("string"===typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(MS,ZS(t)):t.match(/^-?[0-9]+$/)?new e(MS,ZS(new OS(t))):US.throwArgumentError("invalid BigNumber string","value",t);if("number"===typeof t)return t%1&&WS("underflow","BigNumber.from",t),(t>=FS||t<=-9007199254740991)&&WS("overflow","BigNumber.from",t),e.from(String(t));var r=t;if("bigint"===typeof r)return e.from(r.toString());if(RS(r))return e.from(PS(r));if(r)if(r.toHexString){var n=r.toHexString();if("string"===typeof n)return e.from(n)}else{var i=r._hex;if(null==i&&"BigNumber"===r.type&&(i=r.hex),"string"===typeof i&&(TS(i)||"-"===i[0]&&TS(i.substring(1))))return e.from(i)}return US.throwArgumentError("invalid BigNumber value","value",t)}},{key:"isBigNumber",value:function(e){return!(!e||!e._isBigNumber)}}]),e}();function ZS(e){if("string"!==typeof e)return ZS(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&US.throwArgumentError("invalid hex","value",e),"0x00"===(e=ZS(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function BS(e){return LS.from(ZS(e))}function GS(e){var t=LS.from(e).toHexString();return"-"===t[0]?new OS("-"+t.substring(3),16):new OS(t.substring(2),16)}function WS(e,t,r){var n={fault:e,operation:t};return null!=r&&(n.value=r),US.throwError(e,xS.errors.NUMERIC_FAULT,n)}var jS,zS=LS.from(0),qS=LS.from(2),VS=r(37762),KS=function(e){return f_(e,!0)},HS=function(e){return f_(JSON.stringify(e),!0)},JS=function(e){if(null!==e&&void 0!==e)return l_(e)},XS=function(e){if(null!==e&&void 0!==e)return JSON.parse(l_(e))},$S=function(e){return ri(uc("string"===typeof e?Od(e):e))},YS=function(e,t,r){return Cf(["string","uint256","address","bytes32"],["\x19\x01",t,e,r])},QS=function(e,t,r){return uc(YS(e,t,r))},eI=function(){return"undefined"===typeof window&&"object"===typeof process},tI=function(){return!eI()},rI=function(e){var t=e.split(".");if(3!==t.length)throw new Error("invalid jwt");return JSON.parse(l_(t[1]))};function nI(){return nI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nI.apply(this,arguments)}!function(e){e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.DISABLED=5]="DISABLED"}(jS||(jS={}));var iI=function(){function e(t){(0,N.Z)(this,e),this.config=t,this.logLevel=void 0,this.configure(t)}return(0,k.Z)(e,[{key:"configure",value:function(e){switch(this.config=nI({},this.config,e),this.config.logLevel){case"DEBUG":this.logLevel=jS.DEBUG;break;case"INFO":default:this.logLevel=jS.INFO;break;case"WARN":this.logLevel=jS.WARN;break;case"ERROR":this.logLevel=jS.ERROR;break;case"DISABLED":this.logLevel=jS.DISABLED}void 0===this.config.silence&&(this.config.silence=!1)}},{key:"debug",value:function(e){if(!0!==this.config.silence&&this.logLevel===jS.DEBUG){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).log.apply(t,[e].concat(n))}}},{key:"info",value:function(e){if(!0!==this.config.silence&&this.logLevel<=jS.INFO){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).log.apply(t,[e].concat(n))}}},{key:"warn",value:function(e){if(!0!==this.config.silence&&this.logLevel<=jS.WARN){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).warn.apply(t,[e].concat(n)),this.config.onwarn&&this.config.onwarn(e,n)}}},{key:"error",value:function(e){if(!0!==this.config.silence&&this.logLevel<=jS.ERROR){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];(t=console).error.apply(t,[e].concat(n)),this.config.onerror&&this.config.onerror(e,n)}}}]),e}(),oI=new iI({logLevel:"INFO",silence:!0}),aI=function(e){return oI.configure(e)};function sI(e,t){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var o=Array.prototype.slice.call(n);return new Promise(function(){var r=(0,G.Z)((0,B.Z)().mark((function r(n,i){return(0,B.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,o.push((function(e,t){return e?i(e):n(t)})),r.next=4,e.apply(t,o);case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(0),i(r.t0);case 9:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e,t){return r.apply(this,arguments)}}())}}var uI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e};function cI(e,t){var r=encodeURIComponent(e),n=encodeURIComponent(JSON.stringify(t));return"".concat(r,"=").concat(n)}function fI(e){var t,r=e.split("&"),n={},i=(0,VS.Z)(r);try{for(i.s();!(t=i.n()).done;){var o=t.value.split("=");n[decodeURIComponent(o[0])]=JSON.parse(decodeURIComponent(o[1]))}}catch(a){i.e(a)}finally{i.f()}return n}var lI=function(e){if(!e||"string"!==typeof e)return"";var t=e.match(/[\d.]+/);return t&&t.length>0?t[0].trim():""},hI=function(e){if(!e||"string"!==typeof e)return"";var t=e.match(/[\w\s\d]+/);return t&&t.length>0?t[0].trim():""},dI=function(e){if(!e||"string"!==typeof e)return"";var t=e.match(/[\w\d.\-:\/]+/);return t&&t.length>0?t[0].trim():""},pI=function(e){return new Promise((function(t){var r=setTimeout((function(){clearTimeout(r),t()}),e)}))},vI=function(e){var t=nI({},e.types);return delete t.EIP712Domain,na.hash(e.domain,t,e.message)},gI=function(e){return ri(vI(e))},mI=pl,yI=vl,bI=gl,EI=ml,wI=yl,NI=Nl,kI=function(e){return e.replace(/([^:]\/)\/+/g,"$1")};function AI(e){return null!=e&&(lS.isBigNumber(e)||"number"===typeof e&&e%1===0||"string"===typeof e&&!!e.match(/^-?[0-9]+$/)||ai(e)||"bigint"===typeof e||ti(e))}var xI,_I=r(4942);function SI(){return SI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SI.apply(this,arguments)}function II(e){return e&&void 0!==e.chainId&&void 0!==e.name&&void 0!==e.rpcUrl&&void 0!==e.relayer}var RI,TI=function(e){return"number"===typeof e?e:e.chainId?e.chainId:lS.from(e).toNumber()},CI=function(e){if(e)return TI(e)},PI=function(e){return e.find((function(e){return e.isAuthChain}))},OI=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)throw new Error("invalid network config: empty config");var n=[];if(Array.isArray(e)?n.push.apply(n,(0,Z.Z)(e)):n.push(e),0===n.length){if(t)throw new Error("invalid network config: empty config");return!1}var i=n.map((function(e){return e.chainId})).sort(),o=i.filter((function(e,t){return i.indexOf(e)!==t}));if(o.length>0){if(t)throw new Error("invalid network config: duplicate chainIds ".concat(o));return!1}n.forEach((function(e){return e.name=e.name.toLowerCase()}));var a=n.map((function(e){return e.name})).sort(),s=a.filter((function(e,t){return a.indexOf(e)!==t}));if(s.length>0){if(t)throw new Error("invalid network config: duplicate network names ".concat(s));return!1}for(var u=!1,c=!1,f=0;f<n.length;f++){var l=n[f];if((!l.rpcUrl||""===l.rpcUrl)&&!l.provider){if(t)throw new Error("invalid network config for chainId ".concat(l.chainId,": rpcUrl or provider must be provided"));return!1}if(!r&&!l.relayer){if(t)throw new Error("invalid network config for chainId ".concat(l.chainId,": relayer must be provided"));return!1}if(l.isDefaultChain){if(u){if(t)throw new Error("invalid network config for chainId ".concat(l.chainId,": DefaultChain is already set by another config"));return!1}u=!0}if(l.isAuthChain){if(c&&t)throw new Error("invalid network config for chainId ".concat(l.chainId,": AuthChain is already set by another config"));c=!0}}if(!u){if(t)throw new Error("invalid network config: DefaultChain must be set");return!1}if(!c){if(t)throw new Error("invalid network config: AuthChain must be set");return!1}return!0},UI=function(e){return OI(e,!0,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),e},MI=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.map((function(e){return e.chainId})).sort(),n=r.filter((function(e,t){return r.indexOf(e)!==t}));if(n.length>0){if(t)throw new Error("invalid network config: duplicate chainIds ".concat(n));return!1}return!0},FI=function(e,t){if(e&&t){if(!e.chainId&&!e.name)throw new Error("failed to update network config: source config is missing chainId or name");if(e.chainId!==t.chainId&&e.name!==t.name)throw new Error("failed to update network config: one of chainId or name must match");e.rpcUrl&&(t.rpcUrl=e.rpcUrl,t.provider=void 0),e.provider&&(t.provider=e.provider),e.relayer&&(t.relayer=e.relayer)}},DI=function(e){return UI(GI(e))},LI=function(e,t){if("string"===typeof t){if(t.startsWith("0x")){var r=lS.from(t).toNumber();return e.find((function(e){return e.chainId===r}))}return e.find((function(e){return e.name===t}))}return"number"===typeof t?e.find((function(e){return e.chainId===t})):t.chainId?e.find((function(e){return e.chainId===t.chainId})):void 0},ZI=function(e,t){return!!e&&(e.name===t||e.chainId===t)},BI=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].name]=e[r];return t},GI=function(e){if(!e)return[];var t=e.sort((function(e,t){return e.chainId===t.chainId?0:e.chainId<t.chainId?-1:1})),r=t.findIndex((function(e){return e.isDefaultChain}));r>0&&t.splice(0,0,t.splice(r,1)[0]);var n=t.findIndex((function(e){return e.isAuthChain&&!0!==e.isDefaultChain}));return n>0&&t.splice(1,0,t.splice(n,1)[0]),t},WI=function(e,t){return"string"===typeof e?(t=t||{},e.replace(/\$\{\s*([$#@\-\d\w]+)\s*\}/gim,(function(e,r){var n=t[r];return n="function"===typeof n?n():null===n||void 0===n?"":"object"===typeof n||"symbol"===typeof n?n.toString():n.valueOf()}))):""};!function(e){e[e.MAINNET=1]="MAINNET",e[e.ROPSTEN=3]="ROPSTEN",e[e.RINKEBY=4]="RINKEBY",e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.POLYGON=137]="POLYGON",e[e.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",e[e.POLYGON_ZKEVM=1101]="POLYGON_ZKEVM",e[e.BSC=56]="BSC",e[e.BSC_TESTNET=97]="BSC_TESTNET",e[e.OPTIMISM=10]="OPTIMISM",e[e.OPTIMISM_TESTNET=69]="OPTIMISM_TESTNET",e[e.ARBITRUM=42161]="ARBITRUM",e[e.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",e[e.ARBITRUM_NOVA=42170]="ARBITRUM_NOVA",e[e.AVALANCHE=43114]="AVALANCHE",e[e.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",e[e.FANTOM=250]="FANTOM",e[e.FANTOM_TESTNET=4002]="FANTOM_TESTNET",e[e.GNOSIS=100]="GNOSIS",e[e.AURORA=1313161554]="AURORA",e[e.AURORA_TESTNET=1313161556]="AURORA_TESTNET",e[e.BASE_GOERLI=84531]="BASE_GOERLI"}(RI||(RI={}));var jI=function(e){return WI("https://${network}-indexer.sequence.app",{network:e})},zI=function(e){return WI("https://${network}-relayer.sequence.app",{network:e})},qI=function(e){return WI("https://nodes.sequence.app/${network}",{network:e})},VI=(xI={},(0,_I.Z)(xI,RI.MAINNET,{chainId:RI.MAINNET,name:"mainnet",title:"Ethereum",blockExplorer:{name:"Etherscan",rootUrl:"https://etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"}),(0,_I.Z)(xI,RI.ROPSTEN,{chainId:RI.ROPSTEN,name:"ropsten",title:"Ropsten",testnet:!0,blockExplorer:{name:"Etherscan (Ropsten)",rootUrl:"https://ropsten.etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"}),(0,_I.Z)(xI,RI.RINKEBY,{chainId:RI.RINKEBY,name:"rinkeby",title:"Rinkeby",testnet:!0,blockExplorer:{name:"Etherscan (Rinkeby)",rootUrl:"https://rinkeby.etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",disabled:!0}),(0,_I.Z)(xI,RI.GOERLI,{chainId:RI.GOERLI,name:"goerli",title:"Goerli",testnet:!0,blockExplorer:{name:"Etherscan (Goerli)",rootUrl:"https://goerli.etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"}),(0,_I.Z)(xI,RI.KOVAN,{chainId:RI.KOVAN,name:"kovan",title:"Kovan",testnet:!0,blockExplorer:{name:"Etherscan (Kovan)",rootUrl:"https://kovan.etherscan.io/"}}),(0,_I.Z)(xI,RI.POLYGON,{chainId:RI.POLYGON,name:"polygon",title:"Polygon",blockExplorer:{name:"Polygonscan",rootUrl:"https://polygonscan.com/"}}),(0,_I.Z)(xI,RI.POLYGON_MUMBAI,{chainId:RI.POLYGON_MUMBAI,name:"mumbai",title:"Polygon Mumbai",testnet:!0,blockExplorer:{name:"Polygonscan (Mumbai)",rootUrl:"https://mumbai.polygonscan.com/"}}),(0,_I.Z)(xI,RI.POLYGON_ZKEVM,{chainId:RI.POLYGON_ZKEVM,name:"polygon-zkevm",title:"Polygon zkEVM",blockExplorer:{name:"Polygonscan (zkEVM)",rootUrl:"https://zkevm.polygonscan.com/"}}),(0,_I.Z)(xI,RI.BSC,{chainId:RI.BSC,name:"bsc",title:"BNB Smart Chain",blockExplorer:{name:"BSCScan",rootUrl:"https://bscscan.com/"}}),(0,_I.Z)(xI,RI.BSC_TESTNET,{chainId:RI.BSC_TESTNET,name:"bsc-testnet",title:"BNB Smart Chain Testnet",testnet:!0,blockExplorer:{name:"BSCScan (Testnet)",rootUrl:"https://testnet.bscscan.com/"}}),(0,_I.Z)(xI,RI.OPTIMISM,{chainId:RI.OPTIMISM,name:"optimism",title:"Optimism",blockExplorer:{name:"Etherscan (Optimism)",rootUrl:"https://optimistic.etherscan.io/"}}),(0,_I.Z)(xI,RI.OPTIMISM_TESTNET,{chainId:RI.OPTIMISM_TESTNET,name:"optimism-testnet",title:"Optimistic Kovan",testnet:!0,blockExplorer:{name:"Etherscan (Optimism Testnet)",rootUrl:"https://kovan-optimistic.etherscan.io/"}}),(0,_I.Z)(xI,RI.ARBITRUM,{chainId:RI.ARBITRUM,name:"arbitrum",title:"Arbitrum One",blockExplorer:{name:"Arbiscan",rootUrl:"https://arbiscan.io/"}}),(0,_I.Z)(xI,RI.ARBITRUM_GOERLI,{chainId:RI.ARBITRUM_GOERLI,name:"arbitrum-goerli",title:"Arbitrum Goerli",testnet:!0,blockExplorer:{name:"Arbiscan (Testnet)",rootUrl:"https://testnet.arbiscan.io/"}}),(0,_I.Z)(xI,RI.ARBITRUM_NOVA,{chainId:RI.ARBITRUM_NOVA,name:"arbitrum-nova",title:"Arbitrum Nova",blockExplorer:{name:"Nova Explorer",rootUrl:"https://nova-explorer.arbitrum.io/"}}),(0,_I.Z)(xI,RI.AVALANCHE,{chainId:RI.AVALANCHE,name:"avalanche",title:"Avalanche",blockExplorer:{name:"Snowtrace",rootUrl:"https://snowtrace.io/"}}),(0,_I.Z)(xI,RI.AVALANCHE_TESTNET,{chainId:RI.AVALANCHE_TESTNET,name:"avalanche-testnet",title:"Avalanche Testnet",testnet:!0,blockExplorer:{name:"Snowtrace (Testnet)",rootUrl:"https://testnet.snowtrace.io/"}}),(0,_I.Z)(xI,RI.FANTOM,{chainId:RI.FANTOM,name:"fantom",title:"Fantom",blockExplorer:{name:"FTMScan",rootUrl:"https://ftmscan.com/"}}),(0,_I.Z)(xI,RI.FANTOM_TESTNET,{chainId:RI.FANTOM_TESTNET,name:"fantom-testnet",title:"Fantom Testnet",testnet:!0,blockExplorer:{name:"FTMScan (Testnet)",rootUrl:"https://testnet.ftmscan.com/"}}),(0,_I.Z)(xI,RI.GNOSIS,{chainId:RI.GNOSIS,name:"gnosis",title:"Gnosis Chain",blockExplorer:{name:"Gnosis Chain Explorer",rootUrl:"https://blockscout.com/xdai/mainnet/"}}),(0,_I.Z)(xI,RI.AURORA,{chainId:RI.AURORA,name:"aurora",title:"Aurora",blockExplorer:{name:"Aurora Explorer",rootUrl:"https://aurorascan.dev/"}}),(0,_I.Z)(xI,RI.AURORA_TESTNET,{chainId:RI.AURORA_TESTNET,name:"aurora-testnet",title:"Aurora Testnet",blockExplorer:{name:"Aurora Explorer (Testnet)",rootUrl:"https://testnet.aurorascan.dev/"}}),(0,_I.Z)(xI,RI.BASE_GOERLI,{chainId:RI.BASE_GOERLI,name:"base-goerli",title:"Base Goerli",blockExplorer:{name:"Base Goerli Explorer",rootUrl:"https://goerli.basescan.org/"}}),xI),KI=DI([SI({},VI[RI.MAINNET],{rpcUrl:qI("mainnet"),relayer:{url:zI("mainnet")},indexerUrl:jI("mainnet")}),SI({},VI[RI.POLYGON],{rpcUrl:qI("polygon"),relayer:{url:zI("polygon")},indexerUrl:jI("polygon"),isDefaultChain:!0,isAuthChain:!0}),SI({},VI[RI.BSC],{rpcUrl:qI("bsc"),indexerUrl:jI("bsc"),relayer:{url:zI("bsc")}}),SI({},VI[RI.AVALANCHE],{rpcUrl:qI("avalanche"),indexerUrl:jI("avalanche"),relayer:{url:zI("avalanche")}}),SI({},VI[RI.ARBITRUM],{rpcUrl:qI("arbitrum"),indexerUrl:jI("arbitrum"),relayer:{url:zI("arbitrum")}}),SI({},VI[RI.ARBITRUM_NOVA],{rpcUrl:qI("arbitrum-nova"),indexerUrl:jI("arbitrum-nova"),relayer:{url:zI("arbitrum-nova")}}),SI({},VI[RI.OPTIMISM],{rpcUrl:qI("optimism"),indexerUrl:jI("optimism"),relayer:{url:zI("optimism")}}),SI({},VI[RI.POLYGON_ZKEVM],{rpcUrl:qI("polygon-zkevm"),indexerUrl:jI("polygon-zkevm"),relayer:{url:zI("polygon-zkevm")}}),SI({},VI[RI.GNOSIS],{rpcUrl:qI("gnosis"),indexerUrl:jI("gnosis"),relayer:{url:zI("gnosis")}})]),HI=DI([SI({},VI[RI.RINKEBY],{rpcUrl:qI("rinkeby"),relayer:{url:zI("rinkeby")},indexerUrl:jI("rinkeby")}),SI({},VI[RI.GOERLI],{rpcUrl:qI("goerli"),relayer:{url:zI("goerli")},indexerUrl:jI("goerli")}),SI({},VI[RI.POLYGON_MUMBAI],{rpcUrl:qI("mumbai"),relayer:{url:zI("mumbai")},indexerUrl:jI("mumbai"),isDefaultChain:!0,isAuthChain:!0}),SI({},VI[RI.BSC_TESTNET],{rpcUrl:qI("bsc-testnet"),relayer:{url:zI("bsc-testnet")},indexerUrl:jI("bsc-testnet")}),SI({},VI[RI.ARBITRUM_GOERLI],{rpcUrl:qI("arbitrum-goerli"),relayer:{url:zI("arbitrum-goerli")},indexerUrl:jI("arbitrum-goerli")}),SI({},VI[RI.BASE_GOERLI],{rpcUrl:qI("base-goerli"),relayer:{url:zI("base-goerli")},indexerUrl:jI("base-goerli")})]),JI={factory:"0xf9D09D634Fb818b05149329C1dcCFAeA53639d96",mainModule:"0xd01F11855bCcb95f88D7A48492F66410d4637313",mainModuleUpgradable:"0x7EFE6cE415956c5f80C6530cC6cc81b4808F6118",guestModule:"0x02390F3E6E5FD1C6786CB78FD3027C117a9955A7",sequenceUtils:"0xd130B43062D875a4B7aF3f8fc036Bc6e9D3E1B3E",libs:{requireFreshSigner:"0xE6B9B21C077F382333220a072e4c44280b873907"}},XI="2.0",$I=function(){function e(t,r){(0,N.Z)(this,e),this.sender=void 0,this.handler=void 0,this.sender=r,t&&this.setMiddleware(t)}return(0,k.Z)(e,[{key:"setMiddleware",value:function(e){this.handler=YI(e,this.sender.sendAsync)}},{key:"sendAsync",value:function(e,t,r){try{this.handler(e,t,r)}catch(n){t(n,void 0)}}}]),e}(),YI=function(e,t){if(0===e.length)return t;var r,n=function(e){return e.sendAsyncMiddleware?e.sendAsyncMiddleware:e};r=n(e[e.length-1])(t);for(var i=e.length-2;i>=0;i--)r=n(e[i])(r);return r};function QI(e){return void 0!==e&&void 0!==e.send&&void 0!==e.constructor.defaultUrl&&void 0!==e.detectNetwork&&void 0!==e.getSigner&&void 0!==e.perform}function eR(e){return void 0!==e&&void 0!==e.sendAsync}var tR,rR=0,nR=(0,k.Z)((function e(t,r){var n=this;(0,N.Z)(this,e),this.send=void 0,this.request=void 0,this.defaultChainId=void 0,this.sendAsync=function(e,t,r){n.send(e.method,e.params,r||n.defaultChainId).then((function(r){t(void 0,{jsonrpc:"2.0",id:e.id,result:r})})).catch((function(e){t(e,void 0)}))},this.defaultChainId=r,QI(t)?this.send=t.send.bind(t):eR(t)?this.send=function(e,r,i){return new Promise((function(o,a){t.sendAsync({jsonrpc:XI,id:++rR,method:e,params:r},(function(e,t){e?a(e):o(t?t.result:void 0)}),i||n.defaultChainId)}))}:this.send=t,this.request=function(e,t){return n.send(e.method,e.params,t)}})),iR=(0,k.Z)((function e(t){var r=this;(0,N.Z)(this,e),this.provider=t,this.sendAsync=function(e,t){r.provider.send(e.method,e.params).then((function(r){t(void 0,{jsonrpc:"2.0",id:e.id,result:r})})).catch((function(e){t(e,void 0)}))},this.send=this.sendAsync})),oR=function(){function e(t){(0,N.Z)(this,e),this.sendAsyncMiddleware=void 0,this.isAllowedFunc=void 0,this.isAllowedFunc=t||function(e){return!0},this.sendAsyncMiddleware=aR(this.isAllowedFunc)}return(0,k.Z)(e,[{key:"setIsAllowedFunc",value:function(e){this.isAllowedFunc=e,this.sendAsyncMiddleware=aR(this.isAllowedFunc)}}]),e}(),aR=function(e){return function(t){return function(r,n,i){if(!e(r))throw new Error("allowProvider middleware precondition is unmet.");t(r,n,i)}}},sR=function(){function e(t){var r=this;(0,N.Z)(this,e),this.cachableJsonRpcMethods=["net_version","eth_chainId","eth_accounts","sequence_getWalletContext","sequence_getNetworks"],this.cachableJsonRpcMethodsByBlock=["eth_call","eth_getCode"],this.cache=void 0,this.cacheByBlock=void 0,this.cacheByBlockResetLock=!1,this.onUpdateCallback=void 0,this.defaultChainId=void 0,this.sendAsyncMiddleware=function(e){return function(t,n,i){if(r.cachableJsonRpcMethods.includes(t.method)||r.cachableJsonRpcMethodsByBlock.includes(t.method)){var o=r.cacheKey(t.method,t.params,i||r.defaultChainId),a=r.getCacheValue(o);if(a&&""!==a)return void n(void 0,{jsonrpc:"2.0",id:t.id,result:a})}e(t,(function(e,i,o){if((r.cachableJsonRpcMethods.includes(t.method)||r.cachableJsonRpcMethodsByBlock.includes(t.method))&&i&&i.result&&r.shouldCacheResponse(t,i)){var a=r.cacheKey(t.method,t.params,o||r.defaultChainId);r.cachableJsonRpcMethods.includes(t.method)?r.setCacheValue(a,i.result):r.setCacheByBlockValue(a,i.result)}n(e,i)}),i||r.defaultChainId)}},this.cacheKey=function(e,t,r){var n="";return n=r?"".concat(r,":").concat(e,":"):":".concat(e,":"),t&&0!==t.length?n+JSON.stringify(t):n+"[]"},this.getCache=function(){return r.cache},this.setCache=function(e){r.cache=e,r.onUpdateCallback&&r.onUpdateCallback()},this.getCacheValue=function(e){return r.cache[e]?r.cache[e]:r.cacheByBlock[e]?r.cacheByBlock[e]:void 0},this.setCacheValue=function(e,t){r.cache[e]=t,r.onUpdateCallback&&r.onUpdateCallback(e,t)},this.setCacheByBlockValue=function(e,t){r.cacheByBlock[e]=t,r.cacheByBlockResetLock||(r.cacheByBlockResetLock=!0,setTimeout((function(){r.cacheByBlockResetLock=!1,r.cacheByBlock={}}),1500))},this.shouldCacheResponse=function(e,t){return!(!t||!t.result)&&!("eth_getCode"===e.method&&t.result.length<=2)},this.clearCache=function(){r.cache={},r.cacheByBlock={}},this.cache={},this.cacheByBlock={},this.defaultChainId=null==t?void 0:t.defaultChainId,null!=t&&t.blockCache?!0!==(null==t?void 0:t.blockCache)&&(this.cachableJsonRpcMethodsByBlock=null==t?void 0:t.blockCache):this.cachableJsonRpcMethodsByBlock=[]}return(0,k.Z)(e,[{key:"onUpdate",value:function(e){this.onUpdateCallback=e}}]),e}(),uR=(0,k.Z)((function e(t){var r=this;(0,N.Z)(this,e),this.options=void 0,this.sendAsyncMiddleware=function(e){return function(t,n,i){var o=t.id;switch(t.method){case"net_version":if(r.options.chainId)return void n(void 0,{jsonrpc:"2.0",id:o,result:"".concat(r.options.chainId)});break;case"eth_chainId":if(r.options.chainId)return void n(void 0,{jsonrpc:"2.0",id:o,result:ui(r.options.chainId)});break;case"eth_accounts":if(r.options.accountAddress)return void n(void 0,{jsonrpc:"2.0",id:o,result:[Jr(r.options.accountAddress)]});break;case"sequence_getWalletContext":if(r.options.walletContext)return void n(void 0,{jsonrpc:"2.0",id:o,result:r.options.walletContext})}e(t,n,i)}},this.options=t})),cR=function(e){return function(t,r,n){e(t,(function(e,t){if(!e&&t&&t.error)throw"string"===typeof t.error?new Error(t.error):new Error(t.error.message);r(e,t)}),n)}},fR=function(e){return function(t,r,n){var i=n?" chainId:".concat(n):"";oI.info("[provider request]".concat(i," id:").concat(t.id," method:").concat(t.method," params:"),t.params),e(t,(function(e,n){e?oI.warn("[provider response]".concat(i," id:").concat(t.id," method:").concat(t.method," params:"),t.params,"error:",e):oI.info("[provider response]".concat(i," id:").concat(t.id," method:").concat(t.method," params:"),t.params,"response:",n),r(e,n)}),n)}},lR=function(e){return function(t){return function(r,n,i){var o=e(r),a=r.id;switch(r.method){case"net_version":return void n(void 0,{jsonrpc:"2.0",id:a,result:"".concat(o)});case"eth_chainId":return void n(void 0,{jsonrpc:"2.0",id:a,result:ui(o)})}t(r,n,i)}}},hR=["personal_sign","eth_sign","eth_signTypedData","eth_signTypedData_v4","eth_sendTransaction","eth_sendRawTransaction","sequence_getWalletContext","sequence_getWalletConfig","sequence_getWalletState","sequence_getNetworks","sequence_updateConfig","sequence_publishConfig","sequence_gasRefundOptions","sequence_getNonce","sequence_relay","eth_decrypt","eth_getEncryptionPublicKey","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],dR=(0,k.Z)((function e(t){var r=this;(0,N.Z)(this,e),this.provider=void 0,this.sendAsyncMiddleware=function(e){return function(t,n,i){hR.includes(t.method)?r.provider.sendAsync(t,n,i):e(t,n,i)}},this.provider=t})),pR=function(){function e(t){var r=this;(0,N.Z)(this,e),this.privateJsonRpcMethods=["net_version","eth_chainId","eth_accounts"].concat(hR),this.provider=void 0,this.rpcUrl=void 0,this.sendAsyncMiddleware=function(e){return function(t,n){!r.provider||r.privateJsonRpcMethods.includes(t.method)?(oI.debug("[public-provider] sending request to signer window",t.method),e(t,n)):r.provider.send(t.method,t.params).then((function(e){n(void 0,{jsonrpc:"2.0",id:t.id,result:e})})).catch((function(e){return n(e)}))}},t&&this.setRpcUrl(t)}return(0,k.Z)(e,[{key:"getRpcUrl",value:function(){return this.rpcUrl}},{key:"setRpcUrl",value:function(e){e&&""!==e?(this.rpcUrl=e,this.provider=new Ux(e)):(this.rpcUrl=void 0,this.provider=void 0)}}]),e}(),vR=(0,k.Z)((function e(){var t=this;(0,N.Z)(this,e),this.singleflightJsonRpcMethods=["eth_chainId","net_version","eth_call","eth_getCode","eth_blockNumber","eth_getBalance","eth_getStorageAt","eth_getTransactionCount","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_getBlockByHash","eth_getBlockByNumber","eth_getTransactionByHash","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionReceipt","eth_getUncleByBlockHashAndIndex","eth_getUncleByBlockNumberAndIndex","eth_getLogs"],this.inflight=void 0,this.sendAsyncMiddleware=function(e){return function(r,n,i){if(t.singleflightJsonRpcMethods.includes(r.method)){var o=t.requestKey(r.method,r.params||[],i);t.inflight[o]?t.inflight[o].push({id:r.id,callback:n}):(t.inflight[o]=[],e(r,(function(e,r,i){n(e,r);for(var a=0;a<t.inflight[o].length;a++){var s=t.inflight[o][a];e?s.callback(e,r):r&&s.callback(void 0,{jsonrpc:"2.0",id:s.id,result:r.result})}delete t.inflight[o]}),i))}else e(r,n,i)}},this.requestKey=function(e,t,r){var n="";return n=r?"".concat(r,":").concat(e,":"):":".concat(e,":"),t&&0!==t.length?n+JSON.stringify(t):n+"[]"},this.inflight={}})),gR=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r),(i=t.call(this,e,null==n?void 0:n.chainId))._chainId=void 0,i._sender=void 0,i.send=function(e,t){return i._sender.send(e,t)},i.fetch=function(e,t){var r={method:e,params:t,id:i._nextId++,jsonrpc:"2.0"};return Mw(i.connection,JSON.stringify(r),mR).then((function(e){return e}),(function(e){throw e}))};var o=null==n?void 0:n.chainId,a=null==n?void 0:n.middlewares,s=null==n?void 0:n.blockCache;i._chainId=o;var u=new $I(null!=a?a:[new uR({chainId:o}),new vR,new sR({defaultChainId:o,blockCache:s})],new nR(i.fetch,o));return i._sender=new nR(u,o),i}return(0,k.Z)(r,[{key:"getNetwork",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r,n,i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._chainId)){e.next=8;break}return r=VI[t],n=(null==r?void 0:r.name)||"",i=null==r?void 0:r.ensAddress,e.abrupt("return",{name:n,chainId:t,ensAddress:i});case 8:return e.next=10,this.send("eth_chainId",[]);case 10:return o=e.sent,this._chainId=lS.from(o).toNumber(),e.abrupt("return",this.getNetwork());case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(Ux);function mR(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function yR(){return yR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yR.apply(this,arguments)}function bR(e,t){return ER.apply(this,arguments)}function ER(){return(ER=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),n=r instanceof Function?r(e.t0):r,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function wR(e,t){return e.reduce((function(e,r,n){return t(r,n)?e[0].push(r):e[1].push(r),e}),[[],[]])}function NR(e){if(void 0===e)return"latest";switch(e){case"earliest":case"latest":case"pending":return e}return lS.from(e)}!function(e){e.ethCall="eth_call",e.ethGetBalance="eth_getBalance",e.ethGetCode="eth_getCode"}(tR||(tR={}));var kR={batchSize:50,timeWindow:50,contract:JI.sequenceUtils,verbose:!1},AR=function(){function e(t){var r=this;(0,N.Z)(this,e);var n=this;if(this.batchableJsonRpcMethods=[tR.ethCall,tR.ethGetCode,tR.ethGetBalance],this.multicallInterface=new nr(b.sequenceUtils.abi),this.options=void 0,this.timeout=void 0,this.queue=[],this.scheduleExecution=function(){r.queue.length>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.run,r.options.timeWindow))},this.handle=function(e,t,n){return r.batchableJsonRpcMethods.find((function(e){return e===t.method}))?(r.queue.push({request:t,callback:n,next:e}),r.options.verbose&&console.log("Scheduling call",t.method),void r.scheduleExecution()):(r.options.verbose&&console.log("Forwarded call",t.method),e(t,n))},this.run=(0,G.Z)((0,B.Z)().mark((function e(){var t,r,i,o,a,s,u,c,f,l,h,d,p,v;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.options.verbose&&console.log("Processing multicall"),0!==(t=Math.min(n.options.batchSize,n.queue.length))){e.next=4;break}return e.abrupt("return");case 4:if(1!==t){e.next=9;break}return n.forward(n.queue[0]),n.queue=[],n.options.verbose&&console.log("Skip multicall, single item"),e.abrupt("return");case 9:if(n.options.verbose&&console.log("Resolving",t),r=n.queue.slice(0,t),n.queue=t===n.queue.length?[]:n.queue.slice(t),n.options.verbose&&console.log("Updated queue",n.queue.length),0!==n.queue.length&&n.scheduleExecution(),i=r[0].next,a=wR(r,(function(e){try{if(e.next!==i)return!1;switch(e.request.method){case tR.ethCall:if(e.request.params[0].from||e.request.params[0].gasPrice||e.request.params[0].value)return!1;case tR.ethGetBalance:case tR.ethGetCode:var t=NR(e.request.params[1]);if(void 0===o&&(o=t),(r=t)!==(n=o)&&!(lS.isBigNumber(r)?lS.isBigNumber(n)&&r.eq(n):!lS.isBigNumber(n)&&r===n))return!1}return!0}catch(a){return!1}var r,n})),s=(0,D.Z)(a,2),r=s[0],0===(u=s[1]).length){e.next=21;break}if(n.options.verbose&&console.log("Forwarding incompatible calls",u.length),n.forward(u),0!==r.length){e.next=21;break}return e.abrupt("return");case 21:if(c=r.map((function(e){try{switch(e.request.method){case tR.ethCall:return{delegateCall:!1,revertOnError:!1,target:e.request.params[0].to,data:e.request.params[0].data,gasLimit:e.request.params[0].gas?e.request.params[0].gas:0,value:0};case tR.ethGetCode:return{delegateCall:!1,revertOnError:!1,target:n.options.contract,gasLimit:0,value:0,data:n.multicallInterface.encodeFunctionData(n.multicallInterface.getFunction("callCode"),[e.request.params[0]])};case tR.ethGetBalance:return{delegateCall:!1,revertOnError:!1,target:n.options.contract,gasLimit:0,value:0,data:n.multicallInterface.encodeFunctionData(n.multicallInterface.getFunction("callBalanceOf"),[e.request.params[0]])};default:return null}}catch(t){return null}})),f=wR(r,(function(e,t){return void 0!==c[t]})),l=(0,D.Z)(f,2),r=l[0],u=l[1],c=c.filter((function(e){return e})),0===u.length){e.next=29;break}if(n.options.verbose&&console.log("Forwarding calls on error",u.length),n.forward(u),0!==r.length){e.next=29;break}return e.abrupt("return");case 29:e.prev=29,h=n.multicallInterface.encodeFunctionData(n.multicallInterface.getFunction("multiCall"),[c]),e.next=37;break;case 33:return e.prev=33,e.t0=e.catch(29),n.forward(r),e.abrupt("return");case 37:return d=uI(),e.next=40,bR(sI(i)({id:d,jsonrpc:XI,method:tR.ethCall,params:[{to:n.options.contract,value:0,data:h},lS.isBigNumber(o)?o.toNumber():o]}),(function(e){return{jsonrpc:XI,id:d,result:void 0,error:e}}));case 40:if(!(p=e.sent).error){e.next=43;break}return e.abrupt("return",n.forward(r));case 43:e.prev=43,v=n.multicallInterface.decodeFunctionResult(n.multicallInterface.getFunction("multiCall"),p.result),e.next=51;break;case 47:return e.prev=47,e.t1=e.catch(43),n.forward(r),e.abrupt("return");case 51:n.options.verbose&&console.log("Got response for",r.length),r.forEach((function(e,t){if(v[0][t])switch(e.request.method){case tR.ethCall:e.callback(void 0,{jsonrpc:e.request.jsonrpc,id:e.request.id,result:v[1][t]});break;case tR.ethGetCode:e.callback(void 0,{jsonrpc:e.request.jsonrpc,id:e.request.id,result:Ht.decode(["bytes"],v[1][t])[0]});break;case tR.ethGetBalance:e.callback(void 0,{jsonrpc:e.request.jsonrpc,id:e.request.id,result:Ht.decode(["uint256"],v[1][t])[0]})}else n.forward(e)}));case 53:case"end":return e.stop()}}),e,null,[[29,33],[43,47]])}))),this.options=t?yR({},e.DefaultOptions,t):e.DefaultOptions,this.options.batchSize<=0)throw new Error("Invalid batch size of ".concat(this.options.batchSize))}return(0,k.Z)(e,[{key:"forward",value:function(e){Array.isArray(e)?e.forEach((function(e){return e.next(e.request,e.callback)})):e.next(e.request,e.callback)}}],[{key:"isMulticall",value:function(t){return t&&void 0!==t.handle&&void 0!==t.conf&&e.isMulticallOptions(t.options)}},{key:"isMulticallOptions",value:function(e){return void 0!==e&&void 0!==e.batchSize&&void 0!==e.timeWindow&&void 0!==e.contract}}]),e}();AR.DefaultOptions=yR({},kR);var xR,_R=["getNetwork","getBlockNumber","getGasPrice","getTransactionCount","getStorageAt","sendTransaction","estimateGas","getBlock","getTransaction","getTransactionReceipt","getLogs","emit","litenerCount","addListener","removeListener","waitForTransaction","detectNetwork","getBlockWithTransactions"],SR=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i,o;return(0,N.Z)(this,r),i=t.call(this,e.getNetwork()),o=(0,nm.Z)(i),i.provider=e,i.multicall=void 0,i.listenerCount=i.provider.listenerCount,i.getResolver=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=o.provider).getResolver){e.next=12;break}return e.t0=r,e.next=5,t;case 5:return e.t1=e.sent,e.next=8,e.t0.getResolver.call(e.t0,e.t1);case 8:if(n=e.sent){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",new yx(o,n.address,n.name));case 12:return e.t2=r,e.next=15,t;case 15:return e.t3=e.sent,e.abrupt("return",e.t2.getResolver.call(e.t2,e.t3));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.next=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t.method,e.next=e.t0===tR.ethCall?4:e.t0===tR.ethGetCode?12:e.t0===tR.ethGetBalance?20:28;break;case 4:return e.t1=o,e.t2=t,e.t3=r,e.next=9,o.provider.call(t.params[0],t.params[1]);case 9:return e.t4=e.sent,e.t1.callback.call(e.t1,e.t2,e.t3,e.t4),e.abrupt("break",28);case 12:return e.t5=o,e.t6=t,e.t7=r,e.next=17,o.provider.getCode(t.params[0],t.params[1]);case 17:return e.t8=e.sent,e.t5.callback.call(e.t5,e.t6,e.t7,e.t8),e.abrupt("break",28);case 20:return e.t9=o,e.t10=t,e.t11=r,e.next=25,o.provider.getBalance(t.params[0],t.params[1]);case 25:return e.t12=e.sent,e.t9.callback.call(e.t9,e.t10,e.t11,e.t12),e.abrupt("break",28);case 28:e.next=33;break;case 30:e.prev=30,e.t13=e.catch(0),o.callback(t,r,void 0,e.t13);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,r){return e.apply(this,arguments)}}(),i.multicall=AR.isMulticall(n)?n:new AR(n),_R.forEach((function(t){void 0!==e[t]&&(i[t]=function(){return e[t].apply(e,arguments)})})),i}return(0,k.Z)(r,[{key:"callback",value:function(e,t,r,n){t(n,{jsonrpc:XI,id:e.id,result:r,error:n})}},{key:"call",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rpcCall(tR.ethCall,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getCode",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rpcCall(tR.ethGetCode,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.rpcCall(tR.ethGetBalance,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"rpcCall",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=uI(),n=s.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=s[o];return e.next=4,sI(this.multicall.handle)(this.next,{jsonrpc:XI,id:r,method:t,params:i});case 4:return a=e.sent,e.abrupt("return",a.result);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(wx),IR=function(){function e(t,r){var n=this;if((0,N.Z)(this,e),this.provider=t,this.multicall=void 0,this.multicall=AR.isMulticall(r)?r:new AR(r),t.send){var i=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(r,n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.send(r,n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();this.send=function(e,t){n.multicall.handle(i,e,t)}}if(t.sendAsync){var o=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(r,n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.sendAsync(r,n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();this.sendAsync=function(e,t){n.multicall.handle(o,e,t)}}}return(0,k.Z)(e,[{key:"isMetaMask",get:function(){return this.provider.isMetaMask}},{key:"isStatus",get:function(){return this.provider.isStatus}}]),e}(),RR=Object.freeze({__proto__:null,ProxyMethods:_R,MulticallProvider:SR,MulticallExternalProvider:IR,multicallMiddleware:function(e){return function(t){var r=AR.isMulticall(e)?e:new AR(e);return function(e,n){return r.handle(t,e,n)}}}}),TR="0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3",CR=10,PR="@sequence.config.imageHashes",OR=function(e){return"@sequence.config.".concat(e)};try{xR=localStorage}catch($O){var UR=new Map;xR={getItem:function(e){var t;return null!=(t=UR.get(e))?t:null},setItem:function(e,t){return UR.set(e,t)},removeItem:function(e){return UR.delete(e)}}}function MR(e){var t,r=JSON.parse(null!=(t=xR.getItem(OR(e)))?t:"null");return r?(FR(e),r):void 0}function FR(e){var t,r=JSON.parse(null!=(t=xR.getItem(PR))?t:"[]");for((r=r.filter((function(t){return t!==e}))).push(e);r.length>CR;)xR.removeItem(OR(r.shift()));xR.setItem(PR,JSON.stringify(r))}var DR=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={threshold:t,signers:[]},r.forEach(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.signers,e.t1=t.weight,!W_.isSigner(t.signer)){e.next=8;break}return e.next=5,t.signer.getAddress();case 5:e.t2=e.sent,e.next=9;break;case 8:e.t2=t.signer;case 9:e.t3=e.t2,e.t4={weight:e.t1,address:e.t3},e.t0.push.call(e.t0,e.t4);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),LR(n)){e.next=4;break}throw new Error("wallet config is not usable");case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),LR=function(e){return e.signers.reduce((function(e,t){return lS.from(t.weight).add(e)}),zS).gte(lS.from(e.threshold))},ZR=function(e,t){if(0===t.length)return!0;var r=e.signers.map((function(e){return Jr(e.address)})),n=t.map((function(e){return Jr(e)})),i=!0;return n.forEach((function(e){r.includes(e)||(i=!1)})),i},BR=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"===typeof t){var i=uc(Cf(["bytes","bytes32"],[TR,pi(r.mainModule,32)]));return Jr(fi(uc(Cf(["bytes1","address","bytes32","bytes32"],["0xff",r.factory,t,i])),12))}return t.address&&!n?t.address:e(GR(t),r)},GR=function(e){var t=(e=WR(e)).signers.reduce((function(e,t){return uc(Ht.encode(["bytes32","uint8","address"],[e,t.weight,t.address]))}),Cf(["uint256"],[e.threshold]));return function(e,t){xR.setItem(OR(e),JSON.stringify(t)),FR(e)}(t,e),t},WR=function(e){e.signers.sort((function(e,t){return zR(e.address,t.address)})),e.signers.forEach((function(e){return e.address=Jr(e.address)})),e.address&&(e.address=Jr(e.address));var t=e.signers.map((function(e){return e.address})),r=t.filter((function(e,r){return t.indexOf(e)!==r}));if(r.length>0)throw new Error("invalid wallet config: duplicate signer addresses detected in the config, ${signerDupes}");return e},jR=function(e,t){return GR(e)===GR(t)},zR=function(e,t){var r=lS.from(e),n=lS.from(t);return r.lt(n)?-1:r.eq(n)?0:1};function qR(e,t){var r,n=function(e){return{weight:lS.from(e.weight).toNumber(),address:Jr(e.address)}},i=e.signers.map(n),o=t.set?t.set.map(n):[],a=t.del?t.del.map((function(e){return Jr(e.address)})):[],s=o.map((function(e){return e.address})),u=(r=i.filter((function(e){return-1===a.indexOf(e.address)&&-1===s.indexOf(e.address)}))).concat.apply(r,(0,Z.Z)(o));return WR({address:e.address,threshold:t.threshold?lS.from(t.threshold).toNumber():e.threshold,signers:u})}function VR(e,t){return WR({threshold:lS.from(e).toNumber(),signers:t.map((function(e){return{weight:lS.from(e.weight).toNumber(),address:Jr(e.address)}}))})}var KR=(0,k.Z)((function e(){(0,N.Z)(this,e),this.findCurrentConfig=void 0,this.findLastWalletOfInitialSigner=void 0}));function HR(){return HR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HR.apply(this,arguments)}var JR,XR=(0,k.Z)((function e(t){(0,N.Z)(this,e);var r=this;this.authProvider=t,this.findCurrentConfig=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var n,i,o,a,s,u,c,f,l,h,d,p,v;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.provider,i=t.context,o=t.ignoreIndex,a=t.requireIndex,s=t.skipCache,u=Jr(t.address),oI.info("[findCurrentConfig] address:".concat(u,", ignoreIndex:").concat(o,", requireIndex:").concat(a)),!a||!o){e.next=5;break}throw Error("findCurrentConfig: can't ignore index and require index");case 5:return c=n.getNetwork(),f=t.knownConfigs?t.knownConfigs:[],e.next=9,r.findCurrentImageHash(i,n,u,f,s);case 9:if(l=e.sent,h=l.imageHash,d=l.config,void 0!==h){e.next=14;break}return e.abrupt("return",{config:void 0});case 14:return e.next=16,r.findConfigForImageHash(i,h,d?[d].concat((0,Z.Z)(f)):f,s);case 16:return p=e.sent,e.next=19,c;case 19:return v=e.sent.chainId,e.abrupt("return",{config:p?HR({},p,{chainId:v,address:u}):void 0});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.findLastWalletOfInitialSigner=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var n,i,o,a,s,u,c,f,l;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.signer,i=t.context,o=t.ignoreIndex,a=t.requireIndex,oI.info("[findLastWalletOfInitialSigner] signer:".concat(n)),!a||!o){e.next=4;break}throw Error("findCurrentConfig: can't ignore index and require index");case 4:if(s=new IA(i.sequenceUtils,b.sequenceUtils.abi,r.authProvider),!o){e.next=9;break}e.t0=0,e.next=12;break;case 9:return e.next=11,s.lastSignerUpdate(n);case 11:e.t0=e.sent.toNumber();case 12:if(u=e.t0,!a||0!==u){e.next=15;break}return e.abrupt("return",{wallet:void 0});case 15:return c=s.filters.RequiredSigner(null,n),e.next=18,r.findLatestLog(r.authProvider,HR({},c,{fromBlock:u,toBlock:0!==u?u:"latest"}));case 18:if(void 0!==(f=e.sent)){e.next=22;break}return oI.warn("publishConfig: wallet config last log not found"),e.abrupt("return",{wallet:void 0});case 22:return l=s.interface.decodeEventLog("RequiredSigner",f.data,f.topics),e.abrupt("return",{wallet:l._wallet});case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.findConfigForImageHash=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n){var i,o,a,s,u,c,f,l,h,d,p=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.length>3&&void 0!==p[3]&&p[3],!(o=(p.length>2&&void 0!==p[2]?p[2]:[]).find((function(e){return GR(e)===n})))){e.next=5;break}return e.abrupt("return",o);case 5:if(i){e.next=9;break}if(!(a=MR(n))){e.next=9;break}return e.abrupt("return",a);case 9:return oI.info("[findConfigForImageHash] image:".concat(n)),s=new IA(t.sequenceUtils,b.sequenceUtils.abi,r.authProvider),e.next=13,s.lastImageHashUpdate(n);case 13:return u=e.sent.toNumber(),c=s.filters.RequiredConfig(void 0,n),e.next=17,r.findLatestLog(r.authProvider,HR({},c,{fromBlock:u,toBlock:0!==u?u:"latest"}));case 17:if(void 0!==(f=e.sent)){e.next=20;break}return e.abrupt("return",void 0);case 20:return l=s.interface.decodeEventLog("RequiredConfig",f.data,f.topics),h=Ht.decode(["tuple(\n        uint256 weight,\n        address signer\n      )[]"],l._signers)[0],d={threshold:lS.from(l._threshold).toNumber(),signers:h.map((function(e){return{address:e.signer,weight:lS.from(e.weight).toNumber()}}))},GR(d),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.findCurrentImageHash=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n,i){var o,a,s,u,c,f,l,h,d,p,v,g,m,y,E=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=E.length>3&&void 0!==E[3]?E[3]:[],a=E.length>4?E[4]:void 0,oI.info("[findCurrentImageHash] address:".concat(i)),s=new IA(i,b.mainModuleUpgradable.abi,n),e.next=6,s.functions.imageHash.call([]).catch((function(){return[]}));case 6:if(void 0===(u=e.sent)[0]){e.next=9;break}return e.abrupt("return",{imageHash:u[0],config:a?void 0:MR(u[0])});case 9:if(c=Jr(i),!(f=o.find((function(e){return BR(e,t,!0)===c})))){e.next=13;break}return e.abrupt("return",{imageHash:GR(f),config:f});case 13:return l=new IA(t.sequenceUtils,b.sequenceUtils.abi,r.authProvider),e.next=16,l.knownImageHashes(i);case 16:if("0x0000000000000000000000000000000000000000000000000000000000000000"===(h=e.sent)){e.next=21;break}if(BR(h,t)===i){e.next=20;break}throw Error("findCurrentImageHash: inconsistent RequireUtils results");case 20:return e.abrupt("return",{imageHash:h});case 21:return d=l.filters.RequiredConfig(i),e.next=24,r.findFirstLog(r.authProvider,d);case 24:if(void 0===(p=e.sent)){e.next=32;break}if(v=l.interface.decodeEventLog("RequiredConfig",p.data,p.topics),g=Ht.decode(["tuple(\n          uint256 weight,\n          address signer\n        )[]"],v._signers)[0],m={threshold:lS.from(v._threshold).toNumber(),signers:g.map((function(e){return{address:e.signer,weight:lS.from(e.weight).toNumber()}}))},y=GR(m),BR(y,t)!==i){e.next=32;break}return e.abrupt("return",{imageHash:y,config:m});case 32:return e.abrupt("return",{});case 33:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.findLatestLog=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n){var i,o,a,s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("latest"!==n.toBlock){e.next=6;break}return e.next=3,t.getBlockNumber();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=n.toBlock;case 7:return i=e.t0,0===(o=n.fromBlock)&&oI.warn("findLatestLog: expensive getLogs query fromBlock 0 toBlock ".concat(i)),e.prev=10,e.next=13,t.getLogs(HR({},n,{toBlock:i}));case 13:return a=e.sent,e.abrupt("return",0===a.length?void 0:a[a.length-1]);case 17:return e.prev=17,e.t1=e.catch(10),s=Math.floor((i-o)/2+o),e.next=22,r.findLatestLog(t,HR({},n,{fromBlock:s,toBlock:i}));case 22:if(void 0===(u=e.sent)){e.next=25;break}return e.abrupt("return",u);case 25:return e.abrupt("return",r.findLatestLog(t,HR({},n,{fromBlock:o,toBlock:s})));case 26:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,r){return e.apply(this,arguments)}}(),this.findFirstLog=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n){var i,o,a,s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("latest"!==n.toBlock&&n.toBlock){e.next=6;break}return e.next=3,t.getBlockNumber();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=n.toBlock;case 7:return i=e.t0,0===(o=n.fromBlock?n.fromBlock:0)&&oI.warn("findFirstLog: expensive getLogs query fromBlock 0 toBlock ".concat(i)),e.prev=10,e.next=13,t.getLogs(HR({},n,{fromBlock:o,toBlock:i}));case 13:return a=e.sent,e.abrupt("return",0===a.length?void 0:a[0]);case 17:return e.prev=17,e.t1=e.catch(10),s=Math.floor((i-o)/2+o),e.next=22,r.findFirstLog(t,HR({},n,{fromBlock:o,toBlock:s}));case 22:if(void 0===(u=e.sent)){e.next=25;break}return e.abrupt("return",u);case 25:return e.abrupt("return",r.findFirstLog(t,HR({},n,{fromBlock:s,toBlock:i})));case 26:case"end":return e.stop()}}),e,null,[[10,17]])})));return function(t,r){return e.apply(this,arguments)}}()}));function $R(e){return void 0!==e.address&&!YR(e)}function YR(e){return QR(e)||eT(e)||tT(e)}function QR(e){var t=e;return void 0!==t.signature&&void 0===t.address}function eT(e){var t=e;return void 0!==t.r&&void 0!==t.s&&void 0!==t.v&&void 0!==t.t}function tT(e){var t=e;return void 0!==t.address&&void 0!==t.signature}!function(e){e[e.EOA=0]="EOA",e[e.Address=1]="Address",e[e.Full=2]="Full"}(JR||(JR={}));var rT=function(e){if("string"!==typeof e)return e;for(var t=e.replace("0x",""),r=lS.from("0x".concat(t.slice(0,4))).toNumber(),n=[],i=4;i<t.length;){var o=lS.from(t.slice(i,i+2)).toNumber();i+=2;var a=lS.from("0x".concat(t.slice(i,i+2))).toNumber();switch(i+=2,o){case JR.Address:var s=Jr(t.slice(i,i+40));i+=40,n.push({weight:a,address:s});break;case JR.EOA:var u=ri("0x".concat(t.slice(i,i+132)));i+=132;var c=vi(u.slice(0,65)),f=c.r,l=c.s,h=c.v,d=lS.from(u[u.length-1]).toNumber();n.push({weight:a,signature:u,r:f,s:l,v:h,t:d});break;case JR.Full:var p=Jr(t.slice(i,i+40));i+=40;var v=lS.from("0x".concat(t.slice(i,i+4))).mul(2).toNumber();i+=4;var g=ri("0x".concat(t.slice(i,i+v)));i+=v,n.push({weight:a,address:p,signature:g});break;default:throw Error("Signature type not supported")}}return{threshold:r,signers:n}},nT=3,iT=function(e){var t=ri(e.signature);return HR({},e,vi(t.slice(0,65)),{t:lS.from(t[t.length-1]).toNumber()})},oT=function(e,t){var r=eT(t)?t:iT(t);switch(r.t){case 1:return Jv(e,{r:r.r,s:r.s,v:r.v});case 2:return Jv(uc(Cf(["string","bytes32"],["\x19Ethereum Signed Message:\n32",e])),{r:r.r,s:r.s,v:r.v});default:throw new Error("Unknown signature")}},aT=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map((function(e){return"string"===typeof e?rT(e):e})).reduce((function(e,t){return sT(e,t)}))},sT=function(e,t){return{threshold:e.threshold,signers:e.signers.map((function(e,r){return $R(e)?t.signers[r]:e}))}},uT=function e(t){if("string"===typeof t)return e(rT(t));var r=t.signers.map((function(e){if($R(e))return Cf(["uint8","uint8","address"],[JR.Address,e.weight,e.address]);if(eT(e))return Cf(["uint8","uint8","bytes32","bytes32","uint8","uint8"],[JR.EOA,e.weight,e.r,e.s,e.v,e.t]);if(tT(e)){var t=ri(e.signature).length;return Cf(["uint8","uint8","address","uint16","bytes"],[JR.Full,e.weight,e.address,t,e.signature])}if(QR(e))return Cf(["uint8","uint8","bytes"],[JR.EOA,e.weight,e.signature]);throw Error("Unkwnown signature part type")}));return Cf(["uint16"].concat((0,Z.Z)(Array(r.length).fill("bytes"))),[t.threshold].concat((0,Z.Z)(r)))};function cT(e,t){if($R(e))return e.address;if(tT(e))return e.address;if(eT(e)||QR(e))return oT(t,e);throw Error("Unkwnown signature part type")}function fT(e,t,r){var n=e.signers.map((function(e){return cT(e,r)}));return{threshold:t.threshold,signers:t.signers.map((function(t){var r=n.indexOf(t.address);return-1!==r?HR({},e.signers[r],{weight:t.weight}):{weight:t.weight,address:t.address}}))}}function lT(e,t){return hT.apply(this,arguments)}function hT(){return hT=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,u,c;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new RR.MulticallProvider(t),e.next=3,Promise.all(r.signers.map(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=HR,e.t1={},e.t2=t,e.t3=r,e.t4=s,e.next=7,n.getCode(t.address);case 7:return e.t5=e.sent,e.t6=e.t4.arrayify.call(e.t4,e.t5).length,e.t7=0===e.t6,e.t8={index:e.t3,isEOA:e.t7},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t8));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:return i=e.sent,o=i.sort((function(e,t){return e.weight-t.weight})),a=0,o=o.map((function(e){return a>=r.threshold||e.isEOA?e:(a+=e.weight,HR({},e,{willSign:!0}))})),a<r.threshold&&(o=o.map((function(e){return e.willSign||a>=r.threshold?e:(a+=e.weight,HR({},e,{willSign:!0}))}))),u=ri("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a01b02"),c=o.sort((function(e,t){return e.index-t.index})),e.abrupt("return",{threshold:r.threshold,signers:c.map((function(e){return e.willSign?e.isEOA?{weight:e.weight,signature:u}:{weight:e.weight,address:e.address,signature:uT({threshold:1,signers:[{address:HE.createRandom().address,weight:1},{weight:1,signature:u}]})+ui(nT).substring(2)}:{address:e.address,weight:e.weight}}))});case 11:case"end":return e.stop()}}),e)}))),hT.apply(this,arguments)}function dT(){return dT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dT.apply(this,arguments)}var pT,vT,gT,mT,yT,bT,ET,wT="v1",NT="v0.4.0",kT="3254a537c563d6b612b7ab5365c305664abb5951";!function(e){e.UNKNOWN="UNKNOWN",e.ERC20="ERC20",e.ERC721="ERC721",e.ERC1155="ERC1155",e.SEQUENCE_WALLET="SEQUENCE_WALLET",e.ERC20_BRIDGE="ERC20_BRIDGE",e.ERC721_BRIDGE="ERC721_BRIDGE",e.ERC1155_BRIDGE="ERC1155_BRIDGE"}(pT||(pT={})),function(e){e.UNKNOWN="UNKNOWN",e.BLOCK_ADDED="BLOCK_ADDED",e.BLOCK_REMOVED="BLOCK_REMOVED"}(vT||(vT={})),function(e){e.UNKNOWN="UNKNOWN",e.TOKEN_TRANSFER="TOKEN_TRANSFER",e.NATIVE_TOKEN_TRANSFER="NATIVE_TOKEN_TRANSFER",e.SEQUENCE_TXN="SEQUENCE_TXN"}(gT||(gT={})),function(e){e.UNKNOWN="UNKNOWN",e.SEND="SEND",e.RECEIVE="RECEIVE"}(mT||(mT={})),function(e){e.FAILED="FAILED",e.SUCCESSFUL="SUCCESSFUL"}(yT||(yT={})),function(e){e.LegacyTxnType="LegacyTxnType",e.AccessListTxnType="AccessListTxnType",e.DynamicFeeTxnType="DynamicFeeTxnType"}(bT||(bT={})),function(e){e.DESC="DESC",e.ASC="ASC"}(ET||(ET={}));var AT,xT=function(){function e(t,r){var n=this;(0,N.Z)(this,e),this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Indexer/",this.ping=function(e){return n.fetch(n.url("Ping"),_T({},e)).then((function(e){return ST(e).then((function(e){return{status:e.status}}))}))},this.version=function(e){return n.fetch(n.url("Version"),_T({},e)).then((function(e){return ST(e).then((function(e){return{version:e.version}}))}))},this.runtimeStatus=function(e){return n.fetch(n.url("RuntimeStatus"),_T({},e)).then((function(e){return ST(e).then((function(e){return{status:e.status}}))}))},this.getChainID=function(e){return n.fetch(n.url("GetChainID"),_T({},e)).then((function(e){return ST(e).then((function(e){return{chainID:e.chainID}}))}))},this.getEtherBalance=function(e,t){return n.fetch(n.url("GetEtherBalance"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{balance:e.balance}}))}))},this.getTokenBalances=function(e,t){return n.fetch(n.url("GetTokenBalances"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{page:e.page,balances:e.balances}}))}))},this.getTokenSupplies=function(e,t){return n.fetch(n.url("GetTokenSupplies"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{page:e.page,contractType:e.contractType,tokenIDs:e.tokenIDs}}))}))},this.getTokenSuppliesMap=function(e,t){return n.fetch(n.url("GetTokenSuppliesMap"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{supplies:e.supplies}}))}))},this.getBalanceUpdates=function(e,t){return n.fetch(n.url("GetBalanceUpdates"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{page:e.page,balances:e.balances}}))}))},this.getTransactionHistory=function(e,t){return n.fetch(n.url("GetTransactionHistory"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{page:e.page,transactions:e.transactions}}))}))},this.syncBalance=function(e,t){return n.fetch(n.url("SyncBalance"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{}}))}))},this.fetchTransactionReceipt=function(e,t){return n.fetch(n.url("FetchTransactionReceipt"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{receipt:e.receipt}}))}))},this.fetchTransactionReceiptWithFilter=function(e,t){return n.fetch(n.url("FetchTransactionReceiptWithFilter"),_T(e,t)).then((function(e){return ST(e).then((function(e){return{receipt:e.receipt}}))}))},this.hostname=t,this.fetch=function(e,t){return r(e,t)}}return(0,k.Z)(e,[{key:"url",value:function(e){return this.hostname+this.path+e}}]),e}(),_T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{method:"POST",headers:dT({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{"Content-Type":"application/json"}),body:JSON.stringify(e||{})}},ST=function(e){return e.text().then((function(t){var r;try{r=JSON.parse(t)}catch(n){throw{code:"unknown",msg:"expecting JSON, got: ".concat(t),status:e.status}}if(!e.ok)throw r;return r}))};!function(e){e.MAINNET="https://mainnet-indexer.sequence.app",e.POLYGON="https://polygon-indexer.sequence.app",e.POLYGON_MUMBAI="https://mumbai-indexer.sequence.app",e.POLYGON_ZKEVM="https://polygon-zkevm-indexer.sequence.app",e.ARBITRUM="https://arbitrum-indexer.sequence.app",e.ARBITRUM_NOVA="https://arbitrum-nova-indexer.sequence.app",e.OPTIMISM="https://optimism-indexer.sequence.app",e.AVALANCHE="https://avalanche-indexer.sequence.app",e.GNOSIS="https://gnosis-indexer.sequence.app",e.BSC="https://bsc-indexer.sequence.app",e.BSC_TESTNET="https://bsc-testnet-indexer.sequence.app",e.GOERLI="https://goerli-indexer.sequence.app"}(AT||(AT={}));var IT="object"===typeof r.g?r.g.fetch:window.fetch,RT=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),(i=t.call(this,e.endsWith("/")?e.slice(0,-1):e,IT)).jwtAuth=n,i._fetch=function(e,t){var r={};return i.jwtAuth&&i.jwtAuth.length>0&&(r.Authorization="BEARER ".concat(i.jwtAuth)),t.headers=dT({},t.headers,r),IT(e,t)},i.fetch=i._fetch,i}return(0,k.Z)(r)}(xT);function TT(){return TT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TT.apply(this,arguments)}var CT,PT,OT,UT,MT="v1",FT="v0.4.0",DT="5d87d77b951c5d197544d97d75241bf3d02679d9";!function(e){e.UNKNOWN="UNKNOWN",e.ERC20="ERC20",e.ERC721="ERC721",e.ERC1155="ERC1155"}(CT||(CT={})),function(e){e.INT="INT",e.STRING="STRING",e.ARRAY="ARRAY",e.GENERIC="GENERIC"}(PT||(PT={})),function(e){e.UNKNOWN="UNKNOWN",e.BUY="BUY",e.SELL="SELL"}(OT||(OT={})),function(e){e.DESC="DESC",e.ASC="ASC"}(UT||(UT={}));var LT=function(){function e(t,r){var n=this;(0,N.Z)(this,e),this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Metadata/",this.ping=function(e){return n.fetch(n.url("Ping"),ZT({},e)).then((function(e){return BT(e).then((function(e){return{status:e.status}}))}))},this.version=function(e){return n.fetch(n.url("Version"),ZT({},e)).then((function(e){return BT(e).then((function(e){return{version:e.version}}))}))},this.runtimeStatus=function(e){return n.fetch(n.url("RuntimeStatus"),ZT({},e)).then((function(e){return BT(e).then((function(e){return{status:e.status}}))}))},this.getTokenMetadata=function(e,t){return n.fetch(n.url("GetTokenMetadata"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{tokenMetadata:e.tokenMetadata}}))}))},this.refreshTokenMetadata=function(e,t){return n.fetch(n.url("RefreshTokenMetadata"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{status:e.status}}))}))},this.getTokenMetadataBatch=function(e,t){return n.fetch(n.url("GetTokenMetadataBatch"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{contractTokenMetadata:e.contractTokenMetadata}}))}))},this.searchTokenMetadata=function(e,t){return n.fetch(n.url("SearchTokenMetadata"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{page:e.page,tokenMetadata:e.tokenMetadata}}))}))},this.searchTokenIDs=function(e,t){return n.fetch(n.url("SearchTokenIDs"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{page:e.page,tokenIds:e.tokenIds}}))}))},this.tokenCollectionFilters=function(e,t){return n.fetch(n.url("TokenCollectionFilters"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{filters:e.filters}}))}))},this.getContractInfo=function(e,t){return n.fetch(n.url("GetContractInfo"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{contractInfo:e.contractInfo}}))}))},this.getContractInfoBatch=function(e,t){return n.fetch(n.url("GetContractInfoBatch"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{contractInfoMap:e.contractInfoMap}}))}))},this.searchContractInfo=function(e,t){return n.fetch(n.url("SearchContractInfo"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{contractInfoList:e.contractInfoList}}))}))},this.searchContractInfoBatch=function(e,t){return n.fetch(n.url("SearchContractInfoBatch"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{contractInfoByChain:e.contractInfoByChain}}))}))},this.searchMetadata=function(e,t){return n.fetch(n.url("SearchMetadata"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{tokenMetadata:e.tokenMetadata,contractInfo:e.contractInfo}}))}))},this.getNiftyswapTokenQuantity=function(e,t){return n.fetch(n.url("GetNiftyswapTokenQuantity"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{quantity:e.quantity}}))}))},this.getNiftyswapUnitPrices=function(e,t){return n.fetch(n.url("GetNiftyswapUnitPrices"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{prices:e.prices}}))}))},this.getNiftyswapUnitPricesWithQuantities=function(e,t){return n.fetch(n.url("GetNiftyswapUnitPricesWithQuantities"),ZT(e,t)).then((function(e){return BT(e).then((function(e){return{prices:e.prices}}))}))},this.hostname=t,this.fetch=function(e,t){return r(e,t)}}return(0,k.Z)(e,[{key:"url",value:function(e){return this.hostname+this.path+e}}]),e}(),ZT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{method:"POST",headers:TT({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{"Content-Type":"application/json"}),body:JSON.stringify(e||{})}},BT=function(e){return e.text().then((function(t){var r;try{r=JSON.parse(t)}catch(n){throw{code:"unknown",msg:"expecting JSON, got: ".concat(t),status:e.status}}if(!e.ok)throw r;return r}))},GT="object"===typeof r.g?r.g.fetch:window.fetch,WT=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://metadata.sequence.app";return(0,N.Z)(this,r),t.call(this,e.endsWith("/")?e.slice(0,-1):e,GT)}return(0,k.Z)(r)}(LT),jT="0x0000000000000000000000000000000000000000";function zT(){return zT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zT.apply(this,arguments)}var qT="tuple(\n  bool delegateCall,\n  bool revertOnError,\n  uint256 gasLimit,\n  address target,\n  uint256 value,\n  bytes data\n)[]";function VT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=oC.apply(void 0,t);if(void 0===n)throw new Error("Encoding transactions without defined nonce");return KT.apply(void 0,[n].concat(t))}function KT(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Ht.encode(["uint256",qT],[e,aC(r)])}function HT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=oC.apply(void 0,t);if(void 0===n)throw new Error("Computing hash for transactions without defined nonce");return JT.apply(void 0,[n].concat(t))}function JT(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return uc(KT.apply(void 0,[e].concat(r)))}function XT(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return QS(e,t,HT.apply(void 0,n)).replace(/^0x/,"")}function $T(e,t){return YT.apply(this,arguments)}function YT(){return YT=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]&&u[2],i=u.length>3?u[3]:void 0,o=QT(r),e.next=5,Promise.all(r.map((function(e){return e.nonce})));case 5:return a=e.sent.filter((function(e){return void 0!==e})).map((function(e){return lS.from(e)})),s=0!==a.length?a.reduce((function(e,t){return e.lt(t)?e:t})):void 0,e.abrupt("return",Promise.all(o.map((function(e){return eC(t,e,n,i,s)}))));case 8:case"end":return e.stop()}}),e)}))),YT.apply(this,arguments)}function QT(e){if(!Array.isArray(e)){if("auxiliary"in e){var t=e.auxiliary,r=zT({},e);return delete r.auxiliary,t?[r].concat((0,Z.Z)(QT(t))):[r]}return[e]}return e.flatMap(QT)}function eC(e,t){return tC.apply(this,arguments)}function tC(){return tC=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>2&&void 0!==f[2]&&f[2],i=f.length>3?f[3]:void 0,o=f.length>4?f[4]:void 0,!nC(r)){e.next=5;break}return e.abrupt("return",r);case 5:if(a=void 0===r.gasLimit?r.gas:r.gasLimit,!r.to){e.next=41;break}if(e.t0=n,!a){e.next=14;break}return e.next=11,a;case 11:e.t1=e.sent,e.next=15;break;case 14:e.t1=i;case 15:return e.t2=e.t1,e.next=18,r.to;case 18:if(e.t3=e.sent,!r.value){e.next=25;break}return e.next=22,r.value;case 22:e.t4=e.sent,e.next=26;break;case 25:e.t4=0;case 26:return e.t5=e.t4,e.next=29,r.data;case 29:if(e.t6=e.sent,!o){e.next=34;break}e.t7=o,e.next=37;break;case 34:return e.next=36,r.nonce;case 36:e.t7=e.sent;case 37:return e.t8=e.t7,e.abrupt("return",{delegateCall:!1,revertOnError:e.t0,gasLimit:e.t2,to:e.t3,value:e.t5,data:e.t6,nonce:e.t8});case 41:if(s=new nr(b.mainModule.abi),u=s.encodeFunctionData(s.getFunction("createContract"),[r.data]),c="string"===typeof t?t:t.getAddress(),e.t9=n,!a){e.next=51;break}return e.next=48,a;case 48:e.t10=e.sent,e.next=52;break;case 51:e.t10=i;case 52:return e.t11=e.t10,e.next=55,c;case 55:if(e.t12=e.sent,!r.value){e.next=62;break}return e.next=59,r.value;case 59:e.t13=e.sent,e.next=63;break;case 62:e.t13=0;case 63:if(e.t14=e.t13,e.t15=u,!o){e.next=69;break}e.t16=o,e.next=72;break;case 69:return e.next=71,r.nonce;case 71:e.t16=e.sent;case 72:return e.t17=e.t16,e.abrupt("return",{delegateCall:!1,revertOnError:e.t9,gasLimit:e.t11,to:e.t12,value:e.t14,data:e.t15,nonce:e.t17});case 74:case"end":return e.stop()}}),e)}))),tC.apply(this,arguments)}function rC(e){return e.send||e.sendAsync}function nC(e){return void 0!==e.delegateCall||void 0!==e.revertOnError}function iC(e){return void 0!==e.find((function(e){return nC(e)}))}function oC(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.find((function(e){return void 0!==e.nonce}));if(n){var i=lS.from(n.nonce);if(t.find((function(e){return void 0!==e.nonce&&!lS.from(e.nonce).eq(i)})))throw new Error("Mixed nonces on Sequence transactions");return n?n.nonce:void 0}}function aC(e){return e.map((function(e){var t;return{delegateCall:!0===e.delegateCall,revertOnError:!0===e.revertOnError,gasLimit:void 0!==e.gasLimit?e.gasLimit:zS,target:null!=(t=e.to)?t:jT,value:void 0!==e.value?e.value:zS,data:void 0!==e.data?e.data:[]}}))}function sC(e,t){return e.map((function(e){return zT({},e,{nonce:t})}))}function uC(e,t,r){var n=new nr(b.sequenceUtils.abi);if(!e||!e.sequenceUtils)throw new Error("Undefined sequenceUtils");return[{delegateCall:!1,revertOnError:!0,gasLimit:0,to:e.sequenceUtils,value:0,data:n.encodeFunctionData(n.getFunction("requireNonExpired"),[r])}].concat((0,Z.Z)(t))}function cC(e,t,r){var n=new nr(b.sequenceUtils.abi);if(!e||!e.sequenceUtils)throw new Error("Undefined sequenceUtils");return[{delegateCall:!1,revertOnError:!0,gasLimit:0,to:e.sequenceUtils,value:0,data:n.encodeFunctionData(n.getFunction("requireMinNonce"),[r.address,r.space?fC(r.space,r.nonce):r.nonce])}].concat((0,Z.Z)(t))}function fC(e,t){var r=lS.from(e),n=lS.from(t),i=qS.pow(lS.from(96));if(!n.div(i).eq(zS))throw new Error("Space already encoded");return n.add(r.mul(i))}function lC(e){var t=lS.from(e),r=qS.pow(lS.from(96));return[t.div(r),t.mod(r)]}function hC(e){return void 0!==e&&void 0!==e.chainId&&void 0!==e.config&&void 0!==e.context&&void 0!==e.signature&&void 0!==e.transactions&&Array.isArray(e.transactions)&&e.transactions.reduce((function(e,t){return e&&nC(t)}),!0)}function dC(e,t,r){return pC.apply(this,arguments)}function pC(){return(pC=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],!Array.isArray(n)){e.next=11;break}if(!iC(n)){e.next=6;break}i=QT(n),e.next=9;break;case 6:return e.next=8,$T(r,n);case 8:i=e.sent;case 9:e.next=18;break;case 11:if(!nC(n)){e.next=15;break}i=QT([n]),e.next=18;break;case 15:return e.next=17,$T(r,[n]);case 17:i=e.sent;case 18:return n.expiration&&(i=uC(t,i,n.expiration)),n.afterNonce&&(o=n.afterNonce,i=cC(t,i,o.address?{address:o.address,nonce:o.nonce,space:o.space}:{address:r,nonce:o})),e.abrupt("return",i);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vC(){return vC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vC.apply(this,arguments)}function gC(e){return void 0!==e.bundleCreation&&"boolean"===typeof e.bundleCreation||void 0!==e.creationGasLimit&&AI(e.creationGasLimit)||void 0!==e.provider&&(ZA.zt.isProvider(e.provider)||"string"===typeof e.provider)}var mC={bundleCreation:!0,creationGasLimit:qS.pow(17)},yC=function(){function e(t){(0,N.Z)(this,e),this.provider=void 0,this.bundleCreation=void 0,this.creationGasLimit=void 0;var r=vC({},mC,t);this.bundleCreation=r.bundleCreation,this.provider=r.provider,this.creationGasLimit=lS.from(r.creationGasLimit)}return(0,k.Z)(e,[{key:"isWalletDeployed",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider){e.next=2;break}throw new Error("Bundled creation provider not found");case 2:return e.next=4,this.provider.getCode(t);case 4:return e.t0=e.sent,e.abrupt("return","0x"!==e.t0);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareWalletDeploy",value:function(e,t){var r=new nr(b.factory.abi);return{to:t.factory,data:r.encodeFunctionData(r.getFunction("deploy"),[t.mainModule,GR(e)])}}},{key:"prependWalletDeploy",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u,c;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.config,n=t.context,i=t.transactions,o=t.nonce,a=t.signature,s=BR(r,n),u=new nr(b.mainModule.abi),c=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a;case 2:if("string"!==typeof(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",uT(t));case 6:case"end":return e.stop()}}),e)})))(),e.t0=this.bundleCreation,!e.t0){e.next=9;break}return e.next=8,this.isWalletDeployed(s);case 8:e.t0=!e.sent;case 9:if(!e.t0){e.next=31;break}return e.t1=n.guestModule,e.t2=vC({},this.prepareWalletDeploy(r,n),{delegateCall:!1,revertOnError:!1,gasLimit:this.creationGasLimit,value:zS}),e.t3=zS,e.t4=s,e.t5=zS,e.t6=u,e.t7=u.getFunction("execute"),e.t8=aC(i),e.t9=o,e.next=21,c;case 21:return e.t10=e.sent,e.t11=[e.t8,e.t9,e.t10],e.t12=e.t6.encodeFunctionData.call(e.t6,e.t7,e.t11),e.t13={delegateCall:!1,revertOnError:!0,gasLimit:e.t3,to:e.t4,value:e.t5,data:e.t12},e.t14=[e.t2,e.t13],e.t15=zS,e.t16={transactions:e.t14,nonce:e.t15,signature:"0x"},e.abrupt("return",{to:e.t1,execute:e.t16});case 31:return e.t17=s,e.t18=i,e.t19=lS.from(o),e.next=36,c;case 36:return e.t20=e.sent,e.t21={transactions:e.t18,nonce:e.t19,signature:e.t20},e.abrupt("return",{to:e.t17,execute:e.t21});case 39:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareTransactions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a,s,u,c,f,l,h=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=h.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=h[a];if(s=oC.apply(void 0,o)){e.next=4;break}throw new Error("Unable to prepare transactions without a defined nonce");case 4:return e.next=6,this.prependWalletDeploy({config:t,context:r,transactions:o,nonce:s,signature:n});case 6:return u=e.sent,c=u.to,f=u.execute,l=new nr(b.mainModule.abi),e.abrupt("return",{to:c,data:l.encodeFunctionData(l.getFunction("execute"),[aC(f.transactions),f.nonce,f.signature])});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),bC=lS.from(8e5),EC={waitPollRate:1e3,deltaBlocksLog:12,fromBlockLog:-1024};function wC(e){return void 0!==e.provider&&ZA.zt.isProvider(e.provider)}var NC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;(0,N.Z)(this,r),(n=t.call(this,e)).provider=void 0,n.waitPollRate=void 0,n.deltaBlocksLog=void 0,n.fromBlockLog=void 0;var i=vC({},EC,e);return n.provider=i.provider,n.waitPollRate=i.waitPollRate,n.deltaBlocksLog=i.deltaBlocksLog,n.fromBlockLog=i.fromBlockLog,n}return(0,k.Z)(r,[{key:"simulate",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=this,n=a.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=a[o];return e.next=4,Promise.all(i.map(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.gasLimit||lS.from(n.gasLimit||0).eq(zS)){e.next=2;break}return e.abrupt("return",n.gasLimit);case 2:if(!n.delegateCall){e.next=4;break}return e.abrupt("return",bC);case 4:if(e.t0=n.to===t,!e.t0){e.next=9;break}return e.next=8,r.isWalletDeployed(t);case 8:e.t0=!e.sent;case 9:if(!e.t0){e.next=11;break}return e.abrupt("return",bC);case 11:if(r.provider){e.next=13;break}throw new Error("signer.provider is not set, but is required");case 13:return e.abrupt("return",r.provider.estimateGas({from:t,to:n.to,data:n.data,value:n.value}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",e.sent.map((function(e){return{executed:!0,succeeded:!0,gasUsed:lS.from(e).toNumber(),gasLimit:lS.from(e).toNumber()}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o,a,s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider){e.next=2;break}throw new Error("provider is not set");case 2:return o=BR(t,r),e.next=5,this.provider.getCode(o);case 5:if(e.t0=e.sent,"0x"!==e.t0){e.next=8;break}return e.abrupt("return",0);case 8:return void 0===n&&(n=0),a=new IA(o,b.mainModule.abi,this.provider),e.next=12,a.readNonce(n,{blockTag:i});case 12:return s=e.sent,e.abrupt("return",fC(n,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"wait",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>2&&void 0!==c[2]?c[2]:this.waitPollRate,i=c.length>3&&void 0!==c[3]?c[3]:5,o=this,"string"!==typeof t&&(oI.info.apply(oI,["computing id",t.config,t.context,t.chainId].concat((0,Z.Z)(t.transactions))),t=XT.apply(void 0,[BR(t.config,t.context),t.chainId].concat((0,Z.Z)(t.transactions)))),a=!1,s=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(a){e.next=22;break}return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),o++,!(void 0!==i&&o>=i)){e.next=16;break}throw oI.error("giving up after ".concat(o," failed attempts").concat(r?": ".concat(r):""),e.t0),e.t0;case 16:oI.warn("attempt #".concat(o," failed").concat(r?": ".concat(r):""),e.t0);case 17:if(!(n>0)){e.next=20;break}return e.next=20,new Promise((function(e){return setTimeout(e,n)}));case 20:e.next=1;break;case 22:throw new Error("timed out after ".concat(o," failed attempts").concat(r?": ".concat(r):""));case 23:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t,r){return e.apply(this,arguments)}}(),u=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var r,i,u,c,f;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=o.fromBlockLog)<0)){e.next=6;break}return e.next=4,s((function(){return o.provider.getBlockNumber()}),"unable to get latest block number");case 4:i=e.sent,r=i+r;case 6:if("string"===typeof t){e.next=8;break}throw new Error("impossible");case 8:u=t.replace("0x",""),c=(0,B.Z)().mark((function e(){var t,i,c,f;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s((function(){return o.provider.getBlockNumber()}),"unable to get latest block number");case 2:return t=e.sent,e.next=5,s((function(){return o.provider.getLogs({fromBlock:Math.max(0,r-o.deltaBlocksLog),toBlock:t,topics:["0x1f180c27086c7a39ea2a7b25239d1ab92348f07ca7bb59d1438fcf527568f881"]})}),"unable to get NonceChange logs for blocks ".concat(Math.max(0,r-o.deltaBlocksLog)," to ").concat(t));case 5:return i=e.sent,r=t,e.next=9,Promise.all(i.map((function(e){return s((function(){return o.provider.getTransactionReceipt(e.transactionHash)}),"unable to get receipt for transaction ".concat(e.transactionHash))})));case 9:if(c=e.sent,!(f=c.find((function(e){return e.logs.find((function(e){return 0===e.topics.length&&e.data.replace("0x","")===u||1===e.topics.length&&"0x3dbd1590ea96dd3253a91f24e64e3a502e1225d602a5731357bc12643070ccd7"===e.topics[0]&&e.data.length>=64&&e.data.replace("0x","").startsWith(u)}))})))){e.next=19;break}return e.t0=vC,e.t1={receipt:f},e.next=16,s((function(){return o.provider.getTransaction(f.transactionHash)}),"unable to get transaction ".concat(f.transactionHash));case 16:return e.t2=e.sent,e.t3=(0,e.t0)(e.t1,e.t2),e.abrupt("return",{v:e.t3});case 19:if(a){e.next=22;break}return e.next=22,new Promise((function(e){return setTimeout(e,n)}));case 22:case"end":return e.stop()}}),e)}));case 10:if(a){e.next=17;break}return e.delegateYield(c(),"t0",12);case 12:if("object"!==typeof(f=e.t0)){e.next=15;break}return e.abrupt("return",f.v);case 15:e.next=10;break;case 17:throw new Error("Timeout waiting for transaction receipt ".concat(t));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),void 0===r){e.next=11;break}return e.abrupt("return",Promise.race([u(),new Promise((function(e,n){return setTimeout((function(){a=!0,n("Timeout waiting for transaction receipt ".concat(t))}),r)}))]));case 11:return e.abrupt("return",u());case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(yC);function kC(e){return void 0!==e.signer&&W_.isSigner(e.signer)}var AC,xC,_C,SC,IC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;if((0,N.Z)(this,r),(n=t.call(this,W_.isSigner(e)?{provider:e.provider}:vC({},e,{provider:e.signer.provider}))).signer=void 0,n.txnOptions=void 0,n.signer=W_.isSigner(e)?e:e.signer,!n.signer.provider)throw new Error("Signer must have a provider");return n}return(0,k.Z)(r,[{key:"deployWallet",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.prepareWalletDeploy(t,r),e.abrupt("return",this.signer.sendTransaction(vC({},n,{gasLimit:qS.pow(17)})));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getFeeOptions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{options:[]});case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"gasRefundOptions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=u[o];return e.next=3,this.getFeeOptions.apply(this,[t,r].concat(i));case 3:return a=e.sent,s=a.options,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setTransactionOptions",value:function(e){this.txnOptions=e}},{key:"relay",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f,l=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(l.length>2&&void 0!==l[2])||l[2],void 0!==r&&oI.warn("LocalRelayer doesn't accept fee quotes"),t.context.guestModule&&42===t.context.guestModule.length){e.next=4;break}throw new Error("LocalRelayer requires the context.guestModule address");case 4:return e.next=6,this.prependWalletDeploy(t);case 6:if(i=e.sent,o=i.to,a=i.execute,s=new nr(b.mainModule.abi),u=s.encodeFunctionData(s.getFunction("execute"),[aC(a.transactions),a.nonce,a.signature]),c=this.signer.sendTransaction(vC({to:o,data:u},this.txnOptions)),!n){e.next=22;break}return e.next=15,c;case 15:return f=e.sent,e.next=18,f.wait();case 18:return f.receipt=e.sent,e.abrupt("return",f);case 22:return e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(NC);!function(e){e.UNKNOWN="UNKNOWN",e.DROPPED="DROPPED",e.QUEUED="QUEUED",e.SENT="SENT",e.SUCCEEDED="SUCCEEDED",e.PARTIALLY_FAILED="PARTIALLY_FAILED",e.FAILED="FAILED"}(AC||(AC={})),function(e){e.SEND="SEND",e.RECEIVE="RECEIVE",e.BRIDGE_DEPOSIT="BRIDGE_DEPOSIT",e.BRIDGE_WITHDRAW="BRIDGE_WITHDRAW",e.BURN="BURN",e.UNKNOWN="UNKNOWN"}(xC||(xC={})),function(e){e.UNKNOWN="UNKNOWN",e.ERC20_TOKEN="ERC20_TOKEN",e.ERC1155_TOKEN="ERC1155_TOKEN"}(_C||(_C={})),function(e){e.DESC="DESC",e.ASC="ASC"}(SC||(SC={}));var RC=function(){function e(t,r){var n=this;(0,N.Z)(this,e),this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Relayer/",this.ping=function(e){return n.fetch(n.url("Ping"),TC({},e)).then((function(e){return CC(e).then((function(e){return{status:e.status}}))}))},this.version=function(e){return n.fetch(n.url("Version"),TC({},e)).then((function(e){return CC(e).then((function(e){return{version:e.version}}))}))},this.runtimeStatus=function(e){return n.fetch(n.url("RuntimeStatus"),TC({},e)).then((function(e){return CC(e).then((function(e){return{status:e.status}}))}))},this.getSequenceContext=function(e){return n.fetch(n.url("GetSequenceContext"),TC({},e)).then((function(e){return CC(e).then((function(e){return{data:e.data}}))}))},this.getChainID=function(e){return n.fetch(n.url("GetChainID"),TC({},e)).then((function(e){return CC(e).then((function(e){return{chainID:e.chainID}}))}))},this.sendMetaTxn=function(e,t){return n.fetch(n.url("SendMetaTxn"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{status:e.status,txnHash:e.txnHash}}))}))},this.getMetaTxnNonce=function(e,t){return n.fetch(n.url("GetMetaTxnNonce"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{nonce:e.nonce}}))}))},this.getMetaTxnReceipt=function(e,t){return n.fetch(n.url("GetMetaTxnReceipt"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{receipt:e.receipt}}))}))},this.simulate=function(e,t){return n.fetch(n.url("Simulate"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{results:e.results}}))}))},this.updateMetaTxnGasLimits=function(e,t){return n.fetch(n.url("UpdateMetaTxnGasLimits"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{payload:e.payload}}))}))},this.feeTokens=function(e){return n.fetch(n.url("FeeTokens"),TC({},e)).then((function(e){return CC(e).then((function(e){return{isFeeRequired:e.isFeeRequired,tokens:e.tokens}}))}))},this.feeOptions=function(e,t){return n.fetch(n.url("FeeOptions"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{options:e.options,quote:e.quote}}))}))},this.getMetaTxnNetworkFeeOptions=function(e,t){return n.fetch(n.url("GetMetaTxnNetworkFeeOptions"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{options:e.options}}))}))},this.sentTransactions=function(e,t){return n.fetch(n.url("SentTransactions"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{page:e.page,transactions:e.transactions}}))}))},this.pendingTransactions=function(e,t){return n.fetch(n.url("PendingTransactions"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{page:e.page,transactions:e.transactions}}))}))},this.listGasSponsors=function(e,t){return n.fetch(n.url("ListGasSponsors"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{page:e.page,gasSponsors:e.gasSponsors}}))}))},this.addGasSponsor=function(e,t){return n.fetch(n.url("AddGasSponsor"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{status:e.status,gasSponsor:e.gasSponsor}}))}))},this.updateGasSponsor=function(e,t){return n.fetch(n.url("UpdateGasSponsor"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{status:e.status,gasSponsor:e.gasSponsor}}))}))},this.reportGasSponsorUsage=function(e,t){return n.fetch(n.url("ReportGasSponsorUsage"),TC(e,t)).then((function(e){return CC(e).then((function(e){return{gasSponsorUsage:e.gasSponsorUsage}}))}))},this.hostname=t,this.fetch=function(e,t){return r(e,t)}}return(0,k.Z)(e,[{key:"url",value:function(e){return this.hostname+this.path+e}}]),e}(),TC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{method:"POST",headers:vC({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{"Content-Type":"application/json"}),body:JSON.stringify(e||{})}},CC=function(e){return e.text().then((function(t){var r;try{r=JSON.parse(t)}catch(n){throw{code:"unknown",msg:"expecting JSON, got: ".concat(t),status:e.status}}if(!e.ok)throw r;return r}))},PC=Object.freeze({__proto__:null,WebRPCVersion:"v1",WebRPCSchemaVersion:"v0.4.0",WebRPCSchemaHash:"752f4f4274ca80d2fd974b5b44ed8245dfe40554",get ETHTxnStatus(){return AC},get TransferType(){return xC},get FeeTokenType(){return _C},get SortOrder(){return SC},Relayer:RC}),OC=[AC.DROPPED,AC.SUCCEEDED,AC.PARTIALLY_FAILED,AC.FAILED],UC=[AC.DROPPED,AC.PARTIALLY_FAILED,AC.FAILED];function MC(e){return void 0!==e.url&&"string"===typeof e.url}var FC="object"===typeof r.g?r.g.fetch:window.fetch,DC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this,e)).service=void 0,n.service=new RC(e.url,FC),n}return(0,k.Z)(r,[{key:"waitReceipt",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>1&&void 0!==u[1]?u[1]:1e3,n=u.length>2&&void 0!==u[2]?u[2]:5,i=u.length>3?u[3]:void 0,"string"!==typeof t&&(oI.info.apply(oI,["computing id",t.config,t.context,t.chainId].concat((0,Z.Z)(t.transactions))),t=XT.apply(void 0,[BR(t.config,t.context),t.chainId].concat((0,Z.Z)(t.transactions)))),oI.info("[rpc-relayer/waitReceipt] waiting for ".concat(t)),o=0;case 6:if(void 0!==i&&i()){e.next=26;break}return e.prev=7,e.next=10,this.service.getMetaTxnReceipt({metaTxID:t});case 10:if(a=e.sent,!((s=a.receipt)&&s.txnReceipt&&"null"!==s.txnReceipt&&OC.includes(s.status))){e.next=14;break}return e.abrupt("return",{receipt:s});case 14:e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(7),++o!==n){e.next=21;break}throw e.t0;case 21:if(void 0!==i&&i()){e.next=24;break}return e.next=24,new Promise((function(e){return setTimeout(e,r)}));case 24:e.next=6;break;case 26:throw new Error("Cancelled waiting for transaction receipt ".concat(t));case 27:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"simulate",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=Ht,n=s.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=s[o];return a=r.encode([qT],[aC(i)]),e.next=5,this.service.simulate({wallet:t,transactions:a});case 5:return e.abrupt("return",e.sent.results);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeOptions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f,l,h,d,p,v,g,m,y=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.feeTokens();case 2:if(!(n=e.sent).isFeeRequired){e.next=32;break}for(i=n.tokens.map((function(e){return e.symbol})).join(", "),oI.info("[rpc-relayer/getFeeOptions] relayer fees are required, accepted tokens are ".concat(i)),o=BR(t,r),a=y.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=y[u];if(void 0!==(c=oC.apply(void 0,s))){e.next=13;break}return e.next=12,this.getNonce(t,r);case 12:c=e.sent;case 13:if(this.provider){e.next=16;break}throw oI.warn("[rpc-relayer/getFeeOptions] provider not set, needed for stub signature"),new Error("provider is not set");case 16:return e.next=18,this.prependWalletDeploy({config:t,context:r,transactions:s,nonce:c,signature:lT(this.provider,t)});case 18:return f=e.sent,l=f.to,h=f.execute,d=new nr(b.mainModule.abi),p=d.encodeFunctionData(d.getFunction("execute"),[aC(h.transactions),h.nonce,h.signature]),e.next=25,this.service.feeOptions({wallet:o,to:l,data:p});case 25:return v=e.sent,g=v.options,m=v.quote,oI.info("[rpc-relayer/getFeeOptions] got refund options ".concat(JSON.stringify(g))),e.abrupt("return",{options:g,quote:{_tag:"FeeQuote",_quote:m}});case 32:return oI.info("[rpc-relayer/getFeeOptions] relayer fees are not required"),e.abrupt("return",{options:[]});case 34:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"gasRefundOptions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=u.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=u[o];return e.next=3,this.getFeeOptions.apply(this,[t,r].concat(i));case 3:return a=e.sent,s=a.options,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a,s,u,c,f,l;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=BR(t,r),oI.info("[rpc-relayer/getNonce] get nonce for wallet ".concat(i," space: ").concat(n)),o=void 0!==n?lS.from(n).toHexString():void 0,e.next=5,this.service.getMetaTxnNonce({walletContractAddress:i,space:o});case 5:return a=e.sent,s=lS.from(a.nonce),u=lC(s),c=(0,D.Z)(u,2),f=c[0],l=c[1],oI.info("[rpc-relayer/getNonce] got next nonce for wallet ".concat(i," ").concat(l," space: ").concat(f)),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"relay",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f,l,h,d,p,v=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(v.length>2&&void 0!==v[2])||v[2],i=this,oI.info("[rpc-relayer/relay] relaying signed meta-transactions ".concat(JSON.stringify(t)," with quote ").concat(JSON.stringify(r))),void 0!==r&&("string"===typeof r._quote?o=r._quote:oI.warn("[rpc-relayer/relay] ignoring invalid fee quote")),this.provider){e.next=7;break}throw oI.warn("[rpc-relayer/relay] provider not set, failed relay"),new Error("provider is not set");case 7:return e.next=9,this.prependWalletDeploy(t);case 9:return a=e.sent,s=a.to,u=a.execute,c=BR(t.config,t.context),f=new nr(b.mainModule.abi),l=f.encodeFunctionData(f.getFunction("execute"),[aC(u.transactions),u.nonce,u.signature]),e.next=17,this.service.sendMetaTxn({call:{walletAddress:c,contract:s,input:l},quote:o});case 17:if(h=e.sent,oI.info("[rpc-relayer/relay] got relay result ".concat(JSON.stringify(h))),!n){e.next=23;break}return e.abrupt("return",this.wait(h.txnHash));case 23:return d={hash:h.txnHash,confirmations:0,from:c,wait:function(e){return Promise.reject(new Error("impossible"))}},p=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.provider){e.next=2;break}throw new Error("cannot wait for receipt, relayer has no provider set");case 2:return e.next=4,i.wait(h.txnHash);case 4:if(n=e.sent,o=null==(r=n.receipt)?void 0:r.transactionHash){e.next=8;break}throw new Error("cannot wait for receipt, unknown native transaction hash");case 8:return Object.assign(d,n),e.abrupt("return",i.provider.waitForTransaction(o,t));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d.wait=p,e.abrupt("return",d);case 27:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"wait",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>2&&void 0!==f[2]?f[2]:1e3,i=f.length>3&&void 0!==f[3]?f[3]:5,o=this,a=!1,e.next=6,void 0!==r?Promise.race([this.waitReceipt(t,n,i,(function(){return a})),new Promise((function(e,n){return setTimeout((function(){a=!0,n("Timeout waiting for transaction receipt ".concat(t))}),r)}))]):this.waitReceipt(t,n,i);case 6:if(s=e.sent,(u=s.receipt).txnReceipt&&!UC.includes(u.status)){e.next=10;break}throw new LC(u);case 10:return c=JSON.parse(u.txnReceipt),e.abrupt("return",{blockHash:c.blockHash,blockNumber:lS.from(c.blockNumber).toNumber(),confirmations:1,from:"string"===typeof t?void 0:BR(t.config,t.context),hash:c.transactionHash,raw:u.txnReceipt,receipt:c,wait:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.provider.waitForTransaction(c.transactionHash,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(yC),LC=(0,k.Z)((function e(t){(0,N.Z)(this,e),this.receipt=t}));function ZC(e){return"object"===typeof e&&"function"===typeof e.simulate&&"function"===typeof e.getFeeOptions&&"function"===typeof e.gasRefundOptions&&"function"===typeof e.getNonce&&"function"===typeof e.relay&&"function"===typeof e.wait}function BC(){return BC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BC.apply(this,arguments)}var GC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,null,[{key:"isSequenceSigner",value:function(e){return WC(e)}}]),r}(W_);function WC(e){var t=e;return t&&void 0!==t.updateConfig&&void 0!==t.publishConfig&&void 0!==t.getWalletContext&&void 0!==t.getWalletConfig}var jC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r)}((0,F.Z)(Error)),zC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"signMessage",value:function(e,t){return this.signMessageWithData(e)}},{key:"sendTransaction",value:function(e){throw new Error("sendTransaction method is not supported in RemoteSigner")}},{key:"signTransaction",value:function(e){throw new Error("signTransaction method is not supported in RemoteSigner")}},{key:"connect",value:function(e){throw new Error("connect method is not supported in RemoteSigner")}}],[{key:"signMessageWithData",value:function(e,t,r,n){return this.isRemoteSigner(e)?e.signMessageWithData(t,r,n):e.signMessage(t)}},{key:"isRemoteSigner",value:function(e){return void 0!==e.signMessageWithData}}]),r}(W_);"object"===typeof r.g?r.g.fetch:window.fetch;function qC(e){return VC.apply(this,arguments)}function VC(){return(VC=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=2;break}return e.abrupt("return",Promise.all(t.map((function(e){return gl(e)}))));case 2:return e.abrupt("return",gl(t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var KC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;(0,N.Z)(this,r),(n=t.call(this)).context=void 0,n.config=void 0,n._signers=void 0,n.provider=void 0,n.sender=void 0,n.relayer=void 0,n.chainId=void 0;var i=e.config,o=e.context,a=e.strict;if(n.context=BC({},o||JI),!0===a?n.context.nonStrict=void 0:!1===a&&(n.context.nonStrict=!0),!n.context.nonStrict&&!LR(i))throw new Error("wallet config is not usable (strict mode)");n.config=WR(i);for(var s=arguments.length,u=new Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];return n._signers=u.map((function(e){return W_.isSigner(e)?e:new HE(e)})),n.imageHash,n}return(0,k.Z)(r,[{key:"useConfig",value:function(e,t){return(0,L.Z)(r,[{config:e,context:this.context,strict:t}].concat((0,Z.Z)(this._signers))).setProvider(this.provider,this.chainId).setRelayer(this.relayer)}},{key:"useSigners",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,L.Z)(r,[{config:this.config,context:this.context}].concat(t)).setProvider(this.provider,this.chainId).setRelayer(this.relayer)}},{key:"connect",value:function(e,t){if(QI(e))return(0,L.Z)(r,[{config:this.config,context:this.context}].concat((0,Z.Z)(this._signers))).setProvider(e,this.chainId).setRelayer(t);throw new Error("Wallet provider argument is expected to be a JsonRpcProvider")}},{key:"setProvider",value:function(e,t){if(void 0===e)return this;if(ZA.zt.isProvider(e))this.provider=e,this.sender=new nR(e);else{var r=new gR(e,{chainId:t,blockCache:!0});this.provider=r,this.sender=new nR(r)}return this.chainId=t,this}},{key:"setRelayer",value:function(e){return void 0===e||(this.relayer=e),this}},{key:"getProvider",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.getChainIdNumber(t);case 3:return e.abrupt("return",this.provider);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRelayer",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.getChainIdNumber(t);case 3:return e.abrupt("return",this.relayer);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWalletContext",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.context);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWalletConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChainIdNumber(t);case 2:return t=e.sent,r=BC({},this.config,{chainId:t}),e.abrupt("return",[r]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWalletState",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getAddress(),this.getChainId(),this.isDeployed()]);case 2:if(r=e.sent,n=(0,D.Z)(r,3),i=n[0],o=n[1],a=n[2],e.t0=this.context,e.t1=this.config,e.t2=i,e.t3=o,e.t4=a,e.t5=this.imageHash,!a){e.next=19;break}return e.next=16,nP(this);case 16:e.t6=e.sent,e.next=20;break;case 19:e.t6=void 0;case 20:return e.t7=e.t6,s={context:e.t0,config:e.t1,address:e.t2,chainId:e.t3,deployed:e.t4,imageHash:e.t5,lastImageHash:e.t7},e.abrupt("return",[s]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connected",get:function(){return void 0!==this.sender}},{key:"address",get:function(){return BR(this.config,this.context)}},{key:"imageHash",get:function(){return GR(this.config)}},{key:"getAddress",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.address);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSigners",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._signers&&0!==this._signers.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.abrupt("return",Promise.all(this._signers.map((function(e){return e.getAddress().then((function(e){return Jr(e)}))}))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.chainId){e.next=2;break}return e.abrupt("return",this.chainId);case 2:if(this.provider){e.next=4;break}throw new Error("provider is not set, first connect a provider");case 4:return e.next=6,this.provider.getNetwork();case 6:return this.chainId=e.sent.chainId,e.abrupt("return",this.chainId);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNetworks",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChainId();case 2:return t=e.sent,e.abrupt("return",[{chainId:t,name:"",rpcUrl:""}]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.relayer.getNonce(this.config,this.context,r,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getTransactionCount",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonce(t,0);case 2:return r=e.sent,n=lC(r),i=(0,D.Z)(n,2),i[0],o=i[1],e.abrupt("return",lS.from(o).toNumber());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s,u,c;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.signTransactions(t,r,n);case 2:return s=e.sent,o&&(u=BR(s.config,s.context),c=XT.apply(void 0,[u,s.chainId].concat((0,Z.Z)(s.transactions))),o(s,c)),e.abrupt("return",this.relayer.relay(s,i,a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}()},{key:"sendTransactionBatch",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(s.length>2&&void 0!==s[2])||s[2],i=s.length>3?s[3]:void 0,o=s.length>4?s[4]:void 0,a=s.length>5?s[5]:void 0,e.abrupt("return",this.sendTransaction(t,r,n,i,o,a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"signTransactions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a,s,u,c,f,l,h;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChainIdNumber(r);case 2:return i=e.sent,e.next=5,qC(t);case 5:if(o=e.sent,this.provider){e.next=8;break}throw new Error("missing provider");case 8:if(this.relayer){e.next=10;break}throw new Error("missing relayer");case 10:return e.next=12,dC(this.context,this.address,o);case 12:if(!(a=e.sent).some((function(e){return void 0===e.gasLimit}))){e.next=18;break}return e.next=16,(s=this.relayer).simulate.apply(s,[this.address].concat((0,Z.Z)(a)));case 16:for(c in u=e.sent,a)void 0===a[c].gasLimit&&(a[c].gasLimit=u[c].gasLimit);case 18:if(!(f=oC.apply(void 0,(0,Z.Z)(a)))){e.next=23;break}e.t0=f,e.next=26;break;case 23:return e.next=25,this.getNonce();case 25:e.t0=e.sent;case 26:return l=e.t0,a=sC(a,l),h=JT.apply(void 0,[l].concat((0,Z.Z)(a))),e.t1=h,e.t2=i,e.t3=this.context,e.t4=this.config,e.t5=a,e.t6=l,e.next=37,this.sign(h,!0,r,n);case 37:return e.t7=e.sent,e.abrupt("return",{digest:e.t1,chainId:e.t2,context:e.t3,config:e.t4,transactions:e.t5,nonce:e.t6,signature:e.t7});case 39:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendSignedTransactions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.relayer){e.next=2;break}throw new Error("relayer is not set, first connect a relayer");case 2:return e.next=4,this.getChainIdNumber(r);case 4:return e.abrupt("return",this.relayer.relay(t,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>3&&void 0!==a[3]&&a[3],o="string"!==typeof t||t.startsWith("0x")?t:Od(t),e.abrupt("return",this.sign(o,i,r,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){var a,s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChainIdNumber(i);case 2:if(a=e.sent,!(s=t.chainId?lS.from(t.chainId).toNumber():void 0)||s===a){e.next=6;break}throw new Error("signTypedData: domain.chainId (".concat(t.chainId,") is expected to be ").concat(a));case 6:return u=gI({domain:t,types:r,message:n}),e.abrupt("return",this.sign(u,!0,a,o));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"_signTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signTypedData(t,r,n,i,o));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"subDigest",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChainIdNumber(r);case 2:return n=e.sent,e.abrupt("return",ri(QS(this.address,n,t)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sign",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u,c,f,l,h,d,p=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(p.length>1&&void 0!==p[1])||p[1],n=p.length>2?p[2]:void 0,i=p.length>3?p[3]:void 0,o=this,e.next=6,this.getChainIdNumber(n);case 6:return a=e.sent,s=r?t:uc(t),e.next=10,this.subDigest(s,n);case 10:return u=e.sent,c=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return e.getAddress()})));case 2:return n=e.sent,e.next=5,Promise.all(o.config.signers.map(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(s){var c,f,l;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,c=t[n.indexOf(s.address)]){e.next=4;break}return e.abrupt("return",s);case 4:if(!WC(c)){e.next=12;break}if(c!==o){e.next=7;break}throw Error("Can't sign transactions for self");case 7:return e.next=9,c.signMessage(u,a,i,!0);case 9:return e.t0=e.sent,f=e.t0+"03",e.abrupt("return",BC({},s,{signature:f}));case 12:if(!zC.isRemoteSigner(c)){e.next=25;break}return e.next=15,c.signMessageWithData(u,r,a);case 15:if(l=e.sent,e.prev=16,!(oT(u,{weight:s.weight,signature:l})===s.address)){e.next=20;break}return e.abrupt("return",{weight:s.weight,signature:l});case 20:e.next=24;break;case 22:e.prev=22,e.t1=e.catch(16);case 24:return e.abrupt("return",BC({},s,{signature:l}));case 25:return e.t2=s.weight,e.next=28,c.signMessage(u);case 28:return e.t3=e.sent,e.t4=e.t3+"02",e.abrupt("return",{weight:e.t2,signature:e.t4});case 33:if(e.prev=33,e.t5=e.catch(0),!i){e.next=39;break}throw e.t5;case 39:return console.warn("Skipped signer ".concat(s.address)),e.abrupt("return",s);case 41:case"end":return e.stop()}}),e,null,[[0,33],[16,22]])})));return function(t){return e.apply(this,arguments)}}()));case 5:return s=e.sent,e.abrupt("return",{threshold:o.config.threshold,signers:s});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),f=this._signers.filter((function(e){return!zC.isRemoteSigner(e)})),e.next=15,c(f,this.packMsgAndSig(s,[],a));case 15:if(l=e.sent,!(l.signers.filter(YR).reduce((function(e,t){return e+t.weight}),0)>=this.config.threshold)){e.next=19;break}return e.abrupt("return",uT(l));case 19:return h=this._signers.filter((function(e){return zC.isRemoteSigner(e)})),e.next=22,c(h,this.packMsgAndSig(s,uT(l),a));case 22:return d=e.sent,e.abrupt("return",uT(aT(l,d)));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signWeight",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSigners();case 2:return t=e.sent,e.abrupt("return",t.reduce((function(e,t){var n=r.config.signers.find((function(e){return e.address===t}));return n?e.add(n.weight):e}),zS));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isDeployed",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getChainIdNumber(t);case 2:return e.next=4,this.provider.getCode(this.address);case 4:return r=e.sent,e.abrupt("return",!!r&&"0x"!==r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f,l,h=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]&&h[2],i=h.length>3?h[3]:void 0,o=h.length>4?h[4]:void 0,a=h.length>5?h[5]:void 0,s=h.length>6?h[6]:void 0,t||(t=this.config),e.next=8,Promise.all([this.buildUpdateConfigTransaction(t,n,i),null!=r?r:this.getNonce()]);case 8:return u=e.sent,c=(0,D.Z)(u,2),f=c[0],l=c[1],e.t0=BC({address:this.address},t),e.next=15,this.sendTransaction(sC(f,l),void 0,void 0,o,a,s);case 15:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"publishConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>2&&void 0!==s[2]?s[2]:[],i=s.length>3?s[3]:void 0,o=s.length>4?s[4]:void 0,a=s.length>5?s[5]:void 0,e.t0=this,!this.config.address){e.next=9;break}e.t1=this.buildPublishConfigTransaction(this.config,t,r),e.next=12;break;case 9:return e.next=11,this.buildPublishSignersTransaction(t,r,n);case 11:e.t1=e.sent;case 12:return e.t2=e.t1,e.t3=void 0,e.t4=void 0,e.t5=i,e.t6=o,e.t7=a,e.abrupt("return",e.t0.sendTransaction.call(e.t0,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"buildUpdateConfigTransaction",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u,c,f,l,h,d=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]&&d[1],n=d.length>2?d[2]:void 0,i=this,this.context.nonStrict||LR(t)){e.next=5;break}throw new Error("wallet config is not usable (strict mode)");case 5:return e.next=7,(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.provider.getStorageAt(i.address,Ht.encode(["address"],[i.address]));case 3:return t=e.sent,e.abrupt("return",0===zR(t,i.context.mainModuleUpgradable));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))();case 7:if(o=e.sent,a=new nr(b.mainModule.abi),s=2*(1e5+1800*t.signers.length),u=o?[]:[{delegateCall:!1,revertOnError:!0,gasLimit:zS,to:this.address,value:zS,data:a.encodeFunctionData(a.getFunction("updateImplementation"),[this.context.mainModuleUpgradable])}],c=new nr(b.mainModuleUpgradable.abi),f={delegateCall:!1,revertOnError:!0,gasLimit:zS,to:this.address,value:zS,data:c.encodeFunctionData(c.getFunction("updateImageHash"),[GR(t)])},!r){e.next=19;break}return e.next=16,this.buildPublishConfigTransaction(t,n);case 16:e.t0=e.sent,e.next=20;break;case 19:e.t0=[];case 20:if(l=e.t0,1!==(h=[].concat(u,[f],(0,Z.Z)(l))).length){e.next=24;break}return e.abrupt("return",h);case 24:return e.abrupt("return",[{delegateCall:!1,revertOnError:!1,gasLimit:s,to:this.address,value:zS,data:a.encodeFunctionData(a.getFunction("selfExecute"),[aC(h)])}]);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildPublishConfigTransaction",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,n=new nr(b.sequenceUtils.abi);return[{delegateCall:!1,revertOnError:!0,gasLimit:zS,to:this.context.sequenceUtils,value:zS,nonce:r,data:n.encodeFunctionData(n.getFunction("publishConfig"),[this.address,e.threshold,WR(e).signers.map((function(e){return{weight:e.weight,signer:e.address}})),t])}]}},{key:"buildPublishSignersTransaction",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r,n,i,o,a,s,u,c,f,l,h=this,d=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(d.length>0&&void 0!==d[0])||d[0],r=d.length>1?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:[],o=new nr(b.sequenceUtils.abi),a=new nr(b.requireFreshSigner.abi),s=el(32),e.next=8,this.signMessage(s,this.chainId,!1);case 8:if(u=e.sent,c=rT(u),f=uT({threshold:c.threshold,signers:c.signers.map((function(e,t){if(tT(e)){var r=h.config.signers[t];return{weight:r.weight,address:r.address}}return e}))}),l=null==(i=this.context.libs)?void 0:i.requireFreshSigner,!(n.length>0&&void 0===l)){e.next=14;break}throw Error("requireFreshSigners missing library");case 14:return e.abrupt("return",[].concat((0,Z.Z)(n.map((function(e){return{delegateCall:!1,revertOnError:!0,gasLimit:zS,to:l,value:zS,nonce:r,data:a.encodeFunctionData(a.getFunction("requireFreshSigner"),[e])}}))),[{delegateCall:!1,revertOnError:!0,gasLimit:zS,to:this.context.sequenceUtils,value:zS,nonce:r,data:o.encodeFunctionData(o.getFunction("publishInitialSigners"),[this.address,uc(s),this.config.signers.length,f,t])}]));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainIdNumber",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.getChainId();case 3:return e.abrupt("return",e.sent);case 4:if(r=TI(t),!this.context.nonStrict){e.next=7;break}return e.abrupt("return",r);case 7:return e.next=9,this.getChainId();case 9:if((n=e.sent)===r){e.next=12;break}throw new Error("the specified chainId ".concat(r," does not match the wallet's connected chainId ").concat(n));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"packMsgAndSig",value:function(e,t,r){return Ht.encode(["address","uint256","bytes","bytes"],[this.address,r,e,t])}},{key:"signTransaction",value:function(e){throw new Error("signTransaction method is not supported in Wallet, please use signTransactions(...)")}},{key:"hasEnoughSigners",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,this.getChainIdNumber(t);case 3:return e.next=5,this.signWeight();case 5:return e.abrupt("return",e.sent.gte(this.config.threshold));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"singleOwner",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n){var i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=W_.isSigner(t)?t:new HE(t),e.t0=s,e.next=4,i.getAddress();case 4:return e.t1=e.sent,e.t2=e.t0.getAddress.call(e.t0,e.t1),e.t3={weight:1,address:e.t2},e.t4=[e.t3],o={threshold:1,signers:e.t4},e.abrupt("return",new r({config:o,context:n},i));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(GC),HC=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;(0,N.Z)(this,r),(n=t.call(this)).options=void 0,n._wallets=void 0,n._signers=void 0,n.provider=void 0,n._chainId=void 0,n.options=e;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return n._signers=o,e.context||(n.options.context=BC({},JI)),n.options.networks?n.setNetworks(n.options.networks):n.setNetworks((0,Z.Z)(KI)),n}return(0,k.Z)(r,[{key:"useSigners",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._signers=t,this._wallets.forEach((function(e){var r;e.wallet=(r=e.wallet).useSigners.apply(r,t)})),this}},{key:"getWalletContext",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.options.context);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getConfigFinder",value:function(){return this.options.configFinder?this.options.configFinder:new XR(this.authWallet().wallet.provider)}},{key:"getWalletConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t?(n=this.getWalletByNetwork(t))&&r.push(n):r=this._wallets,e.next=4,Promise.all(r.map((function(e){return e.wallet.getWalletConfig()})));case 4:return e.abrupt("return",e.sent.flat());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWalletState",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t?(n=this.getWalletByNetwork(t))&&r.push(n):r=this._wallets,i=Promise.all(r.map((function(e){return u.getConfigFinder().findCurrentConfig({address:e.wallet.address,provider:e.wallet.provider,context:e.wallet.context,knownConfigs:[e.wallet.config]})}))),e.next=5,Promise.all(r.map((function(e){return e.wallet.getWalletState()})));case 5:if(o=e.sent.flat(),!((a=o.findIndex((function(e){return e.chainId===u.getAuthChainId()})))>=0)){e.next=11;break}return e.next=10,this.currentConfig(r[a].wallet);case 10:o[a].config=e.sent;case 11:return e.next=13,i;case 13:return s=e.sent,e.abrupt("return",o.map((function(e,t){var r;return BC({},e,{config:null==(r=s[t])?void 0:r.config})})));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"address",get:function(){return this._wallets[0].wallet.address}},{key:"getAddress",value:function(){return this._wallets[0].wallet.getAddress()}},{key:"getSigners",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._wallets[0].wallet.getSigners());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProvider",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null==(r=this.mainWallet())?void 0:r.wallet.getProvider());case 2:return e.abrupt("return",null==(n=this._wallets.find((function(e){return e.network.chainId===t})))?void 0:n.wallet.getProvider());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRelayer",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null==(r=this.mainWallet())?void 0:r.wallet.getRelayer());case 2:return e.abrupt("return",null==(n=this._wallets.find((function(e){return e.network.chainId===t})))?void 0:n.wallet.getRelayer());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNetworks",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.options.networks);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._chainId){e.next=2;break}return e.abrupt("return",this._chainId);case 2:return e.next=4,this.provider.getNetwork();case 4:return t=e.sent,this._chainId=t.chainId,e.abrupt("return",this._chainId);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAuthChainId",value:function(){try{return this.options.networks.find((function(e){return e.isAuthChain})).chainId}catch($O){throw new Error("no auth network")}}},{key:"signMessage",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(f.length>2&&void 0!==f[2])||f[2],i=f.length>3&&void 0!==f[3]&&f[3],o=this,e.next=5,(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",o.mainWallet());case 2:if(!r.address){e.next=7;break}return e.next=5,r.getChainId();case 5:return t=e.sent,e.abrupt("return",o.getWalletByNetwork(t));case 7:return e.abrupt("return",o.getWalletByNetwork(r));case 8:case"end":return e.stop()}}),e)})))();case 5:return a=e.sent,s=a.wallet,e.next=9,this.currentConfig(s);case 9:return u=(u=e.sent)||this._wallets[0].wallet.config,s=s.useConfig(u),e.next=14,s.signWeight();case 14:if(!(c=e.sent).lt(s.config.threshold)||!1===n){e.next=17;break}throw new jC("Sign message - wallet combined weight ".concat(c.toString()," below required ").concat(s.config.threshold.toString()));case 17:return e.abrupt("return",s.signMessage(t,void 0,n,i));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"signAuthMessage",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>1&&void 0!==o[1])||o[1],n=o.length>2&&void 0!==o[2]&&o[2],e.abrupt("return",this.signMessage(t,null==(i=this.authWallet())?void 0:i.wallet,r,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o,a,s,u=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!(u.length>4&&void 0!==u[4])||u[4],a=i?this.getWalletByNetwork(i).wallet:this.mainWallet().wallet,s=gI({domain:t,types:r,message:n}),e.abrupt("return",this.signMessage(s,a,o,!0));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"_signTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o,a=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!(a.length>4&&void 0!==a[4])||a[4],e.abrupt("return",this.signTypedData(t,r,n,i,o));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"hasEnoughSigners",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?this.getWalletByNetwork(t).wallet:this.mainWallet().wallet,e.next=3,this.currentConfig(r);case 3:return n=e.sent,e.abrupt("return",r.useConfig(n).hasEnoughSigners());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeOptions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f,l,h=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(h.length>2&&void 0!==h[2])||h[2],o=r?this.getWalletByNetwork(r).wallet:this.mainWallet().wallet,a=this.options.context){e.next=5;break}throw new Error("missing wallet context");case 5:return e.next=7,Promise.all([this.currentConfig(o),this.prependConfigUpdate(t,r,i,!0)]);case 7:if(s=e.sent,u=(0,D.Z)(s,2),c=u[0],f=u[1],c){e.next=13;break}throw new Error("missing current config for chain ".concat(r));case 13:return e.next=15,dC(a,this.address,f);case 15:return l=e.sent,e.abrupt("return",(n=o.relayer).getFeeOptions.apply(n,[c,a].concat((0,Z.Z)(l))));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(f.length>2&&void 0!==f[2])||f[2],i=f.length>3?f[3]:void 0,o=f.length>4?f[4]:void 0,e.next=5,this.signTransactions(t,r,n);case 5:return a=e.sent,o&&(s=BR(a.config,a.context),u=XT.apply(void 0,[s,a.chainId].concat((0,Z.Z)(a.transactions))),o(a,u)),c=r?this.getWalletByNetwork(r).wallet:this.mainWallet().wallet,e.abrupt("return",c.sendSignedTransactions(a,r,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"sendTransactionBatch",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>2&&void 0!==a[2])||a[2],i=a.length>3?a[3]:void 0,o=a.length>4?a[4]:void 0,e.abrupt("return",this.sendTransaction(t,r,n,i,o));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"signTransactions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r?this.getWalletByNetwork(r).wallet:this.mainWallet().wallet,e.next=3,this.currentConfig(i);case 3:if(o=e.sent){e.next=10;break}return e.next=7,this.currentConfig();case 7:if(o=e.sent){e.next=10;break}throw new Error("missing auth chain config");case 10:return e.next=12,this.prependConfigUpdate(t,r,n);case 12:return a=e.sent,e.abrupt("return",i.useConfig(o).signTransactions(a));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"prependConfigUpdate",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o,a,s,u,c,f,l,h;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qC(t);case 2:return o=e.sent,a=r?this.getWalletByNetwork(r).wallet:this.mainWallet().wallet,e.next=6,Promise.all([this.currentConfig(a),this.currentConfig()]);case 6:if(s=e.sent,u=(0,D.Z)(s,2),c=u[0],f=u[1],i){e.next=16;break}return e.next=13,a.useConfig(c).signWeight();case 13:if(!(l=e.sent).lt(c.threshold)||!n){e.next=16;break}throw new jC("wallet combined weight ".concat(l.toString()," below required threshold ").concat(c.threshold.toString()));case 16:return e.next=18,a.isDeployed();case 18:if(e.t0=e.sent,!e.t0){e.next=21;break}e.t0=jR(f,c);case 21:if(!e.t0){e.next=23;break}return e.abrupt("return",o);case 23:return h=Array.isArray(o)?o:[o],e.t1=[],e.t2=Z.Z,e.next=28,a.buildUpdateConfigTransaction(f,!1);case 28:return e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t5=(0,Z.Z)(h),e.abrupt("return",e.t1.concat.call(e.t1,e.t4,e.t5));case 32:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"sendSignedTransactions",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r?this.getWalletByNetwork(r).wallet:this.mainWallet().wallet,e.abrupt("return",i.sendSignedTransactions(t,void 0,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"updateConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o,a,s,u,c;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=this.authWallet().wallet,t=t?WR(t):o.config,!jR(o.config,t)){e.next=9;break}return e.next=5,this.isDeployed();case 5:if(e.sent){e.next=9;break}return e.next=8,o.updateConfig(t,void 0,!0,r,n,i);case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,this.currentConfig();case 11:if(a=e.sent,!jR(a,t)){e.next=14;break}return e.abrupt("return",[BC({},a,{address:this.address}),void 0]);case 14:return e.next=16,o.useConfig(a).updateConfig(t,void 0,!0,r,n,i);case 16:return s=e.sent,u=(0,D.Z)(s,2),u[0],c=u[1],e.abrupt("return",[BC({},t,{address:this.address}),c]);case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"publishConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;return this.authWallet().wallet.publishConfig(e,void 0,t,r,n)}},{key:"isDeployed",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?t.address?t:n.getWalletByNetwork(t).wallet:n.authWallet().wallet,e.abrupt("return",r.isDeployed());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"currentConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t?t.address?t:n.getWalletByNetwork(t).wallet:n.authWallet().wallet,e.next=3,this.getConfigFinder().findCurrentConfig({address:this.address,provider:r.provider,context:r.context,knownConfigs:[r.config]});case 3:return e.abrupt("return",e.sent.config);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWallets",value:function(){return this._wallets}},{key:"getWalletByNetwork",value:function(e){var t=TI(e),r=this._wallets.find((function(e){return e.network.chainId===t}));if(!r)throw new Error("network ".concat(e," not found in wallets list"));return r}},{key:"mainWallet",value:function(){var e=this._wallets.find((function(e){return e.network.isDefaultChain}));if(!e)throw new Error("mainWallet not found");return e}},{key:"authWallet",value:function(){var e=this._wallets.find((function(e){return e.network.isAuthChain}));if(!e)throw new Error("authChain wallet not found");return e}},{key:"setNetworks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=[];if(this._chainId=void 0,n){var o=parseInt(n),a=e.find((function(e){return e.name===n||e.chainId===o})),s=r.find((function(e){return e.name===n||e.chainId===o}));if(!a&&!s)throw new Error("unable to set default network as chain '".concat(n,"' does not exist"));a?(e.forEach((function(e){return e.isDefaultChain=!1})),a.isDefaultChain=!0,i=e):s&&(r.forEach((function(e){return e.isDefaultChain=!1})),s.isDefaultChain=!0,i=r)}else i=e;return this.options.networks=UI(GI(i)),this._wallets=this.options.networks.map((function(e){var r=(0,L.Z)(KC,[{config:t.options.initialConfig,context:t.options.context}].concat((0,Z.Z)(t._signers)));if(e.provider)r.setProvider(e.provider,e.chainId);else{if(!e.rpcUrl||""===e.rpcUrl)throw new Error("network config is missing provider settings for chainId ".concat(e.chainId));r.setProvider(e.rpcUrl,e.chainId)}if(ZC(e.relayer))r.setRelayer(e.relayer);else{if(!MC(e.relayer))throw new Error("network config is missing relayer settings for chainId ".concat(e.chainId));r.setRelayer(new DC(BC({provider:r.provider},e.relayer)))}return e.isDefaultChain&&(t._chainId=e.chainId,t.provider=r.provider),{network:e,wallet:r}})),this.options.networks.find((function(e){return e.isDefaultChain})).chainId}},{key:"connect",value:function(e){throw new Error("connect method is not supported in MultiWallet")}},{key:"signTransaction",value:function(e){throw new Error("signTransaction method is not supported in MultiWallet, please use signTransactions(...)")}}]),r}(GC);function JC(e,t,r,n,i,o){return XC.apply(this,arguments)}function XC(){return XC=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$C(t,r,n)&&!YC(t,r,n)){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,QC(t,r,n,i);case 4:if(void 0!==(s=e.sent)){e.next=9;break}return e.next=8,tP(t,r,n,o,i,a);case 8:return e.abrupt("return",!!e.sent);case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e)}))),XC.apply(this,arguments)}function $C(e,t,r){try{return 0===zR(Jv(t,vi(r)),e)}catch($O){return!1}}function YC(e,t,r){try{var n=uc(Cf(["string","bytes32"],["\x19Ethereum Signed Message:\n32",t]));return 0===zR(Jv(n,vi(r)),e)}catch(i){return!1}}function QC(e,t,r,n){return eP.apply(this,arguments)}function eP(){return eP=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,i.getCode(t);case 5:if(e.t0=e.sent,"0x"!==e.t0){e.next=8;break}return e.abrupt("return",void 0);case 8:return o=new IA(t,b.erc1271.abi,i),e.next=11,o.isValidSignature(r,n);case 11:return a=e.sent,e.abrupt("return",b.erc1271.returns.isValidSignatureBytes32===a);case 15:return e.prev=15,e.t1=e.catch(2),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[2,15]])}))),eP.apply(this,arguments)}function tP(e,t,r,n,i,o){return rP.apply(this,arguments)}function rP(){return rP=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s,u,c,f,l;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o||a){e.next=2;break}return e.abrupt("return",void 0);case 2:if(i){e.next=4;break}return e.abrupt("return",void 0);case 4:if(e.prev=4,!a){e.next=9;break}e.t0=a,e.next=12;break;case 9:return e.next=11,o.getNetwork();case 11:e.t0=e.sent.chainId;case 12:return s=e.t0,u=rT(n),c=ri(uc(YS(t,s,r))),e.next=17,oP(c,u,o,i,a,!0);case 17:return f=e.sent,l=u.signers.reduce((function(e,t){return QR(t)||tT(t)?e+t.weight:e}),0),e.abrupt("return",0===zR(BR(f,i),t)&&l>=u.threshold);case 22:return e.prev=22,e.t1=e.catch(4),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,null,[[4,22]])}))),rP.apply(this,arguments)}var nP=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAddress();case 2:return r=e.sent,e.t0=IA,e.t1=r,e.t2=b.mainModuleUpgradable.abi,e.next=8,t.getProvider();case 8:return e.t3=e.sent,n=new e.t0(e.t1,e.t2,e.t3),e.next=12,n.functions.imageHash.call([]).catch((function(){return[]}));case 12:return i=e.sent,e.abrupt("return",i&&i.length>0?i[0]:"");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),iP=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=ri(uc(t)),e.abrupt("return",oP(s,r,n,i,o,a));case 2:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}(),oP=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0!==r.threshold?r:rT(r),e.next=3,Promise.all(s.signers.map(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!QR(r)){e.next=4;break}return e.abrupt("return",{weight:r.weight,address:oT(t,r)});case 4:if(!$R(r)){e.next=8;break}return e.abrupt("return",{weight:r.weight,address:Jr(r.address)});case 8:if(!tT(r)){e.next=17;break}if(!a){e.next=14;break}return e.next=12,JC(r.address,ri(t),ui(r.signature),n,i,o);case 12:if(e.sent){e.next=14;break}throw Error("Invalid signature");case 14:return e.abrupt("return",{weight:r.weight,address:r.address});case 17:throw Error("Uknown signature type");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return u=e.sent,e.abrupt("return",{threshold:s.threshold,signers:u});case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}();function aP(){return aP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aP.apply(this,arguments)}var sP=604800,uP=3e7,cP=function(){function e(t,r,n,i,o,a,s,u,c){var f;((0,N.Z)(this,e),this.sequenceApiUrl=t,this.sequenceMetadataUrl=r,this.networks=n,this.config=i,this.context=o,this.account=a,this.metadata=s,this.authProvider=u,this._initialAuthRequest=void 0,this._jwt=void 0,this.proofStrings=new Map,this.onAuthCallbacks=[],this.apiClient=void 0,this.metadataClient=void 0,this.indexerClients=new Map,c)&&(this._jwt={token:Promise.resolve(c.token),expiration:null!=(f=c.expiration)?f:lP(c.token)})}return(0,k.Z)(e,[{key:"name",get:function(){return this.metadata.name}},{key:"expiration",get:function(){return this.metadata.expiration?Math.max(this.metadata.expiration,120):sP}},{key:"onAuth",value:function(e){this.onAuthCallbacks.push(e)}},{key:"setAccount",value:function(e){this.account=e}},{key:"setConfig",value:function(e){this.config=e}},{key:"auth",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r,n,i,o=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:5,r=this.sequenceApiUrl){e.next=4;break}throw Error("No sequence api url");case 4:i=0;case 5:return e.prev=5,e.next=8,this.getJWT(!0);case 8:return n=e.sent.token,e.abrupt("break",20);case 12:if(e.prev=12,e.t0=e.catch(5),i!==t-1){e.next=17;break}throw console.error("couldn't authenticate after ".concat(t," attempts"),e.t0),e.t0;case 17:i++,e.next=5;break;case 20:return e.abrupt("return",new M(r,n));case 21:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"isTestnetMode",get:function(){if(this.networks&&0!==this.networks.length)return!!this.networks[0].testnet}},{key:"getAPIClient",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r,n,i=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(i.length>0&&void 0!==i[0])||i[0],this.apiClient){e.next=9;break}if(r=this.sequenceApiUrl){e.next=5;break}throw Error("No chaind url");case 5:return e.next=7,this.getJWT(t);case 7:n=e.sent.token,this.apiClient=new M(r,n);case 9:return e.abrupt("return",this.apiClient);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMetadataClient",value:function(){return this.metadataClient||(this.metadataClient=new WT(this.sequenceMetadataUrl)),this.metadataClient}},{key:"getIndexerClient",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=LI(this.networks,t)){e.next=3;break}throw Error("No network for chain ".concat(t));case 3:if(this.indexerClients.has(r.chainId)){e.next=13;break}if(!r.indexer){e.next=8;break}this.indexerClients.set(r.chainId,r.indexer),e.next=13;break;case 8:if(!r.indexerUrl){e.next=12;break}this.indexerClients.set(r.chainId,new RT(r.indexerUrl)),e.next=13;break;case 12:throw Error("No indexer url for chain ".concat(t));case 13:return e.abrupt("return",this.indexerClients.get(r.chainId));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getJWT",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u,c,f,l,h=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this,n=this.sequenceApiUrl){e.next=4;break}throw Error("No chaind url");case 4:if(!this._jwt){e.next=12;break}return i=this._jwt,e.next=8,i.token;case 8:if(o=e.sent,!(this.now()<i.expiration)){e.next=11;break}return e.abrupt("return",{token:o,expiration:i.expiration});case 11:this._jwt=void 0;case 12:if(t){e.next=14;break}throw new Error("no auth token in memory");case 14:return a=this.getProofStringKey(),s=this.getProofString(a),u=s.proofString,c=s.expiration,f={token:u.then(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new M(n),e.next=3,i.getAuthToken({ewtString:t,testnetMode:r.isTestnetMode});case 3:if(!0!==(null==(o=e.sent)?void 0:o.status)||0===o.jwtToken.length){e.next=8;break}return e.abrupt("return",o.jwtToken);case 8:return e.next=10,r.isProofStringValid(t);case 10:if(e.sent){e.next=12;break}r.proofStrings.delete(a);case 12:throw new Error("no auth token from server");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){throw h._jwt=void 0,e})),expiration:c},this._jwt=f,f.token.then((function(){h.onAuthCallbacks.forEach((function(e){try{e({status:"fulfilled",value:void 0})}catch($O){}}))})).catch((function(e){h.onAuthCallbacks.forEach((function(t){try{t({status:"rejected",reason:e})}catch(r){}}))})),e.next=21,f.token;case 21:return l=e.sent,e.abrupt("return",{token:l,expiration:c});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProofString",value:function(e){var t=this;if(this.proofStrings.has(e)){var r=this.proofStrings.get(e);if(this.now()<r.expiration)return r;this.proofStrings.delete(e)}var n=new g_({address:this.account.address});n.claims.app=this.name,"object"===typeof window&&(n.claims.ogn=window.location.origin),n.setExpiryIn(this.expiration);var i=new A_,o=new XR(this.authProvider),a=this.account.authWallet(),s=this.now()+this.expiration-60,u={proofString:o.findCurrentConfig({address:a.wallet.address,provider:this.authProvider,context:a.wallet.context,knownConfigs:[a.wallet.config]}).then((function(e){if(!e.config)throw Error("Can't find latest config");return a.wallet.useConfig(e.config).sign(n.messageDigest()).then((function(e){var t=rT(e),r=t.signers.filter(YR).reduce((function(e,t){return e+t.weight}),0);if(r<t.threshold)throw Error("insufficient signing power, need ".concat(t.threshold,", have ").concat(r));return n.signature=e,i.encodeProof(n,!0)}))})).catch((function(r){throw t.proofStrings.delete(e),r})),expiration:s};return this.proofStrings.set(e,u),u}},{key:"getProofStringKey",value:function(){return"".concat(this.account.address," - ").concat(this.name)}},{key:"isProofStringValid",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new A_).provider=this.authProvider,e.next=5,r.decodeProof(t);case 5:return e.abrupt("return",!0);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"dump",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._jwt){e.next=12;break}return e.prev=1,r=this._jwt.expiration,e.next=5,this._jwt.token;case 5:e.t0=e.sent,e.t1=r,t={token:e.t0,expiration:e.t1},e.next=12;break;case 10:e.prev=10,e.t2=e.catch(1);case 12:return e.abrupt("return",{config:this.config,context:this.context,metadata:this.metadata,jwt:t});case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"now",value:function(){return Math.floor((new Date).getTime()/1e3)}}],[{key:"open",value:function(){var t=(0,G.Z)((0,B.Z)().mark((function t(r){var n,i,o,a,s,u,c,f,l,h,d,p,v,g,m,y,b,E,w,N,k,A,x,_,S;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.sequenceApiUrl,i=r.sequenceMetadataUrl,o=r.context,a=r.networks,s=r.referenceSigner,u=r.signers,c=r.threshold,f=r.deepSearch,l=r.knownConfigs,h=r.noIndex,d=r.metadata,p=fP(a),v=r.configFinder?r.configFinder:new XR(p),g=Promise.all(u.map(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=aP,e.t1={},e.t2=t,"string"!==typeof t.signer){e.next=7;break}e.t3=t.signer,e.next=10;break;case 7:return e.next=9,t.signer.getAddress();case 9:e.t3=e.sent;case 10:return e.t4=e.t3,e.t5={address:e.t4},e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t5));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),m=u.filter((function(e){return"string"!==typeof e.signer})).map((function(e){return e.signer})),t.next=7,v.findLastWalletOfInitialSigner({signer:s,context:o,provider:p,requireIndex:!f});case 7:if(!(y=t.sent.wallet)){t.next=37;break}return t.next=11,v.findCurrentConfig({address:y,provider:p,context:o,knownConfigs:l});case 11:if(b=t.sent.config){t.next=14;break}throw Error("Wallet config not found");case 14:return E=(0,L.Z)(HC,[{initialConfig:b,networks:a,context:o}].concat((0,Z.Z)(m))),w=new e(n,i,a,b,o,E,d,p),t.t0=E,t.t1=qR,t.t2=b,t.t3=c,t.next=22,g;case 22:return t.t4=t.sent,t.t5={threshold:t.t3,set:t.t4},t.t6=(0,t.t1)(t.t2,t.t5),t.t7=!h,t.next=28,t.t0.updateConfig.call(t.t0,t.t6,t.t7);case 28:return N=t.sent,k=(0,D.Z)(N,1),A=k[0],w.setConfig(A),w.setAccount((0,L.Z)(HC,[{initialConfig:A,networks:a,context:o}].concat((0,Z.Z)(m)))),w._initialAuthRequest=n?w.auth():Promise.reject("no sequence api url"),t.abrupt("return",w);case 37:return t.t8=VR,t.t9=c,t.next=41,g;case 41:return t.t10=t.sent,x=(0,t.t8)(t.t9,t.t10),_=(0,L.Z)(HC,[{initialConfig:x,networks:a,context:o}].concat((0,Z.Z)(m))),t.next=46,_.publishConfig(!h,[s]);case 46:return(S=new e(n,i,a,x,o,_,d,p))._initialAuthRequest=n?S.auth():Promise.reject("no sequence api url"),t.abrupt("return",S);case 49:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"load",value:function(t){var r=t.sequenceApiUrl,n=t.sequenceMetadataUrl,i=t.dump,o=t.signers,a=t.networks;return new e(r,n,a,i.config,i.context,(0,L.Z)(HC,[{initialConfig:i.config,context:i.context,networks:a}].concat((0,Z.Z)(o))),i.metadata,fP(a),i.jwt)}}]),e}();function fP(e){var t,r=PI(e);if(!r)throw Error("Auth chain not found");return null!=(t=r.provider)?t:new gR(r.rpcUrl,{chainId:r.chainId,blockCache:!0})}function lP(e){return rI(e).exp}var hP=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,u,c;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getChainId();case 2:return n=e.sent,e.t0=s,e.next=6,t.getAddress();case 6:if(e.t1=e.sent,(i=e.t0.getAddress.call(e.t0,e.t1))&&""!==i&&"0x"!==i){e.next=10;break}throw pP;case 10:if((o=new g_).address=i,r&&r.app&&""!==r.app){e.next=14;break}throw new dP("authorization options requires app to be set");case 14:return o.claims.app=r.app,o.claims.ogn=r.origin,o.setExpiryIn(r.expiry?Math.max(r.expiry,200):sP),a=o.messageTypedData(),e.next=20,t.signTypedData(a.domain,a.types,a.message,n);case 20:return o.signature=e.sent,u=new A_,e.next=24,u.encodeProof(o,!0);case 24:return c=e.sent,e.abrupt("return",{typedData:a,proofString:c});case 26:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),dP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this,e)).name="AuthError",n}return(0,k.Z)(r)}((0,F.Z)(Error)),pP=new dP("auth error: account address is empty"),vP=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a,s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&void 0!==t&&void 0!==r){e.next=2;break}return e.abrupt("return",{isValid:!1});case 2:return i=n.messageDigest(),e.next=5,t.getCode(n.address);case 5:if(!("0x"===(o=e.sent)||o.length<=2)){e.next=8;break}throw new Error("ValidateSequenceDeployedWalletProof failed. unable to fetch wallet contract code");case 8:return a=["function isValidSignature(bytes32, bytes) public view returns (bytes4)"],s=new IA(n.address,a,t),e.next=12,s.isValidSignature(i,ri(n.signature));case 12:if(e.sent!==E_){e.next=17;break}return e.abrupt("return",{isValid:!0});case 17:return e.abrupt("return",{isValid:!1});case 18:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),gP=function(e){return function(){var t=(0,G.Z)((0,B.Z)().mark((function t(r,n,i){var o,a,u;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&void 0!==r&&void 0!==n){t.next=2;break}return t.abrupt("return",{isValid:!1});case 2:return t.t0=s,t.next=5,r.getCode(i.address);case 5:if(t.t1=t.sent,0===t.t0.arrayify.call(t.t0,t.t1).length){t.next=9;break}return t.abrupt("return",{isValid:!1});case 9:return o=i.messageDigest(),a=ri(uc(o)),t.next=13,tP(i.address,a,i.signature,e||JI,r,n);case 13:return u=t.sent,t.abrupt("return",{isValid:!!u});case 15:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()};function mP(){return mP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mP.apply(this,arguments)}var yP="v1",bP="v0.4.0",EP="98e0726794b2b5922a0e356280daac3a409602e4",wP=function(){function e(t,r){var n=this;(0,N.Z)(this,e),this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Guard/",this.ping=function(e){return n.fetch(n.url("Ping"),NP({},e)).then((function(e){return kP(e).then((function(e){return{status:e.status}}))}))},this.version=function(e){return n.fetch(n.url("Version"),NP({},e)).then((function(e){return kP(e).then((function(e){return{version:e.version}}))}))},this.runtimeStatus=function(e){return n.fetch(n.url("RuntimeStatus"),NP({},e)).then((function(e){return kP(e).then((function(e){return{status:e.status}}))}))},this.getSequenceContext=function(e){return n.fetch(n.url("GetSequenceContext"),NP({},e)).then((function(e){return kP(e).then((function(e){return{data:e.data}}))}))},this.getSignerConfig=function(e){return n.fetch(n.url("GetSignerConfig"),NP({},e)).then((function(e){return kP(e).then((function(e){return{signerConfig:e.signerConfig}}))}))},this.sign=function(e,t){return n.fetch(n.url("Sign"),NP(e,t)).then((function(e){return kP(e).then((function(e){return{sig:e.sig}}))}))},this.hostname=t,this.fetch=function(e,t){return r(e,t)}}return(0,k.Z)(e,[{key:"url",value:function(e){return this.hostname+this.path+e}}]),e}(),NP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{method:"POST",headers:mP({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{"Content-Type":"application/json"}),body:JSON.stringify(e||{})}},kP=function(e){return e.text().then((function(t){var r;try{r=JSON.parse(t)}catch(n){throw{code:"unknown",msg:"expecting JSON, got: ".concat(t),status:e.status}}if(!e.ok)throw r;return r}))},AP=r(73579),xP=new DA.Yd(LA),_P=1;function SP(e,t){var r="Web3LegacyFetcher";return function(e,n){var i=this,o={method:e,params:n,id:_P++,jsonrpc:"2.0"};return new Promise((function(e,n){i.emit("debug",{action:"request",fetcher:r,request:(0,OA.p$)(o),provider:i}),t(o,(function(t,a){if(t)return i.emit("debug",{action:"response",fetcher:r,error:t,request:o,provider:i}),n(t);if(i.emit("debug",{action:"response",fetcher:r,request:o,response:a,provider:i}),a.error){var s=new Error(a.error.message);return s.code=a.error.code,s.data=a.error.data,n(s)}e(a.result)}))}))}}var IP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r),null==e&&xP.throwArgumentError("missing provider","provider",e);var o=null,a=null,s=null;return"function"===typeof e?(o="unknown:",a=e):(!(o=e.host||e.path||"")&&e.isMetaMask&&(o="metamask"),s=e,e.request?(""===o&&(o="eip-1193:"),a=function(e){return function(t,r){var n=this;null==r&&(r=[]);var i={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:(0,OA.p$)(i),provider:this}),e.request(i).then((function(e){return n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:e,provider:n}),e}),(function(e){throw n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:e,provider:n}),e}))}}(e)):e.sendAsync?a=SP(0,e.sendAsync.bind(e)):e.send?a=SP(0,e.send.bind(e)):xP.throwArgumentError("unsupported provider","provider",e),o||(o="unknown:")),i=t.call(this,o,n),(0,OA.zG)((0,nm.Z)(i),"jsonRpcFetchFunc",a),(0,OA.zG)((0,nm.Z)(i),"provider",s),i}return(0,k.Z)(r,[{key:"send",value:function(e,t){return this.jsonRpcFetchFunc(e,t)}}]),r}(Ux);function RP(){return RP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RP.apply(this,arguments)}var TP,CP,PP,OP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,null,[{key:"new",value:function(e){return new URLSearchParams(e)}}]),r}((0,F.Z)(URLSearchParams));!function(e){e.OPEN="open",e.CLOSE="close",e.MESSAGE="message",e.CONNECT="connect",e.DISCONNECT="disconnect",e.ACCOUNTS_CHANGED="accountsChanged",e.CHAIN_CHANGED="chainChanged",e.NETWORKS="networks",e.WALLET_CONTEXT="walletContext",e.INIT="init",e.DEBUG="_debug"}(TP||(TP={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.OPENING=1]="OPENING",e[e.OPENED=2]="OPENED"}(CP||(CP={})),function(e){e[e.NIL=0]="NIL",e[e.SENT_NONCE=1]="SENT_NONCE",e[e.OK=2]="OK"}(PP||(PP={}));var UP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this,e)).name="ProviderError",n}return(0,k.Z)(r)}((0,F.Z)(Error)),MP=new UP("Wallet is not signed in. Connect a wallet and try again."),FP=3e4,DP=0,LP=function(){return++DP},ZP=function(){function e(){(0,N.Z)(this,e);var t=this;this.pendingMessageRequests=[],this.responseCallbacks=new Map,this.state=void 0,this.confirmationOnly=!1,this.events=new AP.EventEmitter2,this.openPayload=void 0,this.connectPayload=void 0,this.accountsChangedPayload=void 0,this.networksPayload=void 0,this.walletContextPayload=void 0,this._sessionId=void 0,this._init=void 0,this._registered=void 0,this.sendAsync=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(r,n,i){var o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state===CP.CLOSED&&(t.confirmationOnly=!0),t.openWallet(void 0,{type:"jsonRpcRequest",method:r.method},i),e.prev=2,t.isOpened()){e.next=6;break}return e.next=6,t.waitUntilOpened();case 6:return e.next=8,t.sendMessageRequest({idx:LP(),type:TP.MESSAGE,data:r,chainId:i});case 8:o=e.sent,n(void 0,o.data),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,r,n){return e.apply(this,arguments)}}(),this.sendMessageRequest=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){(!r.idx||r.idx<=0)&&"init"!==r.type&&n(new Error("message idx not set"));var i=r.idx;t.responseCallbacks.get(i)?n(new Error("duplicate message idx, should never happen")):t.responseCallbacks.set(i,(function(t,r){if(t)n(t);else{if(!r)throw new Error("no valid response to return");e(r)}})),t.isOpened()?t.sendMessage(r):(oI.debug("pushing to pending requests",r),t.pendingMessageRequests.push(r))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.waitUntilOpened=(0,G.Z)((0,B.Z)().mark((function e(){var r,n,i=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>0&&void 0!==i[0]?i[0]:FP,n=!1,e.abrupt("return",Promise.race([new Promise((function(e,i){var o=setTimeout((function(){clearTimeout(o),n||(t.state=CP.CLOSED,t.events.emit("close",{code:1005,message:"opening wallet timed out"})),i(new Error("opening wallet timed out"))}),r)})),new Promise((function(e){var r;if(t.isOpened())return n=!0,void e(null==(r=t.openPayload)?void 0:r.session);t.events.once("open",(function(r){t.openPayload=r,n=!0,e(r.session)}))}))]));case 3:case"end":return e.stop()}}),e)}))),this.waitUntilConnected=(0,G.Z)((0,B.Z)().mark((function e(){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitUntilOpened();case 2:return r=new Promise((function(e){t.connectPayload?e(t.connectPayload):t.events.once("connect",(function(r){t.connectPayload=r,e(r)}))})),n=new Promise((function(e,r){t.events.once("close",(function(e){r(e?new Error("wallet closed due to ".concat(JSON.stringify(e))):new Error("user closed the wallet"))}))})),e.abrupt("return",Promise.race([r,n]));case 5:case"end":return e.stop()}}),e)}))),this.state=CP.CLOSED,this._registered=!1,this._init=PP.NIL}return(0,k.Z)(e,[{key:"registered",get:function(){return this._registered}},{key:"register",value:function(){throw new Error("abstract method")}},{key:"unregister",value:function(){throw new Error("abstract method")}},{key:"openWallet",value:function(e,t,r){throw new Error("abstract method")}},{key:"closeWallet",value:function(){throw new Error("abstract method")}},{key:"isOpened",value:function(){return this.registered&&this.state===CP.OPENED}},{key:"isConnected",value:function(){var e,t=null==(e=this.openPayload)?void 0:e.session;return this.registered&&void 0!==t&&!!t.accountAddress&&42===t.accountAddress.length&&!!t.networks&&t.networks.length>0}},{key:"handleMessage",value:function(e){var t=this,r=this;if(e.type===TP.INIT){oI.debug("MessageProvider, received INIT message",e);var n=e.data.nonce;if(!n||0==n.length)return void oI.error("invalid init nonce");this._init=PP.OK,this.sendMessage({idx:-1,type:TP.INIT,data:{sessionId:this._sessionId,nonce:n}})}if(this._init===PP.OK){oI.debug("RECEIVED MESSAGE FROM WALLET",e.idx,e);var i=e.idx,o=this.responseCallbacks.get(i);if(i&&this.responseCallbacks.delete(i),e.type!==TP.OPEN||this.isOpened()){if(e.type===TP.MESSAGE){if(this.confirmationOnly&&setTimeout((function(){0===t.responseCallbacks.size&&t.closeWallet()}),500),!o)throw new Error("impossible state");if(o)return this.events.emit("message",e),void o(e.data.error,e)}if(e.type===TP.ACCOUNTS_CHANGED)return this.accountsChangedPayload={accounts:[]},void(e.data&&e.data.length>0?(this.accountsChangedPayload={accounts:[Jr(e.data[0])],origin:e.origin},this.events.emit("accountsChanged",this.accountsChangedPayload.accounts,this.accountsChangedPayload.origin)):this.events.emit("accountsChanged",[],e.origin));if(e.type!==TP.CHAIN_CHANGED){if(e.type===TP.NETWORKS)return this.networksPayload=e.data,void this.events.emit("networks",this.networksPayload);if(e.type===TP.WALLET_CONTEXT)return this.walletContextPayload=e.data,void this.events.emit("walletContext",this.walletContextPayload);e.type===TP.CLOSE&&this.state!==CP.CLOSED&&this.close(e.data),e.type===TP.CONNECT&&(this.connectPayload=e.data,this.events.emit("connect",this.connectPayload)),e.type===TP.DISCONNECT&&this.isConnected()&&(this.events.emit("disconnect",e.data),this.close())}else this.events.emit("chainChanged",e.data)}else{var a,s;if(this._sessionId&&this._sessionId!==(null==(a=e.data)?void 0:a.sessionId))return void oI.debug("open event received from wallet, but does not match sessionId",this._sessionId);if(null!=(s=e.data)&&s.error){var u,c=new Error("opening wallet failed: received ".concat(null==(u=e.data)?void 0:u.error));throw oI.error(c),this.close(),c}this.state=CP.OPENED,this.openPayload=e.data,this.events.emit("open",this.openPayload),0!==this.pendingMessageRequests.length&&this.pendingMessageRequests.splice(0,this.pendingMessageRequests.length).forEach(function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sendMessage(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}},{key:"sendMessage",value:function(e){throw new Error("abstract method")}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"emit",value:function(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(t=this.events).emit.apply(t,[e].concat(n))}},{key:"close",value:function(e){this.state!==CP.CLOSED&&(this.state=CP.CLOSED,this.confirmationOnly=!1,this._sessionId=void 0,oI.info("closing wallet and flushing!"),this.pendingMessageRequests.length=0,this.responseCallbacks.forEach((function(e){e(RP({},new Error("wallet closed"),{code:4001}))})),this.responseCallbacks.clear(),this.connectPayload=void 0,this.openPayload=void 0,this.accountsChangedPayload=void 0,this.networksPayload=void 0,this.walletContextPayload=void 0,this.events.emit("close",e))}}]),e}(),BP=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];(0,N.Z)(this,e);var o=this;this.signer=void 0,this.signerReadyCallbacks=[],this.prompter=void 0,this.mainnetNetworks=void 0,this.testnetNetworks=void 0,this._openIntent=void 0,this._connectOptions=void 0,this._defaultNetworkId=void 0,this._chainId=void 0,this.events=new AP.EventEmitter2,this.onConnectOptionsChange=void 0,this.promptConnect=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||o._connectOptions){e.next=2;break}throw new Error("prompter connect options are empty");case 2:if(o.prompter){e.next=4;break}return e.abrupt("return",o.connect(t));case 4:return e.next=6,o.prompter.promptConnect(t||o._connectOptions).catch((function(e){return{connected:!1}}));case 6:if(r=e.sent,!(n=r).connected||n.session){e.next=12;break}return e.next=11,o.walletSession();case 11:n.session=e.sent;case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendAsync=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,a,u,c,f,l,h,d,p,v,g,m,y,b,E,w,N,k,A,x,_,S,I,R,T,C,P,O,U,M,F,L,Z,G,W,j,z,q,V,K,H,J,X,$,Y,Q,ee,te,re,ne,ie,oe,ae,se,ue;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={jsonrpc:"2.0",id:t.id,result:null},e.next=3,o.getSigner();case 3:if(e.prev=3,o.signer&&null!==o.signer||GP.includes(t.method)){e.next=6;break}throw MP;case 6:if(a=o.signer){e.next=9;break}throw new Error("WalletRequestHandler: wallet signer is not configured");case 9:return e.next=11,a.getProvider(n);case 11:if(u=e.sent){e.next=14;break}throw new Error("WalletRequestHandler: wallet provider is not configured for chainId ".concat(n));case 14:e.t0=t.method,e.next="net_version"===e.t0?17:"eth_chainId"===e.t0?22:"eth_accounts"===e.t0?27:"eth_getBalance"===e.t0?32:"personal_sign"===e.t0||"eth_sign"===e.t0?38:"eth_signTypedData"===e.t0||"eth_signTypedData_v4"===e.t0?60:"eth_sendTransaction"===e.t0?85:"eth_signTransaction"===e.t0?104:"eth_sendRawTransaction"===e.t0?122:"eth_getTransactionCount"===e.t0?139:"eth_blockNumber"===e.t0?158:"eth_getBlockByNumber"===e.t0?162:"eth_getBlockByHash"===e.t0?166:"eth_getTransactionByHash"===e.t0?170:"eth_call"===e.t0?174:"eth_getCode"===e.t0?179:"eth_estimateGas"===e.t0?184:"eth_gasPrice"===e.t0?189:"wallet_switchEthereumChain"===e.t0?194:"sequence_getWalletContext"===e.t0?205:"sequence_getWalletConfig"===e.t0?209:"sequence_getWalletState"===e.t0?214:"sequence_getNetworks"===e.t0?219:"sequence_isSequence"===e.t0?223:"sequence_updateConfig"===e.t0?225:"sequence_publishConfig"===e.t0?227:"sequence_gasRefundOptions"===e.t0?229:"sequence_getNonce"===e.t0?230:"sequence_relay"===e.t0?231:"sequence_setDefaultNetwork"===e.t0?232:244;break;case 17:return e.next=19,u.send("net_version",[]);case 19:return c=e.sent,i.result=c,e.abrupt("break",248);case 22:return e.next=24,u.send("eth_chainId",[]);case 24:return f=e.sent,i.result=f,e.abrupt("break",248);case 27:return e.next=29,a.getAddress();case 29:return l=e.sent,i.result=[l],e.abrupt("break",248);case 32:return h=(0,D.Z)(t.params,2),d=h[0],p=h[1],e.next=35,u.getBalance(d,p);case 35:return v=e.sent,i.result=v.toHexString(),e.abrupt("break",248);case 38:if("personal_sign"===t.method?(m=(0,D.Z)(t.params,2),y=m[0],m[1],g=y):(b=(0,D.Z)(t.params,2),b[0],E=b[1],g=E),w="",N=eO(g),null!==o.prompter){e.next=47;break}return e.next=44,a.signMessage(N,n);case 44:w=e.sent,e.next=54;break;case 47:return e.next=49,o.handleConfirmWalletDeployPrompt(o.prompter,a,n);case 49:if(!e.sent){e.next=54;break}return e.next=53,o.prompter.promptSignMessage({chainId:n,message:N},o.connectOptions);case 53:w=e.sent;case 54:if(!(w&&w.length>0)){e.next=58;break}i.result=w,e.next=59;break;case 58:throw new Error("declined by user");case 59:return e.abrupt("break",248);case 60:if(k=(0,D.Z)(t.params,2),k[0],A=k[1],x=void 0,"string"===typeof A)try{x=JSON.parse(A)}catch(B){}else x=A;if(x&&x.domain&&x.types&&x.message){e.next=65;break}throw new Error("invalid typedData object");case 65:if(_="",null!==o.prompter){e.next=72;break}return e.next=69,a.signTypedData(x.domain,x.types,x.message,n);case 69:_=e.sent,e.next=79;break;case 72:return e.next=74,o.handleConfirmWalletDeployPrompt(o.prompter,a,n);case 74:if(!e.sent){e.next=79;break}return e.next=78,o.prompter.promptSignMessage({chainId:n,typedData:x},o.connectOptions);case 78:_=e.sent;case 79:if(!(_&&_.length>0)){e.next=83;break}i.result=_,e.next=84;break;case 83:throw new Error("declined by user");case 84:return e.abrupt("break",248);case 85:if(S=(0,D.Z)(t.params,1),"gas"in(I=S[0])&&void 0===I.gasLimit&&(I.gasLimit=I.gas,delete I.gas),R="",null!==o.prompter){e.next=95;break}return e.next=91,a.sendTransaction(I,n);case 91:T=e.sent,R=T.hash,e.next=98;break;case 95:return e.next=97,o.prompter.promptSendTransaction(I,n,o.connectOptions);case 97:R=e.sent;case 98:if(!R){e.next=102;break}i.result=R,e.next=103;break;case 102:throw new Error("declined by user");case 103:return e.abrupt("break",248);case 104:return C=(0,D.Z)(t.params,1),P=C[0],O=Jr(P.from),e.t1=O,e.next=109,a.getAddress();case 109:if(e.t2=e.sent,e.t1===e.t2){e.next=112;break}throw new Error("sender address does not match wallet");case 112:if(null!==o.prompter){e.next=118;break}return e.next=115,a.signTransactions(P,n);case 115:i.result=e.sent,e.next=121;break;case 118:return e.next=120,o.prompter.promptSignTransaction(P,n,o.connectOptions);case 120:i.result=e.sent;case 121:return e.abrupt("break",248);case 122:if(!hC(t.params[0])){e.next=134;break}return U=lS.from(t.params[0].chainId).toNumber(),e.next=126,a.getRelayer(U);case 126:return e.next=128,e.sent.relay(t.params[0]);case 128:return M=e.sent,e.next=131,M;case 131:i.result=e.sent.hash,e.next=138;break;case 134:return e.next=136,u.sendTransaction(t.params[0]);case 136:F=e.sent,i.result=F.hash;case 138:return e.abrupt("break",248);case 139:return L=Jr(t.params[0]),Z=t.params[1],e.t3=s,e.next=144,a.getAddress();case 144:if(e.t4=e.sent,G=e.t3.getAddress.call(e.t3,e.t4),L!==G){e.next=153;break}return e.next=149,a.getTransactionCount(Z);case 149:W=e.sent,i.result=lS.from(W).toHexString(),e.next=157;break;case 153:return e.next=155,u.getTransactionCount(L,Z);case 155:j=e.sent,i.result=lS.from(j).toHexString();case 157:return e.abrupt("break",248);case 158:return e.next=160,u.getBlockNumber();case 160:return i.result=e.sent,e.abrupt("break",248);case 162:return e.next=164,u.getBlock(t.params[0]);case 164:return i.result=e.sent,e.abrupt("break",248);case 166:return e.next=168,u.getBlock(t.params[0]);case 168:return i.result=e.sent,e.abrupt("break",248);case 170:return e.next=172,u.getTransaction(t.params[0]);case 172:return i.result=e.sent,e.abrupt("break",248);case 174:return z=(0,D.Z)(t.params,2),q=z[0],V=z[1],e.next=177,u.call(q,V);case 177:return i.result=e.sent,e.abrupt("break",248);case 179:return K=(0,D.Z)(t.params,2),H=K[0],J=K[1],e.next=182,u.getCode(H,J);case 182:return i.result=e.sent,e.abrupt("break",248);case 184:return X=(0,D.Z)(t.params,1),$=X[0],e.next=187,u.estimateGas($);case 187:return i.result=e.sent,e.abrupt("break",248);case 189:return e.next=191,u.getGasPrice();case 191:return Y=e.sent,i.result=Y.toHexString(),e.abrupt("break",248);case 194:if(Q=(0,D.Z)(t.params,1),(ee=Q[0]).chainId&&0!==ee.chainId.length){e.next=197;break}throw new Error("invalid chainId");case 197:return te=lS.from(ee.chainId),e.next=200,o.setDefaultNetwork(te.toString(),!0);case 200:if(e.sent){e.next=203;break}throw new Error("unable to set chainId ".concat(te));case 203:return i.result=null,e.abrupt("break",248);case 205:return e.next=207,a.getWalletContext();case 207:return i.result=e.sent,e.abrupt("break",248);case 209:return re=(0,D.Z)(t.params,1),ne=re[0],e.next=212,a.getWalletConfig(ne);case 212:return i.result=e.sent,e.abrupt("break",248);case 214:return ie=(0,D.Z)(t.params,1),oe=ie[0],e.next=217,a.getWalletState(oe);case 217:return i.result=e.sent,e.abrupt("break",248);case 219:return e.next=221,o.getNetworks(!0);case 221:return i.result=e.sent,e.abrupt("break",248);case 223:return i.result=!0,e.abrupt("break",248);case 225:throw new Error("sequence_updateConfig method is not allowed from a dapp");case 227:throw new Error("sequence_publishConfig method is not allowed from a dapp");case 229:case 230:case 231:return e.abrupt("break",248);case 232:if(ae=(0,D.Z)(t.params,1),se=ae[0]){e.next=235;break}throw new Error("invalid request, method argument defaultNetworkId cannot be empty");case 235:return e.next=237,o.setDefaultNetwork(se);case 237:if(e.sent){e.next=240;break}throw new Error("unable to set default network ".concat(se));case 240:return e.next=242,o.getNetworks(!0);case 242:return i.result=e.sent,e.abrupt("break",248);case 244:return e.next=246,u.send(t.method,t.params);case 246:ue=e.sent,i.result=ue;case 248:e.next=255;break;case 250:e.prev=250,e.t5=e.catch(3),oI.error(e.t5),i.result=null,i.error=RP({},new Error(e.t5),{code:4001});case 255:r(void 0,i);case 256:case"end":return e.stop()}}),e,null,[[3,250]])})));return function(t,r,n){return e.apply(this,arguments)}}(),this.isSignedIn=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.signerReady();case 2:return e.abrupt("return",!!o.signer);case 3:case"end":return e.stop()}}),e)}))),this.getSigner=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.signerReady();case 2:if(void 0!==o.signer){e.next=4;break}throw new Error("signerReady failed resolve");case 4:return e.abrupt("return",o.signer);case 5:case"end":return e.stop()}}),e)}))),this.signer=t,this.prompter=r,this.mainnetNetworks=n,this.testnetNetworks=i}return(0,k.Z)(e,[{key:"signIn",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a,s,u,c,f,l=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},this.setSigner(t),n=r.connect,i=r.mainnetNetworks,o=r.testnetNetworks,a=r.defaultNetworkId,i&&i.length>0&&(this.mainnetNetworks=i),o&&o.length>0&&(this.testnetNetworks=o),this.mainnetNetworks&&0!==this.mainnetNetworks.length||this.testnetNetworks&&0!==this.testnetNetworks.length){e.next=7;break}throw new Error("signIn failed as network configuration is empty");case 7:if(!(s=a||this._defaultNetworkId)){e.next=13;break}return e.next=11,this.setDefaultNetwork(s,!1);case 11:if(e.sent){e.next=13;break}throw new Error("WalletRequestHandler setup unable to set defaultNetworkId ".concat(s));case 13:if(!n){e.next=26;break}if(u=this._connectOptions,null===this.prompter){e.next=21;break}return e.next=18,null==(f=this.prompter)?void 0:f.promptSignInConnect(u);case 18:c=e.sent,e.next=24;break;case 21:return e.next=23,this.connect(u);case 23:c=e.sent;case 24:this.notifyConnect(c),u&&!0===u.keepWalletOpened||this.notifyClose();case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){this.setSigner(null)}},{key:"signerReset",value:function(){this.signer=void 0}},{key:"signerReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return new Promise((function(r,n){void 0!==e.signer?r():(setTimeout((function(){void 0===e.signer&&(e.signerReadyCallbacks=[],n("signerReady timed out"))}),t),e.signerReadyCallbacks.push(r))}))}},{key:"connect",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer){e.next=2;break}return e.abrupt("return",{connected:!1,chainId:"0x0",error:"unable to connect without signed in account"});case 2:return e.t0=s,e.next=5,this.getChainId();case 5:if(e.t1=e.sent,e.t2=e.t0.hexlify.call(e.t0,e.t1),r={connected:!0,chainId:e.t2},!t||!t.authorize){e.next=20;break}return n={app:t.app,origin:t.origin,expiry:t.expiry},e.prev=10,e.next=13,hP(this.signer,n);case 13:r.proof=e.sent,e.next=20;break;case 16:return e.prev=16,e.t3=e.catch(10),oI.warn("connect, signAuthorization failed for options: ".concat(JSON.stringify(t),", due to: ").concat(e.t3.message)),e.abrupt("return",{connected:!1,chainId:"0x0",error:"signAuthorization failed: ".concat(e.t3.message)});case 20:return e.next=22,this.walletSession();case 22:return r.session=e.sent,e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMessageRequest",value:function(e){var t=this;return new Promise((function(r){t.sendAsync(e.data,(function(t,n){var i=RP({},e,{data:n});r(i)}),e.chainId)}))}},{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}},{key:"getAddress",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer){e.next=4;break}return e.abrupt("return","");case 4:return e.abrupt("return",this.signer.getAddress());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getChainId",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer){e.next=4;break}return e.abrupt("return",0);case 4:if(!this._chainId){e.next=6;break}return e.abrupt("return",this._chainId);case 6:return e.next=8,this.signer.getChainId();case 8:return this._chainId=e.sent,e.abrupt("return",this._chainId);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"openIntent",get:function(){return this._openIntent}},{key:"setOpenIntent",value:function(e){this._openIntent=e}},{key:"connectOptions",get:function(){return this._connectOptions}},{key:"setConnectOptions",value:function(e){var t;this._connectOptions=e,null==(t=this.onConnectOptionsChange)||t.call(this,e)}},{key:"defaultNetworkId",get:function(){return this._defaultNetworkId}},{key:"setDefaultNetwork",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(i.length>1&&void 0!==i[1])||i[1],t){e.next=3;break}return e.abrupt("return",void 0);case 3:if(this._defaultNetworkId=t,this._chainId=void 0,!this.signer||!this.signer.setNetworks){e.next=13;break}if(!(n=this.signer.setNetworks(this.mainnetNetworks,this.testnetNetworks,t))||!r){e.next=10;break}return e.next=10,this.notifyNetworks();case 10:return e.abrupt("return",n);case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNetworks",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer){e.next=3;break}return oI.warn("signer not set: getNetworks is returning an empty list"),e.abrupt("return",[]);case 3:return e.next=5,this.signer.getNetworks();case 5:if(r=e.sent,!t){e.next=10;break}return e.abrupt("return",r.map((function(e){var t=RP({},e);return t.provider=void 0,t.relayer=void 0,t})));case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"walletSession",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer){e.next=4;break}e.t0=void 0,e.next=14;break;case 4:return e.next=6,this.signer.getWalletContext();case 6:return e.t1=e.sent,e.next=9,this.signer.getAddress();case 9:return e.t2=e.sent,e.next=12,this.getNetworks(!0);case 12:e.t3=e.sent,e.t0={walletContext:e.t1,accountAddress:e.t2,networks:e.t3};case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyConnect",value:function(e,t){var r,n;(this.events.emit("connect",e),null!=(r=e.session)&&r.accountAddress)&&this.events.emit("accountsChanged",[null==(n=e.session)?void 0:n.accountAddress],t)}},{key:"notifyDisconnect",value:function(e){this.events.emit("accountsChanged",[],e),this.events.emit("disconnect")}},{key:"notifyNetworks",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t,e.t0){e.next=5;break}return e.next=4,this.getNetworks(!0);case 4:e.t0=e.sent;case 5:r=e.t0,this.events.emit("networks",r),r.length>0?(n=r.find((function(e){return e.isDefaultChain})),n&&this.events.emit("chainChanged",ui(n.chainId))):this.events.emit("chainChanged","0x0");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"notifyWalletContext",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.signer){e.next=3;break}return oI.warn("signer not set: skipping to notify wallet context"),e.abrupt("return");case 3:return e.next=5,this.signer.getWalletContext();case 5:t=e.sent,this.events.emit("walletContext",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyClose",value:function(e){this.events.emit("close",e)}},{key:"setSigner",value:function(e){if(this.signer=e,void 0!==e){for(var t=0;t<this.signerReadyCallbacks.length;t++)this.signerReadyCallbacks[t]();this.signerReadyCallbacks=[]}}},{key:"handleConfirmWalletDeployPrompt",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,sO(r,n);case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:return e.next=9,t.promptConfirmWalletDeploy(n,this.connectOptions);case 9:if(!e.sent){e.next=20;break}return e.next=13,sO(r,n);case 13:if(e.sent){e.next=19;break}return oI.error("WalletRequestHandler: result for promptConfirmWalletDeploy is not correct"),e.abrupt("return",!1);case 19:return e.abrupt("return",!0);case 20:return e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),GP=["net_version","eth_chainId","eth_getBalance","eth_getTransactionCount","eth_blockNumber","eth_getBlockByNumber","eth_getBlockByHash","eth_getTransactionByHash","eth_getCode","eth_estimateGas","eth_gasPrice","sequence_getWalletContext","sequence_getNetworks","sequence_setDefaultNetwork"],WP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;(0,N.Z)(this,r);var o=new nR(e,CI(n));return e=o,(i=t.call(this,e,"any"))._sender=void 0,i._isSequenceProvider=void 0,i._defaultChainId=void 0,i._sender=o,i._isSequenceProvider=!0,i._defaultChainId=CI(n),i}return(0,k.Z)(r,[{key:"sendAsync",value:function(e,t,r){this._sender.sendAsync(e,t,r)}},{key:"send",value:function(e,t,r){return this._sender.send(e,t,r)}},{key:"request",value:function(e){return this.send(e.method,e.params||[],e.chainId)}},{key:"getSigner",value:function(){return new qP(this,this._defaultChainId)}},{key:"getChainId",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("eth_chainId",[]);case 2:if(t=e.sent,r=lS.from(t).toNumber(),!this._defaultChainId||this._defaultChainId===r){e.next=6;break}throw new Error("provider chainId (".concat(r,") does not match provider-bound chainId ").concat(this._defaultChainId));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"isSequenceProvider",value:function(e){return jP(e)}}]),r}(IP);function jP(e){var t=e;return t&&void 0!==t.send&&!0===t._isSequenceProvider}var zP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){(0,N.Z)(this,r);var i=new BP(e,null,n||[]);return t.call(this,i)}return(0,k.Z)(r)}(WP),qP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),(i=t.call(this)).provider=void 0,i.defaultChainId=void 0,i._address=void 0,i._index=void 0,i._context=void 0,i._networks=void 0,i._providers={},i.provider=e,i.defaultChainId=n,i}return(0,k.Z)(r,[{key:"getAddress",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._address){e.next=2;break}return e.abrupt("return",this._address);case 2:return e.next=4,this.provider.send("eth_accounts",[]);case 4:return t=e.sent,this._address=t[0],this._index=0,e.abrupt("return",Jr(this._address));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(e){throw new Error("signTransaction is unsupported, use signTransactions instead")}},{key:"connect",value:function(e){throw new Error("unsupported: cannot alter JSON-RPC Signer connection")}},{key:"getProvider",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,this.getChainId();case 3:if((r=e.sent)===t){e.next=6;break}throw new Error("signer is attempting to access chain ".concat(t,", but is already bound to chain ").concat(r));case 6:return e.abrupt("return",this.provider);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSender",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&(!t||t!==this.defaultChainId)){e.next=2;break}return e.abrupt("return",this.provider);case 2:return this._providers[t]||(this._providers[t]=new WP(new nR(this.provider,t),t)),e.abrupt("return",this._providers[t]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRelayer",value:function(e){throw new Error("TODO")}},{key:"getWalletContext",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._context){e.next=4;break}return e.next=3,this.provider.send("sequence_getWalletContext",[]);case 3:this._context=e.sent;case 4:return e.abrupt("return",this._context);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWalletConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.send("sequence_getWalletConfig",[CI(t)],CI(t)||this.defaultChainId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getWalletState",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.send("sequence_getWalletState",[CI(t)],CI(t)||this.defaultChainId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNetworks",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._networks){e.next=4;break}return e.next=3,this.provider.send("sequence_getNetworks",[]);case 3:this._networks=e.sent;case 4:return e.abrupt("return",this._networks);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSigners",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetworks();case 2:if(t=e.sent,r=t.find((function(e){return e.isAuthChain}))){e.next=6;break}throw new Error("authChainId could not be determined from network list");case 6:return e.next=8,this.getWalletConfig(r);case 8:if((n=e.sent)&&0!==n.length){e.next=11;break}throw new Error("walletConfig returned zero results for authChainId {authChainId}");case 11:return e.abrupt("return",n[0].signers.map((function(e){return e.address})));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSender(CI(r)||this.defaultChainId);case 2:return i=e.sent,o="string"===typeof t?Od(t):t,e.next=6,this.getAddress();case 6:return a=e.sent,e.next=9,i.send("personal_sign",[ui(o),a]);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this.provider,e.next=3,this.getAddress();case 3:return e.t1=e.sent,e.t2=na.getPayload(t,r,n),e.t3=[e.t1,e.t2],e.t4=CI(i)||this.defaultChainId,e.next=9,e.t0.send.call(e.t0,"eth_signTypedData_v4",e.t3,e.t4);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSender(CI(r)||this.defaultChainId);case 2:return i=e.sent,o=this.sendUncheckedTransaction(t,r).then((function(e){return Fw((function(){return i.getTransaction(e).then((function(t){if(null!==t)return i._wrapTransaction(t,e)}))}),{onceBlock:a.provider}).catch((function(t){throw t.transactionHash=e,t}))})),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"sendTransactionBatch",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qC(t);case 2:if((i=e.sent)&&0!==i.length){e.next=5;break}throw new Error("cannot send empty batch");case 5:if(!i.find((function(e){return void 0!==e.wait&&null!==e.wait}))){e.next=7;break}throw new Error("transaction request expected for sendTransactionBatch, transaction response found");case 7:return o=RP({},i[0]),i.length>1&&(o.auxiliary=i.splice(1)),e.abrupt("return",this.sendTransaction(o,r,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"signTransactions",value:function(e,t,r){return e=wI(e),this.provider.send("eth_signTransaction",[e],CI(t)||this.defaultChainId)}},{key:"sendSignedTransactions",value:function(e,t){throw new Error("TODO")}},{key:"updateConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.send("sequence_updateConfig",[t],this.defaultChainId);case 2:if(r=e.sent,n=(0,D.Z)(r,2),i=n[0],null!==(o=n[1])){e.next=8;break}return e.abrupt("return",[i,void 0]);case 8:return e.next=10,this.getSender(this.defaultChainId);case 10:return a=e.sent,e.abrupt("return",[i,a._wrapTransaction(o,o.hash)]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishConfig",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t,r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSender(this.defaultChainId);case 2:return t=e.sent,e.next=5,t.send("sequence_publishConfig",[]);case 5:if(null!==(r=e.sent)){e.next=8;break}return e.abrupt("return",void 0);case 8:return e.abrupt("return",t._wrapTransaction(r,r.hash));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isDeployed",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSender(CI(t));case 2:return r=e.sent,e.t0=r,e.next=6,this.getAddress();case 6:return e.t1=e.sent,e.next=9,e.t0.getCode.call(e.t0,e.t1);case 9:return n=e.sent,e.abrupt("return",!!n&&"0x"!==n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_legacySignMessage",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var i,o,a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSender(CI(r)||this.defaultChainId);case 2:return i=e.sent,o="string"===typeof t?Od(t):t,e.next=6,this.getAddress();case 6:return a=e.sent,e.next=9,i.send("eth_sign",[a,ui(o)]);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_signTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.signTypedData(t,r,n,i,o));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"sendUncheckedTransaction",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wI(t),n=this.getAddress(),e.next=4,this.getSender(CI(r)||this.defaultChainId);case 4:return i=e.sent,e.t0=bI,e.t1=bI(t),e.next=9,n;case 9:return e.t2=e.sent,e.t3={tx:e.t1,sender:e.t2},e.abrupt("return",(0,e.t0)(e.t3).then((function(e){var r=e.tx,n=e.sender;if(null!=r.from){if(Jr(r.from)!==n)throw new Error("from address mismatch for transaction ".concat(t))}else r.from=n;var o=KP(r);return i.send("eth_sendTransaction",[o]).then((function(e){return e}),(function(e){throw e}))})));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"connectUnchecked",value:function(){return new HP(this.provider,this.defaultChainId)}},{key:"unlock",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAddress();case 2:return r=e.sent,e.abrupt("return",this.provider.send("personal_unlockAccount",[r,t,null]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(GC),VP={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,from:!0,auxiliary:!0,expiration:!0,afterNonce:!0,delegateCall:!0,revertOnError:!0},KP=function e(t,r){var n=wI(VP);if(r)for(var i in r)r[i]&&(n[i]=!0);ml(t,n);var o={};["gasLimit","gasPrice","nonce","value"].forEach((function(e){var r=t[e];if(null!==r&&void 0!==r){var n=hi(r);"gasLimit"===e&&(e="gas"),o[e]=n}})),["from","to","data"].forEach((function(e){t[e]&&(o[e]=ui(t[e]))})),["delegateCall","revertOnError"].forEach((function(e){var r=t[e];void 0!==r&&null!==r&&(o[e]=r)}));var a=t.auxiliary;return a&&a.length>0&&(o.auxiliary=[],a.forEach((function(t){o.auxiliary.push(e(t))}))),o},HP=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(){return(0,N.Z)(this,r),t.apply(this,arguments)}return(0,k.Z)(r,[{key:"sendTransaction",value:function(e){var t=this;return this.sendUncheckedTransaction(e).then((function(e){return{chainId:0,confirmations:0,data:"",from:"",gasLimit:zS,gasPrice:zS,hash:e,nonce:0,value:zS,wait:function(r){return t.provider.waitForTransaction(e,r)}}}))}}]),r}(qP);var JP=[{name:"Decentraland Exception",predicate:function(e){try{var t=Dd(e);return XP.test(t)}catch($O){return!1}}},{name:"0x v3 Exception",predicate:function(e){var t=new nr($P);try{return t.decodeFunctionData("OrderWithHash",e),!0}catch(r){return!1}}}],XP=/^Decentraland Login\nEphemeral address: 0x[a-fA-F0-9]{40}\nExpiration: (\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)((-(\d{2}):(\d{2})|Z)?)$/;var $P=[{inputs:[{components:[{internalType:"address",name:"makerAddress",type:"address"},{internalType:"address",name:"takerAddress",type:"address"},{internalType:"address",name:"feeRecipientAddress",type:"address"},{internalType:"address",name:"senderAddress",type:"address"},{internalType:"uint256",name:"makerAssetAmount",type:"uint256"},{internalType:"uint256",name:"takerAssetAmount",type:"uint256"},{internalType:"uint256",name:"makerFee",type:"uint256"},{internalType:"uint256",name:"takerFee",type:"uint256"},{internalType:"uint256",name:"expirationTimeSeconds",type:"uint256"},{internalType:"uint256",name:"salt",type:"uint256"},{internalType:"bytes",name:"makerAssetData",type:"bytes"},{internalType:"bytes",name:"takerAssetData",type:"bytes"},{internalType:"bytes",name:"makerFeeAssetData",type:"bytes"},{internalType:"bytes",name:"takerFeeAssetData",type:"bytes"}],internalType:"struct IEIP1271Data.Order",name:"order",type:"tuple"},{internalType:"bytes32",name:"orderHash",type:"bytes32"}],name:"OrderWithHash",outputs:[],stateMutability:"pure",type:"function"}],YP=Od("\x19Ethereum Signed Message:\n"),QP=function(e){return ti(e)||ai(e)?ri(e):Od(e)},eO=function(e){var t=QP(e);return function(e){return JP.some((function(t){return t.predicate(e)}))}(t)?t:ni([YP,Od(String(t.length)),t])},tO=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=10;break}return e.next=3,i.getNetwork();case 3:if(e.t0=s=e.sent,null!=e.t0){e.next=8;break}e.t1=void 0,e.next=9;break;case 8:e.t1=s.chainId;case 9:o=e.t1;case 10:if(a||!WP.isSequenceProvider(i)){e.next=14;break}return e.next=13,i.getSigner().getWalletContext();case 13:a=e.sent;case 14:return e.abrupt("return",JC(t,r,n,i,a,o));case 15:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}(),rO=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o,a){var s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=eO(r),u=$S(s),e.abrupt("return",tO(t,u,n,i,o,a));case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o,a){return e.apply(this,arguments)}}(),nO=function(e,t,r,n,i,o){return tO(e,gI(t),r,n,i,o)},iO=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){var a,s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=YS(t,i,r),e.next=3,iP(a,n);case 3:if(s=e.sent,!o){e.next=11;break}if(u=BR(s,o),!s.address||s.address===u){e.next=10;break}throw new Error("recovered address does not match the WalletConfig address, check the WalletContext");case 10:s.address=u;case 11:return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}(),oO=function(){return"chrome-extension:"===window.location.protocol||"moz-extension:"===window.location.protocol},aO=function(){return!!navigator.userAgent.match(/UnitySequence/i)},sO=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n,i,o,a,s,u,c,f,l,h;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getWalletState();case 2:return i=e.sent,e.next=5,t.getNetworks();case 5:if(o=e.sent,a=i.find((function(e){return e.chainId===r}))){e.next=9;break}throw new Error("WalletRequestHandler: could not find wallet state for chainId ".concat(r));case 9:if(s=a.deployed,o){e.next=12;break}throw new Error("isWalletUpToDate util: could not get networks from signer");case 12:if(u=o.find((function(e){return e.isAuthChain})),u){e.next=15;break}throw new Error("isWalletUpToDate util: could not get auth chain network information");case 15:if(c=u.chainId,f=null==(n=i.find((function(e){return e.chainId===c})))?void 0:n.config){e.next=19;break}throw new Error("isWalletUpToDate util: could not get auth chain config");case 19:if(l=a.config){e.next=22;break}throw new Error("isWalletUpToDate util: could not get config for chainId ".concat(r));case 22:return h=jR(f,l),e.abrupt("return",s&&h);case 24:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),uO=function(){function e(){(0,N.Z)(this,e)}return(0,k.Z)(e,null,[{key:"getInstance",value:function(){return"object"===typeof window?e._instance||(e._instance={getItem:function(e){return Promise.resolve(window.localStorage.getItem(e))},setItem:function(e,t){return Promise.resolve(window.localStorage.setItem(e,t))},removeItem:function(e){return Promise.resolve(window.localStorage.removeItem(e))}}):e._instance||(e._instance={getItem:function(e){return Promise.resolve(null)},setItem:function(e,t){return Promise.resolve()},removeItem:function(e){return Promise.resolve()}}),this._instance}},{key:"use",value:function(t){e._instance=t}}]),e}();uO._instance=void 0;var cO,fO,lO=function(){function e(t,r){(0,N.Z)(this,e),this.def=r,this.key=void 0,this.key=t}return(0,k.Z)(e,[{key:"get",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uO.getInstance().getItem(this.key);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",this.def);case 5:return e.prev=5,e.abrupt("return",JSON.parse(t));case 9:e.prev=9,e.t0=e.catch(5),console.error(e.t0);case 12:return e.abrupt("return");case 13:case"end":return e.stop()}}),e,this,[[5,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"set",value:function(e){e?uO.getInstance().setItem(this.key,JSON.stringify(e)):uO.getInstance().removeItem(this.key)}},{key:"del",value:function(){uO.getInstance().removeItem(this.key)}}]),e}(),hO="@sequence.transportSession",dO=function(){function e(t){var r=this;(0,N.Z)(this,e);var n=this;this.walletRequestHandler=void 0,this._sessionId=void 0,this._registered=void 0,this._init=void 0,this._initNonce=void 0,this._initCallback=void 0,this.appOrigin=void 0,this.sendAsync=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("abstract method");case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.handleMessage=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,i,o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t,n._init===PP.OK){e.next=10;break}if(r.type!==TP.INIT){e.next=9;break}if(!n.isValidInitAck(t)){e.next=7;break}n._initCallback&&n._initCallback(),e.next=9;break;case 7:return n._initCallback&&n._initCallback("invalid init"),e.abrupt("return");case 9:return e.abrupt("return");case 10:e.t0=r.type,e.next=e.t0===TP.OPEN?13:e.t0===TP.CLOSE?19:e.t0===TP.MESSAGE?22:28;break;case 13:if(n._init===PP.OK){e.next=15;break}return e.abrupt("return");case 15:return i={sessionId:r.data.sessionId,intent:r.data.intent,networkId:r.data.networkId},e.next=18,n.open(i);case 18:return e.abrupt("return");case 19:if(n._init===PP.OK){e.next=21;break}return e.abrupt("return");case 21:return e.abrupt("return");case 22:return e.next=24,n.walletRequestHandler.sendMessageRequest(r);case 24:return o=e.sent,n.sendMessage(o),o.data.error,e.abrupt("return");case 28:oI.error("unexpected payload type ".concat(r.type));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.sendMessageRequest=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.walletRequestHandler.sendMessageRequest(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.open=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,i,o,a,s,u,c,f;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.sessionId,i=t.intent,o=t.networkId,r&&(n._sessionId=lI(r),n.saveTransportSession({sessionId:r,intent:i,networkId:o})),n.walletRequestHandler.setOpenIntent(i),e.next=5,n.init();case 5:if(!i||"connect"!==i.type||!i.options){e.next=20;break}if(a=i.options,s=a,!n.appOrigin||null==s||!s.origin){e.next=14;break}if(oO()){e.next=12;break}if(s.origin===n.appOrigin){e.next=12;break}throw new Error("origin is invalid");case 12:e.next=15;break;case 14:!n.appOrigin&&null!=s&&s.origin?a.origin=dI(s.origin):n.appOrigin&&(a.origin=n.appOrigin);case 15:a.app&&(a.app=hI(a.app)),n.walletRequestHandler.setConnectOptions(a),a.networkId?o=a.networkId:o&&(a.networkId=o),e.next=21;break;case 20:n.walletRequestHandler.setConnectOptions(void 0);case 21:return e.next=23,n.walletRequestHandler.getSigner();case 23:return e.next=25,n.walletRequestHandler.isSignedIn();case 25:if(e.sent){e.next=30;break}return n.notifyOpen({sessionId:n._sessionId}),e.abrupt("return",!0);case 30:if(!i||"connect"!==i.type){e.next=64;break}if(u=void 0,e.prev=32,!o){e.next=39;break}return e.next=36,n.walletRequestHandler.setDefaultNetwork(o,!1);case 36:u=e.sent,e.next=42;break;case 39:return e.next=41,n.walletRequestHandler.getChainId();case 41:u=e.sent;case 42:e.next=47;break;case 44:e.prev=44,e.t0=e.catch(32),console.error(e.t0);case 47:return(!u||u<=0)&&console.log("Failed to set default network on open"),n.notifyOpen({sessionId:n._sessionId}),e.prev=49,e.next=52,n.walletRequestHandler.promptConnect(i.options);case 52:(c=e.sent).connected&&n.walletRequestHandler.notifyConnect(c),e.next=59;break;case 56:e.prev=56,e.t1=e.catch(49),oI.warn("promptConnect not connected:",e.t1);case 59:return e.prev=59,i.options&&!0===i.options.keepWalletOpened||n.notifyClose(),e.finish(59);case 62:e.next=91;break;case 64:if(f=void 0,e.prev=65,!o){e.next=72;break}return e.next=69,n.walletRequestHandler.setDefaultNetwork(o,!1);case 69:f=e.sent,e.next=75;break;case 72:return e.next=74,n.walletRequestHandler.getChainId();case 74:f=e.sent;case 75:e.next=80;break;case 77:e.prev=77,e.t2=e.catch(65),console.error(e.t2);case 80:if(f&&!(f<=0)){e.next=83;break}return n.notifyOpen({sessionId:n._sessionId,error:"failed to open wallet on network ".concat(o)}),e.abrupt("return",!1);case 83:return e.t3=n,e.t4=n._sessionId,e.t5="".concat(f),e.next=88,n.walletRequestHandler.walletSession();case 88:e.t6=e.sent,e.t7={sessionId:e.t4,chainId:e.t5,session:e.t6},e.t3.notifyOpen.call(e.t3,e.t7);case 91:return e.abrupt("return",!0);case 92:case"end":return e.stop()}}),e,null,[[32,44],[49,56,59,62],[65,77]])})));return function(t){return e.apply(this,arguments)}}(),this.saveTransportSession=function(e){uO.getInstance().setItem(hO,JSON.stringify(e))},this.getCachedTransportSession=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uO.getInstance().getItem(hO);case 2:return t=e.sent,e.prev=3,e.abrupt("return",t?JSON.parse(t):null);case 7:return e.prev=7,e.t0=e.catch(3),console.error("unable to parse transport session: ".concat(t)),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[3,7]])}))),this.walletRequestHandler=t,this._init=PP.NIL,this.walletRequestHandler.on("connect",(function(e){r.registered&&r.notifyConnect(e)})),this.walletRequestHandler.on("disconnect",(function(e){r.registered&&r.notifyDisconnect(e)})),this.walletRequestHandler.on("accountsChanged",(function(e,t){r.registered&&r.notifyAccountsChanged(e,t)})),this.walletRequestHandler.on("networks",(function(e){r.registered&&(r.notifyNetworks(e),e&&0!==e.length?r.notifyChainChanged(ui(e.find((function(e){return e.isDefaultChain})).chainId)):r.notifyChainChanged("0x0"))})),this.walletRequestHandler.on("walletContext",(function(e){r.registered&&e&&r.notifyWalletContext(e)})),this.walletRequestHandler.on("close",(function(e){r.registered&&r.notifyClose(e)}))}return(0,k.Z)(e,[{key:"registered",get:function(){return this._registered}},{key:"register",value:function(){throw new Error("abstract method")}},{key:"unregister",value:function(){throw new Error("abstract method")}},{key:"sendMessage",value:function(e){throw new Error("abstract method")}},{key:"notifyOpen",value:function(e){var t=e.chainId,r=e.sessionId,n=e.session,i=e.error;this.sendMessage({idx:-1,type:TP.OPEN,data:{chainId:t,sessionId:r,session:n,error:i}})}},{key:"notifyClose",value:function(e){this.sendMessage({idx:-1,type:TP.CLOSE,data:e?{error:e}:null})}},{key:"notifyConnect",value:function(e){this.sendMessage({idx:-1,type:TP.CONNECT,data:e})}},{key:"notifyDisconnect",value:function(e){this.sendMessage({idx:-1,type:TP.DISCONNECT,data:e?{error:e}:null})}},{key:"notifyAccountsChanged",value:function(e,t){this.sendMessage({idx:-1,type:TP.ACCOUNTS_CHANGED,data:e,origin:t})}},{key:"notifyChainChanged",value:function(e){this.sendMessage({idx:-1,type:TP.CHAIN_CHANGED,data:e})}},{key:"notifyNetworks",value:function(e){this.sendMessage({idx:-1,type:TP.NETWORKS,data:e})}},{key:"notifyWalletContext",value:function(e){this.sendMessage({idx:-1,type:TP.WALLET_CONTEXT,data:e})}},{key:"isValidInitAck",value:function(e){if(this._init===PP.OK)return oI.warn("isValidInitAck, already in init'd state, so inquiry is invalid."),!1;if(e.type!==TP.INIT)return oI.warn("isValidInitAck, invalid message type, expecting init"),!1;var t=e.data,r=t.sessionId,n=t.nonce;return r&&0!==r.length&&n&&0!==n.length?r===this._sessionId&&n===this._initNonce||(oI.error("invalid init ack match"),!1):(oI.error("invalid init ack"),!1)}},{key:"init",value:function(){var e=this;return new Promise((function(t,r){if(e._init!==PP.OK)if(e._init!==PP.NIL||e._initCallback)r("transport init is in progress");else{var n=setTimeout((function(){oI.warn("transport init timed out"),e._initCallback&&e._initCallback("transport init timed out")}),FP/2);e._initCallback=function(i){e._initCallback=void 0,clearTimeout(n),i?r(i):(e._init=PP.OK,t())},e._initNonce="".concat(performance.now()),e.sendMessage({idx:-1,type:TP.INIT,data:{nonce:e._initNonce}}),e._init=PP.SENT_NONCE}else t()}))}}]),e}(),pO=(0,k.Z)((function e(){(0,N.Z)(this,e),this.app=void 0,this.wallet=void 0;var t=new vO,r=new vO;t.conn=r,r.conn=t,this.app=t,this.wallet=r})),vO=function(){function e(){var t=this;(0,N.Z)(this,e),this.conn=void 0,this.events=new AP.EventEmitter2,this.handleMessage=function(e){throw new Error("ProxyMessageChannelPort is not registered")},this.sendMessage=function(e){t.conn.handleMessage(e),"open"===e.type&&t.events.emit("open",e),"close"===e.type&&t.events.emit("close",e),"connect"===e.type&&t.events.emit("connect",e),"disconnect"===e.type&&t.events.emit("disconnect",e)}}return(0,k.Z)(e,[{key:"on",value:function(e,t){this.events.on(e,t)}},{key:"once",value:function(e,t){this.events.once(e,t)}}]),e}(),gO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;if((0,N.Z)(this,r),(n=t.call(this)).port=void 0,n.register=function(){n.port.handleMessage=function(e){n.handleMessage(e)},n.on("open",(function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=n.port.events).emit.apply(e,["open"].concat(r))})),n.on("close",(function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=n.port.events).emit.apply(e,["close"].concat(r))})),n.on("connect",(function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=n.port.events).emit.apply(e,["connect"].concat(r))})),n.on("disconnect",(function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=n.port.events).emit.apply(e,["disconnect"].concat(r))})),n._registered=!0},n.unregister=function(){n._registered=!1,n.closeWallet(),n.events.removeAllListeners(),n.port.handleMessage=void 0},n.openWallet=function(e,t,r){if(n.state===CP.CLOSED){n.state=CP.OPENING;var i="".concat(performance.now());n._sessionId=i,n.sendMessage({idx:-1,type:TP.OPEN,data:{path:e,intent:t,networkId:r,sessionId:i}})}},n.state=CP.CLOSED,n.port=e,!e)throw new Error("port argument cannot be empty");return n._init=PP.OK,n}return(0,k.Z)(r,[{key:"closeWallet",value:function(){this.sendMessage({idx:-1,type:TP.CLOSE,data:null}),this.close()}},{key:"sendMessage",value:function(e){if(!e.idx)throw new Error("message idx is empty");this.port.sendMessage(e)}}]),r}(ZP),mO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),(i=t.call(this,e)).port=void 0,i.port=n,i._init=PP.OK,i}return(0,k.Z)(r,[{key:"register",value:function(){var e=this;this.port.handleMessage=function(t){e.handleMessage(t)},this._registered=!0}},{key:"restoreSession",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCachedTransportSession();case 2:(t=e.sent)&&this.open(t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unregister",value:function(){this.port.handleMessage=void 0,this._registered=!1}},{key:"sendMessage",value:function(e){this.port.sendMessage(e)}}]),r}(dO),yO=function(){function e(){var t=this;(0,N.Z)(this,e);var r=this;this.messageProviders=void 0,this.provider=void 0,this.register=function(){if(1===t.messageProviders.length)return t.provider=t.messageProviders[0],void t.provider.register();t.messageProviders.forEach((function(e){e.register(),e.once("open",(function(){t.provider||(t.provider=e,t.messageProviders.forEach((function(e){t.provider!==e&&e.unregister()})))}))}))},this.unregister=function(){t.messageProviders.forEach((function(e){return e.unregister()})),t.provider=void 0},this.openWallet=function(e,r,n){t.provider?t.provider.openWallet(e,r,n):t.messageProviders.forEach((function(t){return t.openWallet(e,r,n)}))},this.sendAsync=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n,i){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.provider){e.next=3;break}return r.provider.sendAsync(t,n,i),e.abrupt("return");case 3:throw new Error("impossible state, wallet must be opened first");case 4:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.sendMessageRequest=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.provider){e.next=2;break}return e.abrupt("return",r.provider.sendMessageRequest(t));case 2:throw new Error("impossible state, wallet must be opened first");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.waitUntilOpened=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.provider){e.next=2;break}return e.abrupt("return",r.provider.waitUntilOpened());case 2:return e.abrupt("return",Promise.race(r.messageProviders.map((function(e){return e.waitUntilOpened()}))));case 3:case"end":return e.stop()}}),e)}))),this.waitUntilConnected=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.provider){e.next=2;break}return e.abrupt("return",r.provider.waitUntilConnected());case 2:throw new Error("impossible state, wallet must be opened first");case 3:case"end":return e.stop()}}),e)})));for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];this.messageProviders=i,this.provider=void 0}return(0,k.Z)(e,[{key:"add",value:function(){var e;(e=this.messageProviders).push.apply(e,arguments)}},{key:"closeWallet",value:function(){this.provider&&this.provider.closeWallet()}},{key:"isOpened",value:function(){return!!this.provider&&this.provider.isOpened()}},{key:"isConnected",value:function(){return!!this.provider&&this.provider.isConnected()}},{key:"on",value:function(e,t){this.provider?this.provider.on(e,t):this.messageProviders.forEach((function(r){r.on(e,t)}))}},{key:"once",value:function(e,t){this.provider?this.provider.once(e,t):this.messageProviders.forEach((function(r){r.once(e,t)}))}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i;if(this.provider)return(i=this.provider).emit.apply(i,[e].concat(r));for(var o=0;o<this.messageProviders.length;o++){var a;(a=this.messageProviders[o]).emit.apply(a,[e].concat(r))}return!0}},{key:"sendMessage",value:function(e){if(!e.idx||e.idx<=0)throw new Error("message idx is empty");if(!this.provider)throw new Error("impossible state, wallet must be opened first");this.provider.sendMessage(e)}},{key:"handleMessage",value:function(e){if(!this.provider)throw new Error("impossible state, wallet must be opened first");this.provider.handleMessage(e)}}]),e}(),bO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this)).walletURL=void 0,n.walletWindow=void 0,n.register=function(){cO&&(cO.unregister(),cO=(0,nm.Z)(n)),window.addEventListener("message",n.onWindowEvent),cO=(0,nm.Z)(n),n.on("open",(function(){var e=n.walletWindow,t=setInterval((function(){e&&e.closed&&(clearInterval(t),n.close())}),500)})),n.on("close",(function(){n.walletWindow&&(n.walletWindow.close(),n.walletWindow=null)})),n._registered=!0},n.unregister=function(){n._registered=!1,n.closeWallet(),cO===(0,nm.Z)(n)&&(cO=void 0),window.removeEventListener("message",n.onWindowEvent),n.events.removeAllListeners()},n.openWallet=function(e,t,r){if(n.walletWindow&&n.isOpened())n.walletWindow.focus();else{var i,o,a=new URL(n.walletURL.href),s=new OP;e&&""!==e&&(a.pathname=e.toLowerCase()),n._init=PP.NIL,n._sessionId="".concat(performance.now()),s.set("sid",n._sessionId),t&&("connect"===t.type&&(t.options||(t.options={}),oO()||aO()||(t.options.origin=window.location.origin)),s.set("intent",HS(t))),r&&s.set("net","".concat(r)),oO()?(i=[450,750],o=[Math.abs(window.screen.width/2-i[0]/2),Math.abs(window.screen.height/2-i[1]/2)]):(i=[450,750],o=[Math.abs(window.screenX+window.innerWidth/2-i[0]/2),Math.abs(window.screenY+window.innerHeight/2-i[1]/2)]);var u="toolbar=0,location=0,menubar=0,scrollbars=yes,status=yes"+",width=".concat(i[0],",height=").concat(i[1])+",left=".concat(o[0],",top=").concat(o[1]);a.search=s.toString(),n.walletWindow=window.open(a.href,"sequence.app",u)}},n.onWindowEvent=function(e){if(e.origin===n.walletURL.origin){var t;try{t=JSON.parse(e.data)}catch(r){return}if(!t)throw new Error("ProviderMessage object is empty");n.handleMessage(t)}},n.walletURL=new URL(e),n}return(0,k.Z)(r,[{key:"closeWallet",value:function(){var e;this.close(),null==(e=this.walletWindow)||e.close()}},{key:"sendMessage",value:function(e){if(this.walletWindow){var t="string"!==typeof e?JSON.stringify(e):e;this.walletWindow.postMessage(t,this.walletURL.origin)}else oI.warn("WindowMessageProvider: sendMessage failed as walletWindow is unavailable")}}]),r}(ZP),EO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n,i;return(0,N.Z)(this,r),n=t.call(this,e),i=(0,nm.Z)(n),n.parentWindow=void 0,n._isPopup=!1,n.onWindowEvent=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.origin&&""!==t.origin){e.next=2;break}return e.abrupt("return");case 2:if(!i.appOrigin||t.origin===i.appOrigin){e.next=4;break}return e.abrupt("return");case 4:e.prev=4,r=JSON.parse(t.data),e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(4),e.abrupt("return");case 11:if(oI.debug("RECEIVED MESSAGE",r),i._init!==PP.OK&&i.isValidInitAck(r)&&(i.appOrigin=t.origin),i._init!==PP.OK||i.appOrigin&&!(i.appOrigin.length<8)){e.next=16;break}return oI.error("impossible state, init.OK and appOrigin required"),e.abrupt("return");case 16:i.handleMessage(r);case 17:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}(),n.getWindowTransportSession=function(e){var t=new OP(e);return{sessionId:t.get("sid"),networkId:t.get("net"),intent:XS(t.get("intent"))}},n._init=PP.NIL,n}return(0,k.Z)(r,[{key:"register",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null!==parent.window.opener,this._isPopup=r,!0===r){e.next=4;break}return e.abrupt("return");case 4:if(n=new URL(t||window.location.href),n.pathname,i=n.search,o=this.getWindowTransportSession(i),!!o.sessionId){e.next=11;break}return e.next=10,this.getCachedTransportSession();case 10:o=e.sent;case 11:if(o){e.next=14;break}return oI.error("window session is undefined"),e.abrupt("return");case 14:this.parentWindow=parent.window.opener,window.addEventListener("message",this.onWindowEvent,!1),this._registered=!0,this.open(o).then((function(e){if(!e){var t,r="failed to open to network ".concat(null==(t=o)?void 0:t.networkId);oI.error(r),a.notifyClose({message:r}),window.close()}})).catch((function(e){var t,r="failed to open to network ".concat(null==(t=o)?void 0:t.networkId,", due to: ").concat(e);oI.error(r),a.notifyClose({message:r}),window.close()}));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unregister",value:function(){window.removeEventListener("message",this.onWindowEvent),this._registered=!1}},{key:"sendMessage",value:function(e){var t=JSON.stringify(e);e.type===TP.INIT?this.postMessage(t,!0):this.postMessage(t)}},{key:"isPopup",get:function(){return this._isPopup}},{key:"postMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===t||this._init===PP.OK?t?this.parentWindow.postMessage(e,"*"):this.appOrigin&&this.appOrigin.length>4?this.parentWindow.postMessage(e,this.appOrigin):oI.error("unable to postMessage as parentOrigin is invalid"):oI.error("impossible state, should not be calling postMessage until inited")}}]),r}(dO),wO="sequence-extension-message-handler",NO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e,n){var i;return(0,N.Z)(this,r),(i=t.call(this,e)).runtime=n,i.port=void 0,i._init=PP.OK,i}return(0,k.Z)(r,[{key:"register",value:function(){this._registered=!0,this.port=this.runtime.connect({name:wO})}},{key:"sendMessage",value:function(e){oI.info("[ExtensionMessageHandler send]",e),this.port.postMessage(e)}}]),r}(dO),kO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this)).register=function(){n._registered=!0},e.onConnect.addListener((function(e){e.name===wO&&(n._init=PP.OK,e.onMessage.addListener((function(e){n.handleMessage(e)})))})),n}return(0,k.Z)(r,[{key:"sendMessage",value:function(e){}},{key:"unregister",value:function(){}},{key:"openWallet",value:function(e,t,r){}},{key:"closeWallet",value:function(){}}]),r}(ZP),AO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n,i;return(0,N.Z)(this,r),n=t.call(this),i=(0,nm.Z)(n),n.stream=e,n.responseCallbacks=new Map,n._messageIdx=0,n.nextMessageIdx=function(){return++n._messageIdx},n.handleMessage=function(e){if(e.type&&e.data){oI.info("[received message]",e);var t=e.idx,r=n.responseCallbacks.get(t);switch(t&&n.responseCallbacks.delete(t),e.type){case TP.MESSAGE:if(!r)throw new Error("impossible state");n.emit(TP.MESSAGE,e),r(e.data.error,e);break;case TP.DISCONNECT:case TP.ACCOUNTS_CHANGED:case TP.CHAIN_CHANGED:n.emit(e.type,e.data);break;default:console.error("unknown message type",e)}}},n.sendMessageRequest=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){(!t.idx||t.idx<=0)&&r(new Error("message idx not set"));var n=t.idx;i.responseCallbacks.get(n)?r(new Error("duplicate message idx, should never happen")):i.responseCallbacks.set(n,(function(t,n){if(t)r(t);else{if(!n)throw new Error("no valid response to return");e(n)}})),i.sendMessage(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.stream.on("data",n.handleMessage),n}return(0,k.Z)(r,[{key:"sendMessage",value:function(e){this.stream.writable||console.error("window post message stream is not writable"),this.stream.write(e)}}]),r}(AP.EventEmitter2);function xO(e){var t;if(null!=(t=window.ue)&&t.sequencewallettransport&&!window.logsOverriddenForUnreal){var r,n=null==(r=window.ue)?void 0:r.sequencewallettransport;console.log=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.logfromjs("".concat(e,": ").concat(_O(r)))},console.warn=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.warnfromjs("".concat(e,": ").concat(_O(r)))},console.error=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];n.errorfromjs("".concat(e,": ").concat(_O(r)))},window.logsOverriddenForUnreal=!0}}function _O(e){return e.map((function(e){return"object"===typeof e?e instanceof Error?e.message:JSON.stringify(e):String(e)})).join(" ")}var SO,IO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this)).walletURL=void 0,n.register=function(){var e;xO("dapp"),fO&&(fO.unregister(),fO=(0,nm.Z)(n)),null!=(e=window.ue)&&e.sequencewallettransport&&(window.ue.sequencewallettransport.onmessagefromwallet=n.onUnrealCallback),fO=(0,nm.Z)(n),n._registered=!0,console.log("registering transport!")},n.unregister=function(){var e,t;n._registered=!1,n.closeWallet(),fO===(0,nm.Z)(n)&&(fO=void 0),(null==(e=window.ue)||null==(t=e.sequencewallettransport)?void 0:t.onmessagefromwallet)===n.onUnrealCallback&&delete window.ue.sequencewallettransport.onmessagefromwallet,n.events.removeAllListeners()},n.openWallet=function(e,t,r){if(n.isOpened())console.log("wallet already open!");else{console.log("opening wallet!");var i=new URL(n.walletURL.href),o=new OP;e&&(i.pathname=e.toLowerCase()),n._init=PP.NIL,n._sessionId="".concat(performance.now()),o.set("sid",n._sessionId),t&&o.set("intent",HS(t)),r&&o.set("net","".concat(r)),i.search=o.toString(),console.log("opening wallet to",i.href),window.open(i.href)}},n.onUnrealCallback=function(e){if(!e)throw new Error("ProviderMessage object is empty");n.handleMessage(e)},n.walletURL=new URL(e),n}return(0,k.Z)(r,[{key:"closeWallet",value:function(){this.close()}},{key:"sendMessage",value:function(e){var t,r,n="string"!==typeof e?JSON.stringify(e):e;console.log("Sending message to wallet:",n),null==(t=window.ue)||null==(r=t.sequencewallettransport)||r.sendmessagetowallet(n)}}]),r}(ZP),RO=function(e){(0,E.Z)(r,e);var t=(0,w.Z)(r);function r(e){var n;return(0,N.Z)(this,r),(n=t.call(this,e)).onMessageFromUnreal=function(e){oI.debug("RECEIVED MESSAGE",e),n.handleMessage(e)},n.getUnrealTransportSession=function(e){var t=new OP(e);return{sessionId:t.get("sid"),networkId:t.get("net"),intent:XS(t.get("intent"))}},n._init=PP.NIL,n}return(0,k.Z)(r,[{key:"register",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,i,o,a=this;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(null==(r=window.ue)?void 0:r.sequencewallettransport)){e.next=2;break}return e.abrupt("return");case 2:if(xO("wallet"),n=new URL(t||window.location.href),i=n.search,o=this.getUnrealTransportSession(i),!!o.sessionId){e.next=10;break}return e.next=9,this.getCachedTransportSession();case 9:o=e.sent;case 10:if(o){e.next=13;break}return oI.error("unreal session is undefined"),e.abrupt("return");case 13:window.ue.sequencewallettransport.onmessagefromsequencejs=this.onMessageFromUnreal,this._registered=!0,this.open(o).then((function(e){if(!e){var t,r="failed to open to network ".concat(null==(t=o)?void 0:t.networkId);oI.error(r),a.notifyClose({message:r}),window.close()}})).catch((function(e){var t,r="failed to open to network ".concat(null==(t=o)?void 0:t.networkId,", due to: ").concat(e);oI.error(r),a.notifyClose({message:r}),window.close()}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unregister",value:function(){var e,t;(null==(e=window.ue)||null==(t=e.sequencewallettransport)?void 0:t.onmessagefromsequencejs)===this.onMessageFromUnreal&&delete window.ue.sequencewallettransport.onmessagefromsequencejs,this._registered=!1}},{key:"sendMessage",value:function(e){var t,r;if(e.type===TP.INIT||this._init===PP.OK){var n=JSON.stringify(e);null==(t=window.ue)||null==(r=t.sequencewallettransport)||r.sendmessagetosequencejs(n)}else oI.error("impossible state, should not be calling postMessage until inited")}}]),r}(dO),TO=function(){function e(t){(0,N.Z)(this,e);var r=this;this.wallet=void 0,this.recoverWalletConfig=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n,i,o,a){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,e.t0){e.next=5;break}return e.next=4,r.wallet.getWalletContext();case 4:e.t0=e.sent;case 5:return a=e.t0,e.abrupt("return",iO(t,n,i,o,a));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}(),this.recoverWalletConfigFromMessage=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n,i,o,a){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,e.t0){e.next=5;break}return e.next=4,r.wallet.getWalletContext();case 4:e.t0=e.sent;case 5:return a=e.t0,e.abrupt("return",iO(t,$S(eO(n)),i,o,a));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}(),this.recoverWalletConfigFromTypedData=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,n,i,o,a){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a,e.t0){e.next=5;break}return e.next=4,r.wallet.getWalletContext();case 4:e.t0=e.sent;case 5:return a=e.t0,e.abrupt("return",iO(t,gI(n),i,o,a));case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}(),this.wallet=t}return(0,k.Z)(e,[{key:"signMessage",value:function(e,t,r){var n=this.wallet.getSigner();if(!n)throw new Error("unable to get signer");return n.signMessage(e,t,r)}},{key:"signAuthMessage",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){var n;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wallet.getAuthSigner();case 2:if(n=e.sent){e.next=5;break}throw new Error("unable to get AuthChain signer");case 5:return e.t0=n,e.t1=t,e.next=9,n.getChainId();case 9:return e.t2=e.sent,e.t3=r,e.abrupt("return",e.t0.signMessage.call(e.t0,e.t1,e.t2,e.t3));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"signTypedData",value:function(e,t,r,n,i){var o=this.wallet.getSigner();if(!o)throw new Error("unable to get signer");return o.signTypedData(e,t,r,n,i)}},{key:"signAuthTypedData",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i){var o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wallet.getAuthSigner();case 2:if(o=e.sent){e.next=5;break}throw new Error("unable to get AuthChain signer");case 5:return e.t0=o,e.t1=t,e.t2=r,e.t3=n,e.next=11,o.getChainId();case 11:return e.t4=e.sent,e.t5=i,e.abrupt("return",e.t0.signTypedData.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i){return e.apply(this,arguments)}}()},{key:"isValidSignature",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){var a;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.wallet.getProvider(i)){e.next=3;break}throw new Error("unable to get provider for chainId ".concat(i));case 3:return e.abrupt("return",tO(t,r,n,a,i,o));case 4:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"isValidMessageSignature",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n,i,o){var a,s,u;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.wallet.getProvider(i)){e.next=3;break}throw new Error("unable to get provider for chainId ".concat(i));case 3:return s=eO(r),u=$S(s),e.abrupt("return",tO(t,u,n,a,i,o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,i,o){return e.apply(this,arguments)}}()},{key:"isValidTypedDataSignature",value:function(e,t,r,n,i){return this.isValidSignature(e,gI(t),r,n,i)}}]),e}(),CO=function(){function e(t,r){var n=this;(0,N.Z)(this,e);var i=this;this.utils=void 0,this.config=void 0,this.session=void 0,this.connectedSites=void 0,this.transport=void 0,this.networks=void 0,this.providers=void 0,this.init=function(){var e,t,r,i,o,a,s,u;n.transport.provider||(n.transport.messageProvider=new yO,null!=(e=n.config.transports)&&null!=(t=e.windowTransport)&&t.enabled&&"object"===typeof window&&(n.transport.windowMessageProvider=new bO(n.config.walletAppURL),n.transport.messageProvider.add(n.transport.windowMessageProvider)),null!=(r=n.config.transports)&&null!=(i=r.proxyTransport)&&i.enabled&&(n.transport.proxyMessageProvider=new gO(n.config.transports.proxyTransport.appPort),n.transport.messageProvider.add(n.transport.proxyMessageProvider)),null!=(o=n.config.transports)&&null!=(a=o.extensionTransport)&&a.enabled&&(n.transport.extensionMessageProvider=new kO(n.config.transports.extensionTransport.runtime),n.transport.messageProvider.add(n.transport.extensionMessageProvider)),null!=(s=n.config.transports)&&null!=(u=s.unrealTransport)&&u.enabled&&(n.transport.unrealMessageProvider=new IO(n.config.walletAppURL),n.transport.messageProvider.add(n.transport.unrealMessageProvider)),n.transport.messageProvider.register(),n.transport.allowProvider=aR((function(e){if("sequence_setDefaultNetwork"===e.method)return!0;var t=n.isConnected();if(!t)throw new Error("Sequence: wallet not connected");return t})),n.transport.networkProvider=lR((function(e){return n.networks&&0!==n.networks.length?n.networks.find((function(e){return e.isDefaultChain})).chainId:0})),n.transport.cachedProvider=new sR,n.transport.cachedProvider.onUpdate((function(){n.session||(n.session={providerCache:{}}),n.session.providerCache=n.transport.cachedProvider.getCache(),n.saveSession(n.session)})),n.transport.router=new $I([fR,n.transport.networkProvider,n.transport.allowProvider,cR,n.transport.cachedProvider],n.transport.messageProvider),n.transport.provider=new WP(n.transport.router),n.transport.messageProvider.on("open",(function(e){var t=e.session;t?n.useSession(t,!0):(n.session&&n.session.accountAddress&&n.transport.messageProvider.emit("disconnect"),n.clearSession())})),n.transport.messageProvider.on("accountsChanged",(function(e,t){t?e.length>0&&n.useSession({accountAddress:e[0]},!0):e&&0!==e.length&&""!==e[0]?n.useSession({accountAddress:e[0]},!0):n.clearSession()})),n.transport.messageProvider.on("networks",(function(e){n.useSession({networks:e},!0)})),n.transport.messageProvider.on("walletContext",(function(e){n.useSession({walletContext:e},!0)})))},this.loadSession=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n,o,a,s,u,c,f;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uO.getInstance().getItem("@sequence.session");case 2:if((r=e.sent)&&""!==r){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.prev=5,(n=JSON.parse(r))&&(void 0!==t&&(a="string"===typeof t?parseInt(t):t,s=function(e){return e.name===t||e.chainId===a},u=null==(o=n.networks)?void 0:o.find(s),c=null==u?void 0:u.isDefaultChain,n.networks&&u&&!c&&(f=n.networks.map((function(e){return RP({},e,{isDefaultChain:s(e)})})),n.networks=GI(f),n.providerCache=void 0)),i.useSession(n,!0)),e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(5),oI.warn("loadSession failed, unable to parse session payload from storage."),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),this.connect=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0===(null==t?void 0:t.refresh)&&i.disconnect(),e.t3=i.isConnected(),!e.t3){e.next=6;break}return e.next=5,i.isSiteConnected(null==t?void 0:t.origin);case 5:e.t3=e.sent;case 6:if(e.t2=e.t3,!e.t2){e.next=9;break}e.t2=!!i.session;case 9:if(e.t1=e.t2,!e.t1){e.next=12;break}e.t1=!(null!=t&&t.authorize);case 12:if(e.t0=e.t1,!e.t0){e.next=15;break}e.t0=!(null!=t&&t.askForEmail);case 15:if(!e.t0){e.next=23;break}return e.t4=i.session,e.t5=s,e.next=20,i.getChainId();case 20:return e.t6=e.sent,e.t7=e.t5.hexlify.call(e.t5,e.t6),e.abrupt("return",{connected:!0,session:e.t4,chainId:e.t7});case 23:if(!t){e.next=26;break}if(!t.authorize||t.app&&""!==t.app){e.next=26;break}throw new Error("connecting with 'authorize' option also requires 'app' to be set");case 26:return e.next=28,i.openWallet(void 0,{type:"connect",options:t});case 28:return e.next=30,i.transport.messageProvider.waitUntilConnected().catch((function(e){return e instanceof Error?{connected:!1,error:e.message}:{connected:!1,error:JSON.stringify(e)}}));case 30:if(!(r=e.sent).connected){e.next=38;break}if(!r.session){e.next=37;break}i.useSession(r.session,!0),i.addConnectedSite(null==t?void 0:t.origin),e.next=38;break;case 37:throw new Error("impossible state, connect response is missing session");case 38:return e.abrupt("return",r);case 39:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.authorize=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.connect(RP({},t,{authorize:!0})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getSession=function(){if(n.isConnected())return n.session},this.getAddress=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isConnected()){e.next=2;break}throw new Error("connect first");case 2:return t=i.getSession(),e.abrupt("return",t.accountAddress);case 4:case"end":return e.stop()}}),e)}))),this.getNetworks=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.isConnected()&&i.networks){e.next=2;break}throw new Error("connect first");case 2:if(!t){e.next=5;break}return r=LI(i.networks,t),e.abrupt("return",r?[r]:[]);case 5:return e.abrupt("return",i.networks);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getChainId=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.networks&&!(i.networks.length<1)){e.next=2;break}throw new Error("networks have not been set by session. connect first.");case 2:if(t=i.networks.find((function(e){return e.isDefaultChain}))){e.next=5;break}throw new Error("networks must have a default chain specified");case 5:return e.abrupt("return",t.chainId);case 6:case"end":return e.stop()}}),e)}))),this.getAuthChainId=(0,G.Z)((0,B.Z)().mark((function e(){var t;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.networks&&!(i.networks.length<1)){e.next=2;break}throw new Error("networks have not been set by session. connect first.");case 2:if(t=i.networks.find((function(e){return e.isAuthChain}))){e.next=5;break}throw new Error("networks must have an auth chain specified");case 5:return e.abrupt("return",t.chainId);case 6:case"end":return e.stop()}}),e)}))),this.openWallet=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r,n){var o;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("connect"===(null==r?void 0:r.type)||i.isConnected()){e.next=2;break}throw new Error("connect first");case 2:if(i.networks&&!(i.networks.length<1)){e.next=6;break}o=i.config.defaultNetworkId,e.next=9;break;case 6:return e.next=8,i.getChainId();case 8:o=e.sent;case 9:return i.transport.messageProvider.openWallet(t,r,n||o),e.next=12,i.transport.messageProvider.waitUntilOpened();case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),this.closeWallet=function(){n.transport.messageProvider.closeWallet()},this.unregister=function(){var e;n.disconnect(),null==(e=n.transport.messageProvider)||e.unregister()},this.saveSession=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oI.debug("wallet provider: saving session"),r=JSON.stringify(t),e.next=4,uO.getInstance().setItem("@sequence.session",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.useSession=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r,n=arguments;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!(n.length>1&&void 0!==n[1])||n[1],i.session||(i.session={}),i.config.walletContext?i.session.walletContext=i.config.walletContext:t.walletContext&&(i.session.walletContext=t.walletContext),t.accountAddress&&i.useAccountAddress(t.accountAddress),t.networks&&i.useNetworks(t.networks),t.providerCache?i.transport.cachedProvider.setCache(t.providerCache):i.transport.cachedProvider.clearCache(),r&&i.saveSession(i.session);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.config=RP({},PO),r&&(this.config=RP({},this.config,r)),t?this.config.defaultNetworkId=t:this.config.defaultNetworkId||(this.config.defaultNetworkId="mainnet"),null!=r&&r.localStorage&&uO.use(r.localStorage),this.transport={},this.networks=[],this.providers={},this.connectedSites=new lO("@sequence.connectedSites",[]),this.utils=new TO(this),this.init()}return(0,k.Z)(e,[{key:"addConnectedSite",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t||window.location.origin,e.next=3,this.connectedSites.get();case 3:if(!(r=e.sent)){e.next=10;break}if(!r.includes(t)){e.next=7;break}return e.abrupt("return");case 7:this.connectedSites.set([].concat((0,Z.Z)(r),[t])),e.next=11;break;case 10:this.connectedSites.set([t]);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeConnectedSite",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectedSites.get();case 2:(r=e.sent)&&this.connectedSites.set(r.filter((function(e){return e!==t})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConnectedSites",value:function(){return this.connectedSites.get()}},{key:"isSiteConnected",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t){var r;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectedSites.get();case 2:return r=e.sent,e.abrupt("return",!!r&&r.includes(t||window.location.origin));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){this.isOpened()&&this.closeWallet(),this.clearSession()}},{key:"getProviderConfig",value:function(){return this.config}},{key:"isOpened",value:function(){return this.transport.messageProvider.isOpened()}},{key:"isConnected",value:function(){return void 0!==this.session&&void 0!==this.session.networks&&this.session.networks.length>0&&void 0!==this.networks&&this.networks.length>0&&!!this.session.accountAddress&&this.session.accountAddress.startsWith("0x")}},{key:"getProvider",value:function(e){if(!this.isConnected()){if(e)throw new Error("session is empty. connect and try again.");return this.transport.provider}var t,r=this.networks.find((function(e){return e.isDefaultChain}));if(e&&!(r=LI(this.networks,e)))throw new Error("network ".concat(e," is not in the network list"));if(this.providers[r.chainId])return this.providers[r.chainId];var n=r.provider?r.provider:new Ux(r.rpcUrl,r.chainId);if(r.isDefaultChain){var i=new $I([fR,cR,new uR({accountAddress:this.session.accountAddress,walletContext:this.session.walletContext}),new dR(this.transport.provider),this.transport.cachedProvider],new nR(n));t=new WP(i,r.chainId)}else{var o=new $I([fR,cR,new uR({accountAddress:this.session.accountAddress,walletContext:this.session.walletContext,chainId:r.chainId}),new dR(this.transport.provider),new sR({defaultChainId:r.chainId})],new nR(n));t=new WP(o,r.chainId)}return this.providers[r.chainId]=t,t}},{key:"getAuthProvider",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getAuthNetwork();case 3:return e.t1=e.sent.chainId,e.abrupt("return",e.t0.getProvider.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAuthNetwork",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetworks();case 2:return e.abrupt("return",e.sent.find((function(e){return e.isAuthChain})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllProviders",value:function(){return this.providers}},{key:"getSigner",value:function(e){return this.getProvider(e).getSigner()}},{key:"getAuthSigner",value:function(){var e=(0,G.Z)((0,B.Z)().mark((function e(){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthProvider();case 2:return e.abrupt("return",e.sent.getSigner());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWalletConfig",value:function(e){return this.getSigner().getWalletConfig(e)}},{key:"getWalletState",value:function(e){return this.getSigner().getWalletState(e)}},{key:"getWalletContext",value:function(){return this.getSigner().getWalletContext()}},{key:"isDeployed",value:function(e){return this.getSigner(e).isDeployed()}},{key:"on",value:function(e,t){this.transport.messageProvider.on(e,t)}},{key:"once",value:function(e,t){this.transport.messageProvider.once(e,t)}},{key:"useAccountAddress",value:function(e){this.session||(this.session={}),this.session.accountAddress=Jr(e)}},{key:"useNetworks",value:function(e){var t=this;if(this.session||(this.session={}),this.session.networks=e,this.session.networks&&0!==this.session.networks.length)if(this.config.networks||this.config.networkRpcUrl){if(this.networks=e,this.config.networks&&(this.networks=e.map((function(e){return RP({},e)})),this.config.networks.forEach((function(e){var r=LI(t.networks,e.chainId||e.name);r&&FI(e,r)})),UI(this.networks,!0)),this.config.networkRpcUrl){var r=this.networks.find((function(e){return e.isDefaultChain}));r&&(r.rpcUrl=this.config.networkRpcUrl)}}else this.networks=e}},{key:"clearSession",value:function(){var e;oI.debug("wallet provider: clearing session"),uO.getInstance().removeItem("@sequence.session"),this.session=void 0,this.networks=[],this.providers={},null==(e=this.transport.cachedProvider)||e.clearCache()}}]),e}(),PO={walletAppURL:"https://sequence.app",transports:{windowTransport:{enabled:!0},proxyTransport:{enabled:!1}}},OO=function(){var e=(0,G.Z)((0,B.Z)().mark((function e(t,r){return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!SO){e.next=2;break}return e.abrupt("return",SO);case 2:return SO=new CO(t,r),e.next=5,SO.loadSession(t);case 5:return e.abrupt("return",SO);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),UO=function(){SO&&(SO.closeWallet(),SO.unregister())},MO=function(){if(!SO)throw new Error("Wallet has not been initialized, call sequence.initWallet(network, config) first.");return SO};function FO(e,t){return t.forEach((function(t){t&&"string"!==typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(r){if("default"!==r&&!(r in e)){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}))})),Object.freeze(e)}var DO=FO({__proto__:null},[n]),LO=FO({__proto__:null},[i]),ZO=FO({__proto__:null},[g]),BO=FO({__proto__:null},[l]),GO=FO({__proto__:null},[m]),WO=FO({__proto__:null},[h]),jO=FO({__proto__:null},[d]),zO=FO({__proto__:null},[f]),qO=FO({__proto__:null},[c]),VO=FO({__proto__:null},[y]),KO=FO({__proto__:null},[v]),HO=FO({__proto__:null},[p]),JO=FO({__proto__:null,isValidSignature:tO,isValidMessageSignature:rO,isValidTypedDataSignature:nO,recoverWalletConfig:iO,isWalletUpToDate:sO},[u]),XO=Object.freeze({__proto__:null,abi:DO,api:LO,auth:ZO,config:BO,guard:GO,indexer:WO,metadata:jO,multicall:zO,network:qO,provider:VO,relayer:KO,transactions:HO,utils:JO,initWallet:OO,getWallet:MO,Wallet:CO})},73579:function(e,t,r){var n;!function(i){var o=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s="object"==typeof process&&"function"==typeof process.nextTick,u="function"===typeof Symbol,c="object"===typeof Reflect,f="function"===typeof setImmediate?setImmediate:setTimeout,l=u?c&&"function"===typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function h(){this._events={},this._conf&&d.call(this,this._conf)}function d(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==i&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function p(e,t){var r="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(r+=" Event name: "+t+"."),"undefined"!==typeof process&&process.emitWarning){var n=new Error(r);n.name="MaxListenersExceededWarning",n.emitter=this,n.count=e,process.emitWarning(n)}else console.error(r),console.trace&&console.trace()}var v=function(e,t,r){var n=arguments.length;switch(n){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,r];default:for(var i=new Array(n);n--;)i[n]=arguments[n];return i}};function g(e,t){for(var r={},n=e.length,o=t?t.length:0,a=0;a<n;a++)r[e[a]]=a<o?t[a]:i;return r}function m(e,t,r){var n,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(r.on||r.off)&&(n=r.on,i=r.off),t.addEventListener?(n=t.addEventListener,i=t.removeEventListener):t.addListener?(n=t.addListener,i=t.removeListener):t.on&&(n=t.on,i=t.off),!n&&!i)throw Error("target does not implement any known event API");if("function"!==typeof n)throw TypeError("on method must be a function");if("function"!==typeof i)throw TypeError("off method must be a function");this._on=n,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function y(e,t,r,n){var a=Object.assign({},t);if(!e)return a;if("object"!==typeof e)throw TypeError("options must be an object");var s,u,c,f=Object.keys(e),l=f.length;function h(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var d=0;d<l;d++){if(s=f[d],!n&&!o.call(t,s))throw Error('Unknown "'+s+'" option');(u=e[s])!==i&&(c=r[s],a[s]=c?c(u,h):u)}return a}function b(e,t){return"function"===typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function E(e){var t="value must be type of "+e.join("|"),r=e.length,n=e[0],i=e[1];return 1===r?function(e,r){if(typeof e===n)return e;r(t)}:2===r?function(e,r){var o=typeof e;if(o===n||o===i)return e;r(t)}:function(n,i){for(var o=typeof n,a=r;a-- >0;)if(o===e[a])return n;i(t)}}Object.assign(m.prototype,{subscribe:function(e,t,r){var n=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var n=v.apply(null,arguments),a={data:n,name:t,original:e};r?!1!==r.call(i,a)&&o.emit.apply(o,[a.name].concat(n)):o.emit.apply(o,[t].concat(n))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!n._onNewListener?(this._onNewListener=function(r){r===t&&null===a[e]&&(a[e]=s,n._on.call(i,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(r){r===t&&!o.hasListeners(r)&&a[e]&&(a[e]=null,n._off.call(i,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,n._on.call(i,e,s))},unsubscribe:function(e){var t,r,n,i=this,o=this._listeners,a=this._emitter,s=this._off,u=this._target;if(e&&"string"!==typeof e)throw TypeError("event must be a string");function c(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=A.call(a,i);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(u,e,t),delete o[e],--this._listenersCount||c()}else{for(n=(r=l(o)).length;n-- >0;)e=r[n],s.call(u,e,o[e]);this._listeners={},this._listenersCount=0,c()}}});var w=E(["function"]),N=E(["object","function"]);function k(e,t,r){var n,i,o,a=0,s=new e((function(u,c,f){function l(){i&&(i=null),a&&(clearTimeout(a),a=0)}r=y(r,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!==typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),n=!r.overload&&"function"===typeof e.prototype.cancel&&"function"===typeof f;var h=function(e){l(),u(e)},d=function(e){l(),c(e)};n?t(h,d,f):(i=[function(e){d(e||Error("canceled"))}],t(h,d,(function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!==typeof e)throw TypeError("onCancel callback must be a function");i.push(e)})),o=!0),r.timeout>0&&(a=setTimeout((function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),c(e)}),r.timeout))}));return n||(s.cancel=function(e){if(i){for(var t=i.length,r=1;r<t;r++)i[r](e);i[0](e),i=null}}),s}function A(e){var t=this._observers;if(!t)return-1;for(var r=t.length,n=0;n<r;n++)if(t[n]._target===e)return n;return-1}function x(e,t,r,n,i){if(!r)return null;if(0===n){var o=typeof t;if("string"===o){var a,s,u=0,c=0,f=this.delimiter,h=f.length;if(-1!==(s=t.indexOf(f))){a=new Array(5);do{a[u++]=t.slice(c,s),c=s+h}while(-1!==(s=t.indexOf(f,c)));a[u++]=t.slice(c),t=a,i=u}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var d,p,v,g,m,y,b,E=null,w=t[n],N=t[n+1];if(n===i)r._listeners&&("function"===typeof r._listeners?(e&&e.push(r._listeners),E=[r]):(e&&e.push.apply(e,r._listeners),E=[r]));else{if("*"===w){for(s=(y=l(r)).length;s-- >0;)"_listeners"!==(d=y[s])&&(b=x(e,t,r[d],n+1,i))&&(E?E.push.apply(E,b):E=b);return E}if("**"===w){for((m=n+1===i||n+2===i&&"*"===N)&&r._listeners&&(E=x(e,t,r,i,i)),s=(y=l(r)).length;s-- >0;)"_listeners"!==(d=y[s])&&("*"===d||"**"===d?(r[d]._listeners&&!m&&(b=x(e,t,r[d],i,i))&&(E?E.push.apply(E,b):E=b),b=x(e,t,r[d],n,i)):b=x(e,t,r[d],d===N?n+2:n,i),b&&(E?E.push.apply(E,b):E=b));return E}r[w]&&(E=x(e,t,r[w],n+1,i))}if((p=r["*"])&&x(e,t,p,n+1,i),v=r["**"])if(n<i)for(v._listeners&&x(e,t,v,i,i),s=(y=l(v)).length;s-- >0;)"_listeners"!==(d=y[s])&&(d===N?x(e,t,v[d],n+2,i):d===w?x(e,t,v[d],n+1,i):((g={})[d]=v[d],x(e,t,{"**":g},n+1,i)));else v._listeners?x(e,t,v,i,i):v["*"]&&v["*"]._listeners&&x(e,t,v["*"],i,i);return E}function _(e,t,r){var n,i,o=0,a=0,s=this.delimiter,u=s.length;if("string"===typeof e)if(-1!==(n=e.indexOf(s))){i=new Array(5);do{i[o++]=e.slice(a,n),a=n+u}while(-1!==(n=e.indexOf(s,a)));i[o++]=e.slice(a)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(n=0;n+1<o;n++)if("**"===i[n]&&"**"===i[n+1])return;var c,f=this.listenerTree;for(n=0;n<o;n++)if(f=f[c=i[n]]||(f[c]={}),n===o-1)return f._listeners?("function"===typeof f._listeners&&(f._listeners=[f._listeners]),r?f._listeners.unshift(t):f._listeners.push(t),!f._listeners.warned&&this._maxListeners>0&&f._listeners.length>this._maxListeners&&(f._listeners.warned=!0,p.call(this,f._listeners.length,c))):f._listeners=t,!0;return!0}function S(e,t,r,n){for(var i,o,a,s,u=l(e),c=u.length,f=e._listeners;c-- >0;)i=e[o=u[c]],a="_listeners"===o?r:r?r.concat(o):[o],s=n||"symbol"===typeof o,f&&t.push(s?a:a.join(this.delimiter)),"object"===typeof i&&S.call(this,i,t,a,s);return t}function I(e){for(var t,r,n,i=l(e),o=i.length;o-- >0;)(t=e[r=i[o]])&&(n=!0,"_listeners"===r||I(t)||delete e[r]);return n}function R(e,t,r){this.emitter=e,this.event=t,this.listener=r}function T(e,t,r){if(!0===r)o=!0;else if(!1===r)n=!0;else{if(!r||"object"!==typeof r)throw TypeError("options should be an object or true");var n=r.async,o=r.promisify,a=r.nextTick,u=r.objectify}if(n||a||o){var c=t,l=t._origin||t;if(a&&!s)throw Error("process.nextTick is not supported");o===i&&(o="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,r=this.event;return o?a?Promise.resolve():new Promise((function(e){f(e)})).then((function(){return t.event=r,c.apply(t,e)})):(a?process.nextTick:f)((function(){t.event=r,c.apply(t,e)}))},t._async=!0,t._origin=l}return[t,u?new R(this,e,t):this]}function C(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,e)}R.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},C.EventEmitter2=C,C.prototype.listenTo=function(e,t,r){if("object"!==typeof e)throw TypeError("target musts be an object");var n=this;function o(t){if("object"!==typeof t)throw TypeError("events must be an object");var i,o=r.reducers,a=A.call(n,e);i=-1===a?new m(n,e,r):n._observers[a];for(var s,u=l(t),c=u.length,f="function"===typeof o,h=0;h<c;h++)s=u[h],i.subscribe(s,t[s]||s,f?o:o&&o[s])}return r=y(r,{on:i,off:i,reducers:i},{on:w,off:w,reducers:N}),a(t)?o(g(t)):o("string"===typeof t?g(t.split(/\s+/)):t),this},C.prototype.stopListeningTo=function(e,t){var r=this._observers;if(!r)return!1;var n,i=r.length,o=!1;if(e&&"object"!==typeof e)throw TypeError("target should be an object");for(;i-- >0;)n=r[i],e&&n._target!==e||(n.unsubscribe(t),o=!0);return o},C.prototype.delimiter=".",C.prototype.setMaxListeners=function(e){e!==i&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},C.prototype.getMaxListeners=function(){return this._maxListeners},C.prototype.event="",C.prototype.once=function(e,t,r){return this._once(e,t,!1,r)},C.prototype.prependOnceListener=function(e,t,r){return this._once(e,t,!0,r)},C.prototype._once=function(e,t,r,n){return this._many(e,1,t,r,n)},C.prototype.many=function(e,t,r,n){return this._many(e,t,r,!1,n)},C.prototype.prependMany=function(e,t,r,n){return this._many(e,t,r,!0,n)},C.prototype._many=function(e,t,r,n,i){var o=this;if("function"!==typeof r)throw new Error("many only accepts instances of Function");function a(){return 0===--t&&o.off(e,a),r.apply(this,arguments)}return a._origin=r,this._on(e,a,n,i)},C.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,r,n,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return!1;if(s&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"===typeof a)){if(r=a.length,u)for(n=0;n<r;n++)if("symbol"===typeof a[n]){o=!0;break}o||(a=a.join(this.delimiter))}var c,f=arguments.length;if(this._all&&this._all.length)for(n=0,r=(c=this._all.slice()).length;n<r;n++)switch(this.event=a,f){case 1:c[n].call(this,a);break;case 2:c[n].call(this,a,arguments[1]);break;case 3:c[n].call(this,a,arguments[1],arguments[2]);break;default:c[n].apply(this,arguments)}if(s)c=[],x.call(this,c,e,this.listenerTree,0,r);else{if("function"===typeof(c=this._events[a])){switch(this.event=a,f){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(f-1),i=1;i<f;i++)t[i-1]=arguments[i];c.apply(this,t)}return!0}c&&(c=c.slice())}if(c&&c.length){if(f>3)for(t=new Array(f-1),i=1;i<f;i++)t[i-1]=arguments[i];for(n=0,r=c.length;n<r;n++)switch(this.event=a,f){case 1:c[n].call(this);break;case 2:c[n].call(this,arguments[1]);break;case 3:c[n].call(this,arguments[1],arguments[2]);break;default:c[n].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===a)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},C.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,r,n,i,o,a=arguments[0],s=this.wildcard;if("newListener"===a&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(s&&(e=a,"newListener"!==a&&"removeListener"!==a&&"object"===typeof a)){if(n=a.length,u)for(i=0;i<n;i++)if("symbol"===typeof a[i]){t=!0;break}t||(a=a.join(this.delimiter))}var c,f=[],l=arguments.length;if(this._all)for(i=0,n=this._all.length;i<n;i++)switch(this.event=a,l){case 1:f.push(this._all[i].call(this,a));break;case 2:f.push(this._all[i].call(this,a,arguments[1]));break;case 3:f.push(this._all[i].call(this,a,arguments[1],arguments[2]));break;default:f.push(this._all[i].apply(this,arguments))}if(s?(c=[],x.call(this,c,e,this.listenerTree,0)):c=this._events[a],"function"===typeof c)switch(this.event=a,l){case 1:f.push(c.call(this));break;case 2:f.push(c.call(this,arguments[1]));break;case 3:f.push(c.call(this,arguments[1],arguments[2]));break;default:for(r=new Array(l-1),o=1;o<l;o++)r[o-1]=arguments[o];f.push(c.apply(this,r))}else if(c&&c.length){if(c=c.slice(),l>3)for(r=new Array(l-1),o=1;o<l;o++)r[o-1]=arguments[o];for(i=0,n=c.length;i<n;i++)switch(this.event=a,l){case 1:f.push(c[i].call(this));break;case 2:f.push(c[i].call(this,arguments[1]));break;case 3:f.push(c[i].call(this,arguments[1],arguments[2]));break;default:f.push(c[i].apply(this,r))}}else if(!this.ignoreErrors&&!this._all&&"error"===a)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(f)},C.prototype.on=function(e,t,r){return this._on(e,t,!1,r)},C.prototype.prependListener=function(e,t,r){return this._on(e,t,!0,r)},C.prototype.onAny=function(e){return this._onAny(e,!1)},C.prototype.prependAny=function(e){return this._onAny(e,!0)},C.prototype.addListener=C.prototype.on,C.prototype._onAny=function(e,t){if("function"!==typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},C.prototype._on=function(e,t,r,n){if("function"===typeof e)return this._onAny(e,t),this;if("function"!==typeof t)throw new Error("on only accepts instances of Function");this._events||h.call(this);var o,a=this;return n!==i&&(t=(o=T.call(this,e,t,n))[0],a=o[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(_.call(this,e,t,r),a):(this._events[e]?("function"===typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,p.call(this,this._events[e].length,e))):this._events[e]=t,a)},C.prototype.off=function(e,t){if("function"!==typeof t)throw new Error("removeListener only takes instances of Function");var r,n=[];if(this.wildcard){var i="string"===typeof e?e.split(this.delimiter):e.slice();if(!(n=x.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;r=this._events[e],n.push({_listeners:r})}for(var o=0;o<n.length;o++){var s=n[o];if(r=s._listeners,a(r)){for(var u=-1,c=0,f=r.length;c<f;c++)if(r[c]===t||r[c].listener&&r[c].listener===t||r[c]._origin&&r[c]._origin===t){u=c;break}if(u<0)continue;return this.wildcard?s._listeners.splice(u,1):this._events[e].splice(u,1),0===r.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&I(this.listenerTree),this},C.prototype.offAny=function(e){var t,r=0,n=0;if(e&&this._all&&this._all.length>0){for(r=0,n=(t=this._all).length;r<n;r++)if(e===t[r])return t.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(r=0,n=t.length;r<n;r++)this.emit("removeListenerAny",t[r]);this._all=[]}return this},C.prototype.removeListener=C.prototype.off,C.prototype.removeAllListeners=function(e){if(e===i)return!this._events||h.call(this),this;if(this.wildcard){var t,r=x.call(this,null,e,this.listenerTree,0);if(!r)return this;for(t=0;t<r.length;t++)r[t]._listeners=null;this.listenerTree&&I(this.listenerTree)}else this._events&&(this._events[e]=null);return this},C.prototype.listeners=function(e){var t,r,n,o,a,s=this._events;if(e===i){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(o=(t=l(s)).length,n=[];o-- >0;)"function"===typeof(r=s[t[o]])?n.push(r):n.push.apply(n,r);return n}if(this.wildcard){if(!(a=this.listenerTree))return[];var u=[],c="string"===typeof e?e.split(this.delimiter):e.slice();return x.call(this,u,c,a,0),u}return s&&(r=s[e])?"function"===typeof r?[r]:r:[]},C.prototype.eventNames=function(e){var t=this._events;return this.wildcard?S.call(this,this.listenerTree,[],null,e):t?l(t):[]},C.prototype.listenerCount=function(e){return this.listeners(e).length},C.prototype.hasListeners=function(e){if(this.wildcard){var t=[],r="string"===typeof e?e.split(this.delimiter):e.slice();return x.call(this,t,r,this.listenerTree,0),t.length>0}var n=this._events,o=this._all;return!!(o&&o.length||n&&(e===i?l(n).length:n[e]))},C.prototype.listenersAny=function(){return this._all?this._all:[]},C.prototype.waitFor=function(e,t){var r=this,n=typeof t;return"number"===n?t={timeout:t}:"function"===n&&(t={filter:t}),k((t=y(t,{timeout:0,filter:i,handleError:!1,Promise:Promise,overload:!1},{filter:w,Promise:b})).Promise,(function(n,i,o){function a(){var o=t.filter;if(!o||o.apply(r,arguments))if(r.off(e,a),t.handleError){var s=arguments[0];s?i(s):n(v.apply(null,arguments).slice(1))}else n(v.apply(null,arguments))}o((function(){r.off(e,a)})),r._on(e,a,!1)}),{timeout:t.timeout,overload:t.overload})};var P=C.prototype;Object.defineProperties(C,{defaultMaxListeners:{get:function(){return P._maxListeners},set:function(e){if("number"!==typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");P._maxListeners=e},enumerable:!0},once:{value:function(e,t,r){return k((r=y(r,{Promise:Promise,timeout:0,overload:!1},{Promise:b})).Promise,(function(r,n,i){var o;if("function"===typeof e.addEventListener)return o=function(){r(v.apply(null,arguments))},i((function(){e.removeEventListener(t,o)})),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),r(v.apply(null,arguments))};"error"!==t&&(a=function(r){e.removeListener(t,s),n(r)},e.once("error",a)),i((function(){a&&e.removeListener("error",a),e.removeListener(t,s)})),e.once(t,s)}),{timeout:r.timeout,overload:r.overload})},writable:!0,configurable:!0}}),Object.defineProperties(P,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),(n=function(){return C}.call(t,r,t,e))===i||(e.exports=n)}()}}]);